var qs=Object.defineProperty;var Js=(t,s,a)=>s in t?qs(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var ht=(t,s,a)=>Js(t,typeof s!="symbol"?s+"":s,a);import{j as e,R as it,r as d,c as Xs}from"./vendor-react--UE8qFvL.js";import{GoogleGenAI as Dt,Type as Ae}from"./vendor-genai-C1TFRE--.js";import"./vendor-BhE6lIor.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function a(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=a(r);fetch(r.href,l)}})();const Zs="modulepreload",Qs=function(t,s){return new URL(t,s).href},ts={},Ys=function(s,a,n){let r=Promise.resolve();if(a&&a.length>0){const u=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),x=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));r=Promise.allSettled(a.map(j=>{if(j=Qs(j,n),j in ts)return;ts[j]=!0;const v=j.endsWith(".css"),m=v?'[rel="stylesheet"]':"";if(!!n)for(let E=u.length-1;E>=0;E--){const L=u[E];if(L.href===j&&(!v||L.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${j}"]${m}`))return;const y=document.createElement("link");if(y.rel=v?"stylesheet":Zs,v||(y.as="script"),y.crossOrigin="",y.href=j,x&&y.setAttribute("nonce",x),document.head.appendChild(y),v)return new Promise((E,L)=>{y.addEventListener("load",E),y.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${j}`)))})}))}function l(u){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=u,window.dispatchEvent(p),!p.defaultPrevented)throw u}return r.then(u=>{for(const p of u||[])p.status==="rejected"&&l(p.reason);return s().catch(l)})},er={name:"ISO 9001:2015 (QMS)",description:"Quality Management System",groups:[{id:"PLAN_9001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context of organization",description:"Internal and external issues that affect its ability to achieve intended results.",subClauses:[{id:"4.1",code:"4.1",title:"Understanding the organization",description:"Determining internal and external issues relevant to its purpose."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Understanding the needs and expectations of stakeholders."},{id:"4.3",code:"4.3",title:"Scope of QMS",description:"Determining the boundaries and applicability of the quality system."},{id:"4.4",code:"4.4",title:"QMS processes",description:"Establishing, implementing, and maintaining processes."}]},{id:"5",code:"5",title:"Leadership",description:"Top management commitment, policy and roles.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership commitment",description:"Demonstrating leadership and commitment to customer focus."},{id:"5.2",code:"5.2",title:"Policy",description:"Establishing and communicating the quality policy."},{id:"5.3",code:"5.3",title:"Roles & Authorities",description:"Ensuring responsibilities and authorities are assigned."}]},{id:"6",code:"6",title:"Planning",description:"Risks, opportunities and quality objectives.",subClauses:[{id:"6.1",code:"6.1",title:"Risks & Opportunities",description:"Actions to address risks and opportunities."},{id:"6.2",code:"6.2",title:"Quality objectives",description:"Establishing objectives and planning to achieve them."},{id:"6.3",code:"6.3",title:"Planning of changes",description:"Carrying out changes in a planned manner."}]}]},{id:"SUPPORT_9001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Providing necessary resources for the QMS.",subClauses:[{id:"7.1.1",code:"7.1.1",title:"General",description:"Determining and providing resources for QMS."},{id:"7.1.2",code:"7.1.2",title:"People",description:"Providing persons necessary for effective implementation."},{id:"7.1.3",code:"7.1.3",title:"Infrastructure",description:"Maintenance of buildings, equipment, and transport."},{id:"7.1.4",code:"7.1.4",title:"Process Environment",description:"Managing social (non-discriminatory), psychological (stress-reducing), and physical (temperature, hygiene) factors."},{id:"7.1.5",code:"7.1.5",title:"Monitoring resources",description:"Calibration and measurement traceability."},{id:"7.1.6",code:"7.1.6",title:"Knowledge",description:"Maintaining organizational knowledge and lessons learned."}]},{id:"7.2",code:"7.2",title:"Competence",description:"Ensuring workers are competent based on education/training."},{id:"7.3",code:"7.3",title:"Awareness",description:"Ensuring persons are aware of quality policy and objectives."},{id:"7.4",code:"7.4",title:"Communication",description:"Determining internal and external communications."},{id:"7.5",code:"7.5",title:"Documented info",description:"Control of information required by the standard.",subClauses:[{id:"7.5.1",code:"7.5.1",title:"General",description:"Determining necessary documented information for QMS."},{id:"7.5.2",code:"7.5.2",title:"Creating & Updating",description:"Ensuring proper identification, format, and review."},{id:"7.5.3",code:"7.5.3",title:"Control of info",description:"Ensuring availability, protection, and storage control.",subClauses:[{id:"7.5.3.1",code:"7.5.3.1",title:"Availability",description:"Ensuring info is available where needed."},{id:"7.5.3.2",code:"7.5.3.2",title:"Control",description:"Distribution, access, retrieval and use."}]}]}]},{id:"DO_9001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational planning",description:"Control of processes to meet P/S requirements."},{id:"8.2",code:"8.2",title:"Requirements for P/S",description:"Determining requirements and communicating with customers."},{id:"8.3",code:"8.3",title:"Design and development",description:"D&D of products and services.",subClauses:[{id:"8.3.1",code:"8.3.1",title:"General",description:"Establishing a D&D process."},{id:"8.3.2",code:"8.3.2",title:"Planning",description:"Determining D&D stages and controls."},{id:"8.3.3",code:"8.3.3",title:"Inputs",description:"Requirements essential for D&D."},{id:"8.3.4",code:"8.3.4",title:"Controls",description:"Ensuring reviews, verification, and validation."},{id:"8.3.5",code:"8.3.5",title:"Outputs",description:"Meeting input requirements."},{id:"8.3.6",code:"8.3.6",title:"Changes",description:"Controlling modifications to D&D."}]},{id:"8.4",code:"8.4",title:"External Providers",description:"Control of externally provided P/S.",subClauses:[{id:"8.4.1",code:"8.4.1",title:"General",description:"Evaluating and selecting external providers."},{id:"8.4.2",code:"8.4.2",title:"Type & Extent",description:"Controlling the impact of providers on results."},{id:"8.4.3",code:"8.4.3",title:"Information",description:"Communicating requirements to providers clearly."}]},{id:"8.5",code:"8.5",title:"Production & Delivery",description:"Control of production and service provision.",subClauses:[{id:"8.5.1",code:"8.5.1",title:"Control",description:"Availability of info, equipment and monitoring."},{id:"8.5.2",code:"8.5.2",title:"Identification",description:"Ensuring traceability throughout provision."},{id:"8.5.3",code:"8.5.3",title:"Property",description:"Safeguarding customer or provider assets."},{id:"8.5.4",code:"8.5.4",title:"Preservation",description:"Ensuring conformity during processing."},{id:"8.5.5",code:"8.5.5",title:"Post-delivery",description:"Statutory, regulatory, and warranty duties."},{id:"8.5.6",code:"8.5.6",title:"Control of changes",description:"Reviewing and controlling changes for production."}]},{id:"8.6",code:"8.6",title:"Release of P/S",description:"Verification that requirements have been met."},{id:"8.7",code:"8.7",title:"Nonconforming outputs",description:"Ensuring unintended use is prevented."}]},{id:"CHECK_ACT_9001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1",code:"9.1",title:"Monitoring & Evaluation",description:"Determining what needs to be monitored."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Scheduled review of QMS performance."},{id:"9.3",code:"9.3",title:"Management review",description:"Top management review of system suitability."},{id:"10.1",code:"10.1",title:"Improvement",description:"Determining opportunities for improvement."},{id:"10.2",code:"10.2",title:"NC & Corrective action",description:"Managing nonconformities and root causes."},{id:"10.3",code:"10.3",title:"Continual improvement",description:"Continually improving QMS effectiveness."}]}]},tr={name:"ISO/IEC 27001:2022 (ISMS)",description:"Information Security Management System",groups:[{id:"PLAN_27001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context of organization",description:"Internal/external issues and scope.",subClauses:[{id:"4.1",code:"4.1",title:"Context",description:"Identifying security issues."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Needs and expectations."},{id:"4.3",code:"4.3",title:"Scope",description:"Determining ISMS boundaries."},{id:"4.4",code:"4.4",title:"ISMS System",description:"Establishing processes."}]},{id:"5",code:"5",title:"Leadership",description:"Commitment and Policy.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership & Commitment",description:"Accountability."},{id:"5.2",code:"5.2",title:"Policy",description:"InfoSec policy."},{id:"5.3",code:"5.3",title:"Roles & Authorities",description:"Assigning responsibilities."}]},{id:"6",code:"6",title:"Planning",description:"Risk treatment.",subClauses:[{id:"6.1.1",code:"6.1.1",title:"General",description:"Risk actions."},{id:"6.1.2",code:"6.1.2",title:"Risk assessment",description:"Information security risk process."},{id:"6.1.3",code:"6.1.3",title:"Risk treatment",description:"SoA and planning."},{id:"6.2",code:"6.2",title:"Security objectives",description:"Achievement planning."}]}]},{id:"SUPPORT_27001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Availability."},{id:"7.2",code:"7.2",title:"Competence",description:"Training requirements."},{id:"7.3",code:"7.3",title:"Awareness",description:"Understanding policy."},{id:"7.4",code:"7.4",title:"Communication",description:"Info flow rules."},{id:"7.5",code:"7.5",title:"Documented info",description:"Control of records."}]},{id:"DO_27001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational planning",description:"Securing processes."},{id:"8.2",code:"8.2",title:"Risk assessment",description:"Execution at intervals."},{id:"8.3",code:"8.3",title:"Risk treatment",description:"Implementing treatments."}]},{id:"CHECK_ACT_27001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1",code:"9.1",title:"Monitoring",description:"Measuring effectiveness."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Periodic checks."},{id:"9.3",code:"9.3",title:"Management review",description:"Strategic eval."},{id:"10.1",code:"10.1",title:"Continual improvement",description:"Growth."},{id:"10.2",code:"10.2",title:"Nonconformity",description:"Corrective actions."}]},{id:"ANNEX_A_5",title:"Annex A.5 Organizational (37 Controls)",icon:"Lock",clauses:[{id:"A.5.1",code:"A.5.1",title:"Policies for information security",description:"Reviewed for suitability."},{id:"A.5.2",code:"A.5.2",title:"InfoSec roles",description:"Defined responsibilities."},{id:"A.5.3",code:"A.5.3",title:"Segregation of duties",description:"Conflict reduction."},{id:"A.5.4",code:"A.5.4",title:"Management responsibilities",description:"Committing to security."},{id:"A.5.5",code:"A.5.5",title:"Contact with authorities",description:"Regulation flow."},{id:"A.5.6",code:"A.5.6",title:"Special interest groups",description:"Trend tracking."},{id:"A.5.7",code:"A.5.7",title:"Threat intelligence",description:"Info collection."},{id:"A.5.8",code:"A.5.8",title:"IS in project mgmt",description:"Lifecycle inclusion."},{id:"A.5.9",code:"A.5.9",title:"Inventory of assets",description:"Critical asset list."},{id:"A.5.10",code:"A.5.10",title:"Acceptable use of assets",description:"Usage rules."},{id:"A.5.11",code:"A.5.11",title:"Return of assets",description:"Termination retrieval."},{id:"A.5.12",code:"A.5.12",title:"Classification of info",description:"Labeling based on value."},{id:"A.5.13",code:"A.5.13",title:"Labeling of info",description:"Visual markers."},{id:"A.5.14",code:"A.5.14",title:"Information transfer",description:"Securing transit."},{id:"A.5.15",code:"A.5.15",title:"Access control",description:"Authorization rules."},{id:"A.5.16",code:"A.5.16",title:"Identity management",description:"User ID lifecycle."},{id:"A.5.17",code:"A.5.17",title:"Authentication info",description:"Secrets management."},{id:"A.5.18",code:"A.5.18",title:"Access rights",description:"Provisioning/revoking."},{id:"A.5.19",code:"A.5.19",title:"IS in supplier relationships",description:"Agreements."},{id:"A.5.20",code:"A.5.20",title:"Supplier agreements",description:"Addressing security."},{id:"A.5.21",code:"A.5.21",title:"ICT supply chain",description:"Sourcing risks."},{id:"A.5.22",code:"A.5.22",title:"Monitoring suppliers",description:"Auditing delivery."},{id:"A.5.23",code:"A.5.23",title:"Cloud services",description:"SaaS security."},{id:"A.5.24",code:"A.5.24",title:"Incident management",description:"Planning response."},{id:"A.5.25",code:"A.5.25",title:"Incident assessment",description:"Severity eval."},{id:"A.5.26",code:"A.5.26",title:"Incident response",description:"Action taken."},{id:"A.5.27",code:"A.5.27",title:"Incident learning",description:"Root cause."},{id:"A.5.28",code:"A.5.28",title:"Evidence collection",description:"Forensics."},{id:"A.5.29",code:"A.5.29",title:"IS during disruption",description:"BCP security."},{id:"A.5.30",code:"A.5.30",title:"ICT readiness",description:"DR planning."},{id:"A.5.31",code:"A.5.31",title:"Legal compliance",description:"Regulatory requirements."},{id:"A.5.32",code:"A.5.32",title:"IP Rights",description:"Copyright protection."},{id:"A.5.33",code:"A.5.33",title:"Protection of records",description:"Integrity."},{id:"A.5.34",code:"A.5.34",title:"Privacy of PII",description:"GDPR/Data protection."},{id:"A.5.35",code:"A.5.35",title:"Independent review",description:"External auditing."},{id:"A.5.36",code:"A.5.36",title:"Policy compliance",description:"Adherence."},{id:"A.5.37",code:"A.5.37",title:"Operating procedures",description:"Standard documentation."}]},{id:"ANNEX_A_6",title:"Annex A.6 People (8 Controls)",icon:"Users",clauses:[{id:"A.6.1",code:"A.6.1",title:"Screening",description:"Background checks."},{id:"A.6.2",code:"A.6.2",title:"Terms of employment",description:"HR contracts."},{id:"A.6.3",code:"A.6.3",title:"Awareness",description:"InfoSec education."},{id:"A.6.4",code:"A.6.4",title:"Disciplinary process",description:"Breach handling."},{id:"A.6.5",code:"A.6.5",title:"Termination responsibilities",description:"Post-exit."},{id:"A.6.6",code:"A.6.6",title:"Confidentiality",description:"NDAs."},{id:"A.6.7",code:"A.6.7",title:"Remote working",description:"Teleworking rules."},{id:"A.6.8",code:"A.6.8",title:"Event reporting",description:"Anomaly reporting."}]},{id:"ANNEX_A_7",title:"Annex A.7 Physical (14 Controls)",icon:"Building",clauses:[{id:"A.7.1",code:"A.7.1",title:"Physical perimeters",description:"Barriers."},{id:"A.7.2",code:"A.7.2",title:"Physical entry",description:"Access systems."},{id:"A.7.3",code:"A.7.3",title:"Securing offices",description:"Locks."},{id:"A.7.4",code:"A.7.4",title:"Security monitoring",description:"CCTV."},{id:"A.7.5",code:"A.7.5",title:"Physical protection",description:"Disaster proofing."},{id:"A.7.6",code:"A.7.6",title:"Secure areas",description:"Restricted protocols."},{id:"A.7.7",code:"A.7.7",title:"Clear desk/screen",description:"Clean policy."},{id:"A.7.8",code:"A.7.8",title:"Equipment siting",description:"Safe placement."},{id:"A.7.9",code:"A.7.9",title:"Assets off-premises",description:"Mobile security."},{id:"A.7.10",code:"A.7.10",title:"Storage media",description:"Drive handling."},{id:"A.7.11",code:"A.7.11",title:"Utilities",description:"Power/Water safety."},{id:"A.7.12",code:"A.7.12",title:"Cabling security",description:"Line protection."},{id:"A.7.13",code:"A.7.13",title:"Equipment maintenance",description:"Care logs."},{id:"A.7.14",code:"A.7.14",title:"Secure disposal",description:"Data wiping."}]},{id:"ANNEX_A_8",title:"Annex A.8 Technological (34 Controls)",icon:"Cpu",clauses:[{id:"A.8.1",code:"A.8.1",title:"Endpoint devices",description:"Device agents."},{id:"A.8.2",code:"A.8.2",title:"Privileged access",description:"Admin rights."},{id:"A.8.3",code:"A.8.3",title:"Information access",description:"Need-to-know."},{id:"A.8.4",code:"A.8.4",title:"Source code access",description:"IP security."},{id:"A.8.5",code:"A.8.5",title:"Authentication",description:"MFA usage."},{id:"A.8.6",code:"A.8.6",title:"Capacity mgmt",description:"Resources."},{id:"A.8.7",code:"A.8.7",title:"Malware protection",description:"AV/EDR."},{id:"A.8.8",code:"A.8.8",title:"Vulnerabilities",description:"Patching."},{id:"A.8.9",code:"A.8.9",title:"Configuration",description:"Hardening."},{id:"A.8.10",code:"A.8.10",title:"Deletion",description:"Erasure."},{id:"A.8.11",code:"A.8.11",title:"Data masking",description:"Privacy."},{id:"A.8.12",code:"A.8.12",title:"DLP",description:"Leakage prevention."},{id:"A.8.13",code:"A.8.13",title:"Backup",description:"Redundancy."},{id:"A.8.14",code:"A.8.14",title:"Redundancy ICT",description:"HA systems."},{id:"A.8.15",code:"A.8.15",title:"Logging",description:"Audit trails."},{id:"A.8.16",code:"A.8.16",title:"Monitoring",description:"Health alerts."},{id:"A.8.17",code:"A.8.17",title:"Clock sync",description:"NTP."},{id:"A.8.18",code:"A.8.18",title:"Privileged utilities",description:"Restrict tools."},{id:"A.8.19",code:"A.8.19",title:"Software install",description:"Whitelisting."},{id:"A.8.20",code:"A.8.20",title:"Network security",description:"Firewalls."},{id:"A.8.21",code:"A.8.21",title:"Network services",description:"VPN/Gateways."},{id:"A.8.22",code:"A.8.22",title:"Segregation",description:"VLANs."},{id:"A.8.23",code:"A.8.23",title:"Web filtering",description:"Proxy."},{id:"A.8.24",code:"A.8.24",title:"Cryptography",description:"Encryption."},{id:"A.8.25",code:"A.8.25",title:"Secure SDLC",description:"Dev security."},{id:"A.8.26",code:"A.8.26",title:"Application security",description:"Design."},{id:"A.8.27",code:"A.8.27",title:"Architecture",description:"Engineering."},{id:"A.8.28",code:"A.8.28",title:"Secure coding",description:"OWASP."},{id:"A.8.29",code:"A.8.29",title:"Security testing",description:"VAPT."},{id:"A.8.30",code:"A.8.30",title:"Outsourced dev",description:"Contractor code."},{id:"A.8.31",code:"A.8.31",title:"Separation envs",description:"Dev/Prod."},{id:"A.8.32",code:"A.8.32",title:"Change mgmt",description:"RFCs."},{id:"A.8.33",code:"A.8.33",title:"Test info",description:"Protect data."},{id:"A.8.34",code:"A.8.34",title:"IS during audit",description:"Auditor access."}]}]},sr={name:"ISO 14001:2015 (EMS)",description:"Environmental Management System",groups:[{id:"PLAN_14001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context",description:"Org Context.",subClauses:[{id:"4.1",code:"4.1",title:"Org Context",description:"Env issues."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Expectations."},{id:"4.3",code:"4.3",title:"Scope",description:"Boundaries."},{id:"4.4",code:"4.4",title:"EMS System",description:"Processes."}]},{id:"5",code:"5",title:"Leadership",description:"Commitment.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership & Commitment",description:"Duty."},{id:"5.2",code:"5.2",title:"Environmental Policy",description:"Goals."},{id:"5.3",code:"5.3",title:"Org Roles & Responsibilities",description:"Authorities."}]},{id:"6",code:"6",title:"Planning",description:"Aspects.",subClauses:[{id:"6.1.1",code:"6.1.1",title:"General",description:"Actions."},{id:"6.1.2",code:"6.1.2",title:"Environmental aspects",description:"Impacts."},{id:"6.1.3",code:"6.1.3",title:"Compliance obligations",description:"Legal."},{id:"6.1.4",code:"6.1.4",title:"Planning action",description:"Achievement."},{id:"6.2",code:"6.2",title:"Environmental objectives",description:"Plans."}]}]},{id:"SUPPORT_14001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Supply."},{id:"7.2",code:"7.2",title:"Competence",description:"Training."},{id:"7.3",code:"7.3",title:"Awareness",description:"EMS awareness."},{id:"7.4",code:"7.4",title:"Communication",description:"Internal/External.",subClauses:[{id:"7.4.1",code:"7.4.1",title:"General",description:"Criteria."},{id:"7.4.2",code:"7.4.2",title:"Internal",description:"Staff."},{id:"7.4.3",code:"7.4.3",title:"External",description:"Parties."}]},{id:"7.5",code:"7.5",title:"Documented info",description:"Control."}]},{id:"DO_14001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational control",description:"Lifecycle."},{id:"8.2",code:"8.2",title:"Emergency preparedness",description:"Response."}]},{id:"CHECK_ACT_14001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1.1",code:"9.1.1",title:"General",description:"Measurement."},{id:"9.1.2",code:"9.1.2",title:"Compliance evaluation",description:"Audit."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Scheduled review."},{id:"9.3",code:"9.3",title:"Management review",description:"Review outputs."},{id:"10.1",code:"10.1",title:"General",description:"Performance."},{id:"10.2",code:"10.2",title:"Nonconformity",description:"Corrective action."},{id:"10.3",code:"10.3",title:"Continual improvement",description:"Suitability."}]}]},rr={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var ir={};const ar="3.5.0-STABLE",nr="2026-01-04 09:00:00 (GMT+7)",at="gemini-3-pro-preview",or="gemini-3-flash-preview",gt={company:"",smo:"",department:"",interviewee:"",auditor:"",type:""},lr=()=>{try{if(typeof import.meta<"u"&&rr)return}catch{}try{if(typeof process<"u"&&ir)return""}catch{}return""},dr=lr(),_t=[dr].filter(t=>t&&t.trim()!==""),ls=["gemini-3-pro-preview","gemini-3-flash-preview","gemini-2.0-flash-exp","gemini-1.5-pro","gemini-1.5-flash"],rt=[{id:"evidence",label:"1. Evidence",icon:"ScanText",colorClass:"bg-blue-500",textClass:"text-blue-600",borderClass:"border-blue-500",bgSoft:"bg-blue-50 dark:bg-blue-950/30"},{id:"findings",label:"2. Findings",icon:"Wand2",colorClass:"bg-purple-500",textClass:"text-purple-600",borderClass:"border-purple-500",bgSoft:"bg-purple-50 dark:bg-purple-950/30"},{id:"report",label:"3. Report",icon:"FileText",colorClass:"bg-emerald-500",textClass:"text-emerald-600",borderClass:"border-emerald-500",bgSoft:"bg-emerald-50 dark:bg-emerald-950/30"}],cr={"Stage 1":"Initial review of documentation and readiness.","Stage 2":"Evaluation of implementation and effectiveness.",Internal:"First-party audit to check own system.","PRE ASSESSMENT":"Gap analysis assessment.","PRE TRANSFER REVIEW":"Check valid certification for transfer.","TRANSITION AUDIT":"Ensure transition to new standard version.",CAV:"Surveillance assessment.",RAV:"Re-assessment of existing certification."},Tt={"ISO 9001:2015":er,"ISO 27001:2022":tr,"ISO 14001:2015":sr},ur=[{version:"3.5.0-STABLE",date:"2026-01-04",features:["BASELINE: Official Release Candidate. System stabilized and optimized.","PRIVACY SHIELD: Integrated PII Redaction engine to mask Emails/Phones before AI processing.","HYBRID AI ENGINE: Automatic switch between 'Gemini 3.0 Cloud' and 'Local Intelligence' (Offline Mode).","SMART FAILOVER: Multi-key pooling allows continuous operation even if primary quotas are exhausted.","RAG INTEGRATION: Upload Standards/Docs to Vector Database for context-aware AI analysis.","UI/UX: Liquid Tabs, GPU-Accelerated transitions, and non-blocking Sidebar performance."]},{version:"3.4.2",date:"2026-01-03",features:["OPTIMIZATION: Updated AI Core to prioritize 'Gemini 3.0 Pro' automatically.","CORE: Intelligent model fallback. System tries Pro -> Flash -> Legacy.","UX: Added visual indicator for active model tier in settings."]},{version:"3.4.1",date:"2026-01-03",features:["FIX: Resolved 'Entity Not Found' (404) errors by upgrading to Gemini 3.0 models.","CORE: Updated Model Hierarchy to remove deprecated aliases.","UX: Smoother model probing without console error noise."]}],xr=[{icon:"ScanText",title:"Smart OCR",desc:"Extracts text from Images, PDFs & TXT."},{icon:"Wand2",title:"AI Analysis",desc:"Expert compliance evaluation."},{icon:"FileText",title:"Auto Report",desc:"Synthesizes final audit findings."}],pr="",ss={BookOpen:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),e.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Quote:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2H4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8Z"}),e.jsx("path",{d:"M14 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2h-4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8Z"})]}),TDLogo:e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"tealNeonGrad",x1:"100%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#00f2c3",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"#0098f0",stopOpacity:"1"})]})}),e.jsx("path",{d:"M 20 20 H 65 L 55 30 H 30 V 65 L 20 75 V 20 Z",fill:"url(#tealNeonGrad)"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M 40 40 H 60 C 75 40, 85 50, 85 65 C 85 80, 75 90, 60 90 H 35 L 45 80 H 60 C 70 80, 75 75, 75 65 C 75 55, 70 50, 60 50 H 50 V 40 Z",fill:"url(#tealNeonGrad)"}),e.jsx("path",{d:"M 30 65 L 60 35",stroke:"white",strokeWidth:"0.5",strokeOpacity:"0.3"})]}),TDSolidLink:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"future_td_grad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#06b6d4"})," ",e.jsx("stop",{offset:"50%",stopColor:"#6366f1"})," ",e.jsx("stop",{offset:"100%",stopColor:"#f59e0b"})," "]}),e.jsxs("filter",{id:"glow_td",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"0.6",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("path",{d:"M5 6H11V18H14C17.866 18 21 15.3137 21 12C21 8.68629 17.866 6 14 6H11",stroke:"url(#future_td_grad)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#glow_td)"})]}),Grid:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]}),Session1_SparklePlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 3v18"}),e.jsx("path",{d:"M3 12h18"}),e.jsx("path",{d:"m15 9-6 6"}),e.jsx("path",{d:"m9 9 6 6"}),e.jsx("path",{d:"M12 2v4"}),e.jsx("path",{d:"m4.93 4.93 2.83 2.83"}),e.jsx("path",{d:"M2 12h4"}),e.jsx("path",{d:"m4.93 19.07 2.83-2.83"}),e.jsx("path",{d:"M12 22v-4"}),e.jsx("path",{d:"m19.07 19.07-2.83-2.83"}),e.jsx("path",{d:"M22 12h-4"}),e.jsx("path",{d:"m19.07 4.93-2.83 2.83"})]}),Session2_PlayCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polygon",{points:"10 8 16 12 10 16 10 8"})]}),Session3_Rocket:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"}),e.jsx("path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),e.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.1 4-1 4-1"}),e.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.1-1.62 1-4 1-4"})]}),Session4_FilePlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),e.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),Session5_RefreshCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e.jsx("path",{d:"M3 3v5h5"}),e.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),e.jsx("path",{d:"M16 21h5v-5"})]}),Session6_Zap:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Session7_Compass:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"})]}),Session8_Flag:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),e.jsx("line",{x1:"4",y1:"22",x2:"4",y2:"15"})]}),Session9_DoorOpen:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),e.jsx("path",{d:"M2 20h3"}),e.jsx("path",{d:"M13 20h9"}),e.jsx("path",{d:"M10 12v.01"}),e.jsx("path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z"})]}),Session10_Pulse:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),Session11_GridAdd:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),e.jsx("path",{d:"M3 17.5h7"}),e.jsx("path",{d:"M6.5 14v7"})]}),Session12_CleanSheet:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),e.jsx("path",{d:"M3 9h18"})]}),Session13_PowerBtn:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),e.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]}),Demo1_MultiFiles:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M3 15h6"}),e.jsx("path",{d:"M6 12v6"}),e.jsx("path",{d:"M16 18l2-2 2 2"}),e.jsx("path",{d:"M18 16v6"})]}),Demo2_CloudAdd:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 13v8"}),e.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),e.jsx("path",{d:"M16 17l-4-4-4 4"})]}),Demo3_FolderUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"}),e.jsx("path",{d:"M12 10v6"}),e.jsx("path",{d:"m9 13 3-3 3 3"})]}),Demo4_ImgStack:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"}),e.jsx("line",{x1:"16",y1:"5",x2:"22",y2:"5"}),e.jsx("line",{x1:"19",y1:"2",x2:"19",y2:"8"}),e.jsx("circle",{cx:"9",cy:"9",r:"2"}),e.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Demo5_Clip:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"}),e.jsx("path",{d:"M12 12h.01"})]}),Demo6_BoxUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),e.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),e.jsx("line",{x1:"12",y1:"12.01",x2:"12",y2:"22.08"}),e.jsx("polyline",{points:"16 12 12 8 8 12"})]}),Demo7_PlusCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M8 12h8"}),e.jsx("path",{d:"M12 8v8"})]}),Demo8_GridPlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}),e.jsx("path",{d:"M14 17h7"}),e.jsx("path",{d:"M17.5 13.5v7"})]}),Demo9_DocUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M12 18v-6"}),e.jsx("path",{d:"m9 15 3-3 3 3"})]}),Demo10_Layers:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}),e.jsx("path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}),e.jsx("path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"}),e.jsx("path",{d:"M12 8v4"})]}),Demo11_Scan:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),e.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),e.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),e.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),e.jsx("path",{d:"M7 12h10"}),e.jsx("path",{d:"M12 8v8"})]}),Demo12_Attach:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m4.5 16.5 7-7"}),e.jsx("path",{d:"m2 2 20 20"}),e.jsx("path",{d:"m12 12 7-7"}),e.jsx("path",{d:"M17 17v5"}),e.jsx("path",{d:"M22 12h-5"})]}),Demo13_Meteor:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m13 4 8.2 2.5a2 2 0 0 1 1.3 2.5L20 17.5"}),e.jsx("path",{d:"m8.5 7.5 10 10"}),e.jsx("path",{d:"M2 13.5V19a2 2 0 0 0 2 2h5.5"}),e.jsx("path",{d:"m13.5 8.5-5 5"}),e.jsx("path",{d:"M7 15c-1.5 1-2 2.5-2 2.5s1.5.5 2.5-2"}),e.jsx("path",{d:"M12 4V2"}),e.jsx("path",{d:"m16 6 2-2"}),e.jsx("path",{d:"M8 6 6 4"})]}),Sparkle:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:"text-amber-400 drop-shadow-[0_0_4px_rgba(252,211,77,0.7)] animate-pulse-slow",children:e.jsx("path",{d:"M12 2L14.4 9.6L22 12L14.4 14.4L12 22L9.6 14.4L2 12L9.6 9.6L12 2Z"})}),FilePlus2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M3 15h6"}),e.jsx("path",{d:"M6 12v6"})]}),History:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e.jsx("path",{d:"M3 3v5h5"}),e.jsx("path",{d:"M12 7v5l4 2"})]}),LayoutList:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}),e.jsx("path",{d:"M14 4h7"}),e.jsx("path",{d:"M14 9h7"}),e.jsx("path",{d:"M14 15h7"}),e.jsx("path",{d:"M14 20h7"})]}),Tag:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),FileEdit:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l1-3.95 5.42-5.44Z"})]}),Book:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),FileShield:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M12 13v7"}),e.jsx("path",{d:"M8.5 16.5c2 1 5 1 7 0"})]}),Users:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Lock:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),Cpu:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),e.jsx("rect",{x:"9",y:"9",width:"6",height:"6"}),e.jsx("path",{d:"M15 2v2"}),e.jsx("path",{d:"M15 20v2"}),e.jsx("path",{d:"M2 15h2"}),e.jsx("path",{d:"M2 9h2"}),e.jsx("path",{d:"M20 15h2"}),e.jsx("path",{d:"M20 9h2"}),e.jsx("path",{d:"M9 2v2"}),e.jsx("path",{d:"M9 20v2"})]}),CheckThick:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),CheckSquare:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"9 11 12 14 22 4"}),e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-3-2V5a2 2 0 0 1 2-2h11"})]}),Square:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})}),FileText:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"})]}),Search:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Trash2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("path",{d:"M14 11v6"})]}),ChevronDown:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})}),ChevronUp:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"18 15 12 9 6 15"})}),Wand2:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z"}),e.jsx("path",{d:"m14 7 3 3"}),e.jsx("path",{d:"M5 6v4"}),e.jsx("path",{d:"M19 14v4"}),e.jsx("path",{d:"M10 2v2"}),e.jsx("path",{d:"M7 8H3"}),e.jsx("path",{d:"M21 16h-4"}),e.jsx("path",{d:"M11 3H9"})]}),AlertCircle:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),CheckCircle2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{d:"m9 12 2 2 4-4"})]}),Save:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),e.jsx("polyline",{points:"7 3 7 8 15 8"})]}),ExpandPanel:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"15 3 21 3 21 9"}),e.jsx("polyline",{points:"9 21 3 21 3 15"}),e.jsx("line",{x1:"21",y1:"3",x2:"14",y2:"10"}),e.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}),CollapsePanel:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"4 14 10 14 10 20"}),e.jsx("polyline",{points:"20 10 14 10 14 4"}),e.jsx("line",{x1:"14",y1:"10",x2:"21",y2:"3"}),e.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}),X:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Copy:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),e.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),Download:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-3-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Sun:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),RefreshCw:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 2v6h-6"}),e.jsx("path",{d:"M3 12a9 9 0 0 1 15-6.7L21 8"}),e.jsx("path",{d:"M3 22v-6h6"}),e.jsx("path",{d:"M21 12a9 9 0 0 1-15 6.7L3 16"})]}),Lightbulb:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 18h6"}),e.jsx("path",{d:"M10 22h4"}),e.jsx("path",{d:"M12 2v2"}),e.jsx("path",{d:"M12 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),e.jsx("path",{d:"M9 10a3 3 0 0 1 3-3 3 3 0 0 1 3 3v2H9z"})]}),AIIndicator:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:e.jsx("path",{d:"M12 2L14.4 9.6L22 12L14.4 14.4L12 22L9.6 14.4L2 12L9.6 9.6L12 2Z"})}),UploadCloud:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),e.jsx("path",{d:"M12 12v9"}),e.jsx("path",{d:"m16 16-4-4-4 4"})]}),Image:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),e.jsx("circle",{cx:"9",cy:"9",r:"2"}),e.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Info:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Settings:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Plus:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Minus:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})}),Key:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"m21 2-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0 3 3L22 7l-3-3m-3.5 3.5L19 4"})}),Loader:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-spin",children:e.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Keyboard:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2"}),e.jsx("path",{d:"M6 8h.001"}),e.jsx("path",{d:"M10 8h.001"}),e.jsx("path",{d:"M14 8h.001"}),e.jsx("path",{d:"M18 8h.001"}),e.jsx("path",{d:"M6 12h.001"}),e.jsx("path",{d:"M10 12h.001"}),e.jsx("path",{d:"M14 12h.001"}),e.jsx("path",{d:"M18 12h.001"}),e.jsx("path",{d:"M7 16h10"})]}),TextSize:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5h7v2"}),e.jsx("path",{d:"M6.5 5v14"}),e.jsx("path",{d:"M14 13v-2h7v2"}),e.jsx("path",{d:"M17.5 11v8"})]}),AuditUser:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"}),e.jsx("path",{d:"M22 22 18 18 16 20 20 24 24 20Z"})]}),ScanText:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5c0-1.1.9-2 2-2h2"}),e.jsx("path",{d:"M17 3h2c1.1 0 2 .9 2 2v2"}),e.jsx("path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2"}),e.jsx("path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2"}),e.jsx("path",{d:"M7 12h.01"}),e.jsx("path",{d:"M10 12h4"}),e.jsx("path",{d:"M17 12h.01"}),e.jsx("path",{d:"M12 7v10"})]}),Building:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2"}),e.jsx("path",{d:"M9 22v-4c0-1.1.9-2 2-2h2c1.1 0 2 .9 2 2v4"}),e.jsx("path",{d:"M8 6h.01"}),e.jsx("path",{d:"M16 6h.01"}),e.jsx("path",{d:"M12 6h.01"}),e.jsx("path",{d:"M12 10h.01"}),e.jsx("path",{d:"M12 14h.01"}),e.jsx("path",{d:"M12 18h.01"})]}),User:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Snowflake:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),e.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),e.jsx("path",{d:"m20 16-4-4 4-4"}),e.jsx("path",{d:"m4 8 4 4-4 4"}),e.jsx("path",{d:"m16 4-4 4-4-4"}),e.jsx("path",{d:"m8 20 4-4 4 4"})]}),CheckLineart:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Mic:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),e.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),e.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),e.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}),ShieldEye:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),e.jsx("path",{d:"M12 8c-2.5 0-4.5 1.5-6 4 1.5 2.5 3.5 4 6 4s4.5-1.5 6-4c-1.5-2.5-3.5-4-6-4z"}),e.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})},g=({name:t,size:s=18,className:a="",onClick:n})=>{const r=ss[t]||ss.AlertCircle;if(it.isValidElement(r)){const l=r;return it.cloneElement(l,{width:s,height:s,className:`${a} ${l.props.className||""}`,onClick:n})}return e.jsx("span",{className:a,onClick:n,children:r})},rs=({icon:t,iconColor:s,value:a,onChange:n,options:r,defaultText:l,onIconClick:u,iconTitle:p})=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:`absolute left-3 top-1/2 -translate-y-1/2 transition-all duration-300 z-10 flex items-center justify-center ${u?"cursor-pointer pointer-events-auto hover:scale-110 active:scale-95":"pointer-events-none"}`,onClick:x=>{u&&(x.stopPropagation(),u(x))},title:p,children:e.jsx("div",{className:s,children:e.jsx(g,{name:t,size:16})})}),e.jsxs("select",{value:a,onChange:n,className:`w-full appearance-none pl-10 pr-8 py-3 bg-gray-50 dark:bg-slate-950 border border-gray-100 dark:border-slate-800 rounded-xl text-xs font-normal outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all cursor-pointer shadow-sm hover:border-indigo-200 dark:hover:border-slate-600 hover:shadow-md dark:shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)] ${a?"text-slate-700 dark:text-slate-300":"text-gray-400"}`,children:[e.jsx("option",{value:"",disabled:!0,children:l}),r.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400 group-hover:text-indigo-500 transition-colors duration-300",children:e.jsx(g,{name:"ChevronDown",size:14})})]}),st=({icon:t,iconColor:s,placeholder:a,value:n,onChange:r,className:l=""})=>e.jsxs("div",{className:`relative group ${l}`,children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none transition-colors duration-300",children:e.jsx("div",{className:s,children:e.jsx(g,{name:t,size:16})})}),e.jsx("input",{type:"text",placeholder:a,value:n,onChange:r,className:"w-full pl-10 pr-3 py-3 bg-gray-50 dark:bg-slate-950 border border-gray-100 dark:border-slate-800 rounded-xl text-xs font-normal text-slate-700 dark:text-slate-300 placeholder-gray-400 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all shadow-sm hover:border-indigo-200 dark:hover:border-slate-600 hover:shadow-md dark:shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)]"})]}),kt=({isOpen:t,title:s,onClose:a,children:n})=>t?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-[300] flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:a,children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-3xl shadow-2xl border border-gray-100 dark:border-slate-800 transform transition-all animate-zoom-in-spring duration-300 overflow-hidden dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_10px_15px_-3px_rgba(0,0,0,0.5)]",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-lg font-black text-slate-800 dark:text-white tracking-tight",children:s}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/20 transition-all duration-300 text-slate-400 hover:rotate-90",children:e.jsx(g,{name:"X",size:20})})]}),e.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto custom-scrollbar",children:n})]})}):null,hr=({message:t,onClose:s})=>{const[a,n]=d.useState(!1),[r,l]=d.useState(!1),u=()=>{n(!0),setTimeout(()=>s(),400)};return d.useEffect(()=>{l(!0);const m=setTimeout(u,4e3);return()=>clearTimeout(m)},[s]),e.jsx("div",{className:`fixed z-[9999] w-[90vw] max-w-sm md:w-auto md:max-w-md top-20 left-1/2 -translate-x-1/2 md:top-auto md:left-auto md:bottom-10 md:right-10 md:translate-x-0 transition-all duration-500 ease-spring ${r?a?"opacity-0 scale-95 md:translate-x-4 -translate-y-4 md:translate-y-0":"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-4 md:translate-y-0 md:translate-x-4"}`,children:e.jsxs("div",{className:"bg-slate-900/95 dark:bg-white/95 backdrop-blur-md text-white dark:text-slate-900 px-4 py-3 md:px-5 md:py-4 rounded-2xl shadow-2xl flex items-start gap-3 md:gap-4 border border-slate-700/50 dark:border-slate-200/50",children:[e.jsx("div",{className:"flex-shrink-0 p-1.5 bg-emerald-500 rounded-full text-white shadow-lg shadow-emerald-500/30 mt-0.5",children:e.jsx(g,{name:"CheckLineart",size:14})}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-60 leading-none mb-1",children:"System Notification"}),e.jsx("span",{className:"text-xs md:text-sm font-bold leading-snug break-words",children:t})]}),e.jsx("button",{onClick:u,className:"flex-shrink-0 -mr-2 -mt-2 p-2 text-slate-500 hover:text-white dark:hover:text-slate-900 transition-colors rounded-full hover:bg-white/10 dark:hover:bg-black/5",children:e.jsx(g,{name:"X",size:16})})]})})},gr=({className:t})=>e.jsxs("div",{className:`flex items-center justify-center gap-1 ${t}`,children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-3 w-3 rounded-full bg-indigo-400 opacity-75"}),e.jsx(g,{name:"Sparkle",size:16,className:"animate-spin-slow text-yellow-300"})]}),mr=({message:t})=>e.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-slate-900/95 backdrop-blur-md z-50 flex flex-col items-center justify-center animate-in fade-in duration-500",children:[e.jsxs("div",{className:"relative w-28 h-28 mb-8",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-indigo-100 dark:border-indigo-900 rounded-full opacity-50"}),e.jsx("div",{className:"absolute inset-0 border-t-4 border-indigo-600 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-4 border-4 border-purple-100 dark:border-purple-900 rounded-full opacity-50"}),e.jsx("div",{className:"absolute inset-4 border-r-4 border-purple-500 rounded-full animate-spin-reverse"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"bg-gradient-to-tr from-indigo-500 to-purple-500 p-4 rounded-full shadow-lg shadow-indigo-500/50 animate-pulse",children:e.jsx(g,{name:"Wand2",className:"text-white",size:28})})}),e.jsx("div",{className:"absolute top-0 left-1/2 w-2 h-2 bg-cyan-400 rounded-full shadow-[0_0_10px_#22d3ee] animate-ping"})]}),e.jsx("h3",{className:"text-lg font-black text-slate-800 dark:text-white mb-2 animate-pulse px-4 text-center max-w-[80%]",children:t}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-mono flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Gemini AI Processing..."]})]}),fr=({isOpen:t,onClose:s,actions:a,onSelectAction:n})=>{const[r,l]=d.useState(""),u=d.useRef(null);d.useEffect(()=>{t&&(l(""),setTimeout(()=>{var x;return(x=u.current)==null?void 0:x.focus()},50))},[t]);const p=a.filter(x=>x.label.toLowerCase().includes(r.toLowerCase())||x.desc&&x.desc.toLowerCase().includes(r.toLowerCase()));return t?e.jsx("div",{className:"fixed inset-0 z-[99999] bg-black/60 backdrop-blur-sm flex items-start justify-center pt-[10vh] px-4 md:px-0 animate-in fade-in duration-200",onClick:s,children:e.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-slate-900 rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-700 overflow-hidden flex flex-col animate-zoom-in-spring duration-300 dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_10px_15px_-3px_rgba(0,0,0,0.5)]",onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center px-3 py-3 md:px-4 border-b border-gray-100 dark:border-slate-800",children:[e.jsx(g,{name:"Session6_Zap",className:"text-indigo-500 mr-2 md:mr-3 flex-shrink-0",size:20}),e.jsx("input",{ref:u,type:"text",className:"flex-1 bg-transparent text-sm md:text-lg outline-none text-slate-800 dark:text-white placeholder-slate-400 min-w-0",placeholder:"Type a command or search clauses...",value:r,onChange:x=>l(x.target.value),onKeyDown:x=>{x.key==="Enter"&&p.length>0?n(p[0]):x.key==="Escape"&&s()}}),e.jsx("div",{className:"flex gap-2 flex-shrink-0 ml-2",children:e.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/20 transition-all duration-300 text-slate-400 hover:rotate-90",children:e.jsx(g,{name:"X",size:20})})})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar p-2",children:p.length===0?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"No results found."}):p.map((x,j)=>e.jsxs("div",{onClick:()=>n(x),className:`flex items-center gap-4 p-3 rounded-xl cursor-pointer transition-colors group ${j===0?"bg-indigo-50 dark:bg-indigo-900/20":"hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:[e.jsx("div",{className:`p-2 rounded-lg ${x.type==="clause"?"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400"}`,children:e.jsx(g,{name:x.icon||"Session6_Zap",size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 truncate group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:x.label}),x.desc&&e.jsx("p",{className:"text-xs text-slate-500 truncate",children:x.desc})]}),x.type==="clause"&&e.jsx("div",{className:"flex items-center gap-2 opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:x.onReference,className:"p-1.5 rounded-lg text-slate-400 hover:text-cyan-500 hover:bg-cyan-50 dark:hover:bg-cyan-900/20 transition-all",title:"Reference/Lookup",children:e.jsx(g,{name:"BookOpen",size:16})})}),x.shortcut&&e.jsx("span",{className:"text-xs text-slate-400",children:x.shortcut})]},j))}),e.jsxs("div",{className:"px-4 py-2 bg-gray-50 dark:bg-slate-950 border-t border-gray-100 dark:border-slate-800 text-[10px] text-slate-400 flex justify-between",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Tip:"}),' Search for clauses like "9.2" or actions like "Export".']}),e.jsx("span",{children:"ISO Audit Pro"})]})]})}):null},br=({fontSizeScale:t,adjustFontSize:s})=>{const[a,n]=d.useState(!1),[r,l]=d.useState(null),u=d.useRef(null),p=x=>{if(x.stopPropagation(),!a&&u.current){const j=u.current.getBoundingClientRect(),v=window.innerWidth-j.right;l({top:j.bottom+8,right:v}),n(!0)}else n(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("button",{ref:u,onClick:p,className:`p-2 rounded-xl transition-all duration-300 shadow-sm ${a?"bg-indigo-100 text-indigo-700 dark:bg-slate-700 dark:text-indigo-400 scale-105":"bg-gray-50 dark:bg-slate-800 text-slate-700 dark:text-slate-200 hover:bg-indigo-50 hover:text-indigo-600"}`,title:"Adjust Font Size",children:e.jsx(g,{name:"TextSize",size:18})}),a&&r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[99] cursor-default",onClick:()=>n(!1)}),e.jsxs("div",{className:"fixed z-[100] flex items-center bg-white dark:bg-slate-900 rounded-full p-1.5 shadow-2xl border border-gray-200 dark:border-slate-700 animate-zoom-in-spring min-w-[140px] justify-between",style:{top:`${r.top}px`,right:`${r.right}px`},onClick:x=>x.stopPropagation(),children:[e.jsx("button",{onClick:()=>s("decrease"),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full text-slate-500 hover:text-indigo-600 transition-all duration-200 flex-shrink-0 active:scale-90",children:e.jsx(g,{name:"Minus",size:16})}),e.jsxs("span",{className:"text-sm font-black text-slate-800 dark:text-white select-none px-2 w-12 text-center",children:[(t*100).toFixed(0),"%"]}),e.jsx("button",{onClick:()=>s("increase"),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full text-slate-500 hover:text-indigo-600 transition-all duration-200 flex-shrink-0 active:scale-90",children:e.jsx(g,{name:"Plus",size:16})})]})]})]})},vr=({isSidebarOpen:t,setIsSidebarOpen:s,displayBadge:a,badgeColorClass:n,setIsCmdPaletteOpen:r,fontSizeScale:l,setFontSizeScale:u,isDarkMode:p,setIsDarkMode:x,isSystemHealthy:j,onOpenSettings:v,onOpenAbout:m})=>{const[N,y]=d.useState(!1),E=()=>{const L=!N;y(L),localStorage.setItem("iso_privacy_shield",String(L))};return e.jsxs("header",{className:"flex-shrink-0 px-4 md:px-6 py-0 border-b border-gray-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm z-[70] relative flex justify-between items-center h-16 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center h-full gap-3 md:gap-5",children:[e.jsx("div",{className:"relative group cursor-pointer flex items-center justify-center transition-all duration-500 hover:opacity-100 active:scale-95",onClick:()=>s(!t),title:"Toggle Sidebar",children:e.jsx("div",{className:"relative w-10 h-10 md:w-14 md:h-14 flex items-center justify-center",children:e.jsx("div",{className:"relative z-10",children:t?e.jsxs("div",{className:"relative w-8 h-8",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-transparent border-t-indigo-500 border-b-cyan-500 rounded-full animate-infinity-spin drop-shadow-[0_0_8px_rgba(6,182,212,0.8)]"}),e.jsx("div",{className:"absolute inset-2 border-2 border-transparent border-l-purple-500 border-r-pink-500 rounded-full animate-spin-reverse drop-shadow-[0_0_6px_rgba(236,72,153,0.8)]"})]}):e.jsx("div",{className:"hover:scale-110 transition-transform duration-300 drop-shadow-[0_0_15px_rgba(0,242,195,0.6)]",children:e.jsx(g,{name:"TDLogo",size:32})})})})}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsxs("h1",{className:"hidden md:block text-lg font-bold tracking-tight text-slate-900 dark:text-white leading-none",children:["ISO Audit ",e.jsx("span",{className:"font-light text-slate-400",children:"Pro"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:`text-[11px] font-bold px-3 py-1 rounded-full border shadow-sm uppercase tracking-wider backdrop-blur-sm transition-colors duration-300 ${n}`,children:a})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("button",{onClick:E,className:`p-2 rounded-xl transition-all active:scale-95 border ${N?"bg-emerald-50 border-emerald-200 text-emerald-600 dark:bg-emerald-900/20 dark:border-emerald-800 dark:text-emerald-400":"bg-transparent border-transparent text-slate-400 hover:text-slate-600 dark:hover:text-slate-300"}`,title:N?"Privacy Shield Active (PII Redaction On)":"Enable Privacy Shield",children:e.jsx(g,{name:"ShieldEye",size:20})}),e.jsx("button",{onClick:()=>r(!0),className:"p-2 rounded-xl text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 hover:bg-gray-100 dark:hover:bg-slate-800 transition-all active:scale-95",title:"Command Palette (Ctrl+K)",children:e.jsx(g,{name:"Session6_Zap",size:20})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(br,{fontSizeScale:l,adjustFontSize:L=>u(D=>L==="increase"?Math.min(D+.1,1.3):Math.max(D-.1,.8))})}),e.jsx("button",{onClick:()=>x(!p),className:"p-2 rounded-xl text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-slate-800 transition-all",children:e.jsx(g,{name:p?"Sun":"Moon",size:18})}),e.jsxs("button",{onClick:v,className:"group relative w-8 h-8 flex items-center justify-center transition-all",title:"Connection Status",children:[e.jsx("div",{className:`absolute inset-0 rounded-full opacity-20 animate-ping ${j?"bg-emerald-500":"bg-red-500"}`}),e.jsx("div",{className:`relative w-2.5 h-2.5 rounded-full shadow-sm ring-2 ring-white dark:ring-slate-900 ${j?"bg-emerald-500":"bg-red-500"}`})]}),e.jsx("button",{onClick:m,className:"p-2 rounded-xl text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all",title:"About & Release Notes",children:e.jsx(g,{name:"Info",size:18})})]})]})},jr=(t,s)=>{const[a,n]=d.useState(t);return d.useEffect(()=>{const r=setTimeout(()=>{n(t)},s);return()=>{clearTimeout(r)}},[t,s]),a},jt=t=>{t&&(navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t).catch(()=>is(t)):is(t))},is=t=>{const s=document.createElement("textarea");s.value=t,s.style.position="fixed",s.style.left="-9999px",document.body.appendChild(s),s.focus(),s.select();try{document.execCommand("copy")}catch(a){console.error(a)}document.body.removeChild(s)},kr=t=>new Promise((s,a)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>s(n.result.split(",")[1]),n.onerror=r=>a(r)}),yr=async t=>{if(!window.pdfjsLib)throw new Error("PDF.js library not loaded");const s=await t.arrayBuffer(),a=await window.pdfjsLib.getDocument({data:s}).promise;let n="";for(let r=1;r<=a.numPages;r++){const p=(await(await a.getPage(r)).getTextContent()).items.map(x=>x.str).join(" ");n+=p+`

`}return n},as=async t=>{let s="";try{if(t.name.toLowerCase().endsWith(".pdf"))s=await yr(t);else if(t.name.toLowerCase().endsWith(".docx")){if(typeof mammoth>"u")throw new Error("Mammoth library missing");const a=await t.arrayBuffer();s=(await mammoth.extractRawText({arrayBuffer:a})).value}else{if(t.name.toLowerCase().endsWith(".doc"))throw new Error("Legacy Word (.doc) files are not supported due to browser limitations. Please save your file as .docx and try again.");s=await t.text()}if(!s||s.length<50)throw new Error("File content is too short or empty.");return s}catch(a){throw console.error("File processing error:",a),new Error(`Failed to parse ${t.name}: ${a.message}`)}},yt=t=>{if(!t)return null;let s=t.trim();s.startsWith("```")&&(s=s.replace(/^```(json)?/,"").replace(/```$/,""));const a=s.indexOf("["),n=s.indexOf("{"),r=s.lastIndexOf("]"),l=s.lastIndexOf("}");a!==-1&&r!==-1&&(n===-1||a<n)?s=s.substring(a,r+1):n!==-1&&l!==-1&&(s=s.substring(n,l+1));try{return JSON.parse(s)}catch{return console.error("JSON Parse Error on text:",s),null}},Rt=t=>t?t.replace(/[^a-zA-Z0-9\s]/g,"").trim().replace(/\s+/g,"_").substring(0,30):"N_A",bt=(t,s)=>{let a="",n=!1;return s.forEach(r=>{const l=t[r];l&&l.some(u=>u.status==="supplied")&&(n=!0,a+=`
### EVIDENCE MATRIX FOR CLAUSE ${r}
`,a+=`| Requirement | Verified Evidence |
`,a+=`| :--- | :--- |
`,l.forEach(u=>{u.evidenceInput.trim()&&(a+=`| ${u.requirement.replace(/\|/g,"-")} | ${u.evidenceInput.replace(/\|/g,"-").replace(/\n/g," ")} |
`)}),a+=`
`)}),n?a:""},It={ANALYSIS:{id:"default_analysis",label:"Standard Analysis",description:"Strict ISO compliance check based on evidence.",isSystemDefault:!0,template:`
        Analyze the provided EVIDENCE against ISO Standard "{{STANDARD_NAME}}", Clause "{{CLAUSE_CODE}}: {{CLAUSE_TITLE}}".
        Clause Requirement: {{CLAUSE_DESC}}
        
        CONTEXT (Retrieved from Knowledge Base):
        """
        {{RAG_CONTEXT}}
        """

        EVIDENCE (User Input & Tags):
        """
        {{EVIDENCE}}
        """
        
        CROSS-REFERENCE CHECK:
        Check if this evidence also relates to other common ISO standards (like ISO 9001 if auditing 27001, or vice versa).

        DETERMINE:
        1. Status (COMPLIANT, NC_MINOR, NC_MAJOR, OFI, or N_A).
        2. Reason (Why? Be specific based on evidence).
        3. Evidence Quote (Verbatim support).
        4. Suggestion (If NC or OFI).
        5. CrossRefs (Array of strings, e.g. ["ISO 9001: 7.5.3"]).
        
        Output a SINGLE JSON Object.
        `},REPORT:{id:"system_integration_report_v1",label:"System Integration Format",description:"Strict Plain Text format structured by clause. No Markdown/Tables.",isSystemDefault:!0,template:`
        ROLE: ISO Audit Data Processor.
        TASK: Convert audit findings into a STRICT PLAIN TEXT format for legacy system integration.

        CRITICAL FORMATTING RULES:
        1. OUTPUT MUST BE PLAIN TEXT ONLY.
        2. NO Markdown characters allowed (Do NOT use **, ##, __, or tables with |).
        3. NO introductory text, executive summaries, or conclusions.
        4. Use exactly "====================" (20 dashes) as a separator between clauses.
        5. Synthesize specific evidence from the "EVIDENCE MATRIX" into the "VERIFIED_EVIDENCE" field.

        REQUIRED BLOCK STRUCTURE (Repeat for each clause):

        CLAUSE_ID: [Code]
        CLAUSE_TITLE: [Title]
        STATUS: [Status]
        
        FINDING_DETAIL:
        [Detailed reasoning and conclusion text]

        VERIFIED_EVIDENCE:
        [Specific documents, logs, or observations verified]

        ====================

        INPUT CONTEXT:
        Entity: {{COMPANY}}
        Standard: {{STANDARD_NAME}}
        Auditor: {{AUDITOR}}
        Target Language: {{LANGUAGE}}

        FINDINGS DATA:
        {{FINDINGS_JSON}}

        EVIDENCE MATRIX (Source Data):
        """
        {{FULL_EVIDENCE_CONTEXT}}
        """
        `}};class wr{constructor(){ht(this,"prompts");this.prompts={...It},this.loadUserOverrides()}loadUserOverrides(){try{const s=localStorage.getItem("iso_prompt_overrides");if(s){const a=JSON.parse(s);this.prompts={...this.prompts,...a}}}catch(s){console.error("Failed to load prompt overrides",s)}}getPrompt(s){return this.prompts[s]||It[s]}updatePrompt(s,a){this.prompts[s]={...this.prompts[s],template:a,isSystemDefault:!1},localStorage.setItem("iso_prompt_overrides",JSON.stringify(this.prompts))}resetToDefault(s){this.prompts[s]={...It[s]},localStorage.setItem("iso_prompt_overrides",JSON.stringify(this.prompts))}hydrate(s,a){let n=s;for(const[r,l]of Object.entries(a)){const u=new RegExp(`{{${r}}}`,"g");n=n.replace(u,l||"")}return n}}const Te=new wr,Nr="ISO_VECTOR_DB",Ie="vectors",Cr=1,Sr=(t,s)=>{let a=0,n=0,r=0;for(let l=0;l<t.length;l++)a+=t[l]*s[l],n+=t[l]*t[l],r+=s[l]*s[l];return a/(Math.sqrt(n)*Math.sqrt(r))};class Ar{constructor(){ht(this,"dbPromise",null)}openDB(){return this.dbPromise?this.dbPromise:(this.dbPromise=new Promise((s,a)=>{const n=indexedDB.open(Nr,Cr);n.onupgradeneeded=r=>{const l=r.target.result;l.objectStoreNames.contains(Ie)||l.createObjectStore(Ie,{keyPath:"id"}).createIndex("source","metadata.source",{unique:!1})},n.onsuccess=r=>s(r.target.result),n.onerror=r=>a(r.target.error)}),this.dbPromise)}async embedText(s,a){var n;if(!s||!s.trim())return null;try{return((n=(await new Dt({apiKey:a}).models.embedContent({model:"text-embedding-004",content:{parts:[{text:s}]}})).embedding)==null?void 0:n.values)||null}catch(r){return console.error("Embedding Error",r),null}}async addDocuments(s,a,n){const r=a.match(/[\s\S]{1,800}/g)||[],p=(await this.openDB()).transaction([Ie],"readwrite").objectStore(Ie);let x=0;for(const j of r){const v=await this.embedText(j,n);if(v){const m={id:`${s}_${x++}_${Date.now()}`,text:j,embedding:v,metadata:{source:s,type:"standard_content"}};p.put(m)}await new Promise(m=>setTimeout(m,50))}}async search(s,a,n=4){const r=await this.embedText(s,a);if(!r)return"";const l=await this.openDB();return new Promise(u=>{const j=l.transaction([Ie],"readonly").objectStore(Ie).openCursor(),v=[];j.onsuccess=m=>{const N=m.target.result;if(N){const y=N.value,E=Sr(r,y.embedding);E>.5&&v.push({text:y.text,score:E}),N.continue()}else{v.sort((E,L)=>L.score-E.score);const y=v.slice(0,n).map(E=>E.text).join(`

---

`);u(y)}}})}async clear(){(await this.openDB()).transaction([Ie],"readwrite").objectStore(Ie).clear()}}const vt=new Ar,Er={patterns:{email:/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,phoneVN:/(84|0[3|5|7|8|9])+([0-9]{8})\b/g,potentialName:new RegExp("(?<!^|\\. |\\? |! )([A-Z][a-z]+ [A-Z][a-z]+)","g")},redact(t){if(!t)return"";let s=t;return s=s.replace(this.patterns.email,"[EMAIL_REDACTED]"),s=s.replace(this.patterns.phoneVN,"[PHONE_REDACTED]"),(s.toLowerCase().includes("salary")||s.toLowerCase().includes("lng"))&&(s=s.replace(/(\d{1,3}[,.]\d{3}[,.]\d{3}|\d{7,})/g,"[MONEY_REDACTED]")),s}},mt={NC_MAJOR:["systemic failure","total breakdown","missing process","khng c quy trnh","cha thit lp","critical","nghim trng"],NC_MINOR:["isolated","single instance","partial","not fully","cha y ","mt s","incomplete","li nh"],OFI:["improve","better","consider","cn nhc","ci tin","optimize","efficiency"],COMPLIANT:["conforms","available","maintained","ph hp","y ","tun th","verified","t"]},ns={analyze(t,s,a){const n=a.toLowerCase();let r="N_A",l="Offline Analysis: Insufficient data to determine compliance.",u="",p={MAJOR:0,MINOR:0,OFI:0,COMPLIANT:0};mt.NC_MAJOR.forEach(j=>{n.includes(j)&&(p.MAJOR+=2)}),mt.NC_MINOR.forEach(j=>{n.includes(j)&&(p.MINOR+=1)}),mt.OFI.forEach(j=>{n.includes(j)&&(p.OFI+=1)}),mt.COMPLIANT.forEach(j=>{n.includes(j)&&(p.COMPLIANT+=1)}),p.MAJOR>0?(r="NC_MAJOR",l="Offline Analysis detected critical keywords indicating a systemic issue.",u="Review the entire process and establish missing controls immediately."):p.MINOR>p.COMPLIANT?(r="NC_MINOR",l="Offline Analysis detected potential gaps in implementation.",u="Investigate specific instances and correct them."):p.OFI>0?(r="OFI",l="Opportunities for improvement found in text.",u="Consider optimizing based on best practices."):p.COMPLIANT>0?(r="COMPLIANT",l="Evidence suggests requirements are met."):a.length>50&&(r="COMPLIANT",l="Offline Analysis: No obvious non-conformity keywords detected.");const x={clauseId:t,status:r,reason:l,evidence:a.substring(0,100)+"...",suggestion:u,conclusion_report:`[OFFLINE] ${l}`,crossRefs:[]};return JSON.stringify(x)}},Lr={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Mr={};const Xe=t=>{let s=t;if(!s&&_t.length>0&&(s=_t[0]),!s)try{typeof import.meta<"u"}catch{}!s&&typeof process<"u"&&Mr&&(s=""),s||(s=localStorage.getItem("iso_api_key")||"");const a=(s||"").trim();return a?new Dt({apiKey:a}):null},os=async(t,s)=>{const a=t?t.trim().replace(/^["']|["']$/g,""):"";if(!a)return{isValid:!1,latency:0,errorType:"invalid",errorMessage:"Key is empty"};const n=new Dt({apiKey:a}),r=[...ls];let l=null,u=!1,p=!1;for(const j of r){const v=performance.now();try{await n.models.generateContent({model:j,contents:{parts:[{text:"Hi"}]}});const m=performance.now();return{isValid:!0,latency:Math.round(m-v),activeModel:j}}catch(m){l=m;const N=(m.message||"").toLowerCase(),y=m.status||0;if(y!==404&&y!==403&&!N.includes("not found")&&console.warn(`[Gemini Probe] ${j} failed:`,m),N.includes("key not valid")||y===400||N.includes("invalid argument")||N.includes("api_key"))return{isValid:!1,latency:0,errorType:"invalid",errorMessage:"Invalid API Key."};if(y===429||N.includes("quota")||N.includes("exhausted"))return{isValid:!1,latency:0,errorType:"quota_exceeded",errorMessage:"Quota Exceeded."};if(y===403||N.includes("permission denied")||N.includes("referrer")){u=!0,(N.includes("has not been used")||N.includes("not enabled"))&&(p=!0);continue}if(y===404||N.includes("not found"))continue}}const x=((l==null?void 0:l.message)||"").toLowerCase();return u?p?{isValid:!1,latency:0,errorType:"referrer_error",errorMessage:"API Not Enabled."}:{isValid:!1,latency:0,errorType:"referrer_error",errorMessage:"Access Denied (403)."}:x.includes("fetch")||x.includes("network")||x.includes("failed to fetch")?{isValid:!1,latency:0,errorType:"network_error",errorMessage:"Network Error."}:{isValid:!1,latency:0,errorType:"unknown",errorMessage:(l==null?void 0:l.message)||"Unknown error."}},Ir=async(t,s,a,n,r)=>{const l=Xe(n);if(!l)throw new Error("API Key missing");const u=r||at;let p="";a?p=`You are a precision extraction engine. Extract VERBATIM text for [${t.code}] ${t.title} from SOURCE.
SOURCE:
"""${a.substring(0,5e5)}"""
Output JSON: {"en": "...", "vi": "..."}`:p=`Provide verbatim text for ${s} Clause [${t.code}] ${t.title}. Output JSON: {"en": "...", "vi": "..."}`;const x=await l.models.generateContent({model:u,contents:p,config:{responseMimeType:"application/json"}}),j=yt(x.text||"{}");return{en:(j==null?void 0:j.en)||"N/A",vi:(j==null?void 0:j.vi)||"N/A"}},_r=async(t,s,a,n)=>{const r=Xe(a);if(!r)throw new Error("API Key missing");const l=n||at,u=`Analyze ISO Standard text. Extract structure. Name: ${s}. Text: """${t.substring(0,3e5)}""". Output JSON Standard Schema.`,p=await r.models.generateContent({model:l,contents:u,config:{responseMimeType:"application/json"}});return yt(p.text||"{}")},Tr=async(t,s,a,n,r)=>{const l=Xe(n);if(!l)throw new Error("API Key missing");const u=r||or;return(await l.models.generateContent({model:u,contents:{parts:[{text:t},{inlineData:{mimeType:a,data:s}}]}})).text||""},Dr=async(t,s,a,n,r,l,u=!1)=>{if(!navigator.onLine)return console.log("Offline Mode: Using Local Intelligence"),ns.analyze(t.code,t.title,a);const p=Xe(r);if(!p)throw new Error("API Key missing");const x=`${t.code} ${t.title} ${t.description}`,j=r||"",v=await vt.search(x,j);let m=a+`

TAGGED SECTIONS:
`+n;u&&(m=Er.redact(m));const N=Te.getPrompt("ANALYSIS"),y=Te.hydrate(N.template,{STANDARD_NAME:s,CLAUSE_CODE:t.code,CLAUSE_TITLE:t.title,CLAUSE_DESC:t.description,RAG_CONTEXT:v||"No source document available for vector search.",EVIDENCE:m}),E=l||at,L={responseMimeType:"application/json",responseSchema:{type:Ae.OBJECT,properties:{clauseId:{type:Ae.STRING},status:{type:Ae.STRING,enum:["COMPLIANT","NC_MINOR","NC_MAJOR","OFI","N_A"]},reason:{type:Ae.STRING},suggestion:{type:Ae.STRING},evidence:{type:Ae.STRING},conclusion_report:{type:Ae.STRING},crossRefs:{type:Ae.ARRAY,items:{type:Ae.STRING}}},required:["clauseId","status","reason","evidence"]}};try{return(await p.models.generateContent({model:E,contents:y,config:L})).text||"{}"}catch(D){return console.error("Analysis Error:",D),ns.analyze(t.code,t.title,a)}},Rr=async(t,s,a)=>{const n=Xe(s);if(!n)throw new Error("API Key missing");const r=Te.getPrompt("REPORT"),l=Te.hydrate(r.template,{COMPANY:t.company,AUDIT_TYPE:t.type,AUDITOR:t.auditor,STANDARD_NAME:t.standard,FINDINGS_JSON:JSON.stringify(t.findings),FULL_EVIDENCE_CONTEXT:t.fullEvidenceContext||"No granular evidence provided.",LANGUAGE:t.lang==="vi"?"Vietnamese":"English"});try{return(await n.models.generateContent({model:a||at,contents:l})).text||""}catch(u){throw console.error("Reporting Error:",u),new Error(u.message||"Report generation failed")}},Pr=async(t,s,a)=>{const n=Xe(s);if(!n)return"[]";const r=at,l=`Provide concise descriptions (15-20 words) for these ISO clauses. JSON Array: [{"code": "...", "description": "..."}]. Clauses: ${JSON.stringify(t)}`;try{return(await n.models.generateContent({model:r,contents:l,config:{responseMimeType:"application/json"}})).text||"[]"}catch{return"[]"}},Or=({standards:t,standardKey:s,setStandardKey:a,auditInfo:n,setAuditInfo:r,onAddNewStandard:l,onOpenIntegrity:u,knowledgeFileName:p,onKnowledgeUpload:x,onClearKnowledge:j,health:v,auditFieldIconColor:m,standardOptions:N})=>{const y=d.useRef(null),E=!!p,L=!!s&&s!=="ADD_NEW",D=E?"BookOpen":"Book";let R="text-gray-300 dark:text-slate-600",G="Please select an ISO Standard first to enable document upload.",C="cursor-not-allowed";E?(R="text-emerald-500 drop-shadow-sm",G=`Source Attached: ${p}. Click to Replace.`,C="cursor-pointer"):L&&(R=`${m} hover:text-indigo-600 dark:hover:text-indigo-300`,G="Click to upload Source PDF or Word (DOCX) for better accuracy",C="cursor-pointer hover:scale-110 active:scale-95");const P=()=>{L&&y.current&&y.current.click()},W=I=>{I.target.files&&I.target.files.length>0&&(x(I),I.target.value="")};return e.jsxs("div",{className:"bg-gray-50/80 dark:bg-slate-900/50 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm p-3 space-y-4",children:[e.jsx("input",{type:"file",ref:y,accept:".pdf,.docx,.doc,.txt",className:"hidden",onChange:W}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:"Scope Definition"}),e.jsxs("div",{className:"relative group/source",children:[e.jsx(rs,{icon:D,iconColor:`${R} transition-all duration-300 ${C}`,value:s,onChange:I=>{I.target.value==="ADD_NEW"?l():a(I.target.value)},options:N,defaultText:"Select ISO Standard",onIconClick:P,iconTitle:G}),E&&e.jsx("button",{onClick:I=>{I.stopPropagation(),j()},className:"absolute right-9 top-1/2 -translate-y-1/2 p-1.5 text-slate-400 hover:text-red-500 bg-transparent hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full transition-all z-20 active:scale-95",title:"Remove Source File",children:e.jsx(g,{name:"Trash2",size:14})}),s&&e.jsx("button",{onClick:u,className:`absolute -top-1.5 -right-1.5 p-1 rounded-full shadow-lg transition-all hover:scale-110 active:scale-95 text-white ring-2 ring-white dark:ring-slate-900 ${v.isHealthy?"bg-emerald-500":"bg-orange-500"}`,title:"Integrity Check",children:e.jsx(g,{name:v.isHealthy?"CheckCircle2":"AlertCircle",size:10})})]}),e.jsx(rs,{icon:"FileEdit",iconColor:m,value:n.type,onChange:I=>r({...n,type:I.target.value}),options:Object.keys(cr).map(I=>({value:I,label:I})),defaultText:"Select Audit Type"})]}),e.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700/50"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:"Target Entity"}),e.jsxs("div",{className:"grid grid-cols-[1.5fr_1fr] gap-2",children:[e.jsx(st,{icon:"Building",iconColor:m,placeholder:"Company Name",value:n.company,onChange:I=>r({...n,company:I.target.value})}),e.jsx(st,{icon:"Tag",iconColor:m,placeholder:"SMO/ID",value:n.smo,onChange:I=>r({...n,smo:I.target.value})})]}),e.jsx(st,{icon:"Users",iconColor:m,placeholder:"Department / Site",value:n.department,onChange:I=>r({...n,department:I.target.value})})]}),e.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700/50"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:"Personnel"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(st,{icon:"AuditUser",iconColor:m,placeholder:"Lead Auditor",value:n.auditor,onChange:I=>r({...n,auditor:I.target.value})}),e.jsx(st,{icon:"User",iconColor:m,placeholder:"Interviewee",value:n.interviewee,onChange:I=>r({...n,interviewee:I.target.value})})]})]})]})},zr=({standard:t,standardKey:s,selectedClauses:a,setSelectedClauses:n,onReferenceClause:r,repairedIds:l,onScrollTrigger:u})=>{const[p,x]=d.useState(""),[j,v]=d.useState([]),[m,N]=d.useState([]),[y,E]=d.useState(null),L=jr(p,300),D=d.useRef(null),R=k=>v(M=>M.includes(k)?M.filter(V=>V!==k):[...M,k]),G=k=>N(M=>M.includes(k)?M.filter(V=>V!==k):[...M,k]),C=(t==null?void 0:t.groups.map(k=>k.id))||[],P=C.length>0&&j.length===C.length,W=()=>{v(P?[]:C)},I=()=>{if(!t)return;const k=(H,B)=>{for(let J of B){if(J.id===H)return J;if(J.subClauses){const Z=k(H,J.subClauses);if(Z)return Z}}},M=t.groups.flatMap(H=>H.clauses),V=a.map(H=>k(H,M)).filter(H=>!!H).map(H=>`[${H.code}] ${H.title}`).join(`
`);jt(V)},z=(k,M)=>{k.stopPropagation(),jt(`[${M.code}] ${M.title}`),E(M.id),setTimeout(()=>E(null),1500)},ne=k=>{const M=B=>{let J=[B.id];return B.subClauses&&B.subClauses.forEach(Z=>J.push(...M(Z))),J},V=M(k),H=V.every(B=>a.includes(B));n(B=>H?B.filter(J=>!V.includes(J)):Array.from(new Set([...B,...V])))},O=k=>{const M=B=>{let J=[];return B.forEach(Z=>{J.push(Z.id),Z.subClauses&&J.push(...M(Z.subClauses))}),J},V=M(k.clauses),H=V.every(B=>a.includes(B));n(H?B=>B.filter(J=>!V.includes(J)):B=>[...new Set([...B,...V])])},F=(k,M=0)=>{const V=k.subClauses&&k.subClauses.length>0,H=m.includes(k.id)||!!L,B=a.includes(k.id),J=Q=>{if(!Q.subClauses)return{all:a.includes(Q.id),some:a.includes(Q.id)};const ye=Q.subClauses.map(J),Ee=a.includes(Q.id)&&ye.every(_=>_.all),S=a.includes(Q.id)||ye.some(_=>_.some);return{all:Ee,some:S}},Z=J(k),he=y===k.id,ke=l.includes(k.id);return e.jsxs("div",{className:`flex flex-col transition-all duration-300 ${M>0?"ml-4 border-l-2 dark:border-slate-800":""}`,children:[e.jsxs("div",{className:`group flex items-start gap-3 p-2 rounded-xl transition-all duration-200 ease-soft cursor-pointer ${B?"bg-indigo-50/80 dark:bg-indigo-900/30 translate-x-1":ke?"bg-emerald-50/80 dark:bg-emerald-900/20 ring-1 ring-emerald-500/30":"hover:bg-gray-100/50 dark:hover:bg-slate-800/50 hover:translate-x-1 hover:shadow-sm"}`,children:[e.jsx("button",{onClick:Q=>{Q.stopPropagation(),ne(k)},className:`mt-1 flex-shrink-0 transition-colors duration-200 ${Z.some?"text-indigo-600 dark:text-indigo-400 scale-110":"text-gray-300 dark:text-slate-600 hover:text-gray-400"}`,children:Z.all?e.jsx(g,{name:"CheckSquare",size:16}):Z.some?e.jsx("div",{className:"w-4 h-4 bg-indigo-500 rounded flex items-center justify-center",children:e.jsx("div",{className:"w-2.5 h-0.5 bg-white"})}):e.jsx(g,{name:"Square",size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>V?G(k.id):ne(k),children:[e.jsxs("div",{className:"flex items-start justify-between gap-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[e.jsx("span",{className:"text-xs font-bold text-indigo-700 dark:text-indigo-400 uppercase shrink-0 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:k.code}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-slate-100 font-medium tracking-tight leading-tight group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:k.title}),ke&&e.jsx("span",{className:"text-[9px] font-black bg-emerald-100 text-emerald-600 px-1.5 py-0.5 rounded-md animate-pulse",children:"UPDATED"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:Q=>{Q.stopPropagation(),r(k)},className:"p-1 transition-all transform duration-300 opacity-0 group-hover:opacity-100 text-gray-300 hover:text-cyan-500 dark:hover:text-cyan-400 hover:scale-110",title:"Reference original text",children:e.jsx(g,{name:"BookOpen",size:14})}),e.jsx("button",{onClick:Q=>z(Q,k),className:`p-1 transition-all transform duration-300 ${he?"text-emerald-500 scale-125 opacity-100":"opacity-0 group-hover:opacity-100 text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:scale-110"}`,title:he?"Copied!":"Copy Clause",children:e.jsx(g,{name:he?"CheckThick":"Copy",size:he?20:14})}),V&&e.jsx(g,{name:"ChevronDown",size:12,className:`text-gray-400 mt-0.5 shrink-0 transition-transform duration-300 ${H?"rotate-180":""}`})]})]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 italic mt-1.5 leading-relaxed block w-full whitespace-normal border-t border-gray-100 dark:border-slate-800 pt-1",children:k.description})]})]}),e.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${V&&H?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:e.jsx("div",{className:"overflow-hidden",children:V&&e.jsx("div",{className:"mt-1 flex flex-col",children:k.subClauses.map(Q=>F(Q,M+1))})})})]},k.id)},K=k=>{const M=k.toUpperCase();return M.includes("PLAN")?"bg-blue-600 dark:bg-blue-500 shadow-blue-500/20":M.includes("SUPPORT")?"bg-purple-600 dark:bg-purple-500 shadow-purple-500/20":M.includes("DO")?"bg-orange-600 dark:bg-orange-500 shadow-orange-500/20":M.includes("CHECK")||M.includes("ACT")?"bg-emerald-600 dark:bg-emerald-500 shadow-emerald-500/20":M.includes("ANNEX")?"bg-rose-600 dark:bg-rose-500 shadow-rose-500/20":"bg-slate-800 dark:bg-slate-700"};return e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-gray-50/40 dark:bg-slate-950/40 w-full md:min-w-[390px]",children:[e.jsx("div",{className:"p-3 border-b border-gray-100 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm z-10 shrink-0 sticky top-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1 flex items-center gap-1 bg-gray-100 dark:bg-slate-950 rounded-xl px-2 transition-all focus-within:ring-2 focus-within:ring-indigo-500/20 dark:shadow-[inset_0_1px_3px_rgba(0,0,0,0.5)]",children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-400 font-bold pl-1",children:e.jsx(g,{name:"Search",size:14})}),e.jsx("input",{className:"w-full bg-transparent py-2 px-1 text-xs font-medium outline-none text-slate-800 dark:text-slate-200 placeholder-gray-400",placeholder:"Search clauses...",value:p,onChange:k=>x(k.target.value)}),e.jsx("button",{onClick:W,className:"p-1.5 rounded-lg hover:bg-white dark:hover:bg-slate-700 text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",title:P?"Collapse All Groups":"Expand All Groups",children:e.jsx(g,{name:P?"CollapsePanel":"ExpandPanel",size:14})})]}),a.length>0&&e.jsxs("div",{className:"flex gap-2 animate-in fade-in slide-in-from-right-5 duration-300",children:[e.jsx("button",{onClick:I,className:"p-2 rounded-xl bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 hover:bg-indigo-100 transition-colors relative shadow-sm border border-indigo-100 dark:border-indigo-900/30 hover:scale-105",title:"Copy Selected Clauses",children:e.jsx(g,{name:"Copy",size:16})}),e.jsxs("button",{onClick:()=>n([]),className:"p-2 rounded-xl bg-red-50 dark:bg-red-900/20 text-red-600 hover:bg-red-100 transition-colors relative shadow-sm border border-red-100 dark:border-red-900/30 hover:scale-105",title:"Clear All",children:[e.jsx(g,{name:"Trash2",size:16}),e.jsx("div",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-[9px] font-black w-4 h-4 rounded-full flex items-center justify-center border-2 border-white dark:border-slate-900 shadow-sm animate-bounce",children:a.length})]})]})]})}),e.jsx("div",{ref:D,className:"flex-1 overflow-y-auto custom-scrollbar p-3 scroll-smooth",onScroll:k=>{k.currentTarget.scrollTop>30&&u&&u()},children:e.jsx("div",{className:"flex flex-col gap-4 pb-12",children:t?t.groups.map(k=>{const M=j.includes(k.id)||!!L,V=B=>{const J=L.toLowerCase();return B.code.toLowerCase().includes(J)||B.title.toLowerCase().includes(J)||B.description.toLowerCase().includes(J)||(B.subClauses?B.subClauses.some(V):!1)},H=L?k.clauses.filter(V):k.clauses;return H.length===0?null:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-gray-100 dark:border-transparent dark:shadow-[0_4px_6px_-1px_rgba(0,0,0,0.3),0_0_0_1px_rgba(255,255,255,0.05)] shadow-sm overflow-hidden transition-all duration-300 hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-3.5 bg-gray-50/50 dark:bg-slate-800/30 cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",onClick:()=>R(k.id),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:B=>{B.stopPropagation(),O(k)},className:`p-2 rounded-xl shadow-lg text-white ${K(k.title)} hover:scale-110 active:scale-95 transition-transform duration-300`,title:"Click to Select/Deselect All in Group",children:e.jsx(g,{name:k.icon,size:14})}),e.jsx("h4",{className:"text-xs font-black text-slate-900 dark:text-white uppercase tracking-widest",children:k.title})]}),e.jsx(g,{name:"ChevronDown",size:12,className:`text-slate-400 transition-transform duration-300 ${M?"rotate-180":""}`})]}),e.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${M?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:e.jsx("div",{className:"overflow-hidden bg-white dark:bg-slate-900",children:e.jsx("div",{className:"p-2 space-y-1",children:H.map(B=>F(B))})})})]},k.id)}):e.jsx("div",{className:"text-center text-gray-400 mt-20 italic text-xs uppercase tracking-widest opacity-50",children:"Select a Standard"})})})]})},$r=({isOpen:t,onClose:s,health:a,isCustomStandard:n,onResetStandard:r,onAutoRepair:l,isRepairing:u,repairStats:p})=>e.jsx(kt,{isOpen:t,title:"Standard Health Index",onClose:s,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-5 p-5 rounded-3xl bg-gray-50 dark:bg-slate-800 border border-gray-100 dark:border-slate-700 shadow-inner dark:shadow-[inset_0_2px_6px_rgba(0,0,0,0.4)]",children:[e.jsxs("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white text-2xl font-black shadow-xl ring-4 ring-white dark:ring-slate-700 ${a.score>90?"bg-gradient-to-br from-emerald-400 to-emerald-600":"bg-gradient-to-br from-orange-400 to-orange-600"}`,children:[a.score,"%"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-black text-slate-900 dark:text-slate-100 uppercase tracking-tight",children:"Data Health"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-snug mt-1",children:a.isHealthy?"Excellent! Data is accurate, clean, and complete for professional use.":"Standard data is incomplete or missing Source verification."})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Integrity Checklist"}),[...a.integrity,...a.completeness].map((x,j)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 rounded-2xl shadow-sm dark:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-1.5 rounded-full shadow-sm ${x.status==="pass"?"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20":"text-red-500 bg-red-50 dark:bg-red-900/20"}`,children:e.jsx(g,{name:x.status==="pass"?"CheckCircle2":"AlertCircle",size:18})}),e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:x.label})]}),e.jsx("span",{className:`text-[10px] font-black px-3 py-1 rounded-full shadow-sm uppercase ${x.status==="pass"?"text-emerald-700 bg-emerald-100":"text-red-700 bg-red-100"}`,children:x.detail})]},j))]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-slate-700 flex flex-col md:flex-row items-center justify-center gap-3",children:[n&&e.jsxs("button",{onClick:r,className:"px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 dark:bg-red-900/20 dark:hover:bg-red-900/40 dark:text-red-400 rounded-xl font-bold text-xs flex items-center gap-2 transition-all active:scale-95 border border-red-200 dark:border-red-800",children:[e.jsx(g,{name:"Trash2",size:14}),"Reset to Default"]}),p?e.jsxs("div",{className:"flex items-center gap-3 animate-in fade-in slide-in-from-right-5",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-bold text-emerald-600 uppercase",children:"Repair Complete"}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Added ",p.fixed," items, Cleaned ",p.cleaned," dupes."]})]}),e.jsx("button",{onClick:s,className:"px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl font-bold text-xs shadow-lg shadow-emerald-500/30",children:"Close & Continue"})]}):!a.isHealthy&&e.jsxs("button",{onClick:l,disabled:u,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-xs flex items-center gap-2 shadow-lg shadow-indigo-500/30 transition-all active:scale-95 disabled:opacity-70 disabled:active:scale-100",children:[u?e.jsx(g,{name:"Loader",className:"animate-spin"}):e.jsx(g,{name:"Wand2"}),u?"AI is Fixing...":"Auto-Repair Issues with AI"]})]})]})}),Br=it.memo(({isOpen:t,width:s,setWidth:a,standards:n,standardKey:r,setStandardKey:l,auditInfo:u,setAuditInfo:p,selectedClauses:x,setSelectedClauses:j,onAddNewStandard:v,onUpdateStandard:m,onResetStandard:N,onReferenceClause:y,showIntegrityModal:E,setShowIntegrityModal:L,knowledgeFileName:D,knowledgeBase:R,onKnowledgeUpload:G,onClearKnowledge:C})=>{const P=d.useRef(null),[W,I]=d.useState(!1),[z,ne]=d.useState(!0),[O,F]=d.useState(!1),[K,k]=d.useState(null),[M,V]=d.useState([]),H=_=>{_.target.classList.contains("resize-handle")&&(_.preventDefault(),I(!0),document.body.style.cursor="col-resize",document.body.style.userSelect="none")};d.useEffect(()=>{const _=()=>{if(W&&(I(!1),document.body.style.cursor="",document.body.style.userSelect="",P.current)){const w=parseInt(P.current.style.width,10);isNaN(w)||a(w)}},$=w=>{if(W&&P.current){const Y=Math.max(390,Math.min(w.clientX,800));P.current.style.width=`${Y}px`}};return W&&(window.addEventListener("mousemove",$),window.addEventListener("mouseup",_)),()=>{window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",_)}},[W,a]);const B=()=>{z&&ne(!1)},J=()=>{if(!r||!n[r])return{isHealthy:!1,score:0,integrity:[],completeness:[]};const _=n[r],$=[],w=[],Y=_.groups.flatMap(X=>X.clauses),ie=X=>X.reduce((ue,ge)=>(ue.push(ge),ge.subClauses&&ue.push(...ie(ge.subClauses)),ue),[]),ee=ie(Y),ae=ee.filter(X=>!X.description||X.description.trim().length<2).length;$.push({label:"Content Quality",status:ae===0?"pass":"fail",detail:ae===0?"Descriptions OK":`${ae} incomplete`});const te=new Set(ee.map(X=>X.code)),de=ee.length-te.size;if($.push({label:"Data Cleanliness",status:de===0?"pass":"fail",detail:de===0?"Clean":`${de} Duplicates`}),R&&R.length>1e3){let X=0;const ue=ee.slice(0,20);ue.forEach(wt=>{R.includes(wt.code)||X++});const ge=X/ue.length,Fe=ge<.2;w.push({label:"Source Verification",status:Fe?"pass":"fail",detail:Fe?"Matches Document":`${(ge*100).toFixed(0)}% Clauses Missing in Source`})}else w.push({label:"Source Verification",status:"fail",detail:"No Source Document Linked"});if(r.includes("9001")&&["8.4","8.6","8.7","7.1.4"].forEach(ue=>{const ge=ee.some(Fe=>Fe.code===ue);w.push({label:`Clause ${ue}`,status:ge?"pass":"fail",detail:ge?"Present":"Missing (Required)"})}),r.includes("27001")){const X=ee.filter(ge=>ge.code.startsWith("A.")),ue=X.length>=90;w.push({label:"Annex A Controls",status:ue?"pass":"fail",detail:ue?`${X.length} Controls (OK)`:`${X.length}/93 (Incomplete)`})}const oe=$.every(X=>X.status==="pass"),se=w.every(X=>X.status==="pass"),Le=oe&&se,ve=$.length+w.length,Ne=$.filter(X=>X.status==="pass").length+w.filter(X=>X.status==="pass").length,De=Math.round(Ne/(ve||1)*100);return{isHealthy:Le,score:De,integrity:$,completeness:w}},Z=async()=>{if(!(!r||!n[r])){F(!0),k(null);try{const _=JSON.parse(JSON.stringify(n[r])),$=[],w=[];let Y=0;const ie=ae=>{ae.forEach(te=>{(!te.description||te.description.trim().length<5)&&$.push({ref:te,code:te.code,title:te.title}),te.subClauses&&ie(te.subClauses)})};if(_.groups.forEach(ae=>ie(ae.clauses)),$.length>0){const ae=$.map(oe=>({code:oe.code,title:oe.title})),te=await Pr(ae),de=yt(te);if(Array.isArray(de)){const oe=de.reduce((se,Le)=>(Le.code&&Le.description&&(se[Le.code]=Le.description),se),{});$.forEach(se=>{oe[se.code]&&(se.ref.description=oe[se.code],w.push(se.ref.id))})}}const ee=ae=>{const te=new Set,de=[];for(const oe of ae)te.has(oe.code)?Y++:(te.add(oe.code),oe.subClauses&&(oe.subClauses=ee(oe.subClauses)),de.push(oe));return de};_.groups.forEach(ae=>{ae.clauses=ee(ae.clauses)}),m(_),V(w),k({fixed:w.length,cleaned:Y})}catch(_){console.error("Repair failed",_),alert("Failed to repair automatically.")}finally{F(!1)}}},he=()=>{confirm("Are you sure? This will remove all AI repairs and revert to the original static data.")&&(N(r),L(!1),k(null),V([]))},ke="text-indigo-700 dark:text-indigo-400",Q=J(),ye=!Tt[r]||n[r]&&n[r]!==Tt[r],Ee=(()=>{const _=Object.keys(n).map(Y=>({value:Y,label:n[Y].name})),$=new Set;return[..._.filter(Y=>{const ie=$.has(Y.label);return $.add(Y.label),!ie}),{value:"ADD_NEW",label:"+ Add New Standard..."}]})(),S=(()=>{let _=0;return r&&_++,u.type&&_++,u.company&&_++,u.auditor&&_++,Math.min(4,_)})();return e.jsxs("div",{ref:P,className:`${t?"border-r":"w-0 border-0 overflow-hidden"} flex flex-col bg-white dark:bg-slate-900 border-gray-200 dark:border-slate-800 shadow-2xl z-50 relative shrink-0 ${W?"transition-none":"transition-[width] duration-300 ease-soft"} h-full dark:shadow-[5px_0_15px_-3px_rgba(0,0,0,0.5)]`,style:{width:t?window.innerWidth<768?"100%":s:0},children:[t&&e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1.5 cursor-col-resize hover:bg-indigo-500 transition-colors z-50 group resize-handle hidden md:block",onMouseDown:H}),e.jsxs("div",{className:"flex-shrink-0 bg-white dark:bg-slate-900 w-full md:min-w-[390px] flex flex-col transition-all duration-400 ease-soft overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer group select-none hover:bg-gray-50 dark:hover:bg-slate-800/50",onClick:()=>ne(!z),title:z?"Collapse Mission Charter":"Expand Mission Charter",children:[e.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-500 transition-colors",children:[e.jsx(g,{name:"Session8_Flag",size:14,className:"text-indigo-500"}),"Audit Mission Charter",e.jsx(g,{name:"ChevronDown",size:12,className:`transition-transform duration-300 text-slate-300 group-hover:text-indigo-400 ${z?"rotate-180":""}`})]}),e.jsx("div",{className:"flex gap-2",onClick:_=>_.stopPropagation(),children:e.jsx("div",{className:"flex gap-0.5 items-center",children:[1,2,3,4].map(_=>e.jsx("div",{className:`w-3 h-1 rounded-full ${_<=S?"bg-indigo-500":"bg-gray-200 dark:bg-slate-700"}`},_))})})]}),e.jsx("div",{className:`grid transition-all duration-300 ease-in-out border-b border-gray-100 dark:border-slate-800 ${z?"grid-rows-[1fr] opacity-100 p-4 pt-0":"grid-rows-[0fr] opacity-0 p-0"}`,children:e.jsx("div",{className:"overflow-hidden",children:e.jsx(Or,{standards:n,standardKey:r,setStandardKey:l,auditInfo:u,setAuditInfo:p,onAddNewStandard:v,onOpenIntegrity:()=>L(!0),knowledgeFileName:D,onKnowledgeUpload:G,onClearKnowledge:C,health:Q,auditFieldIconColor:ke,standardOptions:Ee})})})]}),e.jsx(zr,{standard:n[r],standardKey:r,selectedClauses:x,setSelectedClauses:j,onReferenceClause:y,repairedIds:M,onScrollTrigger:B}),e.jsx($r,{isOpen:E,onClose:()=>L(!1),health:Q,isCustomStandard:ye,onResetStandard:he,onAutoRepair:Z,isRepairing:O,repairStats:K})]})}),Fr=({isOpen:t,onClose:s})=>{const[a,n]=d.useState(!1);return d.useEffect(()=>{t&&n(!1)},[t]),t?e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999] p-4 fade-in backdrop-blur-md",onClick:s,children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-2xl w-full max-w-3xl flex flex-col h-[90vh] md:h-[85vh] border border-gray-100 dark:border-slate-800 transform transition-all scale-100 overflow-hidden relative",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex-shrink-0 relative overflow-hidden group",children:[e.jsxs("div",{className:"absolute inset-0 bg-slate-900",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-600/20 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-amber-600/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"}),e.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20"})]}),e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-slate-400 hover:text-white z-50 p-2 bg-slate-800/50 rounded-full hover:bg-red-500/20 transition-all border border-transparent hover:border-red-500/30",children:e.jsx(g,{name:"X",size:20})}),e.jsxs("div",{className:"relative px-6 py-6 md:px-8 md:py-8 flex flex-col md:flex-row items-center md:items-start gap-6 md:gap-8 z-10",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"absolute -inset-10 bg-indigo-600/30 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -inset-[6px] rounded-full bg-[conic-gradient(from_0deg,transparent_0_deg,#f472b6_100deg,#8b5cf6_200deg,#06b6d4_300deg,transparent_360deg)] opacity-100 blur-md animate-[spin_4s_linear_infinite]"}),e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-br from-amber-400 via-pink-500 to-cyan-500 rounded-full opacity-60 blur-lg animate-pulse"}),e.jsx("div",{className:"relative w-24 h-24 rounded-full p-0.5 bg-slate-900 ring-1 ring-white/10 z-10 overflow-hidden shadow-2xl",children:a?e.jsxs("div",{className:"w-full h-full rounded-full flex items-center justify-center bg-black relative overflow-hidden border-2 border-slate-800/50",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_#1e1b4b_0%,_#000000_100%)]"}),e.jsx("div",{className:"absolute inset-0 opacity-30 bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"}),e.jsx("div",{className:"absolute inset-[-100%] bg-gradient-to-tr from-transparent via-cyan-400/30 to-transparent rotate-45 animate-[spinReverse_6s_linear_infinite]"}),e.jsx("div",{className:"relative z-10 transform scale-110 drop-shadow-[0_0_25px_rgba(0,242,195,0.8)]",children:e.jsx(g,{name:"TDLogo",size:56})})]}):e.jsx("img",{src:"./author.png",alt:"Trung DANGHOANG",className:"w-full h-full rounded-full object-cover bg-slate-800 border-2 border-slate-800",onError:()=>n(!0)})}),e.jsx("div",{className:"absolute bottom-0 right-0 z-20 bg-blue-500 text-white p-1 rounded-full border-4 border-slate-900 shadow-sm",title:"Verified Creator",children:e.jsx(g,{name:"CheckLineart",size:12})})]}),e.jsxs("div",{className:"flex-1 min-w-0 text-center md:text-left relative z-10",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-2 mb-1",children:[e.jsx("span",{className:"px-2 py-0.5 rounded-md bg-amber-500/10 border border-amber-500/30 text-[0.6rem] font-bold text-amber-500 uppercase tracking-widest shadow-[0_0_15px_rgba(245,158,11,0.15)]",children:"Solution Architect"}),e.jsx("span",{className:"px-2 py-0.5 rounded-md bg-indigo-500/10 border border-indigo-500/30 text-[0.6rem] font-bold text-indigo-400 uppercase tracking-widest",children:"AI Core Lead"})]}),e.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white tracking-tight leading-none mb-2 drop-shadow-[0_4px_10px_rgba(0,0,0,0.5)]",children:"Trung DANGHOANG"}),e.jsxs("p",{className:"text-slate-400 text-sm font-medium flex items-center justify-center md:justify-start gap-2",children:["Creator of ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-indigo-400 font-bold",children:"ISO Audit Pro"})]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 md:p-8 bg-gray-50 dark:bg-slate-950",children:[e.jsxs("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-5 rounded-2xl bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 shadow-sm",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2 border-b border-gray-100 dark:border-slate-800 pb-2",children:[e.jsx(g,{name:"Cpu",size:14})," System Core"]}),e.jsxs("div",{className:"grid grid-cols-[120px_1fr] gap-y-3 gap-x-4 items-center",children:[e.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 text-right",children:"App Version"}),e.jsxs("span",{className:"font-mono font-bold text-indigo-600 dark:text-indigo-400 text-sm tabular-nums",children:["v",ar]}),e.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 text-right",children:"Build Time"}),e.jsx("span",{className:"font-mono text-[10px] text-slate-500 tabular-nums leading-tight",children:nr}),e.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 text-right",children:"Engine"}),e.jsx("span",{className:"font-mono text-[10px] font-bold text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded inline-block w-fit",children:"Gemini 3.0 Pro"})]})]}),e.jsxs("div",{className:"p-5 rounded-2xl bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 shadow-sm",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2 border-b border-gray-100 dark:border-slate-800 pb-2",children:[e.jsx(g,{name:"Sparkle",size:14})," Capabilities"]}),e.jsx("div",{className:"space-y-3",children:xr.map((r,l)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 w-1.5 h-1.5 rounded-full bg-indigo-500 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs font-bold text-slate-800 dark:text-white block mb-0.5",children:r.title}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 leading-tight block",children:r.desc})]})]},l))})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-6 flex items-center gap-2",children:[e.jsx(g,{name:"History",size:14})," Release History"]}),e.jsx("div",{className:"ml-2 border-l-2 border-slate-200 dark:border-slate-800 space-y-8 pl-6 relative",children:ur.map((r,l)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:`absolute -left-[31px] top-1 w-2.5 h-2.5 rounded-full border-2 border-white dark:border-slate-900 transition-colors duration-300 ${l===0?"bg-indigo-500 shadow-[0_0_0_4px_rgba(99,102,241,0.2)]":"bg-slate-300 dark:bg-slate-700"}`}),e.jsxs("div",{className:"flex flex-row items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h4",{className:`text-sm font-bold tabular-nums ${l===0?"text-indigo-600 dark:text-indigo-400":"text-slate-800 dark:text-slate-200"}`,children:["v",r.version]}),l===0&&e.jsx("span",{className:"text-[9px] font-bold bg-indigo-100 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-300 px-1.5 py-0.5 rounded uppercase",children:"Latest"})]}),e.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded tabular-nums",children:r.date})]}),e.jsx("ul",{className:"space-y-1.5",children:r.features.map((u,p)=>{const[x,...j]=u.split(":"),v=j.length>0;return e.jsx("li",{className:"text-xs text-slate-600 dark:text-slate-300 flex items-start gap-2 leading-relaxed",children:v?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-bold text-[9px] min-w-[50px] text-right uppercase text-slate-400 dark:text-slate-500 mt-0.5",children:x}),e.jsx("span",{className:"text-slate-300 dark:text-slate-600",children:"|"}),e.jsx("span",{children:j.join(":")})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-1 h-1 bg-slate-400 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:u})]})},p)})})]},l))})]}),e.jsx("div",{className:"mt-10 pt-6 border-t border-gray-100 dark:border-slate-800 text-center",children:e.jsxs("p",{className:"text-[10px] text-slate-400",children:[" 2025 Trung DANGHOANG. All rights reserved. ",e.jsx("br",{}),"Built for ISO Audit Professional Compliance."]})})]})]})}):null},Vr=({isOpen:t,onClose:s,clause:a,standardName:n,fullText:r,isLoading:l,onInsert:u})=>{const[p,x]=d.useState("en"),[j,v]=d.useState(!1),[m,N]=d.useState(""),y=p==="en"?r.en:r.vi,E=d.useMemo(()=>{if(!n)return{text:"ISO",colorClass:"bg-gray-100 text-gray-600"};const R=n.match(/\((.*?)\)/),G=R?R[1]:n.split(" ")[0]||"ISO",C=G.toUpperCase();let P="bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300 border-indigo-100 dark:border-indigo-800/50";return C.includes("EMS")||C.includes("14001")?P="bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-700/50":C.includes("QMS")||C.includes("9001")?P="bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-700/50":(C.includes("ISMS")||C.includes("27001"))&&(P="bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-700/50"),{text:G,colorClass:P}},[n]);d.useEffect(()=>{if(!t){N("");return}if(l||!y){N("");return}const R=y.split(`
`);let G=0,C="";const P=setTimeout(()=>{const W=setInterval(()=>{G<R.length?(C+=(R[G]||"")+`
`,N(C),G++):clearInterval(W)},20);return()=>clearInterval(W)},50);return()=>clearTimeout(P)},[t,y,l]);const L=()=>{u(y)},D=()=>{jt(y),v(!0),setTimeout(()=>v(!1),2e3)};return e.jsx(kt,{isOpen:t,title:"Clause Reference",onClose:s,children:e.jsxs("div",{className:"flex flex-col h-full gap-3",children:[a&&e.jsxs("div",{className:"flex items-start gap-3 pb-2 border-b border-gray-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm font-black text-indigo-700 dark:text-indigo-400 uppercase bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded-lg border border-indigo-100 dark:border-indigo-800 shrink-0",children:a.code}),e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-white leading-tight mt-1",children:a.title})]}),l?e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-slate-500 gap-4",children:[e.jsxs("div",{className:"relative w-16 h-16",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-indigo-200 dark:border-indigo-800 rounded-full opacity-20"}),e.jsx("div",{className:"absolute inset-0 border-t-2 border-indigo-600 rounded-full animate-spin"})]}),e.jsx("span",{className:"text-sm font-bold animate-pulse",children:"Consulting Gemini AI Auditor..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded-full border shadow-sm uppercase tracking-wider ${E.colorClass}`,children:E.text}),e.jsxs("div",{className:"lang-pill-container shadow-sm border-gray-200 dark:border-slate-700",children:[e.jsx("span",{onClick:()=>x("en"),className:`lang-pill-btn ${p==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:()=>x("vi"),className:`lang-pill-btn ${p==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("button",{onClick:D,disabled:j,className:`p-2 rounded-xl transition-all hover:scale-110 active:scale-95 disabled:opacity-70 border shadow-sm ${j?"text-emerald-600 border-emerald-200 bg-emerald-50 dark:bg-emerald-900/20":"bg-white dark:bg-slate-800 border-gray-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600"}`,title:j?"Copied!":"Copy to Clipboard",children:e.jsx(g,{name:j?"CheckThick":"Copy",size:16})}),e.jsx("button",{onClick:L,className:"p-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow-lg shadow-indigo-500/20 transition-all hover:scale-110 active:scale-95",title:"Insert Reference into Evidence",children:e.jsx(g,{name:"Quote",size:16})})]})]}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto custom-scrollbar bg-gray-50/50 dark:bg-slate-950/50 rounded-2xl border border-gray-100 dark:border-slate-800 relative shadow-inner text-left",children:e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.jsxs("p",{className:"text-xs md:text-sm text-slate-800 dark:text-slate-200 whitespace-pre-wrap leading-7 font-medium tracking-wide",children:[m,!l&&m!==y&&e.jsx("span",{className:"inline-block w-1.5 h-4 bg-indigo-500 animate-pulse ml-1 align-middle"})]})})})]})]})})},Ur=({isOpen:t,onClose:s,onRestore:a})=>{const[n,r]=d.useState([]),[l,u]=d.useState(null);d.useEffect(()=>{t&&p()},[t]);const p=()=>{var m,N,y;try{const E=localStorage.getItem("iso_session_data");if(E){const D=JSON.parse(E),R=((m=D.evidence)==null?void 0:m.trim())||((N=D.selectedClauses)==null?void 0:N.length)>0||((y=D.auditInfo)==null?void 0:y.company);u(R?{id:"current_autosave",timestamp:Date.now(),label:"Latest Auto-Save",triggerType:"AUTO_SAVE",data:D}:null)}else u(null);const L=localStorage.getItem("iso_session_history");if(L){const D=JSON.parse(L);r(D.sort((R,G)=>G.timestamp-R.timestamp))}else r([])}catch(E){console.error("Failed to load session history",E)}},x=m=>new Date(m).toLocaleString(),j=m=>{const N=m.data.evidence?m.data.evidence.length:0,y=m.data.selectedClauses?m.data.selectedClauses.length:0,E=m.data.analysisResult?m.data.analysisResult.length:0;return e.jsxs("div",{className:"flex gap-3 mt-2 text-[10px] text-slate-500 font-mono",children:[e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(g,{name:"FileText",size:10})," ",N>0?`${(N/1024).toFixed(1)}KB Evid`:"No Evid"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(g,{name:"CheckSquare",size:10})," ",y," Clauses"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(g,{name:"Wand2",size:10})," ",E," Findings"]})]})},v=(m,N)=>e.jsxs("div",{onClick:()=>a(m),className:`group relative p-4 rounded-2xl border cursor-pointer transition-all duration-300 hover:scale-[1.02] active:scale-95 ${N?"bg-indigo-50/50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 ring-1 ring-indigo-500/20":"bg-white dark:bg-slate-900 border-gray-100 dark:border-slate-800 hover:border-indigo-300 dark:hover:border-indigo-700 hover:shadow-lg"}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[9px] font-black uppercase tracking-wider px-2 py-0.5 rounded-full ${N?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/30":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,children:N?"ACTIVE STATE":"BACKUP ARCHIVE"}),e.jsx("span",{className:"text-xs text-slate-400 font-mono",children:x(m.timestamp)})]})}),e.jsxs("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 truncate",children:[m.data.auditInfo.company||"Untitled Company",e.jsx("span",{className:"font-normal text-slate-400 mx-1",children:"|"}),m.data.auditInfo.type||"Untitled Audit"]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate mb-1",children:["Standard: ",Rt(m.data.standardKey).replace(/_/g," ")]}),j(m),e.jsx("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"bg-indigo-600 text-white p-2 rounded-full shadow-xl",children:e.jsx(g,{name:"History",size:20})})})]},m.id);return t?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:s,children:e.jsxs("div",{className:"bg-white dark:bg-slate-950 w-full max-w-2xl rounded-3xl shadow-2xl border border-gray-200 dark:border-slate-800 overflow-hidden flex flex-col max-h-[85vh] animate-zoom-in-spring",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-900/50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(g,{name:"History",className:"text-indigo-500"}),"Session Time Machine"]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Select a restoration point. This will overwrite your current workspace."})]}),e.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-slate-800 text-slate-400 transition-colors",children:e.jsx(g,{name:"X",size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6 bg-gray-50/30 dark:bg-slate-950",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"Available Auto-Save"]}),l?v(l,!0):e.jsx("div",{className:"p-4 border border-dashed border-gray-300 dark:border-slate-700 rounded-xl text-center text-slate-400 text-xs italic",children:"No active auto-save data found."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(g,{name:"Lock",size:12}),"Backup Vault (Last 5 Resets)"]}),e.jsx("div",{className:"space-y-3",children:n.length>0?n.map(m=>v(m,!1)):e.jsxs("div",{className:"p-8 border border-dashed border-gray-300 dark:border-slate-700 rounded-xl text-center",children:[e.jsx(g,{name:"Archive",className:"mx-auto mb-2 text-slate-300",size:24}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Vault is empty."}),e.jsx("p",{className:"text-slate-400 text-xs",children:"Backups are created automatically when you start a New Session."})]})})]})]}),e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-slate-900 border-t border-gray-100 dark:border-slate-800 text-center",children:e.jsxs("p",{className:"text-[10px] text-slate-400",children:[e.jsx("span",{className:"font-bold text-indigo-500",children:"Pro Tip:"})," Backups are stored locally in your browser. Clearing cache will delete them."]})})]})}):null},Wr="ISO_AUDIT_DB",_e="knowledge_files",Gr=1;class Kr{constructor(){ht(this,"dbPromise",null)}openDB(){return this.dbPromise?this.dbPromise:(this.dbPromise=new Promise((s,a)=>{const n=indexedDB.open(Wr,Gr);n.onupgradeneeded=r=>{const l=r.target.result;l.objectStoreNames.contains(_e)||l.createObjectStore(_e,{keyPath:"standardKey"})},n.onsuccess=r=>{s(r.target.result)},n.onerror=r=>{console.error("KnowledgeStore: DB Open Error",r),a(r.target.error)}}),this.dbPromise)}async saveDocument(s,a,n){try{const r=await this.openDB();return new Promise((l,u)=>{const x=r.transaction([_e],"readwrite").objectStore(_e),j={standardKey:s,fileName:a,content:n,timestamp:Date.now()},v=x.put(j);v.onsuccess=()=>l(),v.onerror=()=>u(v.error)})}catch(r){throw console.error("KnowledgeStore: Save Error",r),r}}async getDocument(s){try{const a=await this.openDB();return new Promise((n,r)=>{const p=a.transaction([_e],"readonly").objectStore(_e).get(s);p.onsuccess=()=>{n(p.result?p.result:null)},p.onerror=()=>r(p.error)})}catch(a){return console.error("KnowledgeStore: Get Error",a),null}}async deleteDocument(s){try{const a=await this.openDB();return new Promise((n,r)=>{const p=a.transaction([_e],"readwrite").objectStore(_e).delete(s);p.onsuccess=()=>n(),p.onerror=()=>r(p.error)})}catch(a){throw console.error("KnowledgeStore: Delete Error",a),a}}async migrateFromLocalStorage(s){const a=`iso_kb_content_${s}`,n=`iso_kb_name_${s}`,r=localStorage.getItem(a),l=localStorage.getItem(n);return r&&l?(console.log(`KnowledgeStore: Migrating ${s} from LocalStorage to IndexedDB...`),await this.saveDocument(s,l,r),localStorage.removeItem(a),localStorage.removeItem(n),!0):!1}}const ft=new Kr,Hr=({standard:t,selectedClauses:s,matrixData:a,setMatrixData:n})=>{const[r,l]=d.useState([]),u=d.useMemo(()=>{const v=[],m=N=>{N.forEach(y=>{v.push(y),y.subClauses&&m(y.subClauses)})};return t.groups.forEach(N=>m(N.clauses)),v},[t]);d.useEffect(()=>{n(v=>{const m={...v};let N=!1;return s.forEach(y=>{if(!m[y]){const E=u.find(L=>L.id===y);if(E){const L=E.description||"",D=L.length>50?L.split(/(?:\. |\n)/).filter(R=>R.trim().length>5):[L];m[y]=D.map((R,G)=>({id:`${y}_req_${G}`,requirement:R.trim(),evidenceInput:"",status:"pending"})),N=!0}}}),N?(s.length>0&&r.length===0&&l([s[0]]),m):v})},[s,u,n]);const p=(v,m,N)=>{n(y=>({...y,[v]:y[v].map(E=>E.id===m?{...E,evidenceInput:N,status:N.trim()?"supplied":"pending"}:E)}))},x=()=>{const v=bt(a,s);v?(jt(v),alert("Matrix data copied to clipboard in Markdown format!")):alert("Matrix is empty. Please fill in some evidence first.")},j=v=>{l(m=>m.includes(v)?m.filter(N=>N!==v):[...m,v])};return s.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 bg-gray-50/50 dark:bg-slate-900/50 rounded-3xl border border-dashed border-gray-200 dark:border-slate-800",children:[e.jsx(g,{name:"LayoutList",size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-sm font-medium",children:"Select clauses from the sidebar to start mapping evidence."})]}):e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsx("div",{className:"flex-shrink-0 flex justify-end mb-2 px-1",children:e.jsxs("button",{onClick:x,className:"text-[10px] font-bold text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 flex items-center gap-1 bg-white dark:bg-slate-800 px-2 py-1 rounded shadow-sm border border-gray-100 dark:border-slate-700 hover:border-indigo-200 transition-colors",title:"Copy Matrix content as Markdown table",children:[e.jsx(g,{name:"Copy",size:12})," Copy Matrix Table"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-4 p-1 pb-10",children:s.map(v=>{const m=u.find(D=>D.id===v),N=a[v]||[],y=r.includes(v);if(!m)return null;const E=N.filter(D=>D.status==="supplied").length,L=Math.round(E/(N.length||1)*100);return e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-slate-800 shadow-sm overflow-hidden transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50/80 dark:bg-slate-800/50 cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",onClick:()=>j(v),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-black text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded border border-indigo-100 dark:border-indigo-800/50",children:m.code}),e.jsx("h4",{className:"text-xs font-bold text-slate-700 dark:text-slate-200",children:m.title})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-1.5 bg-gray-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${L===100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${L}%`}})}),e.jsx(g,{name:y?"ChevronUp":"ChevronDown",size:14,className:"text-slate-400"})]})]}),y&&e.jsxs("div",{className:"p-3 border-t border-gray-100 dark:border-slate-800",children:[e.jsxs("div",{className:"grid grid-cols-[1fr_1.5fr] gap-4 mb-2 px-2",children:[e.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-wider",children:"Requirement Breakdown"}),e.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-wider",children:"Verified Evidence"})]}),e.jsx("div",{className:"space-y-3",children:N.map(D=>e.jsxs("div",{className:"grid grid-cols-[1fr_1.5fr] gap-4 items-start p-2 hover:bg-gray-50 dark:hover:bg-slate-800/30 rounded-lg transition-colors group",children:[e.jsx("div",{className:"text-[11px] text-slate-600 dark:text-slate-300 font-medium leading-relaxed pt-1",children:D.requirement}),e.jsx("textarea",{rows:2,placeholder:"e.g. Reviewed Log #123, Interviewed Mr. A...",className:"w-full bg-gray-50 dark:bg-slate-950 border border-gray-200 dark:border-slate-700 rounded-lg p-2 text-xs text-slate-800 dark:text-white outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500/20 transition-all resize-y min-h-[50px] shadow-sm",value:D.evidenceInput,onChange:R=>p(v,D.id,R.target.value)})]},D.id))})]})]},v)})})]})},qr=({evidence:t,setEvidence:s,uploadedFiles:a,setUploadedFiles:n,onOcrProcess:r,isOcrLoading:l,onAnalyze:u,isReadyForAnalysis:p,isAnalyzeLoading:x,analyzeTooltip:j,onExport:v,evidenceLanguage:m,setEvidenceLanguage:N,textareaRef:y,tags:E=[],onAddTag:L,selectedClauses:D=[],standards:R,standardKey:G,matrixData:C,setMatrixData:P})=>{const[W,I]=d.useState(!1),[z,ne]=d.useState(!1),[O,F]=d.useState("document"),K=d.useRef(null),k=d.useRef(null),[M,V]=d.useState(null),H=()=>{var S;if(z)(S=k.current)==null||S.stop(),ne(!1);else{const _=window.SpeechRecognition||window.webkitSpeechRecognition;if(!_){alert("Voice-to-Text not supported in this browser.");return}const $=new _;$.continuous=!0,$.interimResults=!0,$.lang=m==="vi"?"vi-VN":"en-US",$.onresult=w=>{let Y="",ie="";for(let ee=w.resultIndex;ee<w.results.length;++ee)w.results[ee].isFinal?ie+=w.results[ee][0].transcript:Y+=w.results[ee][0].transcript;ie&&s(ee=>ee+(ee?" ":"")+ie)},$.onerror=w=>{console.error("Speech Error",w.error),ne(!1),w.error==="not-allowed"&&alert("Microphone permission denied. Please check your browser settings.")},$.onend=()=>{z&&ne(!1)};try{$.start(),k.current=$,ne(!0)}catch(w){console.error("Failed to start recognition",w),ne(!1)}}},B=S=>{const _=S.map($=>({id:Math.random().toString(36).substr(2,9),file:$,status:"pending"}));n($=>[...$,..._])},J=S=>{if(O==="matrix"||!y.current)return;const _=y.current.selectionStart,$=y.current.selectionEnd;if(_!==$){const w=t.substring(_,$),Y=S.clientX,ie=S.clientY;V({x:Y,y:ie,text:w,start:_,end:$})}else V(null)},Z=S=>{M&&L&&(L({id:`tag_${Date.now()}`,clauseId:S,text:M.text,startIndex:M.start,endIndex:M.end,timestamp:Date.now()}),V(null),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},he=S=>{S.preventDefault(),I(!0)},ke=S=>{S.preventDefault(),I(!1)},Q=S=>{S.preventDefault(),I(!1),S.dataTransfer.files&&S.dataTransfer.files.length>0&&B(Array.from(S.dataTransfer.files))},ye=S=>{S.clipboardData.files&&S.clipboardData.files.length>0&&(S.preventDefault(),B(Array.from(S.clipboardData.files)))},Ee=S=>{n(_=>_.filter($=>$.id!==S))};return e.jsxs("div",{className:"h-full flex flex-col gap-2 md:gap-4 animate-fade-in-up relative",children:[e.jsx("div",{className:"flex justify-center -mt-2 mb-1",children:e.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-950 p-1 rounded-xl shadow-inner border border-gray-200 dark:border-slate-800",children:[e.jsxs("button",{onClick:()=>F("document"),className:`px-4 py-1.5 text-xs font-bold rounded-lg transition-all flex items-center gap-2 ${O==="document"?"bg-white dark:bg-slate-800 shadow-sm text-indigo-600 dark:text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:[e.jsx(g,{name:"FileText",size:14})," Document Mode"]}),e.jsxs("button",{onClick:()=>F("matrix"),className:`px-4 py-1.5 text-xs font-bold rounded-lg transition-all flex items-center gap-2 ${O==="matrix"?"bg-white dark:bg-slate-800 shadow-sm text-indigo-600 dark:text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:[e.jsx(g,{name:"LayoutList",size:14})," Evidence Matrix"]})]})}),e.jsxs("div",{className:"flex-1 flex flex-col gap-2 md:gap-4 min-h-0 relative",children:[M&&D.length>0&&O==="document"&&e.jsxs("div",{className:"fixed z-[9999] bg-slate-900/90 backdrop-blur-md text-white p-2.5 rounded-xl shadow-2xl flex flex-col gap-2 animate-in zoom-in-95 duration-200 border border-slate-700/50 ring-1 ring-white/10 max-w-[200px]",style:{top:M.y-120,left:Math.min(M.x-100,window.innerWidth-220)},children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700/50 pb-1.5 mb-1",children:[e.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-300 flex items-center gap-1",children:[e.jsx(g,{name:"Tag",size:10})," Tag As:"]}),e.jsx("button",{onClick:()=>V(null),className:"text-slate-400 hover:text-white bg-white/10 rounded-full p-0.5",children:e.jsx(g,{name:"X",size:10})})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5 justify-start max-h-[150px] overflow-y-auto custom-scrollbar",children:D.map(S=>e.jsx("button",{onClick:()=>Z(S),className:"text-[10px] font-mono font-bold bg-indigo-600 hover:bg-indigo-500 text-white px-2 py-1 rounded-lg transition-all active:scale-95 shadow-sm border border-indigo-500 hover:border-indigo-400",children:S},S))}),e.jsx("div",{className:"absolute bottom-[-6px] left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-900/90 rotate-45 border-r border-b border-slate-700/50"})]}),e.jsxs("div",{className:`flex-1 bg-white dark:bg-slate-900 rounded-3xl shadow-sm border overflow-hidden flex flex-col relative group transition-all duration-300 dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_4px_6px_-1px_rgba(0,0,0,0.5)] ${W?"border-indigo-500 ring-4 ring-indigo-500/20 bg-indigo-50/10":"border-gray-100 dark:border-transparent"}`,onDragOver:he,onDragLeave:ke,onDrop:Q,children:[W&&e.jsxs("div",{className:"absolute inset-0 bg-indigo-500/10 backdrop-blur-[2px] z-50 flex flex-col items-center justify-center pointer-events-none animate-in fade-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"p-6 rounded-full bg-white dark:bg-slate-900 shadow-2xl border-4 border-dashed border-indigo-500",children:e.jsx(g,{name:"UploadCloud",size:48,className:"text-indigo-600 animate-bounce"})}),e.jsxs("h3",{className:"mt-4 text-xl font-black text-indigo-700 dark:text-indigo-400 uppercase tracking-widest text-center",children:["Drop Files to Extract",e.jsx("br",{}),e.jsx("span",{className:"text-sm font-normal normal-case",children:"(Images, PDF, TXT)"})]})]}),O==="document"?e.jsx("textarea",{ref:y,className:"flex-1 w-full h-full p-4 pb-6 bg-transparent resize-none focus:outline-none text-slate-700 dark:text-slate-300 font-medium text-sm leading-relaxed text-justify break-words whitespace-pre-wrap selection:bg-indigo-200 dark:selection:bg-indigo-900/60",placeholder:"Paste audit evidence here or use Voice Dictation...",value:t,onChange:S=>s(S.target.value),onPaste:ye,onMouseUp:J}):R&&G&&R[G]&&C&&P?e.jsx("div",{className:"flex-1 w-full h-full bg-gray-50/30 dark:bg-slate-950/30 p-2",children:e.jsx(Hr,{standard:R[G],selectedClauses:D,matrixData:C,setMatrixData:P})}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-400",children:"Please select a Standard to use Matrix Mode."}),E.length>0&&O==="document"&&e.jsx("div",{className:"absolute bottom-4 right-4 pointer-events-none opacity-60 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm border border-indigo-100 dark:border-indigo-900/50 text-indigo-600 dark:text-indigo-300 text-[10px] font-bold px-3 py-1.5 rounded-full shadow-lg flex items-center gap-2",children:[e.jsx(g,{name:"Tag",size:12}),E.length," Evidence Tags"]})})]}),a.length>0&&e.jsx("div",{className:"flex-shrink-0 p-3 bg-gray-50 dark:bg-slate-900 border border-gray-200 dark:border-white/5 rounded-2xl animate-in slide-in-from-bottom-5 duration-300 dark:shadow-inner",children:e.jsxs("div",{className:"flex gap-3 overflow-x-auto custom-scrollbar pb-2",children:[a.map(S=>e.jsxs("div",{className:`relative group flex-shrink-0 w-24 h-24 bg-white dark:bg-slate-800 rounded-xl shadow-sm border overflow-hidden transition-all duration-300 dark:shadow-lg ${S.status==="error"?"border-red-500 ring-2 ring-red-500/20":"border-gray-100 dark:border-white/5"}`,children:[S.file.type.startsWith("image/")?e.jsx("img",{src:URL.createObjectURL(S.file),alt:"preview",className:`w-full h-full object-cover transition-opacity ${S.status==="processing"?"opacity-30":"opacity-80 group-hover:opacity-100"}`}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-indigo-50 dark:bg-indigo-900/20 p-2 text-center",children:[e.jsx(g,{name:S.file.type==="application/pdf"?"FileText":"Book",size:24,className:"text-indigo-600 dark:text-indigo-400 mb-1"}),e.jsx("span",{className:"text-[8px] font-bold text-indigo-700 dark:text-indigo-300 truncate w-full",children:S.file.name})]}),S.status==="processing"&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/40 dark:bg-black/40",children:e.jsx(g,{name:"Loader",className:"animate-spin text-indigo-600",size:24})}),S.status==="success"&&e.jsx("div",{className:"absolute top-1 right-1 bg-emerald-500 text-white rounded-full p-0.5 shadow-sm",children:e.jsx(g,{name:"CheckThick",size:10})}),S.status==="error"&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-50/80 dark:bg-red-950/80 p-1 text-center",children:[e.jsx(g,{name:"AlertCircle",size:20,className:"text-red-600"}),e.jsx("span",{className:"text-[7px] font-black text-red-600 uppercase leading-tight mt-1",children:S.error||"Li"})]}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center z-20",children:e.jsx("button",{onClick:()=>Ee(S.id),className:"bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 shadow-lg transform scale-90 hover:scale-110 transition-all duration-200",children:e.jsx(g,{name:"X",size:14})})})]},S.id)),e.jsx("div",{className:"flex-shrink-0 w-24 h-24 flex items-center justify-center",children:e.jsxs("button",{onClick:r,disabled:l||!a.some(S=>S.status==="pending"||S.status==="error"),className:"w-full h-full bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow-lg shadow-indigo-500/30 flex flex-col items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-50 hover:scale-105 duration-300",children:[l?e.jsx(g,{name:"Loader",className:"animate-spin",size:24}):e.jsx(g,{name:"ScanText",size:24}),e.jsx("span",{className:"text-[10px] font-bold",children:"Process"})]})})]})})]}),e.jsxs("div",{className:"flex-shrink-0 flex flex-row items-center md:justify-end gap-2 md:gap-3 w-full pt-2",children:[e.jsxs("div",{className:"flex-none w-[52px] md:w-auto",children:[e.jsx("input",{type:"file",ref:K,className:"hidden",accept:"image/*,application/pdf,text/plain",multiple:!0,onChange:S=>S.target.files&&B(Array.from(S.target.files))}),e.jsxs("button",{onClick:()=>{var S;return(S=K.current)==null?void 0:S.click()},className:`w-full h-[52px] md:w-auto md:px-4 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm border whitespace-nowrap ${a.length>0?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 text-indigo-600 dark:text-indigo-400":"bg-white dark:bg-slate-800 border-gray-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:border-indigo-500"}`,title:"Upload Files",children:[e.jsx(g,{name:a.length>0?"Demo1_MultiFiles":"Demo8_GridPlus",size:20}),e.jsx("span",{className:"hidden md:inline",children:"Upload"})]})]}),e.jsxs("button",{onClick:H,className:`flex-none w-[52px] md:w-auto md:px-4 h-[52px] rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm border whitespace-nowrap ${z?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 animate-pulse":"bg-white dark:bg-slate-800 border-gray-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:border-indigo-500"}`,title:z?"Stop Recording":"Voice Dictation",children:[e.jsx(g,{name:"Mic",size:20,className:z?"animate-pulse":""}),e.jsx("span",{className:"hidden md:inline",children:z?"Listening...":"Dictate"})]}),e.jsxs("button",{onClick:u,disabled:!p,title:j,className:`flex-1 md:flex-none md:w-auto md:px-6 h-[52px] rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg whitespace-nowrap ${p?"btn-shrimp text-white active:scale-95":"bg-gray-200 dark:bg-slate-800 text-slate-400 dark:text-slate-600 opacity-70 cursor-not-allowed border border-transparent"}`,children:[x?e.jsx(gr,{className:"text-white"}):e.jsx(g,{name:"Wand2",size:20,className:"hidden md:block"}),e.jsx("span",{className:"inline text-xs uppercase tracking-wider",children:"Analyze"})]}),e.jsxs("button",{onClick:()=>v("evidence",m),disabled:!t||!t.trim(),className:"flex-none md:w-auto px-3 md:px-4 h-[52px] bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm disabled:opacity-50 whitespace-nowrap dark:shadow-md",children:[e.jsx(g,{name:"Download"}),e.jsx("span",{className:"hidden md:inline",children:"Export"}),e.jsxs("div",{className:"lang-pill-container ml-1",children:[e.jsx("span",{onClick:S=>{S.stopPropagation(),N("en")},className:`lang-pill-btn ${m==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:S=>{S.stopPropagation(),N("vi")},className:`lang-pill-btn ${m==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]})]})]})},Jr=({analysisResult:t,setAnalysisResult:s,selectedFindings:a,setSelectedFindings:n,isAnalyzeLoading:r,loadingMessage:l,currentAnalyzingClause:u,viewMode:p,setViewMode:x,focusedFindingIndex:j,setFocusedFindingIndex:v,onExport:m,notesLanguage:N,setNotesLanguage:y})=>{const E=d.useRef(null),L=d.useRef([]);d.useEffect(()=>{p==="list"&&E.current&&(E.current.scrollTop=E.current.scrollHeight)},[t==null?void 0:t.length,p]);const D=(C,P,W)=>{if(s(I=>{if(!I)return null;const z=[...I];return z[C]={...z[C],[P]:W},z}),P==="status"&&t){const I=C+1;I<t.length&&L.current[I]&&setTimeout(()=>{var z;return(z=L.current[I])==null?void 0:z.scrollIntoView({behavior:"smooth",block:"center"})},100)}},R=C=>{switch(C){case"COMPLIANT":return{bg:"bg-emerald-500",text:"text-emerald-700 dark:text-emerald-300",pill:"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300",border:"border-emerald-500",headerText:"text-emerald-600 dark:text-emerald-400 border-emerald-600 dark:border-emerald-400"};case"NC_MAJOR":return{bg:"bg-red-600",text:"text-red-700 dark:text-red-300",pill:"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300",border:"border-red-600",headerText:"text-red-600 dark:text-red-400 border-red-600 dark:border-red-400"};case"NC_MINOR":return{bg:"bg-orange-500",text:"text-orange-700 dark:text-orange-300",pill:"bg-orange-100 dark:bg-orange-900/40 text-orange-700 dark:text-orange-300",border:"border-orange-500",headerText:"text-orange-500 dark:text-orange-400 border-orange-500 dark:border-orange-400"};case"OFI":return{bg:"bg-blue-500",text:"text-blue-700 dark:text-blue-300",pill:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300",border:"border-blue-500",headerText:"text-blue-600 dark:text-blue-400 border-blue-600 dark:border-blue-400"};default:return{bg:"bg-slate-500",text:"text-slate-600",pill:"bg-slate-100 text-slate-500",border:"border-slate-300",headerText:"text-slate-500 border-slate-300"}}},G=(C,P,W=!1)=>{const I=R(C.status);return e.jsxs("div",{ref:W?null:z=>{L.current[P]=z},className:`group relative bg-white dark:bg-slate-900 rounded-lg p-3 border-y border-r border-l-[6px] transition-all duration-300 hover:shadow-md dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05)] ${I.border} ${a[C.clauseId]?"border-r-indigo-500 ring-1 ring-indigo-500/20":"border-r-gray-100 dark:border-r-transparent"} animate-in slide-in-from-bottom-2 fade-in fill-mode-backwards`,style:{animationDelay:`${P*50}ms`},onClick:()=>n(z=>({...z,[C.clauseId]:!z[C.clauseId]})),children:[e.jsx("div",{className:"absolute top-3 right-3 z-10",children:a[C.clauseId]?e.jsx("div",{className:"animate-in zoom-in spin-in-180 duration-300",children:e.jsx(g,{name:"CheckThick",size:22,className:"text-emerald-500 drop-shadow-sm"})}):e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-200 dark:border-slate-700 group-hover:border-indigo-300 transition-colors"})}),e.jsxs("div",{className:"pr-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-500 dark:text-slate-400 bg-gray-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:C.clauseId}),e.jsx("div",{className:"relative group/badge",onClick:z=>z.stopPropagation(),children:e.jsxs("select",{value:C.status,onChange:z=>D(P,"status",z.target.value),className:`appearance-none cursor-pointer text-[9px] font-black uppercase tracking-wider px-2 py-0.5 rounded-full ${I.pill} border-none outline-none hover:brightness-95 text-center transition-all`,children:[e.jsx("option",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white",value:"COMPLIANT",children:"COMPLIANT"}),e.jsx("option",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white",value:"NC_MINOR",children:"MINOR"}),e.jsx("option",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white",value:"NC_MAJOR",children:"MAJOR"}),e.jsx("option",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white",value:"OFI",children:"OFI"})]})}),C.crossRefs&&C.crossRefs.length>0&&e.jsx("div",{className:"flex gap-1",children:C.crossRefs.map((z,ne)=>e.jsx("span",{className:"text-[8px] border border-indigo-200 dark:border-indigo-800 text-indigo-500 dark:text-indigo-400 px-1.5 py-0.5 rounded-md font-mono bg-indigo-50 dark:bg-indigo-900/10",children:z},ne))})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-950/50 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[e.jsx("strong",{className:"block text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider mb-1",children:"Evidence:"}),e.jsx("p",{className:"text-xs text-slate-700 dark:text-slate-300 leading-relaxed",children:C.evidence})]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-3 rounded-xl border-2 border-slate-100 dark:border-slate-800 hover:border-indigo-200 dark:hover:border-indigo-900/50 transition-colors group-focus-within:border-indigo-500 shadow-sm",onClick:z=>z.stopPropagation(),children:[e.jsx("strong",{className:"block text-[10px] font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wider mb-1",children:"Conclusion:"}),e.jsx("textarea",{value:C.reason,onChange:z=>D(P,"reason",z.target.value),className:"w-full bg-transparent outline-none text-xs text-slate-800 dark:text-slate-200 leading-relaxed resize-none h-auto min-h-[60px]",placeholder:"Enter conclusion..."})]})}),C.suggestion&&e.jsxs("div",{className:"flex gap-1.5 items-start",children:[e.jsx(g,{name:"Lightbulb",size:12,className:"text-amber-500 mt-0.5 shrink-0"}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 italic leading-tight",children:C.suggestion})]})]})]},P)};return e.jsxs("div",{className:"h-full flex flex-col gap-2 md:gap-4 animate-fade-in-up",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-1",ref:E,children:[!t&&!r&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 opacity-60",children:[e.jsx(g,{name:"Wand2",size:48,className:"mb-4 text-gray-200 dark:text-slate-700"}),e.jsx("p",{children:"No analysis results yet."})]}),r&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative w-24 h-24 mb-6",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-indigo-100 dark:border-indigo-900/50 rounded-full opacity-50"}),e.jsx("div",{className:"absolute inset-0 border-t-4 border-indigo-500 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-4 border-r-4 border-purple-500 rounded-full animate-spin-reverse opacity-70"})]}),e.jsx("h3",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 to-purple-500 animate-pulse mb-2",children:"AI Analysis In Progress"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium mb-1",children:l}),e.jsx("p",{className:"text-xs text-slate-400 font-mono",children:u&&`Processing: [${u}]`})]}),t&&(p==="list"?e.jsx("div",{className:"space-y-3",children:t.map((C,P)=>G(C,P))}):e.jsxs("div",{className:"flex flex-col h-full gap-4",children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col bg-gray-50 dark:bg-slate-900/50 rounded-xl border border-gray-100 dark:border-slate-800 overflow-hidden max-h-[40vh]",children:[e.jsxs("div",{className:"grid grid-cols-[60px_1fr_1fr_1fr_1fr] gap-1 p-2 border-b border-gray-200 dark:border-slate-800 bg-white dark:bg-slate-900 sticky top-0 z-10",children:[e.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest text-center",children:"Clause"}),e.jsx("div",{className:"text-[10px] font-bold text-red-500 uppercase tracking-widest text-center",children:"Major"}),e.jsx("div",{className:"text-[10px] font-bold text-orange-500 uppercase tracking-widest text-center",children:"Minor"}),e.jsx("div",{className:"text-[10px] font-bold text-blue-500 uppercase tracking-widest text-center",children:"OFI"}),e.jsx("div",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-widest text-center",children:"Comp"})]}),e.jsx("div",{className:"overflow-y-auto custom-scrollbar",children:t.map((C,P)=>{const W=j===P;return e.jsxs("div",{onClick:()=>v(P),className:`grid grid-cols-[60px_1fr_1fr_1fr_1fr] gap-1 py-1.5 border-b border-gray-100 dark:border-slate-800/50 cursor-pointer transition-colors ${W?"bg-indigo-50 dark:bg-indigo-900/20":"hover:bg-white dark:hover:bg-slate-800"}`,children:[e.jsx("div",{className:`flex items-center justify-center h-full w-full text-[10px] font-mono font-bold ${W?"text-indigo-600 dark:text-indigo-400":"text-slate-500 dark:text-slate-400"}`,children:C.clauseId}),e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:C.status==="NC_MAJOR"&&e.jsx("div",{className:"w-3 h-3 rounded bg-red-500 shadow-sm ring-1 ring-red-300 dark:ring-red-900"})}),e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:C.status==="NC_MINOR"&&e.jsx("div",{className:"w-3 h-3 rounded bg-orange-500 shadow-sm ring-1 ring-orange-300 dark:ring-orange-900"})}),e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:C.status==="OFI"&&e.jsx("div",{className:"w-3 h-3 rounded bg-blue-500 shadow-sm ring-1 ring-blue-300 dark:ring-blue-900"})}),e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:C.status==="COMPLIANT"&&e.jsx("div",{className:"w-3 h-3 rounded bg-emerald-500 shadow-sm ring-1 ring-emerald-300 dark:ring-emerald-900"})})]},P)})})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto custom-scrollbar bg-white dark:bg-slate-900 rounded-2xl border border-gray-100 dark:border-slate-800 p-2 shadow-inner",children:t[j]?G(t[j],j,!0):e.jsx("div",{className:"h-full flex items-center justify-center text-slate-400 italic text-xs",children:"Select a row above to view details"})})]}))]}),e.jsxs("div",{className:"flex-shrink-0 flex flex-row items-center md:justify-end gap-2 md:gap-3 w-full pt-2",children:[e.jsxs("div",{className:"flex-1 md:flex-none md:w-auto h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-xl p-1 flex items-center shadow-sm min-w-0 dark:shadow-md",children:[e.jsxs("button",{onClick:()=>x("list"),className:`flex-1 md:flex-none md:w-auto h-full px-3 rounded-lg flex items-center justify-center gap-2 transition-all whitespace-nowrap ${p==="list"?"bg-indigo-100 text-indigo-700 shadow-sm dark:bg-indigo-900/40 dark:text-indigo-300":"text-slate-400 hover:text-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700/50"}`,title:"List View",children:[e.jsx(g,{name:"LayoutList",size:18}),e.jsx("span",{className:"hidden md:inline text-xs font-bold",children:"List"})]}),e.jsxs("button",{onClick:()=>x("matrix"),className:`flex-1 md:flex-none md:w-auto h-full px-3 rounded-lg flex items-center justify-center gap-2 transition-all whitespace-nowrap ${p==="matrix"?"bg-indigo-100 text-indigo-700 shadow-sm dark:bg-indigo-900/40 dark:text-indigo-300":"text-slate-400 hover:text-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700/50"}`,title:"Matrix View",children:[e.jsx(g,{name:"Grid",size:18}),e.jsx("span",{className:"hidden md:inline text-xs font-bold",children:"Matrix"})]})]}),e.jsxs("button",{onClick:()=>m("notes",N),disabled:!t,className:"flex-none md:w-auto px-3 md:px-4 h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm disabled:opacity-50 whitespace-nowrap dark:shadow-md",children:[e.jsx(g,{name:"Download"}),e.jsx("span",{className:"hidden md:inline",children:"Export"}),e.jsxs("div",{className:"lang-pill-container",children:[e.jsx("span",{onClick:C=>{C.stopPropagation(),y("en")},className:`lang-pill-btn ${N==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:C=>{C.stopPropagation(),y("vi")},className:`lang-pill-btn ${N==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]})]})]})},Xr=({finalReportText:t,setFinalReportText:s,isReportLoading:a,loadingMessage:n,templateFileName:r,handleTemplateUpload:l,handleGenerateReport:u,isReadyToSynthesize:p,onExport:x,exportLanguage:j,setExportLanguage:v})=>e.jsxs("div",{className:"h-full flex flex-col gap-2 md:gap-4 animate-fade-in-up",children:[e.jsx("div",{className:"flex-1 bg-white dark:bg-slate-900 rounded-3xl shadow-sm border border-gray-100 dark:border-transparent overflow-hidden flex flex-col dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_4px_6px_-1px_rgba(0,0,0,0.5)]",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("textarea",{className:"w-full h-full p-4 resize-none bg-transparent focus:outline-none text-slate-700 dark:text-slate-300 text-sm leading-relaxed font-mono",value:t||"",onChange:m=>s(m.target.value),placeholder:"The final synthesized audit report will appear here..."}),!t&&!a&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none opacity-40",children:[e.jsx(g,{name:"FileText",size:48,className:"text-slate-300 dark:text-slate-600 mb-2"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Ready to generate report"})]}),a&&e.jsx(mr,{message:n})]})}),e.jsxs("div",{className:"flex-shrink-0 flex flex-row items-center md:justify-end gap-2 md:gap-3 w-full pt-2",children:[e.jsxs("label",{className:"flex-none w-[52px] md:w-auto px-0 md:px-4 h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 cursor-pointer transition-all duration-300 active:scale-95 shadow-sm group whitespace-nowrap dark:shadow-md",title:r||"Upload Template",children:[e.jsx(g,{name:"UploadCloud",size:20,className:r?"text-emerald-500":""}),e.jsx("span",{className:"hidden lg:inline",children:r?"Template Loaded":"Upload Template"}),e.jsx("input",{type:"file",accept:".txt,.docx",className:"hidden",onChange:l})]}),e.jsxs("button",{onClick:u,disabled:!p,className:`flex-1 md:flex-none md:w-auto md:px-6 h-[52px] rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg whitespace-nowrap ${p?"btn-shrimp text-white active:scale-95 border-indigo-700":"bg-gray-200 dark:bg-slate-800 text-slate-400 dark:text-slate-600 opacity-70 cursor-not-allowed border-transparent"}`,title:"Synthesize Report",children:[a?e.jsx(g,{name:"Loader",className:"animate-spin text-white",size:20}):e.jsx(g,{name:"Wand2",size:20,className:"hidden md:block"}),e.jsx("span",{className:"inline text-xs uppercase tracking-wider",children:"Synthesize"})]}),e.jsxs("button",{onClick:()=>x("report",j),disabled:!t,className:"flex-none md:w-auto px-3 md:px-4 h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-950 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm disabled:opacity-50 whitespace-nowrap dark:shadow-md",children:[e.jsx(g,{name:"Download"}),e.jsx("span",{className:"hidden md:inline",children:"Export"}),e.jsxs("div",{className:"lang-pill-container",children:[e.jsx("span",{onClick:m=>{m.stopPropagation(),v("en")},className:`lang-pill-btn ${j==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:m=>{m.stopPropagation(),v("vi")},className:`lang-pill-btn ${j==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]})]})]}),Zr=({isOpen:t,onClose:s,apiKeys:a,newKeyInput:n,setNewKeyInput:r,isCheckingKey:l,handleAddKey:u,activeKeyId:p,editingKeyId:x,editLabelInput:j,setEditLabelInput:v,handleSaveLabel:m,handleStartEdit:N,handleRefreshStatus:y,handleDeleteKey:E,isAutoCheckEnabled:L,toggleAutoCheck:D})=>{const[R,G]=d.useState("keys"),[C,P]=d.useState("ANALYSIS"),[W,I]=d.useState("");d.useEffect(()=>{t&&R==="prompts"&&I(Te.getPrompt(C).template)},[t,R,C]);const z=()=>{Te.updatePrompt(C,W);const O=document.getElementById("save-prompt-btn");O&&(O.innerText="Saved!",setTimeout(()=>O.innerText="Save Prompt",1e3))},ne=()=>{Te.resetToDefault(C),I(Te.getPrompt(C).template)};return e.jsxs(kt,{isOpen:t,title:"Settings & Core Configuration",onClose:s,children:[e.jsxs("div",{className:"flex gap-2 mb-4 border-b border-gray-100 dark:border-slate-800 pb-2",children:[e.jsx("button",{onClick:()=>G("keys"),className:`px-4 py-2 text-xs font-bold rounded-lg transition-colors ${R==="keys"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":"text-slate-500 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:"API Keys"}),e.jsx("button",{onClick:()=>G("prompts"),className:`px-4 py-2 text-xs font-bold rounded-lg transition-colors ${R==="prompts"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":"text-slate-500 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:"AI Prompts"})]}),R==="keys"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-4 rounded-2xl border border-gray-100 dark:border-slate-700 dark:shadow-inner",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-3",children:"API Key Pool Management"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"password",placeholder:"Enter Google Gemini API Key...",className:"flex-1 p-2.5 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-600 rounded-xl text-xs outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500/50 text-slate-800 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 transition-all dark:shadow-[inset_0_1px_2px_rgba(0,0,0,0.5)]",value:n,onChange:O=>r(O.target.value.trim()),onBlur:()=>r(n.trim())}),e.jsx("button",{onClick:u,disabled:l,className:"p-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold text-xs disabled:opacity-50 transition-colors shadow-sm",children:l?e.jsx(g,{name:"Loader",className:"animate-spin"}):e.jsx(g,{name:"Plus"})})]}),e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:[a.map(O=>{let F="bg-slate-300",K="Unknown Status";return O.status==="valid"?(F="bg-emerald-500 shadow-emerald-500/50",K="Active & Working"):O.status==="checking"?(F="bg-yellow-500 animate-pulse",K="Validating..."):O.status==="invalid"?(F="bg-red-500 shadow-red-500/50",K="Invalid / Auth Failed"):O.status==="quota_exceeded"?(F="bg-orange-500",K="Quota Exceeded"):O.status==="referrer_error"?(F="bg-purple-500",K="Blocked by Referrer Restriction"):O.status==="unknown"&&(F="bg-slate-400 border border-slate-500",K="Network Error / Unknown"),e.jsxs("div",{className:`flex items-center justify-between p-2.5 rounded-xl border transition-all duration-200 ${O.id===p?"bg-indigo-50 border-indigo-200 dark:bg-indigo-500/20 dark:border-indigo-500/50 shadow-sm":"bg-white border-gray-100 dark:bg-slate-900 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-slate-500"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsxs("div",{className:"relative group/status",children:[e.jsx("div",{className:`w-2.5 h-2.5 flex-shrink-0 rounded-full shadow-sm ring-1 ring-white/10 cursor-help ${F}`}),e.jsx("div",{className:"absolute left-4 top-0 bg-slate-800 text-white text-[10px] px-2 py-1 rounded shadow-lg whitespace-nowrap opacity-0 group-hover/status:opacity-100 pointer-events-none transition-opacity z-50",children:K})]}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[x===O.id?e.jsx("input",{autoFocus:!0,className:"text-xs font-bold bg-white dark:bg-slate-950 text-slate-900 dark:text-white border-b-2 border-indigo-500 outline-none w-32 px-1 rounded-t",value:j,onChange:k=>v(k.target.value),onBlur:m,onKeyDown:k=>k.key==="Enter"&&m()}):e.jsx("span",{onClick:()=>N(O),className:`text-xs font-bold truncate cursor-pointer transition-colors ${O.id===p?"text-indigo-700 dark:text-indigo-200":"text-slate-700 dark:text-slate-200 hover:text-indigo-500 dark:hover:text-indigo-400"}`,children:O.label}),e.jsxs("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-mono truncate",children:[O.key.substr(0,8),"..."]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[O.activeModel&&e.jsx("span",{className:"text-[9px] bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 px-1.5 py-0.5 rounded text-slate-500 dark:text-slate-400 font-medium hidden sm:inline",children:O.activeModel.replace("gemini-","").replace("-preview","")}),e.jsx("button",{onClick:()=>y(O.id),disabled:O.status==="checking",className:`p-1.5 text-slate-400 hover:text-indigo-500 dark:text-slate-500 dark:hover:text-indigo-400 transition-colors ${O.status==="checking"?"animate-spin":""}`,title:"Re-check Status",children:e.jsx(g,{name:O.status==="checking"?"Loader":"RefreshCw",size:14})}),e.jsx("button",{onClick:k=>{k.stopPropagation(),E(O.id)},className:"p-1.5 text-slate-400 hover:text-red-500 dark:text-slate-500 dark:hover:text-red-400 transition-colors",title:"Delete Key",children:e.jsx(g,{name:"Trash2",size:14})})]})]},O.id)}),a.length===0&&e.jsx("div",{className:"text-center p-4 text-slate-400 text-xs italic",children:"No API Keys found. Add one above to start."})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-900 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm dark:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 rounded-xl",children:e.jsx(g,{name:"Session10_Pulse",size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-white",children:"Auto Health Check"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Periodically validate API keys in background"})]})]}),e.jsx("button",{onClick:()=>D(!L),className:`w-10 h-5 rounded-full transition-colors relative ${L?"bg-emerald-500":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all shadow-sm ${L?"left-6":"left-1"}`})})]})]}),R==="prompts"&&e.jsxs("div",{className:"flex flex-col h-[60vh]",children:[e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{onClick:()=>P("ANALYSIS"),className:`flex-1 py-2 text-xs font-bold rounded-lg border ${C==="ANALYSIS"?"bg-indigo-100 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-200":"border-gray-200 dark:border-slate-700 text-slate-500"}`,children:"Analysis Logic"}),e.jsx("button",{onClick:()=>P("REPORT"),className:`flex-1 py-2 text-xs font-bold rounded-lg border ${C==="REPORT"?"bg-indigo-100 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-200":"border-gray-200 dark:border-slate-700 text-slate-500"}`,children:"Report Format"})]}),e.jsx("div",{className:"flex-1 relative border border-gray-200 dark:border-slate-700 rounded-xl overflow-hidden",children:e.jsx("textarea",{className:"w-full h-full p-4 bg-gray-50 dark:bg-slate-950 text-xs font-mono text-slate-700 dark:text-slate-300 resize-none outline-none leading-relaxed",value:W,onChange:O=>I(O.target.value)})}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("button",{onClick:ne,className:"text-xs text-slate-400 hover:text-red-500 underline",children:"Reset to Default"}),e.jsx("button",{id:"save-prompt-btn",onClick:z,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-xs shadow-md transition-all active:scale-95",children:"Save Prompt"})]}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-2 italic",children:["Variables like ","{{STANDARD_NAME}}"," will be dynamically replaced."]})]})]})},Qr=({exportState:t,setExportState:s,rescueKey:a,setRescueKey:n,handleResumeExport:r,isRescuing:l,onClose:u,onSkip:p})=>t.isOpen?e.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-800 p-6 animate-zoom-in-spring",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[t.isFinished?e.jsx(g,{name:"CheckCircle2",className:"text-emerald-500",size:24}):e.jsx(g,{name:"Loader",className:"animate-spin text-indigo-500",size:24}),t.isFinished?"Export Complete":"Processing Export..."]}),t.error?e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-xl border border-red-100 dark:border-red-800 mb-4 animate-shake",children:[e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[e.jsx(g,{name:"AlertCircle",size:16})," Process Paused"]}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300 mb-3 leading-relaxed font-mono bg-white/50 dark:bg-black/20 p-2 rounded border border-red-100 dark:border-red-800/50 break-words max-h-24 overflow-y-auto",children:t.error}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"password",placeholder:"Paste Emergency Google AI Key...",className:"w-full p-2 text-xs rounded-lg border border-red-200 dark:border-red-800 bg-white dark:bg-slate-950 outline-none focus:border-red-500",value:a,onChange:x=>n(x.target.value)})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{onClick:r,disabled:l||!a.trim(),className:"w-full py-2 text-xs font-bold bg-red-500 text-white rounded-lg hover:bg-red-600 flex items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:active:scale-100",children:[l?e.jsx(g,{name:"Loader",className:"animate-spin",size:12}):e.jsx(g,{name:"Zap",size:12}),"Use Rescue Key"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:p,className:"flex-1 py-2 text-xs font-bold bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors flex items-center justify-center gap-1",title:"Skip translation for this chunk and use original text",children:[e.jsx(g,{name:"Minus",size:12})," Skip / Use Original"]}),e.jsx("button",{onClick:()=>s(x=>({...x,isOpen:!1})),className:"px-4 py-2 text-xs font-bold text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:"Cancel"})]})]})]}):e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"relative pt-1",children:[e.jsxs("div",{className:"flex mb-2 items-center justify-between",children:[e.jsx("div",{children:e.jsx("span",{className:"text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-indigo-600 bg-indigo-200 dark:text-indigo-200 dark:bg-indigo-900/50",children:t.isFinished?"Done":"Translating"})}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"text-xs font-semibold inline-block text-indigo-600 dark:text-indigo-400",children:[Math.round(t.processedChunksCount/Math.max(t.totalChunks,1)*100),"%"]})})]}),e.jsx("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-indigo-100 dark:bg-slate-800",children:e.jsx("div",{style:{width:`${Math.round(t.processedChunksCount/Math.max(t.totalChunks,1)*100)}%`},className:`shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center transition-all duration-500 ease-out ${t.isFinished?"bg-emerald-500":"bg-indigo-500"}`})})]}),e.jsx("div",{className:"text-center space-y-1",children:t.isFinished?e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-bold",children:"File has been downloaded successfully."}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-mono",children:["Processing Chunk ",Math.min(t.processedChunksCount+1,t.totalChunks)," of ",t.totalChunks]}),e.jsxs("p",{className:"text-[10px] text-slate-400 italic",children:["Target Language: ",t.targetLang==="vi"?"Vietnamese":"English"]})]})}),t.isFinished&&e.jsx("div",{className:"flex justify-center pt-2",children:e.jsxs("button",{onClick:u,className:"px-6 py-3 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-xl font-bold text-sm transition-all active:scale-95 flex items-center gap-2",children:[e.jsx(g,{name:"X",size:16}),"Close Window"]})})]})]})}):null,Yr=({isOpen:t,onClose:s,onAdd:a})=>{const[n,r]=d.useState(""),[l,u]=d.useState(null),p=d.useRef(null),x=()=>{n.trim()&&(a(n.trim(),l),r(""),u(null))},j=v=>{if(v.target.files&&v.target.files[0]&&(u(v.target.files[0]),!n)){const m=v.target.files[0].name;r(Rt(m.replace(/\.[^/.]+$/,"")).replace(/_/g," "))}};return e.jsx(kt,{isOpen:t,title:"Define New Standard",onClose:s,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-2xl border border-indigo-100 dark:border-indigo-800",children:e.jsxs("p",{className:"text-xs text-indigo-800 dark:text-indigo-300 leading-relaxed",children:["Create a custom standard entry. For best results, ",e.jsx("strong",{children:"attach a PDF/DOCX"}),' containing the full standard text. The AI will use this as the "Ground Truth" for citations.']})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase",children:["Standard Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",autoFocus:!0,className:"w-full p-3 pl-10 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-700 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all text-slate-800 dark:text-white",placeholder:"e.g. ISO 45001:2018 (OH&S)",value:n,onChange:v=>r(v.target.value),onKeyDown:v=>v.key==="Enter"&&x()}),e.jsx("div",{className:"absolute left-3 top-3 text-slate-400",children:e.jsx(g,{name:"Book",size:18})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Source Document (Optional)"}),e.jsxs("div",{onClick:()=>{var v;return(v=p.current)==null?void 0:v.click()},className:`group relative flex items-center justify-center border-2 border-dashed rounded-xl p-6 cursor-pointer transition-all ${l?"border-emerald-400 bg-emerald-50 dark:bg-emerald-900/10":"border-gray-200 dark:border-slate-700 hover:border-indigo-400 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:[e.jsx("input",{type:"file",ref:p,className:"hidden",accept:".pdf,.docx,.txt",onChange:j}),l?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-2 shadow-sm",children:e.jsx(g,{name:"CheckThick",size:20})}),e.jsx("p",{className:"text-sm font-bold text-emerald-700 dark:text-emerald-400 truncate max-w-[250px]",children:l.name}),e.jsx("p",{className:"text-[10px] text-emerald-600/70",children:"Click to change"})]}):e.jsxs("div",{className:"text-center text-slate-400 group-hover:text-indigo-500 transition-colors",children:[e.jsx(g,{name:"UploadCloud",size:28,className:"mx-auto mb-2"}),e.jsx("p",{className:"text-xs font-bold",children:"Click to Upload PDF / DOCX"}),e.jsx("p",{className:"text-[10px] opacity-70",children:"Max 10MB"})]})]})]})]}),e.jsxs("button",{onClick:x,disabled:!n.trim(),className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-sm shadow-lg shadow-indigo-500/30 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(g,{name:"Plus",size:18}),"Create Standard"]})]})})},ei=it.memo(({layoutMode:t,setLayoutMode:s,isSidebarOpen:a,sidebarWidth:n})=>{const r=d.useRef([]),l=d.useRef(null),[u,p]=d.useState({left:0,width:0,opacity:0,color:""});return d.useEffect(()=>{const x=()=>{const v=rt.findIndex(N=>N.id===t),m=r.current[v];m&&p({left:m.offsetLeft,width:m.offsetWidth,opacity:1,color:rt[v].colorClass})};x(),window.addEventListener("resize",x);const j=setTimeout(x,300);return()=>{window.removeEventListener("resize",x),clearTimeout(j)}},[t,a,n]),e.jsxs("div",{ref:l,className:"relative flex justify-between bg-gray-100 dark:bg-slate-950 p-1 rounded-xl w-full dark:shadow-[inset_0_1px_3px_rgba(0,0,0,0.5)]",children:[e.jsx("div",{className:`absolute top-1 bottom-1 shadow-sm rounded-lg transition-all duration-500 ease-fluid z-0 ${u.color}`,style:{left:u.left,width:u.width,opacity:u.opacity}}),rt.map((x,j)=>e.jsxs("button",{ref:v=>{r.current[j]=v},onClick:()=>s(x.id),className:`flex-1 relative z-10 flex items-center justify-center gap-2 px-1 md:px-4 py-2 rounded-lg text-xs md:text-sm font-bold transition-colors duration-300 ${t===x.id?"text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(g,{name:x.icon,size:16}),e.jsx("span",{className:`${a?"hidden xl:inline":"hidden md:inline"}`,children:x.label})]},x.id))]})});function ti(){var Yt;const[t,s]=d.useState(Date.now()),[a,n]=d.useState(1),[r,l]=d.useState(!0),[u,p]=d.useState(420),[x,j]=d.useState(!0),[v,m]=d.useState(!1),[N,y]=d.useState(!1),[E,L]=d.useState(!1),[D,R]=d.useState(!1),[G,C]=d.useState(!1),[P,W]=d.useState(!1),[I,z]=d.useState("list"),[ne,O]=d.useState(0),[F,K]=d.useState([]),[k,M]=d.useState(""),[V,H]=d.useState(""),[B,J]=d.useState(""),[Z,he]=d.useState(!1),[ke,Q]=d.useState(!1),[ye,Ee]=d.useState(null),[S,_]=d.useState(""),[$,w]=d.useState(null),[Y,ie]=d.useState(null),[ee,ae]=d.useState(!1),te=d.useRef(!1),de=d.useRef(!1),[oe,se]=d.useState(null),[Le,ve]=d.useState(null),[Ne,De]=d.useState({isOpen:!1,clause:null,fullText:{en:"",vi:""},isLoading:!1}),[X,ue]=d.useState("en"),[ge,Fe]=d.useState("vi"),[wt,cs]=d.useState("en"),[ri,Pt]=d.useState(""),[us,xs]=d.useState(""),[nt,Ze]=d.useState({}),[q,Ve]=d.useState(""),[ce,ot]=d.useState(gt),[re,Ue]=d.useState([]),[be,We]=d.useState(pr),[je,lt]=d.useState({}),[Re,dt]=d.useState([]),[ct,Ge]=d.useState([]),[me,Pe]=d.useState(null),[Me,Qe]=d.useState({}),[Oe,Ye]=d.useState(null),[ze,Ke]=d.useState("evidence"),[Nt,Ot]=d.useState(!1),[He,zt]=d.useState(!1),[ps,$t]=d.useState(""),[Bt,qe]=d.useState(""),[ut,Ft]=d.useState(!1),[we,Ce]=d.useState({isOpen:!1,isPaused:!1,isFinished:!1,totalChunks:0,processedChunksCount:0,chunks:[],results:[],error:null,currentType:"report",targetLang:"en"}),[Vt,et]=d.useState(null),[hs,Ut]=d.useState(!1),[xt,Wt]=d.useState(""),[gs,Gt]=d.useState(!1),Kt=rt.find(o=>o.id===ze)||rt[0],Je=d.useRef(null),xe=d.useMemo(()=>({...Tt,...nt}),[nt]),ms=d.useMemo(()=>Object.values(je).some(o=>o.some(i=>i.status==="supplied")),[je]),Ct=be.trim().length>0||ct.length>0||ms,fs=!He&&re.length>0&&Ct,bs=!ut&&me&&Object.values(Me).some(o=>o);d.useMemo(()=>{const o=F.length,i=F.filter(c=>c.status==="valid").length;return{total:o,valid:i}},[F]);const pe=d.useMemo(()=>F.find(o=>o.id===k),[F,k]),vs=(pe==null?void 0:pe.status)==="valid";d.useEffect(()=>{r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[r]),d.useEffect(()=>{document.documentElement.style.setProperty("--font-scale",a.toString())},[a]);const js=()=>{try{const o=localStorage.getItem("iso_api_keys"),i=o?JSON.parse(o):[],c=new Set(i.map(b=>b.key));let h=!1;_t.forEach((b,A)=>{b&&!c.has(b)&&(i.push({id:`fixed_key_${A}_${Math.random().toString(36).substr(2,5)}`,label:`Environment Key ${A+1}`,key:b,status:"unknown",latency:0,lastChecked:new Date().toISOString()}),h=!0)}),h&&localStorage.setItem("iso_api_keys",JSON.stringify(i));const f=localStorage.getItem("iso_active_key_id");return f&&i.some(b=>b.id===f)?M(f):i.length>0&&!k&&M(i[0].id),i}catch(o){return console.error("Failed to load keys",o),[]}},St=async o=>{try{await ft.migrateFromLocalStorage(o);const i=await ft.getDocument(o);i?(se(i.content),ve(i.fileName),w(`Restored source document: ${i.fileName}`),pe!=null&&pe.key&&vt.addDocuments(o,i.content,pe.key).catch(c=>console.warn("Background Vectorization:",c))):(se(null),ve(null))}catch(i){console.error("Failed to load KB from DB",i),se(null),ve(null)}},Ht=async(o,i,c)=>{try{await ft.saveDocument(o,c,i),console.log(`Saved ${c} to KnowledgeStore`),pe!=null&&pe.key&&(w("Vectorizing Source Document for AI Search..."),await vt.addDocuments(o,i,pe.key),w("Document Vectorized for Semantic Search."))}catch(h){console.error("DB Save Failed",h),w("Warning: Failed to save document to persistent storage.")}},ks=async()=>{if(se(null),ve(null),q)try{await ft.deleteDocument(q),await vt.clear(),w("Source document removed from database.")}catch(o){console.error("Failed to clear KB",o)}},ys=o=>{o!==q&&(Ve(o),St(o))};d.useEffect(()=>{(async()=>{const i=js();K(i),Es(),i.length>0&&!Z&&Jt(i)})()},[]),d.useEffect(()=>{if(!ke)return;const o=setInterval(()=>{!He&&!Nt&&!ut&&!Z&&F.length>0&&ws()},45e3);return()=>clearInterval(o)},[ke,He,Nt,ut,Z,F]);const ws=async()=>{const i=[...F].sort((f,b)=>new Date(f.lastChecked||0).getTime()-new Date(b.lastChecked||0).getTime())[0];if(!i)return;K(f=>f.map(b=>b.id===i.id?{...b,status:"checking"}:b));const c=await pt(i.key),h=new Date().toISOString().split("T")[0];K(f=>f.map(b=>b.id===i.id?{...b,status:c.status,activeModel:c.activeModel||b.activeModel,latency:c.latency,lastChecked:new Date().toISOString(),lastResetDate:h}:b))},Ns=()=>{Ut(!0),setTimeout(()=>{et(null),Ut(!1)},300)},qt=o=>{const i=o.message||"Unknown error";i.includes("ALL_KEYS_EXHAUSTED")?(et("All API Keys have been exhausted or Quota exceeded."),y(!0)):i.includes("API Key is missing")?(w("API Key is required. Please check settings."),y(!0)):et(i)},At=o=>{if(Je.current){const i=Je.current,c=i.selectionStart,h=i.selectionEnd,f=i.value,b=`
${o.trim()}
`,A=f.substring(0,c)+b+f.substring(h);We(A),ze!=="evidence"&&Ke("evidence"),setTimeout(()=>{Je.current&&(Je.current.focus(),Je.current.setSelectionRange(c+b.length,c+b.length))},100)}else We(i=>i+`
`+o.trim()),ze!=="evidence"&&Ke("evidence")},pt=async o=>{const i=await os(o);let c="unknown";return i.isValid?c="valid":i.errorType==="network_error"?c="unknown":i.errorType&&(c=i.errorType),{status:c,activeModel:i.activeModel,latency:i.latency,errorMessage:i.errorMessage}},Jt=async o=>{he(!0),K(h=>h.map(f=>({...f,status:"checking"})));const i=new Date().toISOString().split("T")[0],c=[...o];for(let h=0;h<c.length;h++){const f=c[h],b=await pt(f.key);c[h]={...f,status:b.status,activeModel:b.activeModel,latency:b.latency,lastChecked:new Date().toISOString(),lastResetDate:i},K(A=>{const T=[...A],U=T.findIndex(fe=>fe.id===f.id);return U!==-1&&(T[U]=c[h]),T}),await new Promise(A=>setTimeout(A,100))}K(h=>{const f=h.find(b=>b.id===k);if(!f||f.status!=="valid"&&f.status!=="unknown"){const b=h.filter(A=>A.status==="valid").sort((A,T)=>A.latency-T.latency)[0];b&&(M(b.id),localStorage.setItem("iso_active_key_id",b.id),setTimeout(()=>w(`Auto-switched to healthy key: ${b.label}`),0))}return localStorage.setItem("iso_api_keys",JSON.stringify(h)),h}),he(!1)},Cs=async o=>{const i=F.find(h=>h.id===o);if(!i)return;K(h=>h.map(f=>f.id===o?{...f,status:"checking"}:f));const c=await pt(i.key);K(h=>{const f=h.map(b=>b.id===o?{...b,status:c.status,activeModel:c.activeModel||b.activeModel,latency:c.latency,lastChecked:new Date().toISOString()}:b);return localStorage.setItem("iso_api_keys",JSON.stringify(f)),f})},Ss=async()=>{if(!V.trim())return;if(F.some(f=>f.key===V.trim())){w("This API Key is already in your pool!"),H("");return}he(!0);const o=Date.now().toString(),i=await pt(V),c={id:o,label:B||`Key ${F.length+1}`,key:V,status:i.status,activeModel:i.activeModel,latency:i.latency,lastChecked:new Date().toISOString(),lastResetDate:new Date().toISOString().split("T")[0]},h=[...F,c];K(h),localStorage.setItem("iso_api_keys",JSON.stringify(h)),(F.length===0||(pe==null?void 0:pe.status)!=="valid"&&i.status==="valid")&&(M(o),localStorage.setItem("iso_active_key_id",o)),H(""),J(""),he(!1),i.status==="valid"?w("Key added successfully!"):et(i.errorMessage||"Connection failed. Please check your API Key and Network.")},As=o=>{const i=F.filter(h=>h.id!==o);let c=k;if(k===o){const h=i.find(f=>f.status==="valid")||i[0];c=h?h.id:""}K(i),c!==k&&M(c),localStorage.setItem("iso_api_keys",JSON.stringify(i)),c?localStorage.setItem("iso_active_key_id",c):localStorage.removeItem("iso_active_key_id"),w("Key removed from pool.")},$e=async o=>{if(!navigator.onLine)return o("offline","local-model");const i=F.filter(h=>h.status!=="invalid").sort((h,f)=>h.status==="valid"&&f.status!=="valid"?-1:h.status!=="valid"&&f.status==="valid"?1:h.id===k?-1:f.id===k?1:h.latency-f.latency);if(i.length===0)throw new Error("API Key is missing or all keys are invalid.");let c;for(const h of i){const f=h.activeModel||ls[0];try{return h.id!==k&&M(h.id),await o(h.key,f)}catch(b){console.warn(`Key ${h.label} failed on ${f}:`,b),c=b;const A=(b.message||"").toLowerCase();A.includes("429")||A.includes("quota")||A.includes("resource exhausted")?K(T=>T.map(U=>U.id===h.id?{...U,status:"quota_exceeded"}:U)):(A.includes("403")||A.includes("key not valid")||A.includes("permission denied"))&&K(T=>T.map(U=>U.id===h.id?{...U,status:"invalid"}:U))}}throw new Error((c==null?void 0:c.message)||"ALL_KEYS_EXHAUSTED")},Es=async()=>{try{const o=localStorage.getItem("iso_session_data"),i=localStorage.getItem("iso_custom_standards");if(i&&Ze(JSON.parse(i)),o){const c=JSON.parse(o);c.standardKey&&(Ve(c.standardKey),await St(c.standardKey)),c.auditInfo&&ot({...gt,...c.auditInfo}),c.selectedClauses&&Ue(c.selectedClauses),c.evidence&&We(c.evidence),c.matrixData&&lt(c.matrixData),c.evidenceTags&&dt(c.evidenceTags),c.analysisResult&&Pe(c.analysisResult),c.selectedFindings&&Qe(c.selectedFindings),c.finalReportText&&Ye(c.finalReportText),ie(new Date().toLocaleTimeString()),w("Previous session restored.")}}catch(o){console.error("Load failed",o)}},Ls=o=>{Ze(i=>({...i,[q]:o})),w("Standard updated successfully.")},Ms=o=>{Ze(i=>{const c={...i};return delete c[o],c}),w("Standard reset to default.")},Is=async o=>{var c;const i=(c=o.target.files)==null?void 0:c[0];if(i){if(!q||q==="ADD_NEW"){w("Please select a Standard first before uploading a source document.");return}ve(i.name),w("Parsing Standard Document...");try{const h=await as(i);se(h),w(`Standard Loaded (${(h.length/1024).toFixed(0)}KB). Saving...`),q&&await Ht(q,h,i.name)}catch(h){w(h.message),ve(null),se(null)}}},_s=async(o,i)=>{C(!1);const c=`CUSTOM_${Date.now()}`;let h="";if(i){w("Processing document and extracting structure...");try{h=await as(i),se(h),ve(i.name),await Ht(c,h,i.name),w("AI is analyzing structure... (This may take 15s)");try{const b=await $e((A,T)=>_r(h,o,A,T));if(b){Ze(A=>({...A,[c]:b})),Ve(c),w(`Successfully imported ${o} with full structure.`);return}}catch(b){console.error("AI Parse Failed, falling back to basic",b),w("AI parsing failed. Created basic structure instead.")}}catch(b){w(`File processing failed: ${b.message}`)}}else se(null),ve(null);const f={name:o,description:`Custom Standard created on ${new Date().toLocaleDateString()}`,groups:[{id:`GRP_${Date.now()}`,title:"General Requirements",icon:"Book",clauses:[{id:`CL_${Date.now()}_1`,code:"1",title:"General",description:"Requirement details pending AI extraction."}]}]};Ze(b=>({...b,[c]:f})),Ve(c),i||w(`Created basic standard: ${o}`)};d.useEffect(()=>{if(te.current||!be&&(!re||re.length===0)&&!de.current&&localStorage.getItem("iso_session_data"))return;ae(!0);const i=setTimeout(()=>{if(te.current){ae(!1);return}const c={standardKey:q,auditInfo:ce,selectedClauses:re,evidence:be,matrixData:je,evidenceTags:Re,analysisResult:me,selectedFindings:Me,finalReportText:Oe};localStorage.setItem("iso_session_data",JSON.stringify(c)),localStorage.setItem("iso_custom_standards",JSON.stringify(nt)),localStorage.setItem("iso_api_keys",JSON.stringify(F)),de.current&&(de.current=!1),ie(new Date().toLocaleTimeString()),ae(!1)},800);return()=>clearTimeout(i)},[q,ce,re,be,je,Re,me,Me,Oe,nt,F]),d.useEffect(()=>{const o=i=>{if(!te.current){const c={standardKey:q,auditInfo:ce,selectedClauses:re,evidence:be,matrixData:je,evidenceTags:Re,analysisResult:me,selectedFindings:Me,finalReportText:Oe};localStorage.setItem("iso_session_data",JSON.stringify(c))}};return window.addEventListener("beforeunload",o),()=>window.removeEventListener("beforeunload",o)},[q,ce,re,be,je,Re,me,Me,Oe]);const Ts=async o=>{if(o&&o.stopPropagation(),!!confirm("Start New Session? Current data will be moved to 'Backup Vault'."))try{const i={standardKey:q,auditInfo:ce,selectedClauses:re,evidence:be,matrixData:je,evidenceTags:Re,analysisResult:me,selectedFindings:Me,finalReportText:Oe};if(be.trim().length>0||re.length>0){const h={id:`backup_${Date.now()}`,timestamp:Date.now(),label:"Backup (Pre-Reset)",triggerType:"MANUAL_BACKUP",data:i},f=localStorage.getItem("iso_session_history"),b=f?JSON.parse(f):[],A=[h,...b].slice(0,5);localStorage.setItem("iso_session_history",JSON.stringify(A))}de.current=!0,localStorage.removeItem("iso_session_data"),Ve(""),ot(gt),We(""),lt({}),dt([]),Ue([]),Ge([]),Pe(null),Qe({}),Ye(null),ie(null),s(Date.now()),se(null),ve(null),Ke("evidence"),w("New Session Started. (Previous session archived in Recall)")}catch(i){console.error("New Session Error",i),w("Error creating backup. Session reset anyway.")}},Ds=async o=>{try{te.current=!0,R(!1);const i=o.data;localStorage.setItem("iso_session_data",JSON.stringify(i)),i.standardKey&&(Ve(i.standardKey),await St(i.standardKey)),ot({...gt,...i.auditInfo||{}}),i.selectedClauses&&Ue(i.selectedClauses),i.evidence!==void 0&&We(i.evidence),i.matrixData&&lt(i.matrixData),i.evidenceTags&&dt(i.evidenceTags),Ge([]),i.analysisResult&&Pe(i.analysisResult),i.selectedFindings&&Qe(i.selectedFindings),i.finalReportText&&Ye(i.finalReportText),s(Date.now()),ie(new Date().toLocaleTimeString()),w(`Restored session from: ${new Date(o.timestamp).toLocaleTimeString()}`),setTimeout(()=>{te.current=!1,de.current=!1},1200)}catch(i){console.error("Restore failed",i),w("Failed to restore session snapshot."),te.current=!1}},Rs=async()=>{const o=ct.filter(c=>c.status==="pending"||c.status==="error");if(o.length===0)return;Ot(!0),qe("Processing documents with Vision AI...");let i=0;for(const c of o)try{Ge(f=>f.map(b=>b.id===c.id?{...b,status:"processing"}:b));let h="";if(c.file.type==="text/plain")h=await c.file.text();else{const f=await kr(c.file);h=await $e(async(b,A)=>Tr("Extract all text.",f,c.file.type,b,A))}if(h){const f=`

--- FILE: ${c.file.name} ---
`;At(f+h),Ge(b=>b.map(A=>A.id===c.id?{...A,status:"success",result:h}:A)),i++}else throw new Error("No text extracted")}catch(h){console.error("OCR Error",h),Ge(f=>f.map(b=>b.id===c.id?{...b,status:"error",error:h.message||"Failed"}:b))}Ot(!1),qe(""),w(`Processed ${i} files.`)},Ps=async o=>{var c;const i=(c=o.target.files)==null?void 0:c[0];if(i){xs(i.name);try{if(i.name.endsWith(".docx")){if(typeof mammoth>"u"){alert("Mammoth library not loaded for .docx support");return}const h=await i.arrayBuffer(),f=await mammoth.extractRawText({arrayBuffer:h});Pt(f.value)}else{const h=await i.text();Pt(h)}w("Template loaded successfully.")}catch(h){w("Failed to load template."),console.error(h)}}},Et=(o,i,c)=>{let h=o;if(i==="evidence"){const A=bt(je,re);A&&(h=`${o}

${A}`)}if(!h)return;const f=4e3,b=[];for(let A=0;A<h.length;A+=f)b.push(h.substring(A,A+f));Ce({isOpen:!0,isPaused:!1,isFinished:!1,totalChunks:b.length,processedChunksCount:0,chunks:b,results:new Array(b.length).fill(""),error:null,currentType:i,targetLang:c})},Os=()=>{Ce(o=>{const i=o.processedChunksCount,c=[...o.results];return c[i]=o.chunks[i],{...o,isPaused:!1,error:null,processedChunksCount:i+1,results:c}})},zs=o=>{Q(o),localStorage.setItem("iso_auto_check",String(o)),w(o?"Auto-health check enabled.":"Auto-health check disabled.")},$s=o=>{Ee(o.id),_(o.label)},Bs=()=>{ye&&(K(o=>o.map(i=>i.id===ye?{...i,label:S}:i)),Ee(null))},Xt=async o=>{De({isOpen:!0,clause:o,isLoading:!0,fullText:{en:"",vi:""}});try{const i=await $e(async(c,h)=>Ir(o,xe[q].name,oe,c,h));De(c=>({...c,isLoading:!1,fullText:i}))}catch{De({isOpen:!1,clause:null,isLoading:!1,fullText:{en:"",vi:""}}),et("API Failed during lookup."),y(!0)}},Fs=o=>{if(!Ne.clause)return;const i=`
--- REFERENCE: [${Ne.clause.code}] ${Ne.clause.title} ---
${o}
--- END REFERENCE ---
`.trim();At(i),De({isOpen:!1,clause:null,isLoading:!1,fullText:{en:"",vi:""}})},Zt=async()=>{if(!q){w("Select a Standard first.");return}if(re.length===0){w("Select at least one Clause to analyze.");return}if(!Ct){w("No evidence provided. Please add text or files.");return}zt(!0),Ke("findings"),Pe([]);try{const o=xe[q].groups.flatMap(T=>T.clauses),i=(T,U)=>{for(let fe of U){if(fe.id===T)return fe;if(fe.subClauses){const le=i(T,fe.subClauses);if(le)return le}}},c=re.map(T=>i(T,o)).filter(T=>!!T);let h=be;ct.filter(T=>T.status==="success"&&T.result).forEach(T=>{h+=`

--- Document: ${T.file.name} ---
${T.result}`});const f=bt(je,re);f&&(h+=`

${f}`);let b="";Re.forEach(T=>{b+=`[Tagged for ${T.clauseId}]: "${T.text}"
`});const A=localStorage.getItem("iso_privacy_shield")==="true";for(let T=0;T<c.length;T++){const U=c[T];$t(U.code),qe(`Analyzing [${U.code}] ${U.title}...`);try{const fe=await $e((Se,Mt)=>Dr({code:U.code,title:U.title,description:U.description},xe[q].name,h.substring(0,5e4),b,Se,Mt,A)),le=yt(fe);let Be;le&&typeof le=="object"?Be={clauseId:U.code,status:le.status||"N_A",reason:le.reason||"No reasoning provided.",evidence:le.evidence||"",suggestion:le.suggestion||"",conclusion_report:le.conclusion_report||"",crossRefs:le.crossRefs||[]}:Be={clauseId:U.code,status:"N_A",reason:"AI failed to format response.",evidence:"",suggestion:"",conclusion_report:"",crossRefs:[]},Pe(Se=>[...Se||[],Be]),Qe(Se=>({...Se,[U.code]:!0})),await new Promise(Se=>setTimeout(Se,50))}catch(fe){console.error(`Error analyzing clause ${U.code}`,fe),Pe(le=>[...le||[],{clauseId:U.code,status:"N_A",reason:"Analysis failed due to API error.",evidence:"",suggestion:"Retry manually.",conclusion_report:"",crossRefs:[]}])}}w(navigator.onLine?"Analysis Complete.":"Offline Analysis Complete.")}catch(o){qt(o)}finally{zt(!1),qe(""),$t("")}},Qt=async()=>{if(!me||me.length===0){w("No findings available to report.");return}const o=me.filter(i=>Me[i.clauseId]);if(o.length===0){w("Please select at least one finding to include in the report.");return}Ft(!0),qe("Synthesizing Final Audit Report...");try{let i=be;const c=bt(je,re);c&&(i+=`

${c}`);const h=await $e((f,b)=>{var A;return Rr({company:ce.company,type:ce.type,auditor:ce.auditor,standard:(A=xe[q])==null?void 0:A.name,findings:o,lang:X,fullEvidenceContext:i},f,b)});Ye(h),Ke("report"),w("Report Generated Successfully.")}catch(i){qt(i)}finally{Ft(!1),qe("")}};d.useEffect(()=>{if(!we.isOpen||we.isPaused||we.isFinished)return;(async()=>{var h;const i=we.processedChunksCount;if(i>=we.totalChunks){Ce(f=>({...f,isFinished:!0}));try{const f=Hs=>Rt(Hs||"Unknown"),b=f((h=xe[q])==null?void 0:h.name),A=f(ce.type),T=f(ce.smo),U=f(ce.company),fe=f(ce.department),le=f(ce.auditor),Be=new Date().toISOString().replace(/[:.]/g,"-"),Se=`${b}_${A}_${T}_${U}_${fe}_Audit_Note_${le}_${Be}.txt`,Mt=we.results.join(""),Ks=new Blob([Mt],{type:"text/plain"}),es=URL.createObjectURL(Ks),tt=document.createElement("a");tt.href=es,tt.download=Se,document.body.appendChild(tt),tt.click(),document.body.removeChild(tt),URL.revokeObjectURL(es)}catch(f){console.error("Download failed",f)}return}i>0&&await new Promise(f=>setTimeout(f,1500));const c=we.chunks[i];try{let f=c;const A=`Translate to ${we.targetLang==="vi"?"Vietnamese":"English"}. Keep formatting. ISO Audit Context.

Input:
"""${c}"""`;f=await $e(async(T,U)=>(await new(await Ys(async()=>{const{GoogleGenAI:Be}=await import("./vendor-genai-C1TFRE--.js");return{GoogleGenAI:Be}},[],import.meta.url)).GoogleGenAI({apiKey:T}).models.generateContent({model:U,contents:A})).text||c),Ce(T=>{const U=[...T.results];return U[i]=f,{...T,processedChunksCount:i+1,results:U}})}catch(f){console.error("Export Error",f);let b=f.message||"Unknown error";try{const A=b.indexOf("{");if(A!==-1){const T=b.substring(A),U=JSON.parse(T);U.error&&U.error.message&&(b=`API Error: ${U.error.message}`)}}catch{}Ce(A=>({...A,isPaused:!0,error:b}))}})()},[we,$e,q,ce,xe]);const Vs=async()=>{Gt(!0);try{if(xt.trim()){const o=await os(xt),i={status:o.isValid?"valid":o.errorType||"unknown",errorMessage:o.errorMessage,activeModel:o.activeModel,latency:o.latency};if(i.status==="valid"){const c={id:`rescue_${Date.now()}`,label:"Rescue Key",key:xt,status:"valid",activeModel:i.activeModel,latency:i.latency,lastChecked:new Date().toISOString()};K(h=>[...h,c]),M(c.id),w("Rescue Key Added. Resuming..."),Ce(h=>({...h,isPaused:!1,error:null})),Wt("")}else w(`Rescue Key Invalid: ${i.errorMessage}`)}else Ce(o=>({...o,isPaused:!1,error:null}))}catch{w("Failed to resume.")}finally{Gt(!1)}};d.useEffect(()=>{const o=i=>{(i.metaKey||i.ctrlKey)&&i.key==="k"&&(i.preventDefault(),W(c=>!c))};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[]);const Us=d.useMemo(()=>{const o=[{label:"Analyze Compliance",desc:"Start AI analysis",icon:"Wand2",shortcut:"AI",action:Zt},{label:"Validate API Key Pool",desc:"Check connection health",icon:"RefreshCw",action:()=>{Jt(F),w("Validating Neural Pool...")}},{label:"Settings",desc:"Manage configuration",icon:"Settings",action:()=>y(!0)},{label:"Generate Report",desc:"Synthesize final report",icon:"FileText",action:Qt},{label:"Toggle Dark Mode",desc:`Switch to ${r?"Light":"Dark"}`,icon:r?"Sun":"Moon",action:()=>l(!r)}];if(q&&xe[q]){const i=f=>f.reduce((b,A)=>(b.push(A),A.subClauses&&b.push(...i(A.subClauses)),b),[]),h=i(xe[q].groups.flatMap(f=>f.clauses)).map(f=>({label:`[${f.code}] ${f.title}`,desc:f.description||"No description",icon:"Session6_Zap",type:"clause",action:()=>{const b=re.includes(f.id);Ue(b?A=>A.filter(T=>T!==f.id):A=>[...A,f.id]),At(`[${f.code}] ${f.title}`),w(`Inserted clause ${f.code} and ${b?"removed from":"added to"} audit scope.`),W(!1)},onReference:b=>{b&&b.stopPropagation(),Xt(f),W(!1)}}));return[...o,...h]}return o},[r,q,xe,re,k,F]),Lt=d.useMemo(()=>{var c;const o=((c=xe[q])==null?void 0:c.name)||"",i=o.match(/\((.*?)\)/);return i?i[1]:o.split(" ")[0]||"ISO"},[q,xe]),Ws=d.useMemo(()=>{const o=Lt.toUpperCase();return o.includes("EMS")||o.includes("14001")?"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-700/50":o.includes("QMS")||o.includes("9001")?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-700/50":o.includes("ISMS")||o.includes("27001")?"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-700/50":"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300 border-indigo-100 dark:border-indigo-800/50"},[Lt]),Gs=()=>{if(He)return"AI is analyzing...";const o=[];return re.length===0&&o.push("Clauses"),Ct||o.push("Evidence"),o.length>0?`Missing: ${o.join(" & ")}`:"Click to Start AI Analysis"};return e.jsxs("div",{className:"flex flex-col h-[100dvh] w-full bg-gray-50 dark:bg-slate-900 transition-colors duration-500 ease-soft relative",children:[$&&e.jsx(hr,{message:$,onClose:()=>w(null)}),Vt&&e.jsxs("div",{className:`fixed z-[9999] top-20 left-4 right-4 md:left-auto md:right-5 md:w-96 md:max-w-sm bg-white dark:bg-slate-800 border-l-4 border-red-500 shadow-2xl rounded-r-xl p-4 animate-shake transition-all duration-300 ${hs?"opacity-0 translate-x-4":"opacity-100 translate-x-0"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 font-bold",children:[e.jsx(g,{name:"AlertCircle",size:20}),e.jsx("span",{children:"System Alert"})]}),e.jsx("button",{onClick:Ns,className:"text-gray-400 hover:text-slate-800 dark:hover:text-white transition-colors p-1 rounded-full hover:bg-gray-100 dark:hover:bg-slate-700",children:e.jsx(g,{name:"X",size:18})})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed mt-1",children:Vt})]}),e.jsx(vr,{isSidebarOpen:x,setIsSidebarOpen:j,displayBadge:Lt,badgeColorClass:Ws,setIsCmdPaletteOpen:W,fontSizeScale:a,setFontSizeScale:n,isDarkMode:r,setIsDarkMode:l,isSystemHealthy:vs,onOpenSettings:()=>y(!0),onOpenAbout:()=>m(!0)}),e.jsxs("main",{className:"flex-1 flex overflow-hidden relative",children:[e.jsx("div",{className:`${x?"translate-x-0":"-translate-x-full"} fixed top-16 bottom-0 left-0 z-[60] md:absolute md:inset-y-0 md:relative md:top-0 md:translate-x-0 md:transform-none transition-transform duration-300 ease-soft h-[calc(100%-4rem)] md:h-full`,children:e.jsx(Br,{isOpen:x,width:u,setWidth:p,standards:xe,standardKey:q,setStandardKey:ys,auditInfo:ce,setAuditInfo:ot,selectedClauses:re,setSelectedClauses:Ue,onAddNewStandard:()=>C(!0),onUpdateStandard:Ls,onResetStandard:Ms,onReferenceClause:Xt,showIntegrityModal:E,setShowIntegrityModal:L,knowledgeFileName:Le,knowledgeBase:oe,onKnowledgeUpload:Is,onClearKnowledge:ks},t)}),x&&e.jsx("div",{className:"fixed top-16 bottom-0 inset-x-0 bg-black/50 z-50 md:hidden backdrop-blur-sm transition-opacity duration-300 animate-in fade-in",onClick:()=>j(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col min-w-0 relative w-full transition-all duration-300 ease-soft ${Kt.bgSoft} border-t-4 ${Kt.borderClass}`,children:[e.jsxs("div",{className:"flex-shrink-0 px-4 md:px-6 py-3 border-b border-gray-200 dark:border-slate-800 bg-white/80 dark:bg-slate-900/80 backdrop-blur flex justify-between items-center gap-3",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(ei,{layoutMode:ze,setLayoutMode:Ke,isSidebarOpen:x,sidebarWidth:u})}),e.jsxs("div",{className:"flex gap-2 items-center flex-shrink-0 pl-2 border-l border-gray-200 dark:border-slate-800",children:[e.jsxs("button",{onClick:()=>R(!0),className:`h-10 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 border ${Y?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800 shadow-sm":"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 border-gray-200 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700 hover:border-gray-300 dark:hover:border-slate-600"}`,title:Y?`Last Auto-Saved: ${Y}. Click to Open Time Machine.`:"Open Session History",children:[e.jsxs("div",{className:"relative",children:[e.jsx(g,{name:"History",size:18}),Y&&e.jsxs("span",{className:"absolute -top-1 -right-1 flex h-2.5 w-2.5",children:[ee&&e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:`relative inline-flex rounded-full h-2.5 w-2.5 ${ee?"bg-red-500":"bg-emerald-500"}`})]})]}),e.jsx("span",{className:"hidden xl:inline text-xs font-bold",children:"Recall"})]}),e.jsxs("button",{onClick:o=>Ts(o),className:"h-10 w-10 md:w-auto md:px-4 bg-amber-50 dark:bg-amber-950/30 text-amber-600 dark:text-amber-500 border border-amber-200 dark:border-amber-800/50 rounded-xl flex items-center justify-center gap-2 transition-all shadow-sm hover:shadow-amber-500/20 hover:bg-amber-100 dark:hover:bg-amber-900/50 hover:text-amber-700 dark:hover:text-amber-400 duration-300 active:scale-95",title:"Start New Session (Archives current data)",children:[e.jsx(g,{name:"Session4_FilePlus",size:18}),e.jsx("span",{className:"hidden md:inline text-xs font-bold",children:"New"})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden relative p-2 md:p-4",children:[ze==="evidence"&&e.jsx(qr,{evidence:be,setEvidence:We,uploadedFiles:ct,setUploadedFiles:Ge,onOcrProcess:Rs,isOcrLoading:Nt,onAnalyze:Zt,isReadyForAnalysis:fs,isAnalyzeLoading:He,analyzeTooltip:Gs(),onExport:(o,i)=>Et(be,o,i),evidenceLanguage:wt,setEvidenceLanguage:cs,textareaRef:Je,tags:Re,onAddTag:o=>dt(i=>[...i,o]),selectedClauses:re,standards:xe,standardKey:q,matrixData:je,setMatrixData:lt}),ze==="findings"&&e.jsx(Jr,{analysisResult:me,setAnalysisResult:Pe,selectedFindings:Me,setSelectedFindings:Qe,isAnalyzeLoading:He,loadingMessage:Bt,currentAnalyzingClause:ps,viewMode:I,setViewMode:z,focusedFindingIndex:ne,setFocusedFindingIndex:O,onExport:(o,i)=>{const c=(me==null?void 0:me.map(h=>`[${h.clauseId}] ${h.status}
Evidence: ${h.evidence}
Reason: ${h.reason}
Suggestion: ${h.suggestion}`).join(`

`))||"";Et(c,o,i)},notesLanguage:ge,setNotesLanguage:Fe}),ze==="report"&&e.jsx(Xr,{finalReportText:Oe,setFinalReportText:Ye,isReportLoading:ut,loadingMessage:Bt,templateFileName:us,handleTemplateUpload:Ps,handleGenerateReport:Qt,isReadyToSynthesize:bs,onExport:(o,i)=>Et(Oe||"",o,i),exportLanguage:X,setExportLanguage:ue})]})]})]}),e.jsx(fr,{isOpen:P,onClose:()=>W(!1),actions:Us,onSelectAction:o=>{o.action()}}),e.jsx(Fr,{isOpen:v,onClose:()=>m(!1)}),e.jsx(Vr,{isOpen:Ne.isOpen,onClose:()=>De(o=>({...o,isOpen:!1})),clause:Ne.clause,standardName:((Yt=xe[q])==null?void 0:Yt.name)||"",fullText:Ne.fullText,isLoading:Ne.isLoading,onInsert:Fs}),e.jsx(Ur,{isOpen:D,onClose:()=>R(!1),onRestore:Ds}),e.jsx(Qr,{exportState:we,setExportState:Ce,rescueKey:xt,setRescueKey:Wt,handleResumeExport:Vs,isRescuing:gs,onClose:()=>Ce(o=>({...o,isOpen:!1})),onSkip:Os}),e.jsx(Zr,{isOpen:N,onClose:()=>y(!1),apiKeys:F,newKeyInput:V,setNewKeyInput:H,isCheckingKey:Z,handleAddKey:Ss,activeKeyId:k,editingKeyId:ye,editLabelInput:S,setEditLabelInput:_,handleSaveLabel:Bs,handleStartEdit:$s,handleRefreshStatus:Cs,handleDeleteKey:As,isAutoCheckEnabled:ke,toggleAutoCheck:zs}),e.jsx(Yr,{isOpen:G,onClose:()=>C(!1),onAdd:_s})]})}const ds=document.getElementById("root");if(!ds)throw new Error("Could not find root element to mount to");const si=Xs.createRoot(ds);si.render(e.jsx(it.StrictMode,{children:e.jsx(ti,{})}));
