import{r as d,j as e,R as Z}from"./vendor-react--UE8qFvL.js";import{I as p,s as ee,c as te,S as se,u as M,a as re,L as ae,f as ne,T as le,b as ie,g as oe}from"./index-Cbv7HqSR.js";import"./vendor-BhE6lIor.js";import"./vendor-genai-C0GBL7S7.js";const de=v=>{const g=d.useMemo(()=>{if(!v)return[];const b=[],x=w=>{w.forEach(h=>{b.push(h),h.subClauses&&x(h.subClauses)})};return v.groups.forEach(w=>x(w.clauses)),b},[v]),u=d.useCallback(b=>g.find(x=>x.id===b),[g]),l=d.useCallback(b=>g.find(x=>x.code===b),[g]);return{flatClauses:g,getClauseById:u,getClauseByCode:l}},ce=d.forwardRef(({standard:v,selectedClauses:g,matrixData:u,setMatrixData:l,onPasteFiles:b,uploadedFiles:x=[],onRemoveFile:w,onLookup:h},c)=>{const[s,a]=d.useState(null),C=d.useRef(null),{getClauseById:T}=de(v);d.useEffect(()=>{l(t=>{const i={...t};let m=!1,n=null;return g.forEach(o=>{if(!i[o]||i[o].length===0){const f=T(o);if(f){const N=f.description||"Requirement",I=N.length>300?N.split(/(?:\. |\n)/).filter(P=>P.trim().length>5):[N];i[o]=I.map((P,L)=>({id:`${o}_req_${L}`,requirement:P.trim(),evidenceInput:"",status:"pending"})),m=!0}}!n&&i[o]&&i[o].length>0&&(n={clauseId:o,rowId:i[o][0].id})}),!s&&n&&a(n),m?i:t})},[g,T,l]);const A=d.useCallback((t,i,m)=>{l(n=>({...n,[t]:n[t].map(o=>{if(o.id===i){const f=o.evidenceInput||"",I=f+(f&&m?`
`:"")+m;return{...o,evidenceInput:I,status:I.trim()?"supplied":"pending"}}return o})}))},[l]),S=d.useCallback((t,i,m)=>{l(n=>{const o=n[t];if(!o)return n;const f=o.findIndex(I=>I.id===i);if(f===-1||o[f].evidenceInput===m)return n;const N=[...o];return N[f]={...N[f],evidenceInput:m,status:m.trim()?"supplied":"pending"},{...n,[t]:N}})},[l]),z=d.useCallback((t,i,m)=>{const n=t.clipboardData.items,o=[];for(let f=0;f<n.length;f++)if(n[f].kind==="file"){const N=n[f].getAsFile();N&&o.push(N)}o.length>0&&(t.preventDefault(),b&&b(o,{clauseId:i,rowId:m}))},[b]);d.useImperativeHandle(c,()=>({insertEvidence:(t,i,m)=>A(t,i,m),handleExternalDictation:t=>{s&&A(s.clauseId,s.rowId,t)},getActiveRow:()=>s}));const k=d.useMemo(()=>{if(!s)return null;const t=T(s.clauseId),i=u[s.clauseId],m=i==null?void 0:i.find(n=>n.id===s.rowId);return!t||!m?null:{clause:t,row:m}},[s,u,T]),F=t=>{const i=t.file.type.startsWith("image/"),m=t.file.type.includes("pdf");return e.jsxs("div",{className:"relative group w-20 h-20 bg-gray-50 dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 flex flex-col items-center justify-center overflow-hidden transition-all hover:shadow-md hover:-translate-y-1",children:[i?e.jsx("img",{src:URL.createObjectURL(t.file),alt:"preview",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"}):e.jsxs("div",{className:"flex flex-col items-center p-2 text-center",children:[e.jsx(p,{name:m?"BookOpen":"FileText",size:24,className:"text-slate-400 mb-1"}),e.jsx("span",{className:"text-[9px] text-slate-500 line-clamp-2 leading-tight break-all",children:t.file.name})]}),e.jsxs("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-start justify-end p-1",children:[t.status==="processing"&&e.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-black/50 flex items-center justify-center",children:e.jsx(p,{name:"Loader",size:16,className:"animate-spin text-indigo-600"})}),t.status==="success"&&e.jsx("div",{className:"bg-emerald-500 rounded-full p-0.5 shadow-sm",children:e.jsx(p,{name:"CheckThick",size:10,className:"text-white"})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),w&&w(t.id)},className:"bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-all hover:scale-110 shadow-sm",title:"Remove File",children:e.jsx(p,{name:"X",size:10})})]})]},t.id)};return g.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 bg-gray-50/30 dark:bg-slate-900/30 rounded-3xl border-2 border-dashed border-gray-200 dark:border-slate-800 m-4",children:[e.jsx("div",{className:"p-6 bg-white dark:bg-slate-900 rounded-full shadow-depth mb-4",children:e.jsx(p,{name:"LayoutList",size:48,className:"text-indigo-200 dark:text-slate-700"})}),e.jsx("p",{className:"text-sm font-bold text-slate-500",children:"Select clauses to start mapping evidence."})]}):e.jsx("div",{className:"h-full flex flex-col relative animate-fade-in-up",children:e.jsxs("div",{className:"flex-1 min-h-0 bg-white dark:bg-slate-900 rounded-2xl border border-white/60 dark:border-slate-800 shadow-depth overflow-hidden flex",children:[e.jsxs("div",{className:"w-1/3 min-w-[260px] max-w-[350px] border-r border-gray-100 dark:border-slate-800 flex flex-col bg-slate-50/50 dark:bg-slate-950/30 backdrop-blur-sm",children:[e.jsxs("div",{className:"p-3 border-b border-gray-100 dark:border-slate-800 flex justify-between items-center bg-white/50 dark:bg-slate-900/50",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Requirement Checklist"}),e.jsxs("button",{onClick:()=>{const t=ee(u,g);t&&te(t)},className:"text-[10px] text-indigo-500 hover:text-indigo-600 font-bold flex items-center gap-1 transition-colors",children:[e.jsx(p,{name:"Copy",size:10})," Copy All"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-4",children:g.map(t=>{const i=T(t),m=u[t]||[];return i?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 px-2 py-1.5 group/header rounded-lg hover:bg-white dark:hover:bg-slate-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[e.jsx("span",{className:"text-[10px] font-black text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 px-1.5 py-0.5 rounded flex-shrink-0 border border-indigo-100 dark:border-indigo-800/50",children:i.code}),e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 truncate",title:i.title,children:i.title})]}),e.jsx("button",{onClick:n=>{n.stopPropagation(),h&&h(i)},className:"p-1 text-slate-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded opacity-0 group-hover/header:opacity-100 transition-all scale-90 hover:scale-100",title:"Read Clause Content",children:e.jsx(p,{name:"BookOpen",size:12})})]}),e.jsx("div",{className:"pl-2 space-y-1",children:m.map(n=>{const o=(s==null?void 0:s.rowId)===n.id,f=n.status==="supplied";return e.jsx("div",{onClick:()=>a({clauseId:t,rowId:n.id}),className:`group relative p-3 rounded-xl cursor-pointer transition-all border ${o?"bg-white dark:bg-slate-800 border-indigo-200 dark:border-indigo-600 shadow-sm ring-1 ring-indigo-500/10":"bg-transparent border-transparent hover:bg-white dark:hover:bg-slate-800/50 hover:border-slate-200 dark:hover:border-slate-700"}`,children:e.jsxs("div",{className:"flex items-start gap-2.5",children:[e.jsx("div",{className:`mt-1 w-2.5 h-2.5 rounded-full shrink-0 transition-all shadow-sm ${f?"bg-emerald-500 scale-110":o?"bg-indigo-500 scale-110":"bg-slate-200 dark:bg-slate-700"}`}),e.jsx("p",{className:`text-[11px] leading-relaxed line-clamp-3 ${o?"text-slate-800 dark:text-slate-100 font-medium":"text-slate-500 dark:text-slate-400"}`,children:n.requirement})]})},n.id)})})]},t):null})})]}),e.jsx("div",{className:"flex-1 flex flex-col bg-white dark:bg-slate-900 min-w-0 relative",children:k?e.jsxs("div",{className:"flex flex-col h-full animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"p-5 border-b border-gray-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50 backdrop-blur-md sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-black text-white bg-gradient-to-r from-indigo-500 to-purple-500 px-2 py-0.5 rounded shadow-sm",children:k.clause.code}),e.jsx("span",{className:"text-sm font-bold text-slate-800 dark:text-white tracking-tight",children:k.clause.title})]}),e.jsxs("button",{onClick:()=>h&&h(k.clause),className:"flex items-center gap-1.5 px-3 py-1.5 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg text-xs font-bold text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:border-indigo-300 transition-all shadow-sm active:scale-95",children:[e.jsx(p,{name:"BookOpen",size:14}),"Ref"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border-l-4 border-indigo-400 dark:border-indigo-600 shadow-sm",children:e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300 leading-relaxed font-medium",children:k.row.requirement})})]}),x.length>0&&e.jsx("div",{className:"px-6 pt-4 pb-2 bg-slate-50/30 dark:bg-black/10",children:e.jsx("div",{className:"flex flex-wrap gap-3",children:x.map(F)})}),e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx("textarea",{ref:C,className:"w-full h-full p-6 text-base text-slate-800 dark:text-slate-200 bg-transparent outline-none resize-none leading-7 placeholder-slate-300 dark:placeholder-slate-600 font-medium",placeholder:"Type verified evidence here... (Drag & Drop files supported)",value:k.row.evidenceInput,onChange:t=>S(k.clause.id,k.row.id,t.target.value),onPaste:t=>z(t,k.clause.id,k.row.id),autoFocus:!0}),e.jsxs("div",{className:"absolute bottom-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[k.row.status==="supplied"&&e.jsxs("span",{className:"px-3 py-1.5 bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 rounded-full text-xs font-bold flex items-center gap-1 shadow-sm border border-emerald-200 dark:border-emerald-800",children:[e.jsx(p,{name:"CheckThick",size:12})," Saved"]}),e.jsx("button",{onClick:()=>S(k.clause.id,k.row.id,""),className:"p-2 bg-white dark:bg-slate-800 hover:bg-red-50 text-slate-400 hover:text-red-500 rounded-lg transition-colors shadow-sm border border-gray-200 dark:border-slate-700",title:"Clear Text",children:e.jsx(p,{name:"Trash2",size:16})})]})]}),e.jsxs("div",{className:"px-6 py-2 border-t border-gray-100 dark:border-slate-800 text-[10px] text-slate-400 flex justify-between bg-gray-50/80 dark:bg-slate-950/80 backdrop-blur-sm",children:[e.jsxs("span",{className:"font-mono",children:["Ln ",k.row.evidenceInput.split(`
`).length,", Col ",k.row.evidenceInput.length]}),e.jsxs("span",{children:[x.length," Attachment(s)"]})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-300 dark:text-slate-600",children:[e.jsx(p,{name:"ArrowLeft",size:32,className:"mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Select a requirement from the checklist"})]})})]})})}),xe=(v,g)=>{const[u,l]=d.useState(!1),b=d.useRef(null),x=d.useCallback(()=>{var h;if(u){(h=b.current)==null||h.stop(),l(!1);return}const w=window.SpeechRecognition||window.webkitSpeechRecognition;if(!w){alert("Voice-to-Text is not supported in this browser.");return}try{const c=new w;c.continuous=!0,c.interimResults=!0,c.lang=v==="vi"?"vi-VN":"en-US",c.onresult=s=>{let a="";for(let C=s.resultIndex;C<s.results.length;++C)s.results[C].isFinal&&(a+=s.results[C][0].transcript);a&&g(a.trim())},c.onerror=s=>{console.error("Speech Error",s.error),l(!1)},c.onend=()=>l(!1),c.start(),b.current=c,l(!0)}catch(c){console.error("Failed to start recognition",c),l(!1)}},[u,v,g]);return{isListening:u,toggleListening:x}},ue=Z.memo(({processes:v,activeProcessId:g,activeProcess:u,setActiveProcessId:l,addInterviewee:b,removeInterviewee:x})=>{var s;const[w,h]=d.useState(""),c=a=>{a.key==="Enter"&&w.trim()&&(b(w.trim()),h(""))};return e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-2 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl p-1.5 shadow-sm shrink-0 transition-colors",children:[e.jsxs("div",{className:"relative group w-full md:w-auto min-w-[200px] bg-gray-50 dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center hover:border-indigo-300 dark:hover:border-indigo-700 transition-colors",children:[e.jsx("div",{className:"absolute left-2 text-indigo-500 pointer-events-none",children:e.jsx(p,{name:"Session11_GridAdd",size:14})}),e.jsx("select",{value:g||"",onChange:a=>l(a.target.value),className:"w-full bg-transparent appearance-none pl-7 pr-6 py-2 text-xs font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",title:"Switch active process context",children:v.map(a=>e.jsx("option",{value:a.id,className:"text-slate-900 dark:text-white bg-white dark:bg-slate-900",children:a.name},a.id))}),e.jsx("div",{className:"absolute right-2 pointer-events-none text-slate-400",children:e.jsx(p,{name:"ChevronDown",size:12})})]}),e.jsx("div",{className:"w-px h-6 bg-gray-200 dark:bg-slate-700 hidden md:block"}),e.jsxs("div",{className:"flex-1 flex items-center gap-2 w-full overflow-x-auto custom-scrollbar px-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-slate-400 uppercase whitespace-nowrap",children:[e.jsx(p,{name:"User",size:12})," Persons:"]}),(s=u==null?void 0:u.interviewees)==null?void 0:s.map((a,C)=>e.jsxs("span",{className:"flex items-center gap-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300 text-[10px] font-bold px-2 py-0.5 rounded-md border border-indigo-100 dark:border-indigo-800 whitespace-nowrap animate-in zoom-in-95",children:[a,e.jsx("button",{onClick:()=>x(a),className:"hover:text-red-500 transition-colors",children:e.jsx(p,{name:"X",size:10})})]},C)),e.jsx("input",{className:"bg-transparent border-b border-dashed border-gray-300 dark:border-slate-700 text-xs py-0.5 px-1 outline-none focus:border-indigo-500 min-w-[100px] dark:text-slate-300 placeholder-slate-400 focus:placeholder-indigo-300 transition-all",placeholder:"+ Name & Enter",value:w,onChange:a=>h(a.target.value),onKeyDown:c})]})]})}),pe=({uploadedFiles:v,onOcrProcess:g,isOcrLoading:u,isProcessing:l,toggleListening:b,isListening:x,triggerFileUpload:w,onAnalyze:h,isReadyForAnalysis:c,isAnalyzeLoading:s})=>e.jsxs("div",{className:"flex-shrink-0 flex items-end gap-3 min-h-[52px]",children:[v.length>0&&e.jsxs("div",{className:"flex-1 flex gap-2 overflow-x-auto custom-scrollbar bg-gray-50 dark:bg-slate-900 p-1.5 rounded-xl border border-gray-200 dark:border-slate-800 animate-in fade-in slide-in-from-bottom-2",children:[v.map(a=>e.jsxs("div",{className:"relative group w-10 h-10 flex-shrink-0 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-100 dark:border-slate-700 flex items-center justify-center overflow-hidden transition-transform hover:scale-105",children:[e.jsx(p,{name:"FileText",size:16,className:"text-indigo-500"}),a.status==="processing"&&e.jsx("div",{className:"absolute inset-0 bg-white/50 flex items-center justify-center",children:e.jsx(p,{name:"Loader",size:14,className:"animate-spin text-indigo-600"})}),a.status==="success"&&e.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-emerald-500 rounded-full animate-ping-once"})]},a.id)),e.jsxs("button",{onClick:g,disabled:u||l,className:"px-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-[10px] font-bold shadow-md transition-all active:scale-95 disabled:opacity-50",children:["Process ",v.filter(a=>a.status==="pending").length]})]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsxs("button",{onClick:b,className:`px-4 h-[48px] rounded-xl text-xs font-bold flex items-center gap-2 transition-all shadow-sm border active:scale-95 ${x?"bg-red-50 text-red-600 border-red-200 animate-pulse":"bg-white dark:bg-slate-900 text-slate-600 dark:text-slate-300 border-gray-200 dark:border-slate-700 hover:border-indigo-500"}`,children:[e.jsx(p,{name:"Mic",size:18}),e.jsx("span",{className:"hidden md:inline",children:x?"Recording...":"Dictate"})]}),e.jsxs("button",{onClick:w,className:"px-4 h-[48px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 hover:border-indigo-500 text-slate-600 dark:text-slate-300 rounded-xl text-xs font-bold flex items-center gap-2 shadow-sm transition-all active:scale-95",children:[e.jsx(p,{name:"UploadCloud",size:18}),e.jsx("span",{className:"hidden md:inline",children:"Upload"})]}),e.jsxs("button",{onClick:h,disabled:!c,className:`px-6 h-[48px] rounded-xl font-bold transition-all flex items-center gap-2 shadow-lg ${c?"btn-shrimp text-white active:scale-95 hover:shadow-indigo-500/40":"bg-gray-200 dark:bg-slate-800 text-slate-400 cursor-not-allowed"}`,children:[s?e.jsx(se,{className:"text-white"}):e.jsx(p,{name:"Wand2",size:18}),e.jsx("span",{children:"Analyze"})]})]})]}),me=()=>{const{knowledgeBase:v,standards:g,standardKey:u}=M(),{getActiveKey:l}=re();return async x=>{var h;const w=new CustomEvent("OPEN_REFERENCE",{detail:x});if(window.dispatchEvent(w),v){const c=ae.extractClauseContent(v,x.code,x.title);if(c&&c.length>20){setTimeout(()=>{const s=new CustomEvent("UPDATE_REFERENCE_CONTENT",{detail:{en:c,vi:`[SOURCE DOCUMENT EXTRACT]

${c}

(Auto-translated view not available in Offline Mode)`}});window.dispatchEvent(s)},300);return}else console.warn(`[Local Lookup] Could not find clause ${x.code} in source document. Falling back to AI.`)}try{const c=((h=g[u])==null?void 0:h.name)||"",s=l(),a=(s==null?void 0:s.key)||"",C=await ne(x,c,v,a),T=new CustomEvent("UPDATE_REFERENCE_CONTENT",{detail:C});window.dispatchEvent(T)}catch(c){console.error("Reference Fetch Failed",c);const s=new CustomEvent("UPDATE_REFERENCE_CONTENT",{detail:{en:"Failed to load content. Ensure API Key is valid or source document is attached.",vi:""}});window.dispatchEvent(s)}}},ve=({evidence:v,setEvidence:g,uploadedFiles:u,setUploadedFiles:l,isOcrLoading:b,onAnalyze:x,isReadyForAnalysis:w,isAnalyzeLoading:h,analyzeTooltip:c,evidenceLanguage:s,setEvidenceLanguage:a,onExport:C,selectedClauses:T=[],standards:A,standardKey:S,matrixData:z,setMatrixData:k})=>{const{activeProcess:F,activeProcessId:t,setActiveProcessId:i,processes:m,addInterviewee:n,removeInterviewee:o}=M(),[f,N]=d.useState(!1),[I,P]=d.useState(!1),L=d.useRef({}),q=d.useRef(null),O=d.useRef(null),U=me(),V=d.useMemo(()=>{const r=z?Object.keys(z):[];return Array.from(new Set([...T,...r]))},[T,z]),B=le.find(r=>r.id==="evidence"),K=d.useCallback(r=>{r&&O.current?O.current.handleExternalDictation(r):alert("Please select a Requirement row in the Matrix first.")},[]),{isListening:W,toggleListening:X}=xe(s,K),D=d.useCallback((r,j)=>{var E;const y=j||((E=O.current)==null?void 0:E.getActiveRow());if(!y){alert("Please click/focus on a specific Requirement row to attach files.");return}const R=r.map(_=>{const $=Math.random().toString(36).substr(2,9);return L.current[$]=y,{id:$,file:_,status:"pending"}});l(_=>[..._,...R])},[l]),G=d.useCallback(r=>{l(j=>j.filter(y=>y.id!==r)),delete L.current[r]},[l]),H=d.useCallback(async()=>{const r=u.filter(j=>j.status==="pending"||j.status==="error");if(r.length!==0){P(!0);for(const j of r)try{l(R=>R.map(E=>E.id===j.id?{...E,status:"processing"}:E));let y="";if(j.file.type.startsWith("image/")){const R=await ie(j.file);y=await oe("Transcribe text.",R,j.file.type)}else j.file.type==="application/pdf"?y="[PDF Content extracted via OCR would go here - System limitation]":y=await j.file.text();if(y&&O.current){const R=L.current[j.id];if(R){const E=`[File: ${j.file.name}]`;O.current.insertEvidence(R.clauseId,R.rowId,`${E}
${y}`),l(_=>_.filter($=>$.id!==j.id))}}}catch(y){console.error("Matrix OCR Error",y),l(R=>R.map(E=>E.id===j.id?{...E,status:"error",error:y.message||"Failed"}:E))}P(!1)}},[u,l]),J=d.useCallback(r=>{r.preventDefault(),N(!0)},[]),Q=d.useCallback(r=>{r.preventDefault(),N(!1)},[]),Y=d.useCallback(r=>{r.preventDefault(),N(!1),r.dataTransfer.files&&r.dataTransfer.files.length>0&&D(Array.from(r.dataTransfer.files))},[D]);return e.jsxs("div",{className:"h-full flex flex-col gap-2 md:gap-3 animate-fade-in-up relative p-1",children:[e.jsx(ue,{processes:m,activeProcessId:t,activeProcess:F,setActiveProcessId:r=>i(r),addInterviewee:n,removeInterviewee:o}),e.jsxs("div",{className:"flex-1 flex flex-col gap-2 min-h-0 relative",children:[e.jsx("input",{type:"file",ref:q,className:"hidden",accept:"image/*,application/pdf,text/plain",multiple:!0,onChange:r=>r.target.files&&D(Array.from(r.target.files))}),e.jsxs("div",{className:`flex-1 bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-t-4 border-t-${B.borderClass.replace("border-","")} overflow-hidden flex flex-row relative group transition-all duration-500 ease-fluid dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_4px_6px_-1px_rgba(0,0,0,0.5)] ${f?`${B.borderClass} ring-4 ring-blue-500/20 bg-blue-50/10`:"border-gray-100 dark:border-transparent"}`,onDragOver:J,onDragLeave:Q,onDrop:Y,children:[f&&e.jsxs("div",{className:"absolute inset-0 bg-blue-500/10 backdrop-blur-[2px] z-50 flex flex-col items-center justify-center pointer-events-none animate-in fade-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"p-6 rounded-full bg-white dark:bg-slate-900 shadow-2xl border-4 border-dashed border-blue-500",children:e.jsx(p,{name:"UploadCloud",size:48,className:"text-blue-600 animate-bounce"})}),e.jsx("h3",{className:"mt-4 text-xl font-black text-blue-700 dark:text-blue-400 uppercase tracking-widest",children:"Drop Files to Active Row"})]}),A&&S&&A[S]&&z&&k?e.jsx("div",{className:"flex-1 w-full h-full p-1",children:e.jsx(ce,{ref:O,standard:A[S],selectedClauses:V,matrixData:z,setMatrixData:k,onPasteFiles:D,uploadedFiles:u,onRemoveFile:G,onLookup:U})}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(p,{name:"LayoutList",size:48,className:"mb-4 opacity-30"}),e.jsx("p",{children:"Please select a Standard to view the Matrix."})]})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex flex-row items-center justify-between gap-2 md:gap-3 w-full pt-1",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(pe,{uploadedFiles:u,onOcrProcess:H,isOcrLoading:b,isProcessing:I,toggleListening:X,isListening:W,triggerFileUpload:()=>{var r;return(r=q.current)==null?void 0:r.click()},onAnalyze:x,isReadyForAnalysis:w,isAnalyzeLoading:h})}),e.jsxs("button",{onClick:()=>C("evidence",s),className:"flex-none md:w-auto px-3 md:px-4 h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm whitespace-nowrap dark:shadow-md",title:"Export Raw Evidence",children:[e.jsx(p,{name:"Download"}),e.jsx("span",{className:"hidden md:inline",children:"Export"}),e.jsxs("div",{className:"lang-pill-container",children:[e.jsx("span",{onClick:r=>{r.stopPropagation(),a("en")},className:`lang-pill-btn ${s==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:r=>{r.stopPropagation(),a("vi")},className:`lang-pill-btn ${s==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]})]})]})};export{ve as EvidenceView};
