var Xs=Object.defineProperty;var Zs=(t,s,a)=>s in t?Xs(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var gt=(t,s,a)=>Zs(t,typeof s!="symbol"?s+"":s,a);import{j as e,R as Ze,r as l,c as Qs}from"./vendor-react--UE8qFvL.js";import{GoogleGenAI as Dt,Type as Ae}from"./vendor-genai-C1TFRE--.js";import"./vendor-BhE6lIor.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&n(p)}).observe(document,{childList:!0,subtree:!0});function a(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(r){if(r.ep)return;r.ep=!0;const c=a(r);fetch(r.href,c)}})();const Ys="modulepreload",er=function(t,s){return new URL(t,s).href},ts={},tr=function(s,a,n){let r=Promise.resolve();if(a&&a.length>0){const p=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),d=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));r=Promise.allSettled(a.map(b=>{if(b=er(b,n),b in ts)return;ts[b]=!0;const w=b.endsWith(".css"),k=w?'[rel="stylesheet"]':"";if(!!n)for(let T=p.length-1;T>=0;T--){const R=p[T];if(R.href===b&&(!w||R.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${b}"]${k}`))return;const A=document.createElement("link");if(A.rel=w?"stylesheet":Ys,w||(A.as="script"),A.crossOrigin="",A.href=b,d&&A.setAttribute("nonce",d),document.head.appendChild(A),w)return new Promise((T,R)=>{A.addEventListener("load",T),A.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${b}`)))})}))}function c(p){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=p,window.dispatchEvent(h),!h.defaultPrevented)throw p}return r.then(p=>{for(const h of p||[])h.status==="rejected"&&c(h.reason);return s().catch(c)})},sr={name:"ISO 9001:2015 (QMS)",description:"Quality Management System",groups:[{id:"PLAN_9001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context of organization",description:"Internal and external issues that affect its ability to achieve intended results.",subClauses:[{id:"4.1",code:"4.1",title:"Understanding the organization",description:"Determining internal and external issues relevant to its purpose."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Understanding the needs and expectations of stakeholders."},{id:"4.3",code:"4.3",title:"Scope of QMS",description:"Determining the boundaries and applicability of the quality system."},{id:"4.4",code:"4.4",title:"QMS processes",description:"Establishing, implementing, and maintaining processes."}]},{id:"5",code:"5",title:"Leadership",description:"Top management commitment, policy and roles.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership commitment",description:"Demonstrating leadership and commitment to customer focus."},{id:"5.2",code:"5.2",title:"Policy",description:"Establishing and communicating the quality policy."},{id:"5.3",code:"5.3",title:"Roles & Authorities",description:"Ensuring responsibilities and authorities are assigned."}]},{id:"6",code:"6",title:"Planning",description:"Risks, opportunities and quality objectives.",subClauses:[{id:"6.1",code:"6.1",title:"Risks & Opportunities",description:"Actions to address risks and opportunities."},{id:"6.2",code:"6.2",title:"Quality objectives",description:"Establishing objectives and planning to achieve them."},{id:"6.3",code:"6.3",title:"Planning of changes",description:"Carrying out changes in a planned manner."}]}]},{id:"SUPPORT_9001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Providing necessary resources for the QMS.",subClauses:[{id:"7.1.1",code:"7.1.1",title:"General",description:"Determining and providing resources for QMS."},{id:"7.1.2",code:"7.1.2",title:"People",description:"Providing persons necessary for effective implementation."},{id:"7.1.3",code:"7.1.3",title:"Infrastructure",description:"Maintenance of buildings, equipment, and transport."},{id:"7.1.4",code:"7.1.4",title:"Process Environment",description:"Managing social (non-discriminatory), psychological (stress-reducing), and physical (temperature, hygiene) factors."},{id:"7.1.5",code:"7.1.5",title:"Monitoring resources",description:"Calibration and measurement traceability."},{id:"7.1.6",code:"7.1.6",title:"Knowledge",description:"Maintaining organizational knowledge and lessons learned."}]},{id:"7.2",code:"7.2",title:"Competence",description:"Ensuring workers are competent based on education/training."},{id:"7.3",code:"7.3",title:"Awareness",description:"Ensuring persons are aware of quality policy and objectives."},{id:"7.4",code:"7.4",title:"Communication",description:"Determining internal and external communications."},{id:"7.5",code:"7.5",title:"Documented info",description:"Control of information required by the standard.",subClauses:[{id:"7.5.1",code:"7.5.1",title:"General",description:"Determining necessary documented information for QMS."},{id:"7.5.2",code:"7.5.2",title:"Creating & Updating",description:"Ensuring proper identification, format, and review."},{id:"7.5.3",code:"7.5.3",title:"Control of info",description:"Ensuring availability, protection, and storage control.",subClauses:[{id:"7.5.3.1",code:"7.5.3.1",title:"Availability",description:"Ensuring info is available where needed."},{id:"7.5.3.2",code:"7.5.3.2",title:"Control",description:"Distribution, access, retrieval and use."}]}]}]},{id:"DO_9001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational planning",description:"Control of processes to meet P/S requirements."},{id:"8.2",code:"8.2",title:"Requirements for P/S",description:"Determining requirements and communicating with customers."},{id:"8.3",code:"8.3",title:"Design and development",description:"D&D of products and services.",subClauses:[{id:"8.3.1",code:"8.3.1",title:"General",description:"Establishing a D&D process."},{id:"8.3.2",code:"8.3.2",title:"Planning",description:"Determining D&D stages and controls."},{id:"8.3.3",code:"8.3.3",title:"Inputs",description:"Requirements essential for D&D."},{id:"8.3.4",code:"8.3.4",title:"Controls",description:"Ensuring reviews, verification, and validation."},{id:"8.3.5",code:"8.3.5",title:"Outputs",description:"Meeting input requirements."},{id:"8.3.6",code:"8.3.6",title:"Changes",description:"Controlling modifications to D&D."}]},{id:"8.4",code:"8.4",title:"External Providers",description:"Control of externally provided P/S.",subClauses:[{id:"8.4.1",code:"8.4.1",title:"General",description:"Evaluating and selecting external providers."},{id:"8.4.2",code:"8.4.2",title:"Type & Extent",description:"Controlling the impact of providers on results."},{id:"8.4.3",code:"8.4.3",title:"Information",description:"Communicating requirements to providers clearly."}]},{id:"8.5",code:"8.5",title:"Production & Delivery",description:"Control of production and service provision.",subClauses:[{id:"8.5.1",code:"8.5.1",title:"Control",description:"Availability of info, equipment and monitoring."},{id:"8.5.2",code:"8.5.2",title:"Identification",description:"Ensuring traceability throughout provision."},{id:"8.5.3",code:"8.5.3",title:"Property",description:"Safeguarding customer or provider assets."},{id:"8.5.4",code:"8.5.4",title:"Preservation",description:"Ensuring conformity during processing."},{id:"8.5.5",code:"8.5.5",title:"Post-delivery",description:"Statutory, regulatory, and warranty duties."},{id:"8.5.6",code:"8.5.6",title:"Control of changes",description:"Reviewing and controlling changes for production."}]},{id:"8.6",code:"8.6",title:"Release of P/S",description:"Verification that requirements have been met."},{id:"8.7",code:"8.7",title:"Nonconforming outputs",description:"Ensuring unintended use is prevented."}]},{id:"CHECK_ACT_9001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1",code:"9.1",title:"Monitoring & Evaluation",description:"Determining what needs to be monitored."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Scheduled review of QMS performance."},{id:"9.3",code:"9.3",title:"Management review",description:"Top management review of system suitability."},{id:"10.1",code:"10.1",title:"Improvement",description:"Determining opportunities for improvement."},{id:"10.2",code:"10.2",title:"NC & Corrective action",description:"Managing nonconformities and root causes."},{id:"10.3",code:"10.3",title:"Continual improvement",description:"Continually improving QMS effectiveness."}]}]},rr={name:"ISO/IEC 27001:2022 (ISMS)",description:"Information Security Management System",groups:[{id:"PLAN_27001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context of organization",description:"Internal/external issues and scope.",subClauses:[{id:"4.1",code:"4.1",title:"Context",description:"Identifying security issues."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Needs and expectations."},{id:"4.3",code:"4.3",title:"Scope",description:"Determining ISMS boundaries."},{id:"4.4",code:"4.4",title:"ISMS System",description:"Establishing processes."}]},{id:"5",code:"5",title:"Leadership",description:"Commitment and Policy.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership & Commitment",description:"Accountability."},{id:"5.2",code:"5.2",title:"Policy",description:"InfoSec policy."},{id:"5.3",code:"5.3",title:"Roles & Authorities",description:"Assigning responsibilities."}]},{id:"6",code:"6",title:"Planning",description:"Risk treatment.",subClauses:[{id:"6.1.1",code:"6.1.1",title:"General",description:"Risk actions."},{id:"6.1.2",code:"6.1.2",title:"Risk assessment",description:"Information security risk process."},{id:"6.1.3",code:"6.1.3",title:"Risk treatment",description:"SoA and planning."},{id:"6.2",code:"6.2",title:"Security objectives",description:"Achievement planning."}]}]},{id:"SUPPORT_27001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Availability."},{id:"7.2",code:"7.2",title:"Competence",description:"Training requirements."},{id:"7.3",code:"7.3",title:"Awareness",description:"Understanding policy."},{id:"7.4",code:"7.4",title:"Communication",description:"Info flow rules."},{id:"7.5",code:"7.5",title:"Documented info",description:"Control of records."}]},{id:"DO_27001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational planning",description:"Securing processes."},{id:"8.2",code:"8.2",title:"Risk assessment",description:"Execution at intervals."},{id:"8.3",code:"8.3",title:"Risk treatment",description:"Implementing treatments."}]},{id:"CHECK_ACT_27001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1",code:"9.1",title:"Monitoring",description:"Measuring effectiveness."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Periodic checks."},{id:"9.3",code:"9.3",title:"Management review",description:"Strategic eval."},{id:"10.1",code:"10.1",title:"Continual improvement",description:"Growth."},{id:"10.2",code:"10.2",title:"Nonconformity",description:"Corrective actions."}]},{id:"ANNEX_A_5",title:"Annex A.5 Organizational (37 Controls)",icon:"Lock",clauses:[{id:"A.5.1",code:"A.5.1",title:"Policies for information security",description:"Reviewed for suitability."},{id:"A.5.2",code:"A.5.2",title:"InfoSec roles",description:"Defined responsibilities."},{id:"A.5.3",code:"A.5.3",title:"Segregation of duties",description:"Conflict reduction."},{id:"A.5.4",code:"A.5.4",title:"Management responsibilities",description:"Committing to security."},{id:"A.5.5",code:"A.5.5",title:"Contact with authorities",description:"Regulation flow."},{id:"A.5.6",code:"A.5.6",title:"Special interest groups",description:"Trend tracking."},{id:"A.5.7",code:"A.5.7",title:"Threat intelligence",description:"Info collection."},{id:"A.5.8",code:"A.5.8",title:"IS in project mgmt",description:"Lifecycle inclusion."},{id:"A.5.9",code:"A.5.9",title:"Inventory of assets",description:"Critical asset list."},{id:"A.5.10",code:"A.5.10",title:"Acceptable use of assets",description:"Usage rules."},{id:"A.5.11",code:"A.5.11",title:"Return of assets",description:"Termination retrieval."},{id:"A.5.12",code:"A.5.12",title:"Classification of info",description:"Labeling based on value."},{id:"A.5.13",code:"A.5.13",title:"Labeling of info",description:"Visual markers."},{id:"A.5.14",code:"A.5.14",title:"Information transfer",description:"Securing transit."},{id:"A.5.15",code:"A.5.15",title:"Access control",description:"Authorization rules."},{id:"A.5.16",code:"A.5.16",title:"Identity management",description:"User ID lifecycle."},{id:"A.5.17",code:"A.5.17",title:"Authentication info",description:"Secrets management."},{id:"A.5.18",code:"A.5.18",title:"Access rights",description:"Provisioning/revoking."},{id:"A.5.19",code:"A.5.19",title:"IS in supplier relationships",description:"Agreements."},{id:"A.5.20",code:"A.5.20",title:"Supplier agreements",description:"Addressing security."},{id:"A.5.21",code:"A.5.21",title:"ICT supply chain",description:"Sourcing risks."},{id:"A.5.22",code:"A.5.22",title:"Monitoring suppliers",description:"Auditing delivery."},{id:"A.5.23",code:"A.5.23",title:"Cloud services",description:"SaaS security."},{id:"A.5.24",code:"A.5.24",title:"Incident management",description:"Planning response."},{id:"A.5.25",code:"A.5.25",title:"Incident assessment",description:"Severity eval."},{id:"A.5.26",code:"A.5.26",title:"Incident response",description:"Action taken."},{id:"A.5.27",code:"A.5.27",title:"Incident learning",description:"Root cause."},{id:"A.5.28",code:"A.5.28",title:"Evidence collection",description:"Forensics."},{id:"A.5.29",code:"A.5.29",title:"IS during disruption",description:"BCP security."},{id:"A.5.30",code:"A.5.30",title:"ICT readiness",description:"DR planning."},{id:"A.5.31",code:"A.5.31",title:"Legal compliance",description:"Regulatory requirements."},{id:"A.5.32",code:"A.5.32",title:"IP Rights",description:"Copyright protection."},{id:"A.5.33",code:"A.5.33",title:"Protection of records",description:"Integrity."},{id:"A.5.34",code:"A.5.34",title:"Privacy of PII",description:"GDPR/Data protection."},{id:"A.5.35",code:"A.5.35",title:"Independent review",description:"External auditing."},{id:"A.5.36",code:"A.5.36",title:"Policy compliance",description:"Adherence."},{id:"A.5.37",code:"A.5.37",title:"Operating procedures",description:"Standard documentation."}]},{id:"ANNEX_A_6",title:"Annex A.6 People (8 Controls)",icon:"Users",clauses:[{id:"A.6.1",code:"A.6.1",title:"Screening",description:"Background checks."},{id:"A.6.2",code:"A.6.2",title:"Terms of employment",description:"HR contracts."},{id:"A.6.3",code:"A.6.3",title:"Awareness",description:"InfoSec education."},{id:"A.6.4",code:"A.6.4",title:"Disciplinary process",description:"Breach handling."},{id:"A.6.5",code:"A.6.5",title:"Termination responsibilities",description:"Post-exit."},{id:"A.6.6",code:"A.6.6",title:"Confidentiality",description:"NDAs."},{id:"A.6.7",code:"A.6.7",title:"Remote working",description:"Teleworking rules."},{id:"A.6.8",code:"A.6.8",title:"Event reporting",description:"Anomaly reporting."}]},{id:"ANNEX_A_7",title:"Annex A.7 Physical (14 Controls)",icon:"Building",clauses:[{id:"A.7.1",code:"A.7.1",title:"Physical perimeters",description:"Barriers."},{id:"A.7.2",code:"A.7.2",title:"Physical entry",description:"Access systems."},{id:"A.7.3",code:"A.7.3",title:"Securing offices",description:"Locks."},{id:"A.7.4",code:"A.7.4",title:"Security monitoring",description:"CCTV."},{id:"A.7.5",code:"A.7.5",title:"Physical protection",description:"Disaster proofing."},{id:"A.7.6",code:"A.7.6",title:"Secure areas",description:"Restricted protocols."},{id:"A.7.7",code:"A.7.7",title:"Clear desk/screen",description:"Clean policy."},{id:"A.7.8",code:"A.7.8",title:"Equipment siting",description:"Safe placement."},{id:"A.7.9",code:"A.7.9",title:"Assets off-premises",description:"Mobile security."},{id:"A.7.10",code:"A.7.10",title:"Storage media",description:"Drive handling."},{id:"A.7.11",code:"A.7.11",title:"Utilities",description:"Power/Water safety."},{id:"A.7.12",code:"A.7.12",title:"Cabling security",description:"Line protection."},{id:"A.7.13",code:"A.7.13",title:"Equipment maintenance",description:"Care logs."},{id:"A.7.14",code:"A.7.14",title:"Secure disposal",description:"Data wiping."}]},{id:"ANNEX_A_8",title:"Annex A.8 Technological (34 Controls)",icon:"Cpu",clauses:[{id:"A.8.1",code:"A.8.1",title:"Endpoint devices",description:"Device agents."},{id:"A.8.2",code:"A.8.2",title:"Privileged access",description:"Admin rights."},{id:"A.8.3",code:"A.8.3",title:"Information access",description:"Need-to-know."},{id:"A.8.4",code:"A.8.4",title:"Source code access",description:"IP security."},{id:"A.8.5",code:"A.8.5",title:"Authentication",description:"MFA usage."},{id:"A.8.6",code:"A.8.6",title:"Capacity mgmt",description:"Resources."},{id:"A.8.7",code:"A.8.7",title:"Malware protection",description:"AV/EDR."},{id:"A.8.8",code:"A.8.8",title:"Vulnerabilities",description:"Patching."},{id:"A.8.9",code:"A.8.9",title:"Configuration",description:"Hardening."},{id:"A.8.10",code:"A.8.10",title:"Deletion",description:"Erasure."},{id:"A.8.11",code:"A.8.11",title:"Data masking",description:"Privacy."},{id:"A.8.12",code:"A.8.12",title:"DLP",description:"Leakage prevention."},{id:"A.8.13",code:"A.8.13",title:"Backup",description:"Redundancy."},{id:"A.8.14",code:"A.8.14",title:"Redundancy ICT",description:"HA systems."},{id:"A.8.15",code:"A.8.15",title:"Logging",description:"Audit trails."},{id:"A.8.16",code:"A.8.16",title:"Monitoring",description:"Health alerts."},{id:"A.8.17",code:"A.8.17",title:"Clock sync",description:"NTP."},{id:"A.8.18",code:"A.8.18",title:"Privileged utilities",description:"Restrict tools."},{id:"A.8.19",code:"A.8.19",title:"Software install",description:"Whitelisting."},{id:"A.8.20",code:"A.8.20",title:"Network security",description:"Firewalls."},{id:"A.8.21",code:"A.8.21",title:"Network services",description:"VPN/Gateways."},{id:"A.8.22",code:"A.8.22",title:"Segregation",description:"VLANs."},{id:"A.8.23",code:"A.8.23",title:"Web filtering",description:"Proxy."},{id:"A.8.24",code:"A.8.24",title:"Cryptography",description:"Encryption."},{id:"A.8.25",code:"A.8.25",title:"Secure SDLC",description:"Dev security."},{id:"A.8.26",code:"A.8.26",title:"Application security",description:"Design."},{id:"A.8.27",code:"A.8.27",title:"Architecture",description:"Engineering."},{id:"A.8.28",code:"A.8.28",title:"Secure coding",description:"OWASP."},{id:"A.8.29",code:"A.8.29",title:"Security testing",description:"VAPT."},{id:"A.8.30",code:"A.8.30",title:"Outsourced dev",description:"Contractor code."},{id:"A.8.31",code:"A.8.31",title:"Separation envs",description:"Dev/Prod."},{id:"A.8.32",code:"A.8.32",title:"Change mgmt",description:"RFCs."},{id:"A.8.33",code:"A.8.33",title:"Test info",description:"Protect data."},{id:"A.8.34",code:"A.8.34",title:"IS during audit",description:"Auditor access."}]}]},ir={name:"ISO 14001:2015 (EMS)",description:"Environmental Management System",groups:[{id:"PLAN_14001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context",description:"Org Context.",subClauses:[{id:"4.1",code:"4.1",title:"Org Context",description:"Env issues."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Expectations."},{id:"4.3",code:"4.3",title:"Scope",description:"Boundaries."},{id:"4.4",code:"4.4",title:"EMS System",description:"Processes."}]},{id:"5",code:"5",title:"Leadership",description:"Commitment.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership & Commitment",description:"Duty."},{id:"5.2",code:"5.2",title:"Environmental Policy",description:"Goals."},{id:"5.3",code:"5.3",title:"Org Roles & Responsibilities",description:"Authorities."}]},{id:"6",code:"6",title:"Planning",description:"Aspects.",subClauses:[{id:"6.1.1",code:"6.1.1",title:"General",description:"Actions."},{id:"6.1.2",code:"6.1.2",title:"Environmental aspects",description:"Impacts."},{id:"6.1.3",code:"6.1.3",title:"Compliance obligations",description:"Legal."},{id:"6.1.4",code:"6.1.4",title:"Planning action",description:"Achievement."},{id:"6.2",code:"6.2",title:"Environmental objectives",description:"Plans."}]}]},{id:"SUPPORT_14001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Supply."},{id:"7.2",code:"7.2",title:"Competence",description:"Training."},{id:"7.3",code:"7.3",title:"Awareness",description:"EMS awareness."},{id:"7.4",code:"7.4",title:"Communication",description:"Internal/External.",subClauses:[{id:"7.4.1",code:"7.4.1",title:"General",description:"Criteria."},{id:"7.4.2",code:"7.4.2",title:"Internal",description:"Staff."},{id:"7.4.3",code:"7.4.3",title:"External",description:"Parties."}]},{id:"7.5",code:"7.5",title:"Documented info",description:"Control."}]},{id:"DO_14001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational control",description:"Lifecycle."},{id:"8.2",code:"8.2",title:"Emergency preparedness",description:"Response."}]},{id:"CHECK_ACT_14001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1.1",code:"9.1.1",title:"General",description:"Measurement."},{id:"9.1.2",code:"9.1.2",title:"Compliance evaluation",description:"Audit."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Scheduled review."},{id:"9.3",code:"9.3",title:"Management review",description:"Review outputs."},{id:"10.1",code:"10.1",title:"General",description:"Performance."},{id:"10.2",code:"10.2",title:"Nonconformity",description:"Corrective action."},{id:"10.3",code:"10.3",title:"Continual improvement",description:"Suitability."}]}]},ar={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var nr={};const or="4.0.0-GOLD",lr="2026-01-05 12:00:00 (GMT+7)",nt="gemini-3-pro-preview",dr="gemini-3-flash-preview",mt={company:"",smo:"",department:"",interviewee:"",auditor:"",type:""},cr=()=>{try{if(typeof import.meta<"u"&&ar)return}catch{}try{if(typeof process<"u"&&nr)return""}catch{}return""},xr=cr(),Tt=[xr].filter(t=>t&&t.trim()!==""),ls=["gemini-3-pro-preview","gemini-3-flash-preview","gemini-2.0-flash-exp","gemini-1.5-pro","gemini-1.5-flash"],at=[{id:"evidence",label:"1. Evidence",icon:"ScanText",colorClass:"bg-blue-500",textClass:"text-blue-600",borderClass:"border-blue-500",bgSoft:"bg-blue-50 dark:bg-blue-950/30"},{id:"findings",label:"2. Findings",icon:"Wand2",colorClass:"bg-purple-500",textClass:"text-purple-600",borderClass:"border-purple-500",bgSoft:"bg-purple-50 dark:bg-purple-950/30"},{id:"report",label:"3. Report",icon:"FileText",colorClass:"bg-emerald-500",textClass:"text-emerald-600",borderClass:"border-emerald-500",bgSoft:"bg-emerald-50 dark:bg-emerald-950/30"}],ur={"Stage 1":"Initial review of documentation and readiness.","Stage 2":"Evaluation of implementation and effectiveness.",Internal:"First-party audit to check own system.","PRE ASSESSMENT":"Gap analysis assessment.","PRE TRANSFER REVIEW":"Check valid certification for transfer.","TRANSITION AUDIT":"Ensure transition to new standard version.",CAV:"Surveillance assessment.",RAV:"Re-assessment of existing certification."},Rt={"ISO 9001:2015":sr,"ISO 27001:2022":rr,"ISO 14001:2015":ir},hr=[{version:"4.0.0-GOLD",date:"2026-01-05",features:["BREAKTHROUGH: Official Gold Release. Production Ready.","FEATURE: 'Evidence Matrix' - Structured, clause-by-clause evidence mapping interface.","FEATURE: 'Plain Text Export' - System-integration friendly reports (No Markdown/Tables).","ENGINE: 'Dual-Stream Synthesis' - AI now combines unstructured docs + structured matrix data.","PERFORMANCE: GPU-Accelerated transitions and 'Liquid Tab' navigation.","DOCS: Integrated full Project Documentation & User Guide."]},{version:"3.5.0-STABLE",date:"2026-01-04",features:["BASELINE: Official Release Candidate. System stabilized and optimized.","PRIVACY SHIELD: Integrated PII Redaction engine to mask Emails/Phones before AI processing.","HYBRID AI ENGINE: Automatic switch between 'Gemini 3.0 Cloud' and 'Local Intelligence' (Offline Mode).","SMART FAILOVER: Multi-key pooling allows continuous operation even if primary quotas are exhausted."]}],pr=[{icon:"ScanText",title:"Smart OCR",desc:"Extracts text from Images, PDFs & TXT."},{icon:"Wand2",title:"AI Analysis",desc:"Expert compliance evaluation."},{icon:"FileText",title:"Auto Report",desc:"Synthesizes final audit findings."},{icon:"LayoutList",title:"Matrix View",desc:"Structured Evidence Mapping."}],gr="",ss={BookOpen:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),e.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Quote:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2H4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8Z"}),e.jsx("path",{d:"M14 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2h-4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8Z"})]}),TDLogo:e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"tealNeonGrad",x1:"100%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#00f2c3",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"#0098f0",stopOpacity:"1"})]})}),e.jsx("path",{d:"M 20 20 H 65 L 55 30 H 30 V 65 L 20 75 V 20 Z",fill:"url(#tealNeonGrad)"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M 40 40 H 60 C 75 40, 85 50, 85 65 C 85 80, 75 90, 60 90 H 35 L 45 80 H 60 C 70 80, 75 75, 75 65 C 75 55, 70 50, 60 50 H 50 V 40 Z",fill:"url(#tealNeonGrad)"}),e.jsx("path",{d:"M 30 65 L 60 35",stroke:"white",strokeWidth:"0.5",strokeOpacity:"0.3"})]}),TDSolidLink:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"future_td_grad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#06b6d4"})," ",e.jsx("stop",{offset:"50%",stopColor:"#6366f1"})," ",e.jsx("stop",{offset:"100%",stopColor:"#f59e0b"})," "]}),e.jsxs("filter",{id:"glow_td",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"0.6",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("path",{d:"M5 6H11V18H14C17.866 18 21 15.3137 21 12C21 8.68629 17.866 6 14 6H11",stroke:"url(#future_td_grad)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#glow_td)"})]}),Grid:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]}),Session1_SparklePlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 3v18"}),e.jsx("path",{d:"M3 12h18"}),e.jsx("path",{d:"m15 9-6 6"}),e.jsx("path",{d:"m9 9 6 6"}),e.jsx("path",{d:"M12 2v4"}),e.jsx("path",{d:"m4.93 4.93 2.83 2.83"}),e.jsx("path",{d:"M2 12h4"}),e.jsx("path",{d:"m4.93 19.07 2.83-2.83"}),e.jsx("path",{d:"M12 22v-4"}),e.jsx("path",{d:"m19.07 19.07-2.83-2.83"}),e.jsx("path",{d:"M22 12h-4"}),e.jsx("path",{d:"m19.07 4.93-2.83 2.83"})]}),Session2_PlayCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polygon",{points:"10 8 16 12 10 16 10 8"})]}),Session3_Rocket:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"}),e.jsx("path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),e.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.1 4-1 4-1"}),e.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.1-1.62 1-4 1-4"})]}),Session4_FilePlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),e.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),Session5_RefreshCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e.jsx("path",{d:"M3 3v5h5"}),e.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),e.jsx("path",{d:"M16 21h5v-5"})]}),Session6_Zap:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Session7_Compass:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"})]}),Session8_Flag:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),e.jsx("line",{x1:"4",y1:"22",x2:"4",y2:"15"})]}),Session9_DoorOpen:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),e.jsx("path",{d:"M2 20h3"}),e.jsx("path",{d:"M13 20h9"}),e.jsx("path",{d:"M10 12v.01"}),e.jsx("path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z"})]}),Session10_Pulse:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),Session11_GridAdd:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),e.jsx("path",{d:"M3 17.5h7"}),e.jsx("path",{d:"M6.5 14v7"})]}),Session12_CleanSheet:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),e.jsx("path",{d:"M3 9h18"})]}),Session13_PowerBtn:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),e.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]}),Demo1_MultiFiles:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M3 15h6"}),e.jsx("path",{d:"M6 12v6"}),e.jsx("path",{d:"M16 18l2-2 2 2"}),e.jsx("path",{d:"M18 16v6"})]}),Demo2_CloudAdd:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 13v8"}),e.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),e.jsx("path",{d:"M16 17l-4-4-4 4"})]}),Demo3_FolderUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"}),e.jsx("path",{d:"M12 10v6"}),e.jsx("path",{d:"m9 13 3-3 3 3"})]}),Demo4_ImgStack:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"}),e.jsx("line",{x1:"16",y1:"5",x2:"22",y2:"5"}),e.jsx("line",{x1:"19",y1:"2",x2:"19",y2:"8"}),e.jsx("circle",{cx:"9",cy:"9",r:"2"}),e.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Demo5_Clip:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"}),e.jsx("path",{d:"M12 12h.01"})]}),Demo6_BoxUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),e.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),e.jsx("line",{x1:"12",y1:"12.01",x2:"12",y2:"22.08"}),e.jsx("polyline",{points:"16 12 12 8 8 12"})]}),Demo7_PlusCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M8 12h8"}),e.jsx("path",{d:"M12 8v8"})]}),Demo8_GridPlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}),e.jsx("path",{d:"M14 17h7"}),e.jsx("path",{d:"M17.5 13.5v7"})]}),Demo9_DocUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M12 18v-6"}),e.jsx("path",{d:"m9 15 3-3 3 3"})]}),Demo10_Layers:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}),e.jsx("path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}),e.jsx("path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"}),e.jsx("path",{d:"M12 8v4"})]}),Demo11_Scan:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),e.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),e.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),e.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),e.jsx("path",{d:"M7 12h10"}),e.jsx("path",{d:"M12 8v8"})]}),Demo12_Attach:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m4.5 16.5 7-7"}),e.jsx("path",{d:"m2 2 20 20"}),e.jsx("path",{d:"m12 12 7-7"}),e.jsx("path",{d:"M17 17v5"}),e.jsx("path",{d:"M22 12h-5"})]}),Demo13_Meteor:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m13 4 8.2 2.5a2 2 0 0 1 1.3 2.5L20 17.5"}),e.jsx("path",{d:"m8.5 7.5 10 10"}),e.jsx("path",{d:"M2 13.5V19a2 2 0 0 0 2 2h5.5"}),e.jsx("path",{d:"m13.5 8.5-5 5"}),e.jsx("path",{d:"M7 15c-1.5 1-2 2.5-2 2.5s1.5.5 2.5-2"}),e.jsx("path",{d:"M12 4V2"}),e.jsx("path",{d:"m16 6 2-2"}),e.jsx("path",{d:"M8 6 6 4"})]}),Sparkle:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:"text-amber-400 drop-shadow-[0_0_4px_rgba(252,211,77,0.7)] animate-pulse-slow",children:e.jsx("path",{d:"M12 2L14.4 9.6L22 12L14.4 14.4L12 22L9.6 14.4L2 12L9.6 9.6L12 2Z"})}),FilePlus2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M3 15h6"}),e.jsx("path",{d:"M6 12v6"})]}),History:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e.jsx("path",{d:"M3 3v5h5"}),e.jsx("path",{d:"M12 7v5l4 2"})]}),LayoutList:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}),e.jsx("path",{d:"M14 4h7"}),e.jsx("path",{d:"M14 9h7"}),e.jsx("path",{d:"M14 15h7"}),e.jsx("path",{d:"M14 20h7"})]}),Tag:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),FileEdit:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l1-3.95 5.42-5.44Z"})]}),Book:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),FileShield:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M12 13v7"}),e.jsx("path",{d:"M8.5 16.5c2 1 5 1 7 0"})]}),Users:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Lock:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),Cpu:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),e.jsx("rect",{x:"9",y:"9",width:"6",height:"6"}),e.jsx("path",{d:"M15 2v2"}),e.jsx("path",{d:"M15 20v2"}),e.jsx("path",{d:"M2 15h2"}),e.jsx("path",{d:"M2 9h2"}),e.jsx("path",{d:"M20 15h2"}),e.jsx("path",{d:"M20 9h2"}),e.jsx("path",{d:"M9 2v2"}),e.jsx("path",{d:"M9 20v2"})]}),CheckThick:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),CheckSquare:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"9 11 12 14 22 4"}),e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-3-2V5a2 2 0 0 1 2-2h11"})]}),Square:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})}),FileText:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"})]}),Search:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Trash2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("path",{d:"M14 11v6"})]}),ChevronDown:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})}),ChevronUp:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"18 15 12 9 6 15"})}),Wand2:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z"}),e.jsx("path",{d:"m14 7 3 3"}),e.jsx("path",{d:"M5 6v4"}),e.jsx("path",{d:"M19 14v4"}),e.jsx("path",{d:"M10 2v2"}),e.jsx("path",{d:"M7 8H3"}),e.jsx("path",{d:"M21 16h-4"}),e.jsx("path",{d:"M11 3H9"})]}),AlertCircle:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),CheckCircle2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{d:"m9 12 2 2 4-4"})]}),Save:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),e.jsx("polyline",{points:"7 3 7 8 15 8"})]}),ExpandPanel:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"15 3 21 3 21 9"}),e.jsx("polyline",{points:"9 21 3 21 3 15"}),e.jsx("line",{x1:"21",y1:"3",x2:"14",y2:"10"}),e.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}),CollapsePanel:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"4 14 10 14 10 20"}),e.jsx("polyline",{points:"20 10 14 10 14 4"}),e.jsx("line",{x1:"14",y1:"10",x2:"21",y2:"3"}),e.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}),X:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Copy:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),e.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),Download:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-3-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Sun:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),RefreshCw:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 2v6h-6"}),e.jsx("path",{d:"M3 12a9 9 0 0 1 15-6.7L21 8"}),e.jsx("path",{d:"M3 22v-6h6"}),e.jsx("path",{d:"M21 12a9 9 0 0 1-15 6.7L3 16"})]}),Lightbulb:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 18h6"}),e.jsx("path",{d:"M10 22h4"}),e.jsx("path",{d:"M12 2v2"}),e.jsx("path",{d:"M12 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),e.jsx("path",{d:"M9 10a3 3 0 0 1 3-3 3 3 0 0 1 3 3v2H9z"})]}),AIIndicator:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:e.jsx("path",{d:"M12 2L14.4 9.6L22 12L14.4 14.4L12 22L9.6 14.4L2 12L9.6 9.6L12 2Z"})}),UploadCloud:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),e.jsx("path",{d:"M12 12v9"}),e.jsx("path",{d:"m16 16-4-4-4 4"})]}),Image:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),e.jsx("circle",{cx:"9",cy:"9",r:"2"}),e.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Info:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Settings:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Plus:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Minus:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})}),Key:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"m21 2-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0 3 3L22 7l-3-3m-3.5 3.5L19 4"})}),Loader:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-spin",children:e.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Keyboard:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2"}),e.jsx("path",{d:"M6 8h.001"}),e.jsx("path",{d:"M10 8h.001"}),e.jsx("path",{d:"M14 8h.001"}),e.jsx("path",{d:"M18 8h.001"}),e.jsx("path",{d:"M6 12h.001"}),e.jsx("path",{d:"M10 12h.001"}),e.jsx("path",{d:"M14 12h.001"}),e.jsx("path",{d:"M18 12h.001"}),e.jsx("path",{d:"M7 16h10"})]}),TextSize:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5h7v2"}),e.jsx("path",{d:"M6.5 5v14"}),e.jsx("path",{d:"M14 13v-2h7v2"}),e.jsx("path",{d:"M17.5 11v8"})]}),AuditUser:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"}),e.jsx("path",{d:"M22 22 18 18 16 20 20 24 24 20Z"})]}),ScanText:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5c0-1.1.9-2 2-2h2"}),e.jsx("path",{d:"M17 3h2c1.1 0 2 .9 2 2v2"}),e.jsx("path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2"}),e.jsx("path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2"}),e.jsx("path",{d:"M7 12h.01"}),e.jsx("path",{d:"M10 12h4"}),e.jsx("path",{d:"M17 12h.01"}),e.jsx("path",{d:"M12 7v10"})]}),Building:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2"}),e.jsx("path",{d:"M9 22v-4c0-1.1.9-2 2-2h2c1.1 0 2 .9 2 2v4"}),e.jsx("path",{d:"M8 6h.01"}),e.jsx("path",{d:"M16 6h.01"}),e.jsx("path",{d:"M12 6h.01"}),e.jsx("path",{d:"M12 10h.01"}),e.jsx("path",{d:"M12 14h.01"}),e.jsx("path",{d:"M12 18h.01"})]}),User:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Snowflake:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),e.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),e.jsx("path",{d:"m20 16-4-4 4-4"}),e.jsx("path",{d:"m4 8 4 4-4 4"}),e.jsx("path",{d:"m16 4-4 4-4-4"}),e.jsx("path",{d:"m8 20 4-4 4 4"})]}),CheckLineart:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Mic:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),e.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),e.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),e.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}),ShieldEye:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),e.jsx("path",{d:"M12 8c-2.5 0-4.5 1.5-6 4 1.5 2.5 3.5 4 6 4s4.5-1.5 6-4c-1.5-2.5-3.5-4-6-4z"}),e.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})},g=({name:t,size:s=18,className:a="",onClick:n})=>{const r=ss[t]||ss.AlertCircle;if(Ze.isValidElement(r)){const c=r;return Ze.cloneElement(c,{width:s,height:s,className:`${a} ${c.props.className||""}`,onClick:n})}return e.jsx("span",{className:a,onClick:n,children:r})},rs=({icon:t,iconColor:s,value:a,onChange:n,options:r,defaultText:c,onIconClick:p,iconTitle:h})=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:`absolute left-3 top-1/2 -translate-y-1/2 transition-all duration-300 z-10 flex items-center justify-center ${p?"cursor-pointer pointer-events-auto hover:scale-110 active:scale-95":"pointer-events-none"}`,onClick:d=>{p&&(d.stopPropagation(),p(d))},title:h,children:e.jsx("div",{className:s,children:e.jsx(g,{name:t,size:16})})}),e.jsxs("select",{value:a,onChange:n,className:`w-full appearance-none pl-10 pr-8 py-3 bg-gray-50 dark:bg-slate-950 border border-gray-100 dark:border-slate-800 rounded-xl text-xs font-normal outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all cursor-pointer shadow-sm hover:border-indigo-200 dark:hover:border-slate-600 hover:shadow-md dark:shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)] ${a?"text-slate-700 dark:text-slate-300":"text-gray-400"}`,children:[e.jsx("option",{value:"",disabled:!0,children:c}),r.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400 group-hover:text-indigo-500 transition-colors duration-300",children:e.jsx(g,{name:"ChevronDown",size:14})})]}),it=({icon:t,iconColor:s,placeholder:a,value:n,onChange:r,className:c=""})=>e.jsxs("div",{className:`relative group ${c}`,children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none transition-colors duration-300",children:e.jsx("div",{className:s,children:e.jsx(g,{name:t,size:16})})}),e.jsx("input",{type:"text",placeholder:a,value:n,onChange:r,className:"w-full pl-10 pr-3 py-3 bg-gray-50 dark:bg-slate-950 border border-gray-100 dark:border-slate-800 rounded-xl text-xs font-normal text-slate-700 dark:text-slate-300 placeholder-gray-400 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all shadow-sm hover:border-indigo-200 dark:hover:border-slate-600 hover:shadow-md dark:shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)]"})]}),yt=({isOpen:t,title:s,onClose:a,children:n})=>t?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-[300] flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:a,children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-3xl shadow-2xl border border-gray-100 dark:border-slate-800 transform transition-all animate-zoom-in-spring duration-300 overflow-hidden dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_10px_15px_-3px_rgba(0,0,0,0.5)]",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-lg font-black text-slate-800 dark:text-white tracking-tight",children:s}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/20 transition-all duration-300 text-slate-400 hover:rotate-90",children:e.jsx(g,{name:"X",size:20})})]}),e.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto custom-scrollbar",children:n})]})}):null,mr=({message:t,onClose:s})=>{const[a,n]=l.useState(!1),[r,c]=l.useState(!1),p=()=>{n(!0),setTimeout(()=>s(),400)};return l.useEffect(()=>{c(!0);const k=setTimeout(p,4e3);return()=>clearTimeout(k)},[s]),e.jsx("div",{className:`fixed z-[9999] w-[90vw] max-w-sm md:w-auto md:max-w-md top-20 left-1/2 -translate-x-1/2 md:top-auto md:left-auto md:bottom-10 md:right-10 md:translate-x-0 transition-all duration-500 ease-spring ${r?a?"opacity-0 scale-95 md:translate-x-4 -translate-y-4 md:translate-y-0":"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-4 md:translate-y-0 md:translate-x-4"}`,children:e.jsxs("div",{className:"bg-slate-900/95 dark:bg-white/95 backdrop-blur-md text-white dark:text-slate-900 px-4 py-3 md:px-5 md:py-4 rounded-2xl shadow-2xl flex items-start gap-3 md:gap-4 border border-slate-700/50 dark:border-slate-200/50",children:[e.jsx("div",{className:"flex-shrink-0 p-1.5 bg-emerald-500 rounded-full text-white shadow-lg shadow-emerald-500/30 mt-0.5",children:e.jsx(g,{name:"CheckLineart",size:14})}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-60 leading-none mb-1",children:"System Notification"}),e.jsx("span",{className:"text-xs md:text-sm font-bold leading-snug break-words",children:t})]}),e.jsx("button",{onClick:p,className:"flex-shrink-0 -mr-2 -mt-2 p-2 text-slate-500 hover:text-white dark:hover:text-slate-900 transition-colors rounded-full hover:bg-white/10 dark:hover:bg-black/5",children:e.jsx(g,{name:"X",size:16})})]})})},fr=({className:t})=>e.jsxs("div",{className:`flex items-center justify-center gap-1 ${t}`,children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-3 w-3 rounded-full bg-indigo-400 opacity-75"}),e.jsx(g,{name:"Sparkle",size:16,className:"animate-spin-slow text-yellow-300"})]}),br=({message:t})=>e.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-slate-900/95 backdrop-blur-md z-50 flex flex-col items-center justify-center animate-in fade-in duration-500",children:[e.jsxs("div",{className:"relative w-28 h-28 mb-8",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-indigo-100 dark:border-indigo-900 rounded-full opacity-50"}),e.jsx("div",{className:"absolute inset-0 border-t-4 border-indigo-600 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-4 border-4 border-purple-100 dark:border-purple-900 rounded-full opacity-50"}),e.jsx("div",{className:"absolute inset-4 border-r-4 border-purple-500 rounded-full animate-spin-reverse"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"bg-gradient-to-tr from-indigo-500 to-purple-500 p-4 rounded-full shadow-lg shadow-indigo-500/50 animate-pulse",children:e.jsx(g,{name:"Wand2",className:"text-white",size:28})})}),e.jsx("div",{className:"absolute top-0 left-1/2 w-2 h-2 bg-cyan-400 rounded-full shadow-[0_0_10px_#22d3ee] animate-ping"})]}),e.jsx("h3",{className:"text-lg font-black text-slate-800 dark:text-white mb-2 animate-pulse px-4 text-center max-w-[80%]",children:t}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-mono flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Gemini AI Processing..."]})]}),vr=({isOpen:t,onClose:s,actions:a,onSelectAction:n})=>{const[r,c]=l.useState(""),p=l.useRef(null);l.useEffect(()=>{t&&(c(""),setTimeout(()=>{var d;return(d=p.current)==null?void 0:d.focus()},50))},[t]);const h=a.filter(d=>d.label.toLowerCase().includes(r.toLowerCase())||d.desc&&d.desc.toLowerCase().includes(r.toLowerCase()));return t?e.jsx("div",{className:"fixed inset-0 z-[99999] bg-black/60 backdrop-blur-sm flex items-start justify-center pt-[10vh] px-4 md:px-0 animate-in fade-in duration-200",onClick:s,children:e.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-slate-900 rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-700 overflow-hidden flex flex-col animate-zoom-in-spring duration-300 dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_10px_15px_-3px_rgba(0,0,0,0.5)]",onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center px-3 py-3 md:px-4 border-b border-gray-100 dark:border-slate-800",children:[e.jsx(g,{name:"Session6_Zap",className:"text-indigo-500 mr-2 md:mr-3 flex-shrink-0",size:20}),e.jsx("input",{ref:p,type:"text",className:"flex-1 bg-transparent text-sm md:text-lg outline-none text-slate-800 dark:text-white placeholder-slate-400 min-w-0",placeholder:"Type a command or search clauses...",value:r,onChange:d=>c(d.target.value),onKeyDown:d=>{d.key==="Enter"&&h.length>0?n(h[0]):d.key==="Escape"&&s()}}),e.jsx("div",{className:"flex gap-2 flex-shrink-0 ml-2",children:e.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/20 transition-all duration-300 text-slate-400 hover:rotate-90",children:e.jsx(g,{name:"X",size:20})})})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar p-2",children:h.length===0?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"No results found."}):h.map((d,b)=>e.jsxs("div",{onClick:()=>n(d),className:`flex items-center gap-4 p-3 rounded-xl cursor-pointer transition-colors group ${b===0?"bg-indigo-50 dark:bg-indigo-900/20":"hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:[e.jsx("div",{className:`p-2 rounded-lg ${d.type==="clause"?"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400"}`,children:e.jsx(g,{name:d.icon||"Session6_Zap",size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 truncate group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:d.label}),d.desc&&e.jsx("p",{className:"text-xs text-slate-500 truncate",children:d.desc})]}),d.type==="clause"&&e.jsx("div",{className:"flex items-center gap-2 opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:d.onReference,className:"p-1.5 rounded-lg text-slate-400 hover:text-cyan-500 hover:bg-cyan-50 dark:hover:bg-cyan-900/20 transition-all",title:"Reference/Lookup",children:e.jsx(g,{name:"BookOpen",size:16})})}),d.shortcut&&e.jsx("span",{className:"text-xs text-slate-400",children:d.shortcut})]},b))}),e.jsxs("div",{className:"px-4 py-2 bg-gray-50 dark:bg-slate-950 border-t border-gray-100 dark:border-slate-800 text-[10px] text-slate-400 flex justify-between",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Tip:"}),' Search for clauses like "9.2" or actions like "Export".']}),e.jsx("span",{children:"ISO Audit Pro"})]})]})}):null},jr=({fontSizeScale:t,adjustFontSize:s})=>{const[a,n]=l.useState(!1),[r,c]=l.useState(null),p=l.useRef(null),h=d=>{if(d.stopPropagation(),!a&&p.current){const b=p.current.getBoundingClientRect(),w=window.innerWidth-b.right;c({top:b.bottom+8,right:w}),n(!0)}else n(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("button",{ref:p,onClick:h,className:`p-2 rounded-xl transition-all duration-300 shadow-sm ${a?"bg-indigo-100 text-indigo-700 dark:bg-slate-700 dark:text-indigo-400 scale-105":"bg-gray-50 dark:bg-slate-800 text-slate-700 dark:text-slate-200 hover:bg-indigo-50 hover:text-indigo-600"}`,title:"Adjust Font Size",children:e.jsx(g,{name:"TextSize",size:18})}),a&&r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[99] cursor-default",onClick:()=>n(!1)}),e.jsxs("div",{className:"fixed z-[100] flex items-center bg-white dark:bg-slate-900 rounded-full p-1.5 shadow-2xl border border-gray-200 dark:border-slate-700 animate-zoom-in-spring min-w-[140px] justify-between",style:{top:`${r.top}px`,right:`${r.right}px`},onClick:d=>d.stopPropagation(),children:[e.jsx("button",{onClick:()=>s("decrease"),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full text-slate-500 hover:text-indigo-600 transition-all duration-200 flex-shrink-0 active:scale-90",children:e.jsx(g,{name:"Minus",size:16})}),e.jsxs("span",{className:"text-sm font-black text-slate-800 dark:text-white select-none px-2 w-12 text-center",children:[(t*100).toFixed(0),"%"]}),e.jsx("button",{onClick:()=>s("increase"),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full text-slate-500 hover:text-indigo-600 transition-all duration-200 flex-shrink-0 active:scale-90",children:e.jsx(g,{name:"Plus",size:16})})]})]})]})},kr=({isSidebarOpen:t,setIsSidebarOpen:s,displayBadge:a,badgeColorClass:n,setIsCmdPaletteOpen:r,fontSizeScale:c,setFontSizeScale:p,isDarkMode:h,setIsDarkMode:d,isSystemHealthy:b,onOpenSettings:w,onOpenAbout:k})=>{const[I,A]=l.useState(!1),T=()=>{const R=!I;A(R),localStorage.setItem("iso_privacy_shield",String(R))};return e.jsxs("header",{className:"flex-shrink-0 px-4 md:px-6 py-0 border-b border-gray-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm z-[70] relative flex justify-between items-center h-16 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center h-full gap-3 md:gap-5",children:[e.jsx("div",{className:"relative group cursor-pointer flex items-center justify-center transition-all duration-500 hover:opacity-100 active:scale-95",onClick:()=>s(!t),title:"Toggle Sidebar",children:e.jsx("div",{className:"relative w-10 h-10 md:w-14 md:h-14 flex items-center justify-center",children:e.jsx("div",{className:"relative z-10",children:t?e.jsxs("div",{className:"relative w-8 h-8",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-transparent border-t-indigo-500 border-b-cyan-500 rounded-full animate-infinity-spin drop-shadow-[0_0_8px_rgba(6,182,212,0.8)]"}),e.jsx("div",{className:"absolute inset-2 border-2 border-transparent border-l-purple-500 border-r-pink-500 rounded-full animate-spin-reverse drop-shadow-[0_0_6px_rgba(236,72,153,0.8)]"})]}):e.jsx("div",{className:"hover:scale-110 transition-transform duration-300 drop-shadow-[0_0_15px_rgba(0,242,195,0.6)]",children:e.jsx(g,{name:"TDLogo",size:32})})})})}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsxs("h1",{className:"hidden md:block text-lg font-bold tracking-tight text-slate-900 dark:text-white leading-none",children:["ISO Audit ",e.jsx("span",{className:"font-light text-slate-400",children:"Pro"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:`text-[11px] font-bold px-3 py-1 rounded-full border shadow-sm uppercase tracking-wider backdrop-blur-sm transition-colors duration-300 ${n}`,children:a})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("button",{onClick:T,className:`p-2 rounded-xl transition-all active:scale-95 border ${I?"bg-emerald-50 border-emerald-200 text-emerald-600 dark:bg-emerald-900/20 dark:border-emerald-800 dark:text-emerald-400":"bg-transparent border-transparent text-slate-400 hover:text-slate-600 dark:hover:text-slate-300"}`,title:I?"Privacy Shield Active (PII Redaction On)":"Enable Privacy Shield",children:e.jsx(g,{name:"ShieldEye",size:20})}),e.jsx("button",{onClick:()=>r(!0),className:"p-2 rounded-xl text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 hover:bg-gray-100 dark:hover:bg-slate-800 transition-all active:scale-95",title:"Command Palette (Ctrl+K)",children:e.jsx(g,{name:"Session6_Zap",size:20})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(jr,{fontSizeScale:c,adjustFontSize:R=>p(G=>R==="increase"?Math.min(G+.1,1.3):Math.max(G-.1,.8))})}),e.jsx("button",{onClick:()=>d(!h),className:"p-2 rounded-xl text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-slate-800 transition-all",children:e.jsx(g,{name:h?"Sun":"Moon",size:18})}),e.jsxs("button",{onClick:w,className:"group relative w-8 h-8 flex items-center justify-center transition-all",title:"Connection Status",children:[e.jsx("div",{className:`absolute inset-0 rounded-full opacity-20 animate-ping ${b?"bg-emerald-500":"bg-red-500"}`}),e.jsx("div",{className:`relative w-2.5 h-2.5 rounded-full shadow-sm ring-2 ring-white dark:ring-slate-900 ${b?"bg-emerald-500":"bg-red-500"}`})]}),e.jsx("button",{onClick:k,className:"p-2 rounded-xl text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all",title:"About & Release Notes",children:e.jsx(g,{name:"Info",size:18})})]})]})},yr=(t,s)=>{const[a,n]=l.useState(t);return l.useEffect(()=>{const r=setTimeout(()=>{n(t)},s);return()=>{clearTimeout(r)}},[t,s]),a},kt=t=>{t&&(navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t).catch(()=>is(t)):is(t))},is=t=>{const s=document.createElement("textarea");s.value=t,s.style.position="fixed",s.style.left="-9999px",document.body.appendChild(s),s.focus(),s.select();try{document.execCommand("copy")}catch(a){console.error(a)}document.body.removeChild(s)},ds=t=>new Promise((s,a)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>s(n.result.split(",")[1]),n.onerror=r=>a(r)}),wr=async t=>{if(!window.pdfjsLib)throw new Error("PDF.js library not loaded");const s=await t.arrayBuffer(),a=await window.pdfjsLib.getDocument({data:s}).promise;let n="";for(let r=1;r<=a.numPages;r++){const h=(await(await a.getPage(r)).getTextContent()).items.map(d=>d.str).join(" ");n+=h+`

`}return n},as=async t=>{let s="";try{if(t.name.toLowerCase().endsWith(".pdf"))s=await wr(t);else if(t.name.toLowerCase().endsWith(".docx")){if(typeof mammoth>"u")throw new Error("Mammoth library missing");const a=await t.arrayBuffer();s=(await mammoth.extractRawText({arrayBuffer:a})).value}else{if(t.name.toLowerCase().endsWith(".doc"))throw new Error("Legacy Word (.doc) files are not supported due to browser limitations. Please save your file as .docx and try again.");s=await t.text()}if(!s||s.length<50)throw new Error("File content is too short or empty.");return s}catch(a){throw console.error("File processing error:",a),new Error(`Failed to parse ${t.name}: ${a.message}`)}},wt=t=>{if(!t)return null;let s=t.trim();s.startsWith("```")&&(s=s.replace(/^```(json)?/,"").replace(/```$/,""));const a=s.indexOf("["),n=s.indexOf("{"),r=s.lastIndexOf("]"),c=s.lastIndexOf("}");a!==-1&&r!==-1&&(n===-1||a<n)?s=s.substring(a,r+1):n!==-1&&c!==-1&&(s=s.substring(n,c+1));try{return JSON.parse(s)}catch{return console.error("JSON Parse Error on text:",s),null}},Pt=t=>t?t.replace(/[^a-zA-Z0-9\s]/g,"").trim().replace(/\s+/g,"_").substring(0,30):"N_A",vt=(t,s)=>{let a="",n=!1;return s.forEach(r=>{const c=t[r];c&&c.some(p=>p.status==="supplied")&&(n=!0,a+=`
### EVIDENCE MATRIX FOR CLAUSE ${r}
`,a+=`| Requirement | Verified Evidence |
`,a+=`| :--- | :--- |
`,c.forEach(p=>{p.evidenceInput.trim()&&(a+=`| ${p.requirement.replace(/\|/g,"-")} | ${p.evidenceInput.replace(/\|/g,"-").replace(/\n/g," ")} |
`)}),a+=`
`)}),n?a:""},_t={ANALYSIS:{id:"default_analysis",label:"Standard Analysis",description:"Strict ISO compliance check based on evidence.",isSystemDefault:!0,template:`
        Analyze the provided EVIDENCE against ISO Standard "{{STANDARD_NAME}}", Clause "{{CLAUSE_CODE}}: {{CLAUSE_TITLE}}".
        Clause Requirement: {{CLAUSE_DESC}}
        
        CONTEXT (Retrieved from Knowledge Base):
        """
        {{RAG_CONTEXT}}
        """

        EVIDENCE (User Input & Tags):
        """
        {{EVIDENCE}}
        """
        
        CROSS-REFERENCE CHECK:
        Check if this evidence also relates to other common ISO standards (like ISO 9001 if auditing 27001, or vice versa).

        DETERMINE:
        1. Status (COMPLIANT, NC_MINOR, NC_MAJOR, OFI, or N_A).
        2. Reason (Why? Be specific based on evidence).
        3. Evidence Quote (Verbatim support).
        4. Suggestion (If NC or OFI).
        5. CrossRefs (Array of strings, e.g. ["ISO 9001: 7.5.3"]).
        
        Output a SINGLE JSON Object.
        `},REPORT:{id:"system_integration_report_v1",label:"System Integration Format",description:"Strict Plain Text format structured by clause. No Markdown/Tables.",isSystemDefault:!0,template:`
        ROLE: ISO Audit Data Processor.
        TASK: Convert audit findings into a STRICT PLAIN TEXT format for legacy system integration.

        CRITICAL FORMATTING RULES:
        1. OUTPUT MUST BE PLAIN TEXT ONLY.
        2. NO Markdown characters allowed (Do NOT use **, ##, __, or tables with |).
        3. NO introductory text, executive summaries, or conclusions.
        4. Use exactly "====================" (20 dashes) as a separator between clauses.
        5. Synthesize specific evidence from the "EVIDENCE MATRIX" into the "VERIFIED_EVIDENCE" field.

        REQUIRED BLOCK STRUCTURE (Repeat for each clause):

        CLAUSE_ID: [Code]
        CLAUSE_TITLE: [Title]
        STATUS: [Status]
        
        FINDING_DETAIL:
        [Detailed reasoning and conclusion text]

        VERIFIED_EVIDENCE:
        [Specific documents, logs, or observations verified]

        ====================

        INPUT CONTEXT:
        Entity: {{COMPANY}}
        Standard: {{STANDARD_NAME}}
        Auditor: {{AUDITOR}}
        Target Language: {{LANGUAGE}}

        FINDINGS DATA:
        {{FINDINGS_JSON}}

        EVIDENCE MATRIX (Source Data):
        """
        {{FULL_EVIDENCE_CONTEXT}}
        """
        `}};class Nr{constructor(){gt(this,"prompts");this.prompts={..._t},this.loadUserOverrides()}loadUserOverrides(){try{const s=localStorage.getItem("iso_prompt_overrides");if(s){const a=JSON.parse(s);this.prompts={...this.prompts,...a}}}catch(s){console.error("Failed to load prompt overrides",s)}}getPrompt(s){return this.prompts[s]||_t[s]}updatePrompt(s,a){this.prompts[s]={...this.prompts[s],template:a,isSystemDefault:!1},localStorage.setItem("iso_prompt_overrides",JSON.stringify(this.prompts))}resetToDefault(s){this.prompts[s]={..._t[s]},localStorage.setItem("iso_prompt_overrides",JSON.stringify(this.prompts))}hydrate(s,a){let n=s;for(const[r,c]of Object.entries(a)){const p=new RegExp(`{{${r}}}`,"g");n=n.replace(p,c||"")}return n}}const De=new Nr,Cr="ISO_VECTOR_DB",Te="vectors",Sr=1,Ar=(t,s)=>{let a=0,n=0,r=0;for(let c=0;c<t.length;c++)a+=t[c]*s[c],n+=t[c]*t[c],r+=s[c]*s[c];return a/(Math.sqrt(n)*Math.sqrt(r))};class Er{constructor(){gt(this,"dbPromise",null)}openDB(){return this.dbPromise?this.dbPromise:(this.dbPromise=new Promise((s,a)=>{const n=indexedDB.open(Cr,Sr);n.onupgradeneeded=r=>{const c=r.target.result;c.objectStoreNames.contains(Te)||c.createObjectStore(Te,{keyPath:"id"}).createIndex("source","metadata.source",{unique:!1})},n.onsuccess=r=>s(r.target.result),n.onerror=r=>a(r.target.error)}),this.dbPromise)}async embedText(s,a){var n;if(!s||!s.trim())return null;try{return((n=(await new Dt({apiKey:a}).models.embedContent({model:"text-embedding-004",content:{parts:[{text:s}]}})).embedding)==null?void 0:n.values)||null}catch(r){return console.error("Embedding Error",r),null}}async addDocuments(s,a,n){const r=a.match(/[\s\S]{1,800}/g)||[],h=(await this.openDB()).transaction([Te],"readwrite").objectStore(Te);let d=0;for(const b of r){const w=await this.embedText(b,n);if(w){const k={id:`${s}_${d++}_${Date.now()}`,text:b,embedding:w,metadata:{source:s,type:"standard_content"}};h.put(k)}await new Promise(k=>setTimeout(k,50))}}async search(s,a,n=4){const r=await this.embedText(s,a);if(!r)return"";const c=await this.openDB();return new Promise(p=>{const b=c.transaction([Te],"readonly").objectStore(Te).openCursor(),w=[];b.onsuccess=k=>{const I=k.target.result;if(I){const A=I.value,T=Ar(r,A.embedding);T>.5&&w.push({text:A.text,score:T}),I.continue()}else{w.sort((T,R)=>R.score-T.score);const A=w.slice(0,n).map(T=>T.text).join(`

---

`);p(A)}}})}async clear(){(await this.openDB()).transaction([Te],"readwrite").objectStore(Te).clear()}}const jt=new Er,Ir={patterns:{email:/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,phoneVN:/(84|0[3|5|7|8|9])+([0-9]{8})\b/g,potentialName:new RegExp("(?<!^|\\. |\\? |! )([A-Z][a-z]+ [A-Z][a-z]+)","g")},redact(t){if(!t)return"";let s=t;return s=s.replace(this.patterns.email,"[EMAIL_REDACTED]"),s=s.replace(this.patterns.phoneVN,"[PHONE_REDACTED]"),(s.toLowerCase().includes("salary")||s.toLowerCase().includes("lng"))&&(s=s.replace(/(\d{1,3}[,.]\d{3}[,.]\d{3}|\d{7,})/g,"[MONEY_REDACTED]")),s}},ft={NC_MAJOR:["systemic failure","total breakdown","missing process","khng c quy trnh","cha thit lp","critical","nghim trng"],NC_MINOR:["isolated","single instance","partial","not fully","cha y ","mt s","incomplete","li nh"],OFI:["improve","better","consider","cn nhc","ci tin","optimize","efficiency"],COMPLIANT:["conforms","available","maintained","ph hp","y ","tun th","verified","t"]},ns={analyze(t,s,a){const n=a.toLowerCase();let r="N_A",c="Offline Analysis: Insufficient data to determine compliance.",p="",h={MAJOR:0,MINOR:0,OFI:0,COMPLIANT:0};ft.NC_MAJOR.forEach(b=>{n.includes(b)&&(h.MAJOR+=2)}),ft.NC_MINOR.forEach(b=>{n.includes(b)&&(h.MINOR+=1)}),ft.OFI.forEach(b=>{n.includes(b)&&(h.OFI+=1)}),ft.COMPLIANT.forEach(b=>{n.includes(b)&&(h.COMPLIANT+=1)}),h.MAJOR>0?(r="NC_MAJOR",c="Offline Analysis detected critical keywords indicating a systemic issue.",p="Review the entire process and establish missing controls immediately."):h.MINOR>h.COMPLIANT?(r="NC_MINOR",c="Offline Analysis detected potential gaps in implementation.",p="Investigate specific instances and correct them."):h.OFI>0?(r="OFI",c="Opportunities for improvement found in text.",p="Consider optimizing based on best practices."):h.COMPLIANT>0?(r="COMPLIANT",c="Evidence suggests requirements are met."):a.length>50&&(r="COMPLIANT",c="Offline Analysis: No obvious non-conformity keywords detected.");const d={clauseId:t,status:r,reason:c,evidence:a.substring(0,100)+"...",suggestion:p,conclusion_report:`[OFFLINE] ${c}`,crossRefs:[]};return JSON.stringify(d)}},Mr={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Lr={};const Qe=t=>{let s=t;if(!s&&Tt.length>0&&(s=Tt[0]),!s)try{typeof import.meta<"u"}catch{}!s&&typeof process<"u"&&Lr&&(s=""),s||(s=localStorage.getItem("iso_api_key")||"");const a=(s||"").trim();return a?new Dt({apiKey:a}):null},os=async(t,s)=>{const a=t?t.trim().replace(/^["']|["']$/g,""):"";if(!a)return{isValid:!1,latency:0,errorType:"invalid",errorMessage:"Key is empty"};const n=new Dt({apiKey:a}),r=[...ls];let c=null,p=!1,h=!1;for(const b of r){const w=performance.now();try{await n.models.generateContent({model:b,contents:{parts:[{text:"Hi"}]}});const k=performance.now();return{isValid:!0,latency:Math.round(k-w),activeModel:b}}catch(k){c=k;const I=(k.message||"").toLowerCase(),A=k.status||0;if(A!==404&&A!==403&&!I.includes("not found")&&console.warn(`[Gemini Probe] ${b} failed:`,k),I.includes("key not valid")||A===400||I.includes("invalid argument")||I.includes("api_key"))return{isValid:!1,latency:0,errorType:"invalid",errorMessage:"Invalid API Key."};if(A===429||I.includes("quota")||I.includes("exhausted"))return{isValid:!1,latency:0,errorType:"quota_exceeded",errorMessage:"Quota Exceeded."};if(A===403||I.includes("permission denied")||I.includes("referrer")){p=!0,(I.includes("has not been used")||I.includes("not enabled"))&&(h=!0);continue}if(A===404||I.includes("not found"))continue}}const d=((c==null?void 0:c.message)||"").toLowerCase();return p?h?{isValid:!1,latency:0,errorType:"referrer_error",errorMessage:"API Not Enabled."}:{isValid:!1,latency:0,errorType:"referrer_error",errorMessage:"Access Denied (403)."}:d.includes("fetch")||d.includes("network")||d.includes("failed to fetch")?{isValid:!1,latency:0,errorType:"network_error",errorMessage:"Network Error."}:{isValid:!1,latency:0,errorType:"unknown",errorMessage:(c==null?void 0:c.message)||"Unknown error."}},_r=async(t,s,a,n,r)=>{const c=Qe(n);if(!c)throw new Error("API Key missing");const p=r||nt;let h="";a?h=`You are a precision extraction engine. Extract VERBATIM text for [${t.code}] ${t.title} from SOURCE.
SOURCE:
"""${a.substring(0,5e5)}"""
Output JSON: {"en": "...", "vi": "..."}`:h=`Provide verbatim text for ${s} Clause [${t.code}] ${t.title}. Output JSON: {"en": "...", "vi": "..."}`;const d=await c.models.generateContent({model:p,contents:h,config:{responseMimeType:"application/json"}}),b=wt(d.text||"{}");return{en:(b==null?void 0:b.en)||"N/A",vi:(b==null?void 0:b.vi)||"N/A"}},Tr=async(t,s,a,n)=>{const r=Qe(a);if(!r)throw new Error("API Key missing");const c=n||nt,p=`Analyze ISO Standard text. Extract structure. Name: ${s}. Text: """${t.substring(0,3e5)}""". Output JSON Standard Schema.`,h=await r.models.generateContent({model:c,contents:p,config:{responseMimeType:"application/json"}});return wt(h.text||"{}")},cs=async(t,s,a,n,r)=>{const c=Qe(n);if(!c)throw new Error("API Key missing");const p=r||dr;return(await c.models.generateContent({model:p,contents:{parts:[{text:t},{inlineData:{mimeType:a,data:s}}]}})).text||""},Rr=async(t,s,a,n,r,c,p=!1)=>{if(!navigator.onLine)return console.log("Offline Mode: Using Local Intelligence"),ns.analyze(t.code,t.title,a);const h=Qe(r);if(!h)throw new Error("API Key missing");const d=`${t.code} ${t.title} ${t.description}`,b=r||"",w=await jt.search(d,b);let k=a+`

TAGGED SECTIONS:
`+n;p&&(k=Ir.redact(k));const I=De.getPrompt("ANALYSIS"),A=De.hydrate(I.template,{STANDARD_NAME:s,CLAUSE_CODE:t.code,CLAUSE_TITLE:t.title,CLAUSE_DESC:t.description,RAG_CONTEXT:w||"No source document available for vector search.",EVIDENCE:k}),T=c||nt,R={responseMimeType:"application/json",responseSchema:{type:Ae.OBJECT,properties:{clauseId:{type:Ae.STRING},status:{type:Ae.STRING,enum:["COMPLIANT","NC_MINOR","NC_MAJOR","OFI","N_A"]},reason:{type:Ae.STRING},suggestion:{type:Ae.STRING},evidence:{type:Ae.STRING},conclusion_report:{type:Ae.STRING},crossRefs:{type:Ae.ARRAY,items:{type:Ae.STRING}}},required:["clauseId","status","reason","evidence"]}};try{return(await h.models.generateContent({model:T,contents:A,config:R})).text||"{}"}catch(G){return console.error("Analysis Error:",G),ns.analyze(t.code,t.title,a)}},Dr=async(t,s,a)=>{const n=Qe(s);if(!n)throw new Error("API Key missing");const r=De.getPrompt("REPORT"),c=De.hydrate(r.template,{COMPANY:t.company,AUDIT_TYPE:t.type,AUDITOR:t.auditor,STANDARD_NAME:t.standard,FINDINGS_JSON:JSON.stringify(t.findings),FULL_EVIDENCE_CONTEXT:t.fullEvidenceContext||"No granular evidence provided.",LANGUAGE:t.lang==="vi"?"Vietnamese":"English"});try{return(await n.models.generateContent({model:a||nt,contents:c})).text||""}catch(p){throw console.error("Reporting Error:",p),new Error(p.message||"Report generation failed")}},Pr=async(t,s,a)=>{const n=Qe(s);if(!n)return"[]";const r=nt,c=`Provide concise descriptions (15-20 words) for these ISO clauses. JSON Array: [{"code": "...", "description": "..."}]. Clauses: ${JSON.stringify(t)}`;try{return(await n.models.generateContent({model:r,contents:c,config:{responseMimeType:"application/json"}})).text||"[]"}catch{return"[]"}},Or=({standards:t,standardKey:s,setStandardKey:a,auditInfo:n,setAuditInfo:r,onAddNewStandard:c,onOpenIntegrity:p,knowledgeFileName:h,onKnowledgeUpload:d,onClearKnowledge:b,health:w,auditFieldIconColor:k,standardOptions:I})=>{const A=l.useRef(null),T=!!h,R=!!s&&s!=="ADD_NEW",G=T?"BookOpen":"Book";let $="text-gray-300 dark:text-slate-600",Q="Please select an ISO Standard first to enable document upload.",f="cursor-not-allowed";T?($="text-emerald-500 drop-shadow-sm",Q=`Source Attached: ${h}. Click to Replace.`,f="cursor-pointer"):R&&($=`${k} hover:text-indigo-600 dark:hover:text-indigo-300`,Q="Click to upload Source PDF or Word (DOCX) for better accuracy",f="cursor-pointer hover:scale-110 active:scale-95");const C=()=>{R&&A.current&&A.current.click()},L=N=>{N.target.files&&N.target.files.length>0&&(d(N),N.target.value="")};return e.jsxs("div",{className:"bg-gray-50/80 dark:bg-slate-900/50 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm p-3 space-y-4",children:[e.jsx("input",{type:"file",ref:A,accept:".pdf,.docx,.doc,.txt",className:"hidden",onChange:L}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:"Scope Definition"}),e.jsxs("div",{className:"relative group/source",children:[e.jsx(rs,{icon:G,iconColor:`${$} transition-all duration-300 ${f}`,value:s,onChange:N=>{N.target.value==="ADD_NEW"?c():a(N.target.value)},options:I,defaultText:"Select ISO Standard",onIconClick:C,iconTitle:Q}),T&&e.jsx("button",{onClick:N=>{N.stopPropagation(),b()},className:"absolute right-9 top-1/2 -translate-y-1/2 p-1.5 text-slate-400 hover:text-red-500 bg-transparent hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full transition-all z-20 active:scale-95",title:"Remove Source File",children:e.jsx(g,{name:"Trash2",size:14})}),s&&e.jsx("button",{onClick:p,className:`absolute -top-1.5 -right-1.5 p-1 rounded-full shadow-lg transition-all hover:scale-110 active:scale-95 text-white ring-2 ring-white dark:ring-slate-900 ${w.isHealthy?"bg-emerald-500":"bg-orange-500"}`,title:"Integrity Check",children:e.jsx(g,{name:w.isHealthy?"CheckCircle2":"AlertCircle",size:10})})]}),e.jsx(rs,{icon:"FileEdit",iconColor:k,value:n.type,onChange:N=>r({...n,type:N.target.value}),options:Object.keys(ur).map(N=>({value:N,label:N})),defaultText:"Select Audit Type"})]}),e.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700/50"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:"Target Entity"}),e.jsxs("div",{className:"grid grid-cols-[1.5fr_1fr] gap-2",children:[e.jsx(it,{icon:"Building",iconColor:k,placeholder:"Company Name",value:n.company,onChange:N=>r({...n,company:N.target.value})}),e.jsx(it,{icon:"Tag",iconColor:k,placeholder:"SMO/ID",value:n.smo,onChange:N=>r({...n,smo:N.target.value})})]}),e.jsx(it,{icon:"Users",iconColor:k,placeholder:"Department / Site",value:n.department,onChange:N=>r({...n,department:N.target.value})})]}),e.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700/50"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:"Personnel"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(it,{icon:"AuditUser",iconColor:k,placeholder:"Lead Auditor",value:n.auditor,onChange:N=>r({...n,auditor:N.target.value})}),e.jsx(it,{icon:"User",iconColor:k,placeholder:"Interviewee",value:n.interviewee,onChange:N=>r({...n,interviewee:N.target.value})})]})]})]})},zr=({standard:t,standardKey:s,selectedClauses:a,setSelectedClauses:n,onReferenceClause:r,repairedIds:c,onScrollTrigger:p})=>{const[h,d]=l.useState(""),[b,w]=l.useState([]),[k,I]=l.useState([]),[A,T]=l.useState(null),R=yr(h,300),G=l.useRef(null),$=y=>w(_=>_.includes(y)?_.filter(V=>V!==y):[..._,y]),Q=y=>I(_=>_.includes(y)?_.filter(V=>V!==y):[..._,y]),f=(t==null?void 0:t.groups.map(y=>y.id))||[],C=f.length>0&&b.length===f.length,L=()=>{w(C?[]:f)},N=()=>{if(!t)return;const y=(X,F)=>{for(let Y of F){if(Y.id===X)return Y;if(Y.subClauses){const ee=y(X,Y.subClauses);if(ee)return ee}}},_=t.groups.flatMap(X=>X.clauses),V=a.map(X=>y(X,_)).filter(X=>!!X).map(X=>`[${X.code}] ${X.title}`).join(`
`);kt(V)},M=(y,_)=>{y.stopPropagation(),kt(`[${_.code}] ${_.title}`),T(_.id),setTimeout(()=>T(null),1500)},K=y=>{const _=F=>{let Y=[F.id];return F.subClauses&&F.subClauses.forEach(ee=>Y.push(..._(ee))),Y},V=_(y),X=V.every(F=>a.includes(F));n(F=>X?F.filter(Y=>!V.includes(Y)):Array.from(new Set([...F,...V])))},S=y=>{const _=F=>{let Y=[];return F.forEach(ee=>{Y.push(ee.id),ee.subClauses&&Y.push(..._(ee.subClauses))}),Y},V=_(y.clauses),X=V.every(F=>a.includes(F));n(X?F=>F.filter(Y=>!V.includes(Y)):F=>[...new Set([...F,...V])])},D=(y,_=0)=>{const V=y.subClauses&&y.subClauses.length>0,X=k.includes(y.id)||!!R,F=a.includes(y.id),Y=ie=>{if(!ie.subClauses)return{all:a.includes(ie.id),some:a.includes(ie.id)};const ke=ie.subClauses.map(Y),Ee=a.includes(ie.id)&&ke.every(W=>W.all),Ie=a.includes(ie.id)||ke.some(W=>W.some);return{all:Ee,some:Ie}},ee=Y(y),pe=A===y.id,xe=c.includes(y.id);return e.jsxs("div",{className:`flex flex-col transition-all duration-300 ${_>0?"ml-4 border-l-2 dark:border-slate-800":""}`,children:[e.jsxs("div",{className:`group flex items-start gap-3 p-2 rounded-xl transition-all duration-200 ease-soft cursor-pointer ${F?"bg-indigo-50/80 dark:bg-indigo-900/30 translate-x-1":xe?"bg-emerald-50/80 dark:bg-emerald-900/20 ring-1 ring-emerald-500/30":"hover:bg-gray-100/50 dark:hover:bg-slate-800/50 hover:translate-x-1 hover:shadow-sm"}`,children:[e.jsx("button",{onClick:ie=>{ie.stopPropagation(),K(y)},className:`mt-1 flex-shrink-0 transition-colors duration-200 ${ee.some?"text-indigo-600 dark:text-indigo-400 scale-110":"text-gray-300 dark:text-slate-600 hover:text-gray-400"}`,children:ee.all?e.jsx(g,{name:"CheckSquare",size:16}):ee.some?e.jsx("div",{className:"w-4 h-4 bg-indigo-500 rounded flex items-center justify-center",children:e.jsx("div",{className:"w-2.5 h-0.5 bg-white"})}):e.jsx(g,{name:"Square",size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>V?Q(y.id):K(y),children:[e.jsxs("div",{className:"flex items-start justify-between gap-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[e.jsx("span",{className:"text-xs font-bold text-indigo-700 dark:text-indigo-400 uppercase shrink-0 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:y.code}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-slate-100 font-medium tracking-tight leading-tight group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:y.title}),xe&&e.jsx("span",{className:"text-[9px] font-black bg-emerald-100 text-emerald-600 px-1.5 py-0.5 rounded-md animate-pulse",children:"UPDATED"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:ie=>{ie.stopPropagation(),r(y)},className:"p-1 transition-all transform duration-300 opacity-0 group-hover:opacity-100 text-gray-300 hover:text-cyan-500 dark:hover:text-cyan-400 hover:scale-110",title:"Reference original text",children:e.jsx(g,{name:"BookOpen",size:14})}),e.jsx("button",{onClick:ie=>M(ie,y),className:`p-1 transition-all transform duration-300 ${pe?"text-emerald-500 scale-125 opacity-100":"opacity-0 group-hover:opacity-100 text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:scale-110"}`,title:pe?"Copied!":"Copy Clause",children:e.jsx(g,{name:pe?"CheckThick":"Copy",size:pe?20:14})}),V&&e.jsx(g,{name:"ChevronDown",size:12,className:`text-gray-400 mt-0.5 shrink-0 transition-transform duration-300 ${X?"rotate-180":""}`})]})]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 italic mt-1.5 leading-relaxed block w-full whitespace-normal border-t border-gray-100 dark:border-slate-800 pt-1",children:y.description})]})]}),e.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${V&&X?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:e.jsx("div",{className:"overflow-hidden",children:V&&e.jsx("div",{className:"mt-1 flex flex-col",children:y.subClauses.map(ie=>D(ie,_+1))})})})]},y.id)},J=y=>{const _=y.toUpperCase();return _.includes("PLAN")?"bg-blue-600 dark:bg-blue-500 shadow-blue-500/20":_.includes("SUPPORT")?"bg-purple-600 dark:bg-purple-500 shadow-purple-500/20":_.includes("DO")?"bg-orange-600 dark:bg-orange-500 shadow-orange-500/20":_.includes("CHECK")||_.includes("ACT")?"bg-emerald-600 dark:bg-emerald-500 shadow-emerald-500/20":_.includes("ANNEX")?"bg-rose-600 dark:bg-rose-500 shadow-rose-500/20":"bg-slate-800 dark:bg-slate-700"};return e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-gray-50/40 dark:bg-slate-950/40 w-full md:min-w-[390px]",children:[e.jsx("div",{className:"p-3 border-b border-gray-100 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm z-10 shrink-0 sticky top-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1 flex items-center gap-1 bg-gray-100 dark:bg-slate-950 rounded-xl px-2 transition-all focus-within:ring-2 focus-within:ring-indigo-500/20 dark:shadow-[inset_0_1px_3px_rgba(0,0,0,0.5)]",children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-400 font-bold pl-1",children:e.jsx(g,{name:"Search",size:14})}),e.jsx("input",{className:"w-full bg-transparent py-2 px-1 text-xs font-medium outline-none text-slate-800 dark:text-slate-200 placeholder-gray-400",placeholder:"Search clauses...",value:h,onChange:y=>d(y.target.value)}),e.jsx("button",{onClick:L,className:"p-1.5 rounded-lg hover:bg-white dark:hover:bg-slate-700 text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",title:C?"Collapse All Groups":"Expand All Groups",children:e.jsx(g,{name:C?"CollapsePanel":"ExpandPanel",size:14})})]}),a.length>0&&e.jsxs("div",{className:"flex gap-2 animate-in fade-in slide-in-from-right-5 duration-300",children:[e.jsx("button",{onClick:N,className:"p-2 rounded-xl bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 hover:bg-indigo-100 transition-colors relative shadow-sm border border-indigo-100 dark:border-indigo-900/30 hover:scale-105",title:"Copy Selected Clauses",children:e.jsx(g,{name:"Copy",size:16})}),e.jsxs("button",{onClick:()=>n([]),className:"p-2 rounded-xl bg-red-50 dark:bg-red-900/20 text-red-600 hover:bg-red-100 transition-colors relative shadow-sm border border-red-100 dark:border-red-900/30 hover:scale-105",title:"Clear All",children:[e.jsx(g,{name:"Trash2",size:16}),e.jsx("div",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-[9px] font-black w-4 h-4 rounded-full flex items-center justify-center border-2 border-white dark:border-slate-900 shadow-sm animate-bounce",children:a.length})]})]})]})}),e.jsx("div",{ref:G,className:"flex-1 overflow-y-auto custom-scrollbar p-3 scroll-smooth",onScroll:y=>{y.currentTarget.scrollTop>30&&p&&p()},children:e.jsx("div",{className:"flex flex-col gap-4 pb-12",children:t?t.groups.map(y=>{const _=b.includes(y.id)||!!R,V=F=>{const Y=R.toLowerCase();return F.code.toLowerCase().includes(Y)||F.title.toLowerCase().includes(Y)||F.description.toLowerCase().includes(Y)||(F.subClauses?F.subClauses.some(V):!1)},X=R?y.clauses.filter(V):y.clauses;return X.length===0?null:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-gray-100 dark:border-transparent dark:shadow-[0_4px_6px_-1px_rgba(0,0,0,0.3),0_0_0_1px_rgba(255,255,255,0.05)] shadow-sm overflow-hidden transition-all duration-300 hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-3.5 bg-gray-50/50 dark:bg-slate-800/30 cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",onClick:()=>$(y.id),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:F=>{F.stopPropagation(),S(y)},className:`p-2 rounded-xl shadow-lg text-white ${J(y.title)} hover:scale-110 active:scale-95 transition-transform duration-300`,title:"Click to Select/Deselect All in Group",children:e.jsx(g,{name:y.icon,size:14})}),e.jsx("h4",{className:"text-xs font-black text-slate-900 dark:text-white uppercase tracking-widest",children:y.title})]}),e.jsx(g,{name:"ChevronDown",size:12,className:`text-slate-400 transition-transform duration-300 ${_?"rotate-180":""}`})]}),e.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${_?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:e.jsx("div",{className:"overflow-hidden bg-white dark:bg-slate-900",children:e.jsx("div",{className:"p-2 space-y-1",children:X.map(F=>D(F))})})})]},y.id)}):e.jsx("div",{className:"text-center text-gray-400 mt-20 italic text-xs uppercase tracking-widest opacity-50",children:"Select a Standard"})})})]})},$r=({isOpen:t,onClose:s,health:a,isCustomStandard:n,onResetStandard:r,onAutoRepair:c,isRepairing:p,repairStats:h})=>e.jsx(yt,{isOpen:t,title:"Standard Health Index",onClose:s,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-5 p-5 rounded-3xl bg-gray-50 dark:bg-slate-800 border border-gray-100 dark:border-slate-700 shadow-inner dark:shadow-[inset_0_2px_6px_rgba(0,0,0,0.4)]",children:[e.jsxs("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white text-2xl font-black shadow-xl ring-4 ring-white dark:ring-slate-700 ${a.score>90?"bg-gradient-to-br from-emerald-400 to-emerald-600":"bg-gradient-to-br from-orange-400 to-orange-600"}`,children:[a.score,"%"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-black text-slate-900 dark:text-slate-100 uppercase tracking-tight",children:"Data Health"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-snug mt-1",children:a.isHealthy?"Excellent! Data is accurate, clean, and complete for professional use.":"Standard data is incomplete or missing Source verification."})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Integrity Checklist"}),[...a.integrity,...a.completeness].map((d,b)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 rounded-2xl shadow-sm dark:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-1.5 rounded-full shadow-sm ${d.status==="pass"?"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20":"text-red-500 bg-red-50 dark:bg-red-900/20"}`,children:e.jsx(g,{name:d.status==="pass"?"CheckCircle2":"AlertCircle",size:18})}),e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:d.label})]}),e.jsx("span",{className:`text-[10px] font-black px-3 py-1 rounded-full shadow-sm uppercase ${d.status==="pass"?"text-emerald-700 bg-emerald-100":"text-red-700 bg-red-100"}`,children:d.detail})]},b))]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-slate-700 flex flex-col md:flex-row items-center justify-center gap-3",children:[n&&e.jsxs("button",{onClick:r,className:"px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 dark:bg-red-900/20 dark:hover:bg-red-900/40 dark:text-red-400 rounded-xl font-bold text-xs flex items-center gap-2 transition-all active:scale-95 border border-red-200 dark:border-red-800",children:[e.jsx(g,{name:"Trash2",size:14}),"Reset to Default"]}),h?e.jsxs("div",{className:"flex items-center gap-3 animate-in fade-in slide-in-from-right-5",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-bold text-emerald-600 uppercase",children:"Repair Complete"}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Added ",h.fixed," items, Cleaned ",h.cleaned," dupes."]})]}),e.jsx("button",{onClick:s,className:"px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl font-bold text-xs shadow-lg shadow-emerald-500/30",children:"Close & Continue"})]}):!a.isHealthy&&e.jsxs("button",{onClick:c,disabled:p,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-xs flex items-center gap-2 shadow-lg shadow-indigo-500/30 transition-all active:scale-95 disabled:opacity-70 disabled:active:scale-100",children:[p?e.jsx(g,{name:"Loader",className:"animate-spin"}):e.jsx(g,{name:"Wand2"}),p?"AI is Fixing...":"Auto-Repair Issues with AI"]})]})]})}),Br=Ze.memo(({isOpen:t,width:s,setWidth:a,standards:n,standardKey:r,setStandardKey:c,auditInfo:p,setAuditInfo:h,selectedClauses:d,setSelectedClauses:b,onAddNewStandard:w,onUpdateStandard:k,onResetStandard:I,onReferenceClause:A,showIntegrityModal:T,setShowIntegrityModal:R,knowledgeFileName:G,knowledgeBase:$,onKnowledgeUpload:Q,onClearKnowledge:f})=>{const C=l.useRef(null),[L,N]=l.useState(!1),[M,K]=l.useState(!0),[S,D]=l.useState(!1),[J,y]=l.useState(null),[_,V]=l.useState([]),X=W=>{W.target.classList.contains("resize-handle")&&(W.preventDefault(),N(!0),document.body.style.cursor="col-resize",document.body.style.userSelect="none")};l.useEffect(()=>{const W=()=>{if(L&&(N(!1),document.body.style.cursor="",document.body.style.userSelect="",C.current)){const u=parseInt(C.current.style.width,10);isNaN(u)||a(u)}},re=u=>{if(L&&C.current){const O=Math.max(390,Math.min(u.clientX,800));C.current.style.width=`${O}px`}};return L&&(window.addEventListener("mousemove",re),window.addEventListener("mouseup",W)),()=>{window.removeEventListener("mousemove",re),window.removeEventListener("mouseup",W)}},[L,a]);const F=()=>{M&&K(!1)},Y=()=>{if(!r||!n[r])return{isHealthy:!1,score:0,integrity:[],completeness:[]};const W=n[r],re=[],u=[],O=W.groups.flatMap(te=>te.clauses),z=te=>te.reduce((ue,ge)=>(ue.push(ge),ge.subClauses&&ue.push(...z(ge.subClauses)),ue),[]),q=z(O),B=q.filter(te=>!te.description||te.description.trim().length<2).length;re.push({label:"Content Quality",status:B===0?"pass":"fail",detail:B===0?"Descriptions OK":`${B} incomplete`});const H=new Set(q.map(te=>te.code)),se=q.length-H.size;if(re.push({label:"Data Cleanliness",status:se===0?"pass":"fail",detail:se===0?"Clean":`${se} Duplicates`}),$&&$.length>1e3){let te=0;const ue=q.slice(0,20);ue.forEach(Nt=>{$.includes(Nt.code)||te++});const ge=te/ue.length,Fe=ge<.2;u.push({label:"Source Verification",status:Fe?"pass":"fail",detail:Fe?"Matches Document":`${(ge*100).toFixed(0)}% Clauses Missing in Source`})}else u.push({label:"Source Verification",status:"fail",detail:"No Source Document Linked"});if(r.includes("9001")&&["8.4","8.6","8.7","7.1.4"].forEach(ue=>{const ge=q.some(Fe=>Fe.code===ue);u.push({label:`Clause ${ue}`,status:ge?"pass":"fail",detail:ge?"Present":"Missing (Required)"})}),r.includes("27001")){const te=q.filter(ge=>ge.code.startsWith("A.")),ue=te.length>=90;u.push({label:"Annex A Controls",status:ue?"pass":"fail",detail:ue?`${te.length} Controls (OK)`:`${te.length}/93 (Incomplete)`})}const ae=re.every(te=>te.status==="pass"),oe=u.every(te=>te.status==="pass"),Me=ae&&oe,je=re.length+u.length,we=re.filter(te=>te.status==="pass").length+u.filter(te=>te.status==="pass").length,Pe=Math.round(we/(je||1)*100);return{isHealthy:Me,score:Pe,integrity:re,completeness:u}},ee=async()=>{if(!(!r||!n[r])){D(!0),y(null);try{const W=JSON.parse(JSON.stringify(n[r])),re=[],u=[];let O=0;const z=B=>{B.forEach(H=>{(!H.description||H.description.trim().length<5)&&re.push({ref:H,code:H.code,title:H.title}),H.subClauses&&z(H.subClauses)})};if(W.groups.forEach(B=>z(B.clauses)),re.length>0){const B=re.map(ae=>({code:ae.code,title:ae.title})),H=await Pr(B),se=wt(H);if(Array.isArray(se)){const ae=se.reduce((oe,Me)=>(Me.code&&Me.description&&(oe[Me.code]=Me.description),oe),{});re.forEach(oe=>{ae[oe.code]&&(oe.ref.description=ae[oe.code],u.push(oe.ref.id))})}}const q=B=>{const H=new Set,se=[];for(const ae of B)H.has(ae.code)?O++:(H.add(ae.code),ae.subClauses&&(ae.subClauses=q(ae.subClauses)),se.push(ae));return se};W.groups.forEach(B=>{B.clauses=q(B.clauses)}),k(W),V(u),y({fixed:u.length,cleaned:O})}catch(W){console.error("Repair failed",W),alert("Failed to repair automatically.")}finally{D(!1)}}},pe=()=>{confirm("Are you sure? This will remove all AI repairs and revert to the original static data.")&&(I(r),R(!1),y(null),V([]))},xe="text-indigo-700 dark:text-indigo-400",ie=Y(),ke=!Rt[r]||n[r]&&n[r]!==Rt[r],Ee=(()=>{const W=Object.keys(n).map(O=>({value:O,label:n[O].name})),re=new Set;return[...W.filter(O=>{const z=re.has(O.label);return re.add(O.label),!z}),{value:"ADD_NEW",label:"+ Add New Standard..."}]})(),Ie=(()=>{let W=0;return r&&W++,p.type&&W++,p.company&&W++,p.auditor&&W++,Math.min(4,W)})();return e.jsxs("div",{ref:C,className:`${t?"border-r":"w-0 border-0 overflow-hidden"} flex flex-col bg-white dark:bg-slate-900 border-gray-200 dark:border-slate-800 shadow-2xl z-50 relative shrink-0 ${L?"transition-none":"transition-[width] duration-300 ease-soft"} h-full dark:shadow-[5px_0_15px_-3px_rgba(0,0,0,0.5)]`,style:{width:t?window.innerWidth<768?"100%":s:0},children:[t&&e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1.5 cursor-col-resize hover:bg-indigo-500 transition-colors z-50 group resize-handle hidden md:block",onMouseDown:X}),e.jsxs("div",{className:"flex-shrink-0 bg-white dark:bg-slate-900 w-full md:min-w-[390px] flex flex-col transition-all duration-400 ease-soft overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer group select-none hover:bg-gray-50 dark:hover:bg-slate-800/50",onClick:()=>K(!M),title:M?"Collapse Mission Charter":"Expand Mission Charter",children:[e.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-500 transition-colors",children:[e.jsx(g,{name:"Session8_Flag",size:14,className:"text-indigo-500"}),"Audit Mission Charter",e.jsx(g,{name:"ChevronDown",size:12,className:`transition-transform duration-300 text-slate-300 group-hover:text-indigo-400 ${M?"rotate-180":""}`})]}),e.jsx("div",{className:"flex gap-2",onClick:W=>W.stopPropagation(),children:e.jsx("div",{className:"flex gap-0.5 items-center",children:[1,2,3,4].map(W=>e.jsx("div",{className:`w-3 h-1 rounded-full ${W<=Ie?"bg-indigo-500":"bg-gray-200 dark:bg-slate-700"}`},W))})})]}),e.jsx("div",{className:`grid transition-all duration-300 ease-in-out border-b border-gray-100 dark:border-slate-800 ${M?"grid-rows-[1fr] opacity-100 p-4 pt-0":"grid-rows-[0fr] opacity-0 p-0"}`,children:e.jsx("div",{className:"overflow-hidden",children:e.jsx(Or,{standards:n,standardKey:r,setStandardKey:c,auditInfo:p,setAuditInfo:h,onAddNewStandard:w,onOpenIntegrity:()=>R(!0),knowledgeFileName:G,onKnowledgeUpload:Q,onClearKnowledge:f,health:ie,auditFieldIconColor:xe,standardOptions:Ee})})})]}),e.jsx(zr,{standard:n[r],standardKey:r,selectedClauses:d,setSelectedClauses:b,onReferenceClause:A,repairedIds:_,onScrollTrigger:F}),e.jsx($r,{isOpen:T,onClose:()=>R(!1),health:ie,isCustomStandard:ke,onResetStandard:pe,onAutoRepair:ee,isRepairing:S,repairStats:J})]})}),Fr=({isOpen:t,onClose:s})=>{const[a,n]=l.useState(!1),[r,c]=l.useState("overview");if(l.useEffect(()=>{t&&(n(!1),c("overview"))},[t]),!t)return null;const p=[{id:"overview",label:"Overview",icon:"Session1_SparklePlus"},{id:"guide",label:"User Guide",icon:"BookOpen"},{id:"tech",label:"System Blueprint",icon:"Cpu"},{id:"changelog",label:"Releases",icon:"History"}],h=[{layer:"Frontend",tech:"React 18 + Vite",role:"Component Lifecycle, State Management",color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-900/20"},{layer:"Styling",tech:"Tailwind CSS",role:"Utility-first styling, Dark mode adaptive",color:"text-cyan-600 dark:text-cyan-400",bg:"bg-cyan-50 dark:bg-cyan-900/20"},{layer:"AI Engine",tech:"Google Gemini 3.0 Pro",role:"Reasoning, Analysis, Vision OCR",color:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-900/20"},{layer:"Storage",tech:"IndexedDB + LocalStorage",role:"Vector Store, Session Persistence",color:"text-purple-600 dark:text-purple-400",bg:"bg-purple-50 dark:bg-purple-900/20"},{layer:"Processing",tech:"Web Workers",role:"Non-blocking file parsing & chunking",color:"text-rose-600 dark:text-rose-400",bg:"bg-rose-50 dark:bg-rose-900/20"}];return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999] p-4 fade-in backdrop-blur-md",onClick:s,children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-2xl w-full max-w-5xl flex flex-col h-[90vh] md:h-[85vh] border border-gray-100 dark:border-slate-800 transform transition-all scale-100 overflow-hidden relative",onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"flex-shrink-0 relative overflow-hidden group border-b border-gray-100 dark:border-slate-800",children:[e.jsxs("div",{className:"absolute inset-0 bg-slate-900",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-indigo-600/20 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-cyan-600/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"})]}),e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-slate-400 hover:text-white z-50 p-2 bg-slate-800/50 rounded-full hover:bg-red-500/20 transition-all border border-transparent hover:border-red-500/30",children:e.jsx(g,{name:"X",size:20})}),e.jsxs("div",{className:"relative px-6 py-6 md:px-8 md:py-8 flex flex-col md:flex-row items-center md:items-start gap-6 z-10",children:[e.jsx("div",{className:"relative flex-shrink-0 mb-4 md:mb-0",children:e.jsx("div",{className:"relative w-20 h-20 rounded-full p-0.5 bg-slate-900 ring-1 ring-white/10 z-10 overflow-hidden shadow-2xl mx-auto md:mx-0",children:a?e.jsxs("div",{className:"w-full h-full rounded-full flex items-center justify-center bg-black relative",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_#1e1b4b_0%,_#000000_100%)]"}),e.jsx("div",{className:"relative z-10 transform scale-110",children:e.jsx(g,{name:"TDLogo",size:48})})]}):e.jsx("img",{src:"./author.png",alt:"Author",className:"w-full h-full rounded-full object-cover",onError:()=>n(!0)})})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsxs("h2",{className:"text-2xl md:text-3xl font-black text-white tracking-tight leading-none mb-2",children:["ISO Audit Pro ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-amber-200 text-lg align-top ml-1",children:"GOLD"})]}),e.jsx("p",{className:"text-slate-400 text-sm font-medium mb-4",children:"The AI-Powered Compliance Assistant"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center md:justify-start",children:p.map(d=>e.jsxs("button",{onClick:()=>c(d.id),className:`px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-2 transition-all ${r===d.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/30":"bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white"}`,children:[e.jsx(g,{name:d.icon,size:14})," ",d.label]},d.id))})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 md:p-8 bg-gray-50 dark:bg-slate-950 text-slate-800 dark:text-slate-200",children:[r==="overview"&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-300 space-y-6",children:[e.jsxs("div",{className:"p-5 rounded-2xl bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 shadow-sm",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 border-b border-gray-100 dark:border-slate-800 pb-2",children:"System Status"}),e.jsxs("div",{className:"grid grid-cols-[100px_1fr] md:grid-cols-[120px_1fr] gap-y-3 gap-x-4 items-center",children:[e.jsx("span",{className:"text-sm font-medium text-slate-500 text-right",children:"Version"}),e.jsxs("span",{className:"font-mono font-bold text-indigo-600 dark:text-indigo-400 text-sm",children:["v",or]}),e.jsx("span",{className:"text-sm font-medium text-slate-500 text-right",children:"Build"}),e.jsx("span",{className:"font-mono text-[10px] text-slate-500 break-words",children:lr}),e.jsx("span",{className:"text-sm font-medium text-slate-500 text-right",children:"Engine"}),e.jsx("span",{className:"font-mono text-[10px] font-bold text-amber-600 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded w-fit",children:"Gemini 3.0 Pro"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:pr.map((d,b)=>e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-900 rounded-xl border border-gray-100 dark:border-slate-800 flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg text-indigo-600 dark:text-indigo-400",children:e.jsx(g,{name:d.icon,size:20})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:d.title}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:d.desc})]})]},b))})]}),r==="guide"&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-300 space-y-8",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-3",children:"Workflow"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-3 text-sm text-slate-600 dark:text-slate-300 marker:text-indigo-500 marker:font-bold",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Setup:"})," Select a Standard (e.g., ISO 9001) from the Sidebar. Upload a source PDF if available for better accuracy."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Evidence Gathering:"}),e.jsxs("ul",{className:"list-disc list-inside ml-5 mt-2 space-y-2 text-slate-500",children:[e.jsxs("li",{children:["Use ",e.jsx("strong",{children:"Document Mode"})," for unstructured text, OCR images, or voice dictation."]}),e.jsxs("li",{children:["Use ",e.jsx("strong",{children:"Evidence Matrix"})," for structured, clause-by-clause mapping (Recommended for GAP analysis)."]})]})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Analysis:"}),' Select clauses in the Sidebar and click "Analyze". The AI uses Dual-Stream Synthesis to combine your raw evidence and matrix data.']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Reporting:"})," Review findings, adjust conclusions, and generate the final report. You can export as formatted text or strict Plain Text for system integration."]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-3",children:"Pro Tips"}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/10 border border-amber-100 dark:border-amber-800 rounded-lg text-xs text-amber-800 dark:text-amber-200",children:[e.jsx("strong",{children:"Offline Mode:"}),' If internet is lost, the app switches to "Local Intelligence" (Heuristic Analysis) automatically.']}),e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-800 rounded-lg text-xs text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Privacy Shield:"})," Toggle the Shield icon in the header to auto-redact emails/phones before sending data to AI."]})]})]})]}),r==="tech"&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-300 space-y-8 pb-10",children:[e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg text-indigo-600 dark:text-indigo-400",children:e.jsx(g,{name:"Session7_Compass",size:24})}),e.jsx("h3",{className:"text-lg md:text-xl font-bold text-slate-900 dark:text-white",children:"Business Logic & Workflow"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"p-5 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-2xl shadow-sm",children:[e.jsx("h4",{className:"font-bold text-sm text-indigo-600 dark:text-indigo-400 mb-2 uppercase tracking-wide",children:"1. Evidence Aggregation"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed text-left",children:["The system employs a unique ",e.jsx("strong",{children:'"Dual-Stream Synthesis"'})," engine.",e.jsx("br",{}),e.jsx("br",{}),e.jsxs("span",{className:"block mb-2",children:[" ",e.jsx("strong",{children:"Unstructured Stream:"})," Captures raw text, OCR data from images/PDFs, and voice dictation logs. Ideal for messy, real-world audit trails."]}),e.jsxs("span",{className:"block",children:[" ",e.jsx("strong",{children:"Structured Stream (Matrix):"})," A tabular interface mapping specific evidence directly to ISO clauses. Ideal for GAP analysis and strict compliance checks."]}),e.jsx("br",{}),e.jsx("span",{className:"block mt-2 text-xs italic opacity-75",children:"During analysis, both streams are merged to provide the AI with a complete context."})]})]}),e.jsxs("div",{className:"p-5 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-2xl shadow-sm",children:[e.jsx("h4",{className:"font-bold text-sm text-emerald-600 dark:text-emerald-400 mb-2 uppercase tracking-wide",children:"2. Compliance Intelligence"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed text-left",children:["Compliance is determined not just by matching keywords, but by ",e.jsx("strong",{children:"Contextual Reasoning"}),".",e.jsx("br",{}),e.jsx("br",{}),e.jsxs("span",{className:"block mb-2",children:[" ",e.jsx("strong",{children:"RAG (Retrieval-Augmented Generation):"})," If a source PDF is uploaded, the system vectorizes it locally (IndexedDB) to ground the AI's answers in the specific standard's text."]}),e.jsxs("span",{className:"block",children:[" ",e.jsx("strong",{children:"Heuristic Fallback:"}),' In offline mode, the system switches to "Local Intelligence", using regex and keyword scoring to estimate compliance without Cloud APIs.']})]})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 pl-2 border-l-4 border-purple-500",children:"Core Functional Modules"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{title:"Smart OCR Engine",desc:"Extracts text from images and scanned PDFs using Google Vision (Cloud) or fallback methods."},{title:"Privacy Shield",desc:"Client-side PII redaction (Emails, Phones) before data leaves the browser."},{title:"Report Synthesizer",desc:"Generates final audit reports in Markdown or Plain Text for system integration."},{title:"Vector Store",desc:"Client-side vector database (IndexedDB) for semantic search of large standards."},{title:"Neural Pool",desc:"Multi-key management system with smart failover and quota handling."},{title:"Session Time Machine",desc:"Snapshot-based state management allowing rollbacks to previous audit points."}].map((d,b)=>e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-100 dark:border-slate-700",children:[e.jsx("h5",{className:"font-bold text-sm text-slate-800 dark:text-slate-200 mb-1",children:d.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-snug",children:d.desc})]},b))})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 pl-2 border-l-4 border-blue-500",children:"Technical Architecture"}),e.jsx("div",{className:"hidden md:block overflow-hidden rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800/80 text-slate-700 dark:text-slate-200 uppercase tracking-wider text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 font-extrabold",children:"Layer"}),e.jsx("th",{className:"px-6 py-4 font-extrabold",children:"Technology"}),e.jsx("th",{className:"px-6 py-4 font-extrabold",children:"Role"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800/50 bg-white dark:bg-slate-900",children:h.map((d,b)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 font-bold text-slate-700 dark:text-slate-300",children:d.layer}),e.jsx("td",{className:`px-6 py-4 font-bold ${d.color}`,children:d.tech}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400 text-xs leading-relaxed",children:d.role})]},b))})]})}),e.jsx("div",{className:"md:hidden space-y-3",children:h.map((d,b)=>e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl shadow-sm flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-100 dark:border-slate-800 pb-2",children:[e.jsx("span",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:d.layer}),e.jsx("div",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase ${d.bg} ${d.color}`,children:d.tech})]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("strong",{className:"text-slate-700 dark:text-slate-300",children:"Role:"})," ",d.role]})]},b))})]})]}),r==="changelog"&&e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-300",children:e.jsx("div",{className:"border-l-2 border-slate-200 dark:border-slate-800 space-y-8 pl-6 relative ml-2",children:hr.map((d,b)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:`absolute -left-[31px] top-1 w-2.5 h-2.5 rounded-full border-2 border-white dark:border-slate-900 transition-colors ${b===0?"bg-indigo-500 shadow-[0_0_0_4px_rgba(99,102,241,0.2)]":"bg-slate-300 dark:bg-slate-700"}`}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsxs("h4",{className:`text-sm font-bold ${b===0?"text-indigo-600 dark:text-indigo-400":"text-slate-800 dark:text-slate-200"}`,children:["v",d.version]}),e.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded",children:d.date})]}),e.jsx("ul",{className:"space-y-1.5",children:d.features.map((w,k)=>e.jsxs("li",{className:"text-xs text-slate-600 dark:text-slate-300 flex items-start gap-2",children:[e.jsx("span",{className:"w-1 h-1 bg-slate-400 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:w})]},k))})]},b))})}),e.jsxs("div",{className:"mt-10 pt-8 border-t border-gray-100 dark:border-slate-800 flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 opacity-80",children:[e.jsx("div",{className:"h-[1px] w-12 bg-gradient-to-r from-transparent to-indigo-400 dark:to-indigo-500"}),e.jsx("span",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-[0.2em]",children:"Architected By"}),e.jsx("div",{className:"h-[1px] w-12 bg-gradient-to-l from-transparent to-indigo-400 dark:to-indigo-500"})]}),e.jsxs("h3",{className:"text-sm md:text-base font-black text-slate-800 dark:text-white tracking-tight mb-1",children:["Trung Dang Hoang ",e.jsx("span",{className:"text-slate-400 dark:text-slate-500 font-serif italic font-normal ml-1",children:"(Steven)"})]}),e.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:" 2026 All Rights Reserved. Built for ISO Audit Professional Compliance."})]})]})]})})},Vr=({isOpen:t,onClose:s,clause:a,standardName:n,fullText:r,isLoading:c,onInsert:p})=>{const[h,d]=l.useState("en"),[b,w]=l.useState(!1),[k,I]=l.useState(""),A=h==="en"?r.en:r.vi,T=l.useMemo(()=>{if(!n)return{text:"ISO",colorClass:"bg-gray-100 text-gray-600"};const $=n.match(/\((.*?)\)/),Q=$?$[1]:n.split(" ")[0]||"ISO",f=Q.toUpperCase();let C="bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300 border-indigo-100 dark:border-indigo-800/50";return f.includes("EMS")||f.includes("14001")?C="bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-700/50":f.includes("QMS")||f.includes("9001")?C="bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-700/50":(f.includes("ISMS")||f.includes("27001"))&&(C="bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-700/50"),{text:Q,colorClass:C}},[n]);l.useEffect(()=>{if(!t){I("");return}if(c||!A){I("");return}const $=A.split(`
`);let Q=0,f="";const C=setTimeout(()=>{const L=setInterval(()=>{Q<$.length?(f+=($[Q]||"")+`
`,I(f),Q++):clearInterval(L)},20);return()=>clearInterval(L)},50);return()=>clearTimeout(C)},[t,A,c]);const R=()=>{p(A)},G=()=>{kt(A),w(!0),setTimeout(()=>w(!1),2e3)};return e.jsx(yt,{isOpen:t,title:"Clause Reference",onClose:s,children:e.jsxs("div",{className:"flex flex-col h-full gap-3",children:[a&&e.jsxs("div",{className:"flex items-start gap-3 pb-2 border-b border-gray-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm font-black text-indigo-700 dark:text-indigo-400 uppercase bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded-lg border border-indigo-100 dark:border-indigo-800 shrink-0",children:a.code}),e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-white leading-tight mt-1",children:a.title})]}),c?e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-slate-500 gap-4",children:[e.jsxs("div",{className:"relative w-16 h-16",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-indigo-200 dark:border-indigo-800 rounded-full opacity-20"}),e.jsx("div",{className:"absolute inset-0 border-t-2 border-indigo-600 rounded-full animate-spin"})]}),e.jsx("span",{className:"text-sm font-bold animate-pulse",children:"Consulting Gemini AI Auditor..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded-full border shadow-sm uppercase tracking-wider ${T.colorClass}`,children:T.text}),e.jsxs("div",{className:"lang-pill-container shadow-sm border-gray-200 dark:border-slate-700",children:[e.jsx("span",{onClick:()=>d("en"),className:`lang-pill-btn ${h==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:()=>d("vi"),className:`lang-pill-btn ${h==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("button",{onClick:G,disabled:b,className:`p-2 rounded-xl transition-all hover:scale-110 active:scale-95 disabled:opacity-70 border shadow-sm ${b?"text-emerald-600 border-emerald-200 bg-emerald-50 dark:bg-emerald-900/20":"bg-white dark:bg-slate-800 border-gray-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600"}`,title:b?"Copied!":"Copy to Clipboard",children:e.jsx(g,{name:b?"CheckThick":"Copy",size:16})}),e.jsx("button",{onClick:R,className:"p-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow-lg shadow-indigo-500/20 transition-all hover:scale-110 active:scale-95",title:"Insert Reference into Evidence",children:e.jsx(g,{name:"Quote",size:16})})]})]}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto custom-scrollbar bg-gray-50/50 dark:bg-slate-950/50 rounded-2xl border border-gray-100 dark:border-slate-800 relative shadow-inner text-left",children:e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.jsxs("p",{className:"text-xs md:text-sm text-slate-800 dark:text-slate-200 whitespace-pre-wrap leading-7 font-medium tracking-wide",children:[k,!c&&k!==A&&e.jsx("span",{className:"inline-block w-1.5 h-4 bg-indigo-500 animate-pulse ml-1 align-middle"})]})})})]})]})})},Wr=({isOpen:t,onClose:s,onRestore:a})=>{const[n,r]=l.useState([]),[c,p]=l.useState(null);l.useEffect(()=>{t&&h()},[t]);const h=()=>{var k,I,A;try{const T=localStorage.getItem("iso_session_data");if(T){const G=JSON.parse(T),$=((k=G.evidence)==null?void 0:k.trim())||((I=G.selectedClauses)==null?void 0:I.length)>0||((A=G.auditInfo)==null?void 0:A.company);p($?{id:"current_autosave",timestamp:Date.now(),label:"Latest Auto-Save",triggerType:"AUTO_SAVE",data:G}:null)}else p(null);const R=localStorage.getItem("iso_session_history");if(R){const G=JSON.parse(R);r(G.sort(($,Q)=>Q.timestamp-$.timestamp))}else r([])}catch(T){console.error("Failed to load session history",T)}},d=k=>new Date(k).toLocaleString(),b=k=>{const I=k.data.evidence?k.data.evidence.length:0,A=k.data.selectedClauses?k.data.selectedClauses.length:0,T=k.data.analysisResult?k.data.analysisResult.length:0;return e.jsxs("div",{className:"flex gap-3 mt-2 text-[10px] text-slate-500 font-mono",children:[e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(g,{name:"FileText",size:10})," ",I>0?`${(I/1024).toFixed(1)}KB Evid`:"No Evid"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(g,{name:"CheckSquare",size:10})," ",A," Clauses"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(g,{name:"Wand2",size:10})," ",T," Findings"]})]})},w=(k,I)=>e.jsxs("div",{onClick:()=>a(k),className:`group relative p-4 rounded-2xl border cursor-pointer transition-all duration-300 hover:scale-[1.02] active:scale-95 ${I?"bg-indigo-50/50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 ring-1 ring-indigo-500/20":"bg-white dark:bg-slate-900 border-gray-100 dark:border-slate-800 hover:border-indigo-300 dark:hover:border-indigo-700 hover:shadow-lg"}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[9px] font-black uppercase tracking-wider px-2 py-0.5 rounded-full ${I?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/30":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,children:I?"ACTIVE STATE":"BACKUP ARCHIVE"}),e.jsx("span",{className:"text-xs text-slate-400 font-mono",children:d(k.timestamp)})]})}),e.jsxs("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 truncate",children:[k.data.auditInfo.company||"Untitled Company",e.jsx("span",{className:"font-normal text-slate-400 mx-1",children:"|"}),k.data.auditInfo.type||"Untitled Audit"]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate mb-1",children:["Standard: ",Pt(k.data.standardKey).replace(/_/g," ")]}),b(k),e.jsx("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"bg-indigo-600 text-white p-2 rounded-full shadow-xl",children:e.jsx(g,{name:"History",size:20})})})]},k.id);return t?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:s,children:e.jsxs("div",{className:"bg-white dark:bg-slate-950 w-full max-w-2xl rounded-3xl shadow-2xl border border-gray-200 dark:border-slate-800 overflow-hidden flex flex-col max-h-[85vh] animate-zoom-in-spring",onClick:k=>k.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-900/50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(g,{name:"History",className:"text-indigo-500"}),"Session Time Machine"]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Select a restoration point. This will overwrite your current workspace."})]}),e.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-slate-800 text-slate-400 transition-colors",children:e.jsx(g,{name:"X",size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6 bg-gray-50/30 dark:bg-slate-950",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"Available Auto-Save"]}),c?w(c,!0):e.jsx("div",{className:"p-4 border border-dashed border-gray-300 dark:border-slate-700 rounded-xl text-center text-slate-400 text-xs italic",children:"No active auto-save data found."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(g,{name:"Lock",size:12}),"Backup Vault (Last 5 Resets)"]}),e.jsx("div",{className:"space-y-3",children:n.length>0?n.map(k=>w(k,!1)):e.jsxs("div",{className:"p-8 border border-dashed border-gray-300 dark:border-slate-700 rounded-xl text-center",children:[e.jsx(g,{name:"Archive",className:"mx-auto mb-2 text-slate-300",size:24}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Vault is empty."}),e.jsx("p",{className:"text-slate-400 text-xs",children:"Backups are created automatically when you start a New Session."})]})})]})]}),e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-slate-900 border-t border-gray-100 dark:border-slate-800 text-center",children:e.jsxs("p",{className:"text-[10px] text-slate-400",children:[e.jsx("span",{className:"font-bold text-indigo-500",children:"Pro Tip:"})," Backups are stored locally in your browser. Clearing cache will delete them."]})})]})}):null},Ur="ISO_AUDIT_DB",Re="knowledge_files",Gr=1;class Kr{constructor(){gt(this,"dbPromise",null)}openDB(){return this.dbPromise?this.dbPromise:(this.dbPromise=new Promise((s,a)=>{const n=indexedDB.open(Ur,Gr);n.onupgradeneeded=r=>{const c=r.target.result;c.objectStoreNames.contains(Re)||c.createObjectStore(Re,{keyPath:"standardKey"})},n.onsuccess=r=>{s(r.target.result)},n.onerror=r=>{console.error("KnowledgeStore: DB Open Error",r),a(r.target.error)}}),this.dbPromise)}async saveDocument(s,a,n){try{const r=await this.openDB();return new Promise((c,p)=>{const d=r.transaction([Re],"readwrite").objectStore(Re),b={standardKey:s,fileName:a,content:n,timestamp:Date.now()},w=d.put(b);w.onsuccess=()=>c(),w.onerror=()=>p(w.error)})}catch(r){throw console.error("KnowledgeStore: Save Error",r),r}}async getDocument(s){try{const a=await this.openDB();return new Promise((n,r)=>{const h=a.transaction([Re],"readonly").objectStore(Re).get(s);h.onsuccess=()=>{n(h.result?h.result:null)},h.onerror=()=>r(h.error)})}catch(a){return console.error("KnowledgeStore: Get Error",a),null}}async deleteDocument(s){try{const a=await this.openDB();return new Promise((n,r)=>{const h=a.transaction([Re],"readwrite").objectStore(Re).delete(s);h.onsuccess=()=>n(),h.onerror=()=>r(h.error)})}catch(a){throw console.error("KnowledgeStore: Delete Error",a),a}}async migrateFromLocalStorage(s){const a=`iso_kb_content_${s}`,n=`iso_kb_name_${s}`,r=localStorage.getItem(a),c=localStorage.getItem(n);return r&&c?(console.log(`KnowledgeStore: Migrating ${s} from LocalStorage to IndexedDB...`),await this.saveDocument(s,c,r),localStorage.removeItem(a),localStorage.removeItem(n),!0):!1}}const bt=new Kr,Hr=Ze.memo(({row:t,clauseId:s,isActive:a,isProcessing:n,onInputChange:r,onFocus:c,onPaste:p})=>e.jsxs("div",{className:"grid grid-cols-[1fr_1.5fr] gap-4 items-start p-3 hover:bg-gray-50 dark:hover:bg-slate-800/30 rounded-lg transition-colors group relative border border-transparent hover:border-gray-100 dark:hover:border-slate-800",children:[e.jsx("div",{className:"text-[11px] text-slate-600 dark:text-slate-300 font-medium leading-relaxed pt-2 select-none",children:t.requirement}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{rows:3,placeholder:"Type evidence or paste files here...",className:`w-full bg-gray-50 dark:bg-slate-950 border rounded-lg p-2 text-xs text-slate-800 dark:text-white outline-none transition-all resize-y min-h-[70px] shadow-sm 
                        ${n?"opacity-50 pointer-events-none":""} 
                        ${a?"border-indigo-500 ring-2 ring-indigo-500/10 bg-white dark:bg-slate-900":"border-gray-200 dark:border-slate-700 focus:border-indigo-400 focus:ring-2 focus:ring-indigo-500/10"}`,value:t.evidenceInput,onChange:h=>r(s,t.id,h.target.value),onFocus:()=>c(s,t.id),onPaste:h=>p(h,s,t.id)}),e.jsx("div",{className:"absolute top-2 right-2 pointer-events-none transition-opacity duration-300",children:t.status==="supplied"&&!n&&e.jsx("div",{className:"bg-emerald-500/10 p-0.5 rounded-full",children:e.jsx(g,{name:"CheckThick",size:10,className:"text-emerald-600"})})}),n&&e.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-2 px-2 py-1 bg-white dark:bg-slate-800 rounded-md shadow-sm border border-indigo-100 dark:border-slate-600 z-10 animate-in fade-in zoom-in",children:[e.jsx(g,{name:"Loader",className:"animate-spin text-indigo-500",size:12}),e.jsx("span",{className:"text-[9px] font-bold text-indigo-500",children:"Processing..."})]})]})]}),(t,s)=>t.row.evidenceInput===s.row.evidenceInput&&t.row.status===s.row.status&&t.isActive===s.isActive&&t.isProcessing===s.isProcessing),qr=l.forwardRef(({standard:t,selectedClauses:s,matrixData:a,setMatrixData:n,onPasteFiles:r},c)=>{const[p,h]=l.useState([]),[d,b]=l.useState(null),[w,k]=l.useState(null),I=l.useMemo(()=>{const f=[],C=L=>{L.forEach(N=>{f.push(N),N.subClauses&&C(N.subClauses)})};return t.groups.forEach(L=>C(L.clauses)),f},[t]);l.useEffect(()=>{n(f=>{const C={...f};let L=!1;return s.forEach(N=>{if(!C[N]){const M=I.find(K=>K.id===N);if(M){const K=M.description||"",S=K.length>60?K.split(/(?:\. |\n)/).filter(D=>D.trim().length>5):[K];C[N]=S.map((D,J)=>({id:`${N}_req_${J}`,requirement:D.trim(),evidenceInput:"",status:"pending"})),L=!0}}}),L?(s.length>0&&p.length===0&&h([s[0]]),C):f})},[s,I,n]);const A=l.useCallback((f,C,L)=>{n(N=>({...N,[f]:N[f].map(M=>{if(M.id===C){const K=M.evidenceInput||"",D=K+(K&&L?`
`:"")+L;return{...M,evidenceInput:D,status:D.trim()?"supplied":"pending"}}return M})}))},[n]),T=l.useCallback((f,C,L)=>{n(N=>({...N,[f]:N[f].map(M=>M.id===C?{...M,evidenceInput:L,status:L.trim()?"supplied":"pending"}:M)}))},[n]),R=l.useCallback((f,C,L)=>{const N=f.clipboardData.items,M=[];for(let K=0;K<N.length;K++)if(N[K].kind==="file"){const S=N[K].getAsFile();S&&M.push(S)}M.length>0&&(f.preventDefault(),r&&r(M,{clauseId:C,rowId:L}))},[r]),G=l.useCallback((f,C)=>{b({clauseId:f,rowId:C})},[]);l.useImperativeHandle(c,()=>({insertEvidence:(f,C,L)=>{A(f,C,L)},handleExternalDictation:f=>{d&&A(d.clauseId,d.rowId,f)},getActiveRow:()=>d}));const $=()=>{const f=vt(a,s);f?(kt(f),alert("Matrix data copied to clipboard as Table!")):alert("Matrix is empty.")},Q=f=>{h(C=>C.includes(f)?C.filter(L=>L!==f):[...C,f])};return s.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 bg-gray-50/50 dark:bg-slate-900/50 rounded-3xl border border-dashed border-gray-200 dark:border-slate-800",children:[e.jsx(g,{name:"LayoutList",size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-sm font-medium",children:"Select clauses from the sidebar to start mapping evidence."})]}):e.jsxs("div",{className:"h-full flex flex-col relative animate-fade-in-up",children:[e.jsx("div",{className:"flex-shrink-0 flex justify-end mb-2 px-1",children:e.jsxs("button",{onClick:$,className:"text-[10px] font-bold text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 flex items-center gap-1 bg-white dark:bg-slate-800 px-2 py-1 rounded shadow-sm border border-gray-100 dark:border-slate-700 hover:border-indigo-200 transition-colors",title:"Export to Clipboard: Copies current data as a structured Text Table for Excel/Word.",children:[e.jsx(g,{name:"Copy",size:12})," Copy Matrix Table"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-4 p-1 pb-10",children:s.map(f=>{const C=I.find(S=>S.id===f),L=a[f]||[],N=p.includes(f);if(!C)return null;const M=L.filter(S=>S.status==="supplied").length,K=Math.round(M/(L.length||1)*100);return e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-slate-800 shadow-sm overflow-hidden transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50/80 dark:bg-slate-800/50 cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors select-none",onClick:()=>Q(f),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-black text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded border border-indigo-100 dark:border-indigo-800/50",children:C.code}),e.jsx("h4",{className:"text-xs font-bold text-slate-700 dark:text-slate-200",children:C.title})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-1.5 bg-gray-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ease-out ${K===100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${K}%`}})}),e.jsx(g,{name:N?"ChevronUp":"ChevronDown",size:14,className:"text-slate-400"})]})]}),N&&e.jsxs("div",{className:"p-3 border-t border-gray-100 dark:border-slate-800 animate-accordion-down",children:[e.jsxs("div",{className:"grid grid-cols-[1fr_1.5fr] gap-4 mb-2 px-3",children:[e.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-wider",children:"Requirement Breakdown"}),e.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-wider",children:"Verified Evidence"})]}),e.jsx("div",{className:"space-y-1",children:L.map(S=>e.jsx(Hr,{row:S,clauseId:f,isActive:(d==null?void 0:d.rowId)===S.id,isProcessing:w===S.id,onInputChange:T,onFocus:G,onPaste:R},S.id))})]})]},f)})})]})}),Jr=({evidence:t,setEvidence:s,uploadedFiles:a,setUploadedFiles:n,onOcrProcess:r,isOcrLoading:c,onAnalyze:p,isReadyForAnalysis:h,isAnalyzeLoading:d,analyzeTooltip:b,onExport:w,evidenceLanguage:k,setEvidenceLanguage:I,textareaRef:A,tags:T=[],onAddTag:R,selectedClauses:G=[],standards:$,standardKey:Q,matrixData:f,setMatrixData:C})=>{const[L,N]=l.useState(!1),[M,K]=l.useState(!1),[S,D]=l.useState("document"),[J,y]=l.useState(!1),[_,V]=l.useState(null),X=l.useRef({}),F=l.useRef(null),Y=l.useRef(null),ee=l.useRef(null),pe=l.useCallback(()=>{var O;if(M){(O=Y.current)==null||O.stop(),K(!1);return}const u=window.SpeechRecognition||window.webkitSpeechRecognition;if(!u){alert("Voice-to-Text is not supported in this browser (Try Chrome/Edge).");return}if(S==="matrix"&&ee.current&&!ee.current.getActiveRow()){alert("Please click inside a Matrix cell first to dictate.");return}try{const z=new u;z.continuous=!0,z.interimResults=!0,z.lang=k==="vi"?"vi-VN":"en-US",z.onresult=q=>{let B="";for(let H=q.resultIndex;H<q.results.length;++H)q.results[H].isFinal&&(B+=q.results[H][0].transcript);if(B){const H=B.trim();S==="matrix"&&ee.current?ee.current.handleExternalDictation(H):s(se=>se+(se?" ":"")+H)}},z.onerror=q=>{console.error("Speech Error",q.error),K(!1)},z.onend=()=>{K(!1)},z.start(),Y.current=z,K(!0)}catch(z){console.error("Failed to start recognition",z),K(!1)}},[M,S,k,s]),xe=l.useCallback((u,O)=>{var q;if(S==="matrix"){const B=O||((q=ee.current)==null?void 0:q.getActiveRow());if(!B){alert("Please select a specific cell in the Matrix to attach these files.");return}const H=u.map(se=>{const ae=Math.random().toString(36).substr(2,9);return X.current[ae]=B,{id:ae,file:se,status:"pending"}});n(se=>[...se,...H]);return}const z=u.map(B=>({id:Math.random().toString(36).substr(2,9),file:B,status:"pending"}));n(B=>[...B,...z])},[S,n]),ie=l.useCallback(async()=>{const u=a.filter(O=>O.status==="pending"||O.status==="error");if(u.length!==0){y(!0);for(const O of u)try{n(q=>q.map(B=>B.id===O.id?{...B,status:"processing"}:B));let z="";if(O.file.type.startsWith("image/")){const q=await ds(O.file);z=await cs("Transcribe text.",q,O.file.type)}else O.file.type==="application/pdf"?z="[PDF Content extracted via OCR would go here]":z=await O.file.text();if(z&&ee.current){const q=X.current[O.id];if(q){const B=`[File: ${O.file.name}]`;ee.current.insertEvidence(q.clauseId,q.rowId,`${B}
${z}`),n(H=>H.map(se=>se.id===O.id?{...se,status:"success",result:z}:se)),delete X.current[O.id]}else throw new Error("Target row lost")}else throw new Error("No text extracted")}catch(z){console.error("Matrix OCR Error",z),n(q=>q.map(B=>B.id===O.id?{...B,status:"error",error:z.message||"Failed"}:B))}y(!1)}},[a,n]),ke=l.useCallback(u=>{u.preventDefault(),N(!0)},[]),Ee=l.useCallback(u=>{u.preventDefault(),N(!1)},[]),Ie=l.useCallback(u=>{u.preventDefault(),N(!1),u.dataTransfer.files&&u.dataTransfer.files.length>0&&xe(Array.from(u.dataTransfer.files))},[xe]),W=l.useCallback(u=>{if(S==="matrix"||!A.current)return;const O=A.current.selectionStart,z=A.current.selectionEnd;V(O!==z?{x:u.clientX,y:u.clientY,text:t.substring(O,z),start:O,end:z}:null)},[S,t]),re=u=>{_&&R&&(R({id:`tag_${Date.now()}`,clauseId:u,text:_.text,startIndex:_.start,endIndex:_.end,timestamp:Date.now()}),V(null))};return e.jsxs("div",{className:"h-full flex flex-col gap-2 md:gap-4 animate-fade-in-up relative",children:[e.jsx("div",{className:"flex justify-center -mt-2 mb-1",children:e.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-950 p-1 rounded-xl shadow-inner border border-gray-200 dark:border-slate-800",children:[e.jsxs("button",{onClick:()=>D("document"),className:`px-4 py-1.5 text-xs font-bold rounded-lg transition-all flex items-center gap-2 ${S==="document"?"bg-white dark:bg-slate-800 shadow-sm text-indigo-600 dark:text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:[e.jsx(g,{name:"FileText",size:14})," Document Mode"]}),e.jsxs("button",{onClick:()=>D("matrix"),className:`px-4 py-1.5 text-xs font-bold rounded-lg transition-all flex items-center gap-2 ${S==="matrix"?"bg-white dark:bg-slate-800 shadow-sm text-indigo-600 dark:text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:[e.jsx(g,{name:"LayoutList",size:14})," Evidence Matrix"]})]})}),e.jsxs("div",{className:"flex-1 flex flex-col gap-2 md:gap-4 min-h-0 relative",children:[_&&G&&G.length>0&&S==="document"&&e.jsxs("div",{className:"fixed z-[9999] bg-slate-900/90 backdrop-blur-md text-white p-2.5 rounded-xl shadow-2xl flex flex-col gap-2 animate-in zoom-in-95 duration-200 border border-slate-700/50 ring-1 ring-white/10 max-w-[200px]",style:{top:_.y-120,left:Math.min(_.x-100,window.innerWidth-220)},children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700/50 pb-1.5 mb-1",children:[e.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-300 flex items-center gap-1",children:[e.jsx(g,{name:"Tag",size:10})," Tag As:"]}),e.jsx("button",{onClick:()=>V(null),className:"text-slate-400 hover:text-white bg-white/10 rounded-full p-0.5",children:e.jsx(g,{name:"X",size:10})})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5 justify-start max-h-[150px] overflow-y-auto custom-scrollbar",children:G.map(u=>e.jsx("button",{onClick:()=>re(u),className:"text-[10px] font-mono font-bold bg-indigo-600 hover:bg-indigo-500 text-white px-2 py-1 rounded-lg transition-all active:scale-95 shadow-sm border border-indigo-500 hover:border-indigo-400",children:u},u))}),e.jsx("div",{className:"absolute bottom-[-6px] left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-900/90 rotate-45 border-r border-b border-slate-700/50"})]}),e.jsxs("div",{className:`flex-1 bg-white dark:bg-slate-900 rounded-3xl shadow-sm border overflow-hidden flex flex-col relative group transition-all duration-300 dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_4px_6px_-1px_rgba(0,0,0,0.5)] ${L?"border-indigo-500 ring-4 ring-indigo-500/20 bg-indigo-50/10":"border-gray-100 dark:border-transparent"}`,onDragOver:ke,onDragLeave:Ee,onDrop:Ie,children:[L&&e.jsxs("div",{className:"absolute inset-0 bg-indigo-500/10 backdrop-blur-[2px] z-50 flex flex-col items-center justify-center pointer-events-none animate-in fade-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"p-6 rounded-full bg-white dark:bg-slate-900 shadow-2xl border-4 border-dashed border-indigo-500",children:e.jsx(g,{name:"UploadCloud",size:48,className:"text-indigo-600 animate-bounce"})}),e.jsxs("h3",{className:"mt-4 text-xl font-black text-indigo-700 dark:text-indigo-400 uppercase tracking-widest text-center",children:["Drop Files to Extract",e.jsx("br",{}),e.jsx("span",{className:"text-sm font-normal normal-case",children:"(Images, PDF, TXT)"})]})]}),S==="document"?e.jsx("textarea",{ref:A,className:"flex-1 w-full h-full p-4 pb-6 bg-transparent resize-none focus:outline-none text-slate-700 dark:text-slate-300 font-medium text-sm leading-relaxed text-justify break-words whitespace-pre-wrap selection:bg-indigo-200 dark:selection:bg-indigo-900/60",placeholder:"Paste audit evidence here or use Voice Dictation...",value:t,onChange:u=>s(u.target.value),onPaste:u=>{u.clipboardData.files.length>0&&(u.preventDefault(),xe(Array.from(u.clipboardData.files)))},onMouseUp:W}):$&&Q&&$[Q]&&f&&C?e.jsx("div",{className:"flex-1 w-full h-full bg-gray-50/30 dark:bg-slate-950/30 p-2",children:e.jsx(qr,{ref:ee,standard:$[Q],selectedClauses:G,matrixData:f,setMatrixData:C,onPasteFiles:xe})}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-400",children:"Please select a Standard to use Matrix Mode."}),T.length>0&&S==="document"&&e.jsx("div",{className:"absolute bottom-4 right-4 pointer-events-none opacity-60 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm border border-indigo-100 dark:border-indigo-900/50 text-indigo-600 dark:text-indigo-300 text-[10px] font-bold px-3 py-1.5 rounded-full shadow-lg flex items-center gap-2",children:[e.jsx(g,{name:"Tag",size:12}),T.length," Evidence Tags"]})})]}),a.length>0&&e.jsxs("div",{className:"flex-shrink-0 p-3 bg-gray-50 dark:bg-slate-900 border border-gray-200 dark:border-white/5 rounded-2xl animate-in slide-in-from-bottom-5 duration-300 dark:shadow-inner",children:[S==="matrix"&&e.jsx("div",{className:"mb-2 text-[10px] font-bold text-indigo-500 uppercase tracking-widest px-1",children:"Matrix Queue: Files will attach to active cells"}),e.jsxs("div",{className:"flex gap-3 overflow-x-auto custom-scrollbar pb-2",children:[a.map(u=>e.jsxs("div",{className:`relative group flex-shrink-0 w-24 h-24 bg-white dark:bg-slate-800 rounded-xl shadow-sm border overflow-hidden transition-all duration-300 dark:shadow-lg ${u.status==="error"?"border-red-500 ring-2 ring-red-500/20":"border-gray-100 dark:border-white/5"}`,children:[u.file.type.startsWith("image/")?e.jsx("img",{src:URL.createObjectURL(u.file),alt:"preview",className:`w-full h-full object-cover transition-opacity ${u.status==="processing"?"opacity-30":"opacity-80 group-hover:opacity-100"}`}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-indigo-50 dark:bg-indigo-900/20 p-2 text-center",children:[e.jsx(g,{name:u.file.type==="application/pdf"?"FileText":"Book",size:24,className:"text-indigo-600 dark:text-indigo-400 mb-1"}),e.jsx("span",{className:"text-[8px] font-bold text-indigo-700 dark:text-indigo-300 truncate w-full",children:u.file.name})]}),u.status==="processing"&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/40 dark:bg-black/40",children:e.jsx(g,{name:"Loader",className:"animate-spin text-indigo-600",size:24})}),u.status==="success"&&e.jsx("div",{className:"absolute top-1 right-1 bg-emerald-500 text-white rounded-full p-0.5 shadow-sm",children:e.jsx(g,{name:"CheckThick",size:10})}),u.status==="error"&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-50/80 dark:bg-red-950/80 p-1 text-center",children:[e.jsx(g,{name:"AlertCircle",size:20,className:"text-red-600"}),e.jsx("span",{className:"text-[7px] font-black text-red-600 uppercase leading-tight mt-1",children:u.error||"Err"})]}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center z-20",children:e.jsx("button",{onClick:()=>n(O=>O.filter(z=>z.id!==u.id)),className:"bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 shadow-lg transform scale-90 hover:scale-110 transition-all duration-200",children:e.jsx(g,{name:"X",size:14})})})]},u.id)),e.jsx("div",{className:"flex-shrink-0 w-24 h-24 flex items-center justify-center",children:e.jsxs("button",{onClick:S==="matrix"?ie:r,disabled:c||J||!a.some(u=>u.status==="pending"||u.status==="error"),className:"w-full h-full bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow-lg shadow-indigo-500/30 flex flex-col items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-50 hover:scale-105 duration-300",children:[c||J?e.jsx(g,{name:"Loader",className:"animate-spin",size:24}):e.jsx(g,{name:"ScanText",size:24}),e.jsx("span",{className:"text-[10px] font-bold",children:"Process"})]})})]})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex flex-row items-center md:justify-end gap-2 md:gap-3 w-full pt-2",children:[e.jsxs("div",{className:"flex-none w-[52px] md:w-auto",children:[e.jsx("input",{type:"file",ref:F,className:"hidden",accept:"image/*,application/pdf,text/plain",multiple:!0,onChange:u=>u.target.files&&xe(Array.from(u.target.files))}),e.jsxs("button",{onClick:()=>{var u;return(u=F.current)==null?void 0:u.click()},className:`w-full h-[52px] md:w-auto md:px-4 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm border whitespace-nowrap ${a.length>0?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 text-indigo-600 dark:text-indigo-400":"bg-white dark:bg-slate-800 border-gray-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:border-indigo-500"}`,title:S==="matrix"?"Upload to Active Matrix Cell":"Upload Files",children:[e.jsx(g,{name:a.length>0?"Demo1_MultiFiles":"Demo8_GridPlus",size:20}),e.jsx("span",{className:"hidden md:inline",children:"Upload"})]})]}),e.jsxs("button",{onClick:pe,className:`flex-none w-[52px] md:w-auto md:px-4 h-[52px] rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm border whitespace-nowrap ${M?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 animate-pulse":"bg-white dark:bg-slate-800 border-gray-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:border-indigo-500"}`,title:M?"Click to Stop":`Start Dictation (${k.toUpperCase()})`,children:[e.jsx(g,{name:"Mic",size:20,className:M?"animate-pulse":""}),e.jsx("span",{className:"hidden md:inline",children:M?`Recording (${k.toUpperCase()})...`:`Dictate (${k.toUpperCase()})`})]}),e.jsxs("button",{onClick:p,disabled:!h,title:b,className:`flex-1 md:flex-none md:w-auto md:px-6 h-[52px] rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg whitespace-nowrap ${h?"btn-shrimp text-white active:scale-95":"bg-gray-200 dark:bg-slate-800 text-slate-400 dark:text-slate-600 opacity-70 cursor-not-allowed border border-transparent"}`,children:[d?e.jsx(fr,{className:"text-white"}):e.jsx(g,{name:"Wand2",size:20,className:"hidden md:block"}),e.jsx("span",{className:"inline text-xs uppercase tracking-wider",children:"Analyze"})]}),e.jsxs("button",{onClick:()=>w("evidence",k),disabled:!t||!t.trim(),className:"flex-none md:w-auto px-3 md:px-4 h-[52px] bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm disabled:opacity-50 whitespace-nowrap dark:shadow-md",children:[e.jsx(g,{name:"Download"}),e.jsx("span",{className:"hidden md:inline",children:"Export"}),e.jsxs("div",{className:"lang-pill-container ml-1",title:"Select Input/Export Language",children:[e.jsx("span",{onClick:u=>{u.stopPropagation(),I("en")},className:`lang-pill-btn ${k==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:u=>{u.stopPropagation(),I("vi")},className:`lang-pill-btn ${k==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]})]})]})},Xr=({analysisResult:t,setAnalysisResult:s,selectedFindings:a,setSelectedFindings:n,isAnalyzeLoading:r,loadingMessage:c,currentAnalyzingClause:p,viewMode:h,setViewMode:d,focusedFindingIndex:b,setFocusedFindingIndex:w,onExport:k,notesLanguage:I,setNotesLanguage:A})=>{const T=l.useRef(null),R=l.useRef([]);l.useEffect(()=>{h==="list"&&T.current&&(T.current.scrollTop=T.current.scrollHeight)},[t==null?void 0:t.length,h]);const G=(f,C,L)=>{if(s(N=>{if(!N)return null;const M=[...N];return M[f]={...M[f],[C]:L},M}),C==="status"&&t){const N=f+1;N<t.length&&R.current[N]&&setTimeout(()=>{var M;return(M=R.current[N])==null?void 0:M.scrollIntoView({behavior:"smooth",block:"center"})},100)}},$=f=>{switch(f){case"COMPLIANT":return{bg:"bg-emerald-500",text:"text-emerald-700 dark:text-emerald-300",pill:"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300",border:"border-emerald-500",headerText:"text-emerald-600 dark:text-emerald-400 border-emerald-600 dark:border-emerald-400"};case"NC_MAJOR":return{bg:"bg-red-600",text:"text-red-700 dark:text-red-300",pill:"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300",border:"border-red-600",headerText:"text-red-600 dark:text-red-400 border-red-600 dark:border-red-400"};case"NC_MINOR":return{bg:"bg-orange-500",text:"text-orange-700 dark:text-orange-300",pill:"bg-orange-100 dark:bg-orange-900/40 text-orange-700 dark:text-orange-300",border:"border-orange-500",headerText:"text-orange-500 dark:text-orange-400 border-orange-500 dark:border-orange-400"};case"OFI":return{bg:"bg-blue-500",text:"text-blue-700 dark:text-blue-300",pill:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300",border:"border-blue-500",headerText:"text-blue-600 dark:text-blue-400 border-blue-600 dark:border-blue-400"};default:return{bg:"bg-slate-500",text:"text-slate-600",pill:"bg-slate-100 text-slate-500",border:"border-slate-300",headerText:"text-slate-500 border-slate-300"}}},Q=(f,C,L=!1)=>{const N=$(f.status);return e.jsxs("div",{ref:L?null:M=>{R.current[C]=M},className:`group relative bg-white dark:bg-slate-900 rounded-lg p-3 border-y border-r border-l-[6px] transition-all duration-300 hover:shadow-md dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05)] ${N.border} ${a[f.clauseId]?"border-r-indigo-500 ring-1 ring-indigo-500/20":"border-r-gray-100 dark:border-r-transparent"} animate-in slide-in-from-bottom-2 fade-in fill-mode-backwards`,style:{animationDelay:`${C*50}ms`},onClick:()=>n(M=>({...M,[f.clauseId]:!M[f.clauseId]})),children:[e.jsx("div",{className:"absolute top-3 right-3 z-10",children:a[f.clauseId]?e.jsx("div",{className:"animate-in zoom-in spin-in-180 duration-300",children:e.jsx(g,{name:"CheckThick",size:22,className:"text-emerald-500 drop-shadow-sm"})}):e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-200 dark:border-slate-700 group-hover:border-indigo-300 transition-colors"})}),e.jsxs("div",{className:"pr-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-500 dark:text-slate-400 bg-gray-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:f.clauseId}),e.jsx("div",{className:"relative group/badge",onClick:M=>M.stopPropagation(),children:e.jsxs("select",{value:f.status,onChange:M=>G(C,"status",M.target.value),className:`appearance-none cursor-pointer text-[9px] font-black uppercase tracking-wider px-2 py-0.5 rounded-full ${N.pill} border-none outline-none hover:brightness-95 text-center transition-all`,children:[e.jsx("option",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white",value:"COMPLIANT",children:"COMPLIANT"}),e.jsx("option",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white",value:"NC_MINOR",children:"MINOR"}),e.jsx("option",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white",value:"NC_MAJOR",children:"MAJOR"}),e.jsx("option",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white",value:"OFI",children:"OFI"})]})}),f.crossRefs&&f.crossRefs.length>0&&e.jsx("div",{className:"flex gap-1",children:f.crossRefs.map((M,K)=>e.jsx("span",{className:"text-[8px] border border-indigo-200 dark:border-indigo-800 text-indigo-500 dark:text-indigo-400 px-1.5 py-0.5 rounded-md font-mono bg-indigo-50 dark:bg-indigo-900/10",children:M},K))})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-950/50 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[e.jsx("strong",{className:"block text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider mb-1",children:"Evidence:"}),e.jsx("p",{className:"text-xs text-slate-700 dark:text-slate-300 leading-relaxed",children:f.evidence})]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-3 rounded-xl border-2 border-slate-100 dark:border-slate-800 hover:border-indigo-200 dark:hover:border-indigo-900/50 transition-colors group-focus-within:border-indigo-500 shadow-sm",onClick:M=>M.stopPropagation(),children:[e.jsx("strong",{className:"block text-[10px] font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wider mb-1",children:"Conclusion:"}),e.jsx("textarea",{value:f.reason,onChange:M=>G(C,"reason",M.target.value),className:"w-full bg-transparent outline-none text-xs text-slate-800 dark:text-slate-200 leading-relaxed resize-none h-auto min-h-[60px]",placeholder:"Enter conclusion..."})]})}),f.suggestion&&e.jsxs("div",{className:"flex gap-1.5 items-start",children:[e.jsx(g,{name:"Lightbulb",size:12,className:"text-amber-500 mt-0.5 shrink-0"}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 italic leading-tight",children:f.suggestion})]})]})]},C)};return e.jsxs("div",{className:"h-full flex flex-col gap-2 md:gap-4 animate-fade-in-up",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-1",ref:T,children:[!t&&!r&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 opacity-60",children:[e.jsx(g,{name:"Wand2",size:48,className:"mb-4 text-gray-200 dark:text-slate-700"}),e.jsx("p",{children:"No analysis results yet."})]}),r&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative w-24 h-24 mb-6",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-indigo-100 dark:border-indigo-900/50 rounded-full opacity-50"}),e.jsx("div",{className:"absolute inset-0 border-t-4 border-indigo-500 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-4 border-r-4 border-purple-500 rounded-full animate-spin-reverse opacity-70"})]}),e.jsx("h3",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 to-purple-500 animate-pulse mb-2",children:"AI Analysis In Progress"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium mb-1",children:c}),e.jsx("p",{className:"text-xs text-slate-400 font-mono",children:p&&`Processing: [${p}]`})]}),t&&(h==="list"?e.jsx("div",{className:"space-y-3",children:t.map((f,C)=>Q(f,C))}):e.jsxs("div",{className:"flex flex-col h-full gap-4",children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col bg-gray-50 dark:bg-slate-900/50 rounded-xl border border-gray-100 dark:border-slate-800 overflow-hidden max-h-[40vh]",children:[e.jsxs("div",{className:"grid grid-cols-[60px_1fr_1fr_1fr_1fr] gap-1 p-2 border-b border-gray-200 dark:border-slate-800 bg-white dark:bg-slate-900 sticky top-0 z-10",children:[e.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest text-center",children:"Clause"}),e.jsx("div",{className:"text-[10px] font-bold text-red-500 uppercase tracking-widest text-center",children:"Major"}),e.jsx("div",{className:"text-[10px] font-bold text-orange-500 uppercase tracking-widest text-center",children:"Minor"}),e.jsx("div",{className:"text-[10px] font-bold text-blue-500 uppercase tracking-widest text-center",children:"OFI"}),e.jsx("div",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-widest text-center",children:"Comp"})]}),e.jsx("div",{className:"overflow-y-auto custom-scrollbar",children:t.map((f,C)=>{const L=b===C;return e.jsxs("div",{onClick:()=>w(C),className:`grid grid-cols-[60px_1fr_1fr_1fr_1fr] gap-1 py-1.5 border-b border-gray-100 dark:border-slate-800/50 cursor-pointer transition-colors ${L?"bg-indigo-50 dark:bg-indigo-900/20":"hover:bg-white dark:hover:bg-slate-800"}`,children:[e.jsx("div",{className:`flex items-center justify-center h-full w-full text-[10px] font-mono font-bold ${L?"text-indigo-600 dark:text-indigo-400":"text-slate-500 dark:text-slate-400"}`,children:f.clauseId}),e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:f.status==="NC_MAJOR"&&e.jsx("div",{className:"w-3 h-3 rounded bg-red-500 shadow-sm ring-1 ring-red-300 dark:ring-red-900"})}),e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:f.status==="NC_MINOR"&&e.jsx("div",{className:"w-3 h-3 rounded bg-orange-500 shadow-sm ring-1 ring-orange-300 dark:ring-orange-900"})}),e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:f.status==="OFI"&&e.jsx("div",{className:"w-3 h-3 rounded bg-blue-500 shadow-sm ring-1 ring-blue-300 dark:ring-blue-900"})}),e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:f.status==="COMPLIANT"&&e.jsx("div",{className:"w-3 h-3 rounded bg-emerald-500 shadow-sm ring-1 ring-emerald-300 dark:ring-emerald-900"})})]},C)})})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto custom-scrollbar bg-white dark:bg-slate-900 rounded-2xl border border-gray-100 dark:border-slate-800 p-2 shadow-inner",children:t[b]?Q(t[b],b,!0):e.jsx("div",{className:"h-full flex items-center justify-center text-slate-400 italic text-xs",children:"Select a row above to view details"})})]}))]}),e.jsxs("div",{className:"flex-shrink-0 flex flex-row items-center md:justify-end gap-2 md:gap-3 w-full pt-2",children:[e.jsxs("div",{className:"flex-1 md:flex-none md:w-auto h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-xl p-1 flex items-center shadow-sm min-w-0 dark:shadow-md",children:[e.jsxs("button",{onClick:()=>d("list"),className:`flex-1 md:flex-none md:w-auto h-full px-3 rounded-lg flex items-center justify-center gap-2 transition-all whitespace-nowrap ${h==="list"?"bg-indigo-100 text-indigo-700 shadow-sm dark:bg-indigo-900/40 dark:text-indigo-300":"text-slate-400 hover:text-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700/50"}`,title:"List View",children:[e.jsx(g,{name:"LayoutList",size:18}),e.jsx("span",{className:"hidden md:inline text-xs font-bold",children:"List"})]}),e.jsxs("button",{onClick:()=>d("matrix"),className:`flex-1 md:flex-none md:w-auto h-full px-3 rounded-lg flex items-center justify-center gap-2 transition-all whitespace-nowrap ${h==="matrix"?"bg-indigo-100 text-indigo-700 shadow-sm dark:bg-indigo-900/40 dark:text-indigo-300":"text-slate-400 hover:text-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700/50"}`,title:"Matrix View",children:[e.jsx(g,{name:"Grid",size:18}),e.jsx("span",{className:"hidden md:inline text-xs font-bold",children:"Matrix"})]})]}),e.jsxs("button",{onClick:()=>k("notes",I),disabled:!t,className:"flex-none md:w-auto px-3 md:px-4 h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm disabled:opacity-50 whitespace-nowrap dark:shadow-md",children:[e.jsx(g,{name:"Download"}),e.jsx("span",{className:"hidden md:inline",children:"Export"}),e.jsxs("div",{className:"lang-pill-container",children:[e.jsx("span",{onClick:f=>{f.stopPropagation(),A("en")},className:`lang-pill-btn ${I==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:f=>{f.stopPropagation(),A("vi")},className:`lang-pill-btn ${I==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]})]})]})},Zr=({finalReportText:t,setFinalReportText:s,isReportLoading:a,loadingMessage:n,templateFileName:r,handleTemplateUpload:c,handleGenerateReport:p,isReadyToSynthesize:h,onExport:d,exportLanguage:b,setExportLanguage:w})=>e.jsxs("div",{className:"h-full flex flex-col gap-2 md:gap-4 animate-fade-in-up",children:[e.jsx("div",{className:"flex-1 bg-white dark:bg-slate-900 rounded-3xl shadow-sm border border-gray-100 dark:border-transparent overflow-hidden flex flex-col dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_4px_6px_-1px_rgba(0,0,0,0.5)]",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("textarea",{className:"w-full h-full p-4 resize-none bg-transparent focus:outline-none text-slate-700 dark:text-slate-300 text-sm leading-relaxed font-mono",value:t||"",onChange:k=>s(k.target.value),placeholder:"The final synthesized audit report will appear here..."}),!t&&!a&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none opacity-40",children:[e.jsx(g,{name:"FileText",size:48,className:"text-slate-300 dark:text-slate-600 mb-2"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Ready to generate report"})]}),a&&e.jsx(br,{message:n})]})}),e.jsxs("div",{className:"flex-shrink-0 flex flex-row items-center md:justify-end gap-2 md:gap-3 w-full pt-2",children:[e.jsxs("label",{className:"flex-none w-[52px] md:w-auto px-0 md:px-4 h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 cursor-pointer transition-all duration-300 active:scale-95 shadow-sm group whitespace-nowrap dark:shadow-md",title:r||"Upload Template",children:[e.jsx(g,{name:"UploadCloud",size:20,className:r?"text-emerald-500":""}),e.jsx("span",{className:"hidden lg:inline",children:r?"Template Loaded":"Upload Template"}),e.jsx("input",{type:"file",accept:".txt,.docx",className:"hidden",onChange:c})]}),e.jsxs("button",{onClick:p,disabled:!h,className:`flex-1 md:flex-none md:w-auto md:px-6 h-[52px] rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg whitespace-nowrap ${h?"btn-shrimp text-white active:scale-95 border-indigo-700":"bg-gray-200 dark:bg-slate-800 text-slate-400 dark:text-slate-600 opacity-70 cursor-not-allowed border-transparent"}`,title:"Synthesize Report",children:[a?e.jsx(g,{name:"Loader",className:"animate-spin text-white",size:20}):e.jsx(g,{name:"Wand2",size:20,className:"hidden md:block"}),e.jsx("span",{className:"inline text-xs uppercase tracking-wider",children:"Synthesize"})]}),e.jsxs("button",{onClick:()=>d("report",b),disabled:!t,className:"flex-none md:w-auto px-3 md:px-4 h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-950 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm disabled:opacity-50 whitespace-nowrap dark:shadow-md",children:[e.jsx(g,{name:"Download"}),e.jsx("span",{className:"hidden md:inline",children:"Export"}),e.jsxs("div",{className:"lang-pill-container",children:[e.jsx("span",{onClick:k=>{k.stopPropagation(),w("en")},className:`lang-pill-btn ${b==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:k=>{k.stopPropagation(),w("vi")},className:`lang-pill-btn ${b==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]})]})]}),Qr=({isOpen:t,onClose:s,apiKeys:a,newKeyInput:n,setNewKeyInput:r,isCheckingKey:c,handleAddKey:p,activeKeyId:h,editingKeyId:d,editLabelInput:b,setEditLabelInput:w,handleSaveLabel:k,handleStartEdit:I,handleRefreshStatus:A,handleDeleteKey:T,isAutoCheckEnabled:R,toggleAutoCheck:G})=>{const[$,Q]=l.useState("keys"),[f,C]=l.useState("ANALYSIS"),[L,N]=l.useState("");l.useEffect(()=>{t&&$==="prompts"&&N(De.getPrompt(f).template)},[t,$,f]);const M=()=>{De.updatePrompt(f,L);const S=document.getElementById("save-prompt-btn");S&&(S.innerText="Saved!",setTimeout(()=>S.innerText="Save Prompt",1e3))},K=()=>{De.resetToDefault(f),N(De.getPrompt(f).template)};return e.jsxs(yt,{isOpen:t,title:"Settings & Core Configuration",onClose:s,children:[e.jsxs("div",{className:"flex gap-2 mb-4 border-b border-gray-100 dark:border-slate-800 pb-2",children:[e.jsx("button",{onClick:()=>Q("keys"),className:`px-4 py-2 text-xs font-bold rounded-lg transition-colors ${$==="keys"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":"text-slate-500 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:"API Keys"}),e.jsx("button",{onClick:()=>Q("prompts"),className:`px-4 py-2 text-xs font-bold rounded-lg transition-colors ${$==="prompts"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":"text-slate-500 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:"AI Prompts"})]}),$==="keys"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-4 rounded-2xl border border-gray-100 dark:border-slate-700 dark:shadow-inner",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-3",children:"API Key Pool Management"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"password",placeholder:"Enter Google Gemini API Key...",className:"flex-1 p-2.5 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-600 rounded-xl text-xs outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500/50 text-slate-800 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 transition-all dark:shadow-[inset_0_1px_2px_rgba(0,0,0,0.5)]",value:n,onChange:S=>r(S.target.value.trim()),onBlur:()=>r(n.trim())}),e.jsx("button",{onClick:p,disabled:c,className:"p-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold text-xs disabled:opacity-50 transition-colors shadow-sm",children:c?e.jsx(g,{name:"Loader",className:"animate-spin"}):e.jsx(g,{name:"Plus"})})]}),e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:[a.map(S=>{let D="bg-slate-300",J="Unknown Status";return S.status==="valid"?(D="bg-emerald-500 shadow-emerald-500/50",J="Active & Working"):S.status==="checking"?(D="bg-yellow-500 animate-pulse",J="Validating..."):S.status==="invalid"?(D="bg-red-500 shadow-red-500/50",J="Invalid / Auth Failed"):S.status==="quota_exceeded"?(D="bg-orange-500",J="Quota Exceeded"):S.status==="referrer_error"?(D="bg-purple-500",J="Blocked by Referrer Restriction"):S.status==="unknown"&&(D="bg-slate-400 border border-slate-500",J="Network Error / Unknown"),e.jsxs("div",{className:`flex items-center justify-between p-2.5 rounded-xl border transition-all duration-200 ${S.id===h?"bg-indigo-50 border-indigo-200 dark:bg-indigo-500/20 dark:border-indigo-500/50 shadow-sm":"bg-white border-gray-100 dark:bg-slate-900 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-slate-500"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsxs("div",{className:"relative group/status",children:[e.jsx("div",{className:`w-2.5 h-2.5 flex-shrink-0 rounded-full shadow-sm ring-1 ring-white/10 cursor-help ${D}`}),e.jsx("div",{className:"absolute left-4 top-0 bg-slate-800 text-white text-[10px] px-2 py-1 rounded shadow-lg whitespace-nowrap opacity-0 group-hover/status:opacity-100 pointer-events-none transition-opacity z-50",children:J})]}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[d===S.id?e.jsx("input",{autoFocus:!0,className:"text-xs font-bold bg-white dark:bg-slate-950 text-slate-900 dark:text-white border-b-2 border-indigo-500 outline-none w-32 px-1 rounded-t",value:b,onChange:y=>w(y.target.value),onBlur:k,onKeyDown:y=>y.key==="Enter"&&k()}):e.jsx("span",{onClick:()=>I(S),className:`text-xs font-bold truncate cursor-pointer transition-colors ${S.id===h?"text-indigo-700 dark:text-indigo-200":"text-slate-700 dark:text-slate-200 hover:text-indigo-500 dark:hover:text-indigo-400"}`,children:S.label}),e.jsxs("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-mono truncate",children:[S.key.substr(0,8),"..."]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[S.activeModel&&e.jsx("span",{className:"text-[9px] bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 px-1.5 py-0.5 rounded text-slate-500 dark:text-slate-400 font-medium hidden sm:inline",children:S.activeModel.replace("gemini-","").replace("-preview","")}),e.jsx("button",{onClick:()=>A(S.id),disabled:S.status==="checking",className:`p-1.5 text-slate-400 hover:text-indigo-500 dark:text-slate-500 dark:hover:text-indigo-400 transition-colors ${S.status==="checking"?"animate-spin":""}`,title:"Re-check Status",children:e.jsx(g,{name:S.status==="checking"?"Loader":"RefreshCw",size:14})}),e.jsx("button",{onClick:y=>{y.stopPropagation(),T(S.id)},className:"p-1.5 text-slate-400 hover:text-red-500 dark:text-slate-500 dark:hover:text-red-400 transition-colors",title:"Delete Key",children:e.jsx(g,{name:"Trash2",size:14})})]})]},S.id)}),a.length===0&&e.jsx("div",{className:"text-center p-4 text-slate-400 text-xs italic",children:"No API Keys found. Add one above to start."})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-900 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm dark:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 rounded-xl",children:e.jsx(g,{name:"Session10_Pulse",size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-white",children:"Auto Health Check"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Periodically validate API keys in background"})]})]}),e.jsx("button",{onClick:()=>G(!R),className:`w-10 h-5 rounded-full transition-colors relative ${R?"bg-emerald-500":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all shadow-sm ${R?"left-6":"left-1"}`})})]})]}),$==="prompts"&&e.jsxs("div",{className:"flex flex-col h-[60vh]",children:[e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{onClick:()=>C("ANALYSIS"),className:`flex-1 py-2 text-xs font-bold rounded-lg border ${f==="ANALYSIS"?"bg-indigo-100 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-200":"border-gray-200 dark:border-slate-700 text-slate-500"}`,children:"Analysis Logic"}),e.jsx("button",{onClick:()=>C("REPORT"),className:`flex-1 py-2 text-xs font-bold rounded-lg border ${f==="REPORT"?"bg-indigo-100 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-200":"border-gray-200 dark:border-slate-700 text-slate-500"}`,children:"Report Format"})]}),e.jsx("div",{className:"flex-1 relative border border-gray-200 dark:border-slate-700 rounded-xl overflow-hidden",children:e.jsx("textarea",{className:"w-full h-full p-4 bg-gray-50 dark:bg-slate-950 text-xs font-mono text-slate-700 dark:text-slate-300 resize-none outline-none leading-relaxed",value:L,onChange:S=>N(S.target.value)})}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("button",{onClick:K,className:"text-xs text-slate-400 hover:text-red-500 underline",children:"Reset to Default"}),e.jsx("button",{id:"save-prompt-btn",onClick:M,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-xs shadow-md transition-all active:scale-95",children:"Save Prompt"})]}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-2 italic",children:["Variables like ","{{STANDARD_NAME}}"," will be dynamically replaced."]})]})]})},Yr=({exportState:t,setExportState:s,rescueKey:a,setRescueKey:n,handleResumeExport:r,isRescuing:c,onClose:p,onSkip:h})=>t.isOpen?e.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-800 p-6 animate-zoom-in-spring",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[t.isFinished?e.jsx(g,{name:"CheckCircle2",className:"text-emerald-500",size:24}):e.jsx(g,{name:"Loader",className:"animate-spin text-indigo-500",size:24}),t.isFinished?"Export Complete":"Processing Export..."]}),t.error?e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-xl border border-red-100 dark:border-red-800 mb-4 animate-shake",children:[e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[e.jsx(g,{name:"AlertCircle",size:16})," Process Paused"]}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300 mb-3 leading-relaxed font-mono bg-white/50 dark:bg-black/20 p-2 rounded border border-red-100 dark:border-red-800/50 break-words max-h-24 overflow-y-auto",children:t.error}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"password",placeholder:"Paste Emergency Google AI Key...",className:"w-full p-2 text-xs rounded-lg border border-red-200 dark:border-red-800 bg-white dark:bg-slate-950 outline-none focus:border-red-500",value:a,onChange:d=>n(d.target.value)})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{onClick:r,disabled:c||!a.trim(),className:"w-full py-2 text-xs font-bold bg-red-500 text-white rounded-lg hover:bg-red-600 flex items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:active:scale-100",children:[c?e.jsx(g,{name:"Loader",className:"animate-spin",size:12}):e.jsx(g,{name:"Zap",size:12}),"Use Rescue Key"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:h,className:"flex-1 py-2 text-xs font-bold bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors flex items-center justify-center gap-1",title:"Skip translation for this chunk and use original text",children:[e.jsx(g,{name:"Minus",size:12})," Skip / Use Original"]}),e.jsx("button",{onClick:()=>s(d=>({...d,isOpen:!1})),className:"px-4 py-2 text-xs font-bold text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:"Cancel"})]})]})]}):e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"relative pt-1",children:[e.jsxs("div",{className:"flex mb-2 items-center justify-between",children:[e.jsx("div",{children:e.jsx("span",{className:"text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-indigo-600 bg-indigo-200 dark:text-indigo-200 dark:bg-indigo-900/50",children:t.isFinished?"Done":"Translating"})}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"text-xs font-semibold inline-block text-indigo-600 dark:text-indigo-400",children:[Math.round(t.processedChunksCount/Math.max(t.totalChunks,1)*100),"%"]})})]}),e.jsx("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-indigo-100 dark:bg-slate-800",children:e.jsx("div",{style:{width:`${Math.round(t.processedChunksCount/Math.max(t.totalChunks,1)*100)}%`},className:`shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center transition-all duration-500 ease-out ${t.isFinished?"bg-emerald-500":"bg-indigo-500"}`})})]}),e.jsx("div",{className:"text-center space-y-1",children:t.isFinished?e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-bold",children:"File has been downloaded successfully."}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-mono",children:["Processing Chunk ",Math.min(t.processedChunksCount+1,t.totalChunks)," of ",t.totalChunks]}),e.jsxs("p",{className:"text-[10px] text-slate-400 italic",children:["Target Language: ",t.targetLang==="vi"?"Vietnamese":"English"]})]})}),t.isFinished&&e.jsx("div",{className:"flex justify-center pt-2",children:e.jsxs("button",{onClick:p,className:"px-6 py-3 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-xl font-bold text-sm transition-all active:scale-95 flex items-center gap-2",children:[e.jsx(g,{name:"X",size:16}),"Close Window"]})})]})]})}):null,ei=({isOpen:t,onClose:s,onAdd:a})=>{const[n,r]=l.useState(""),[c,p]=l.useState(null),h=l.useRef(null),d=()=>{n.trim()&&(a(n.trim(),c),r(""),p(null))},b=w=>{if(w.target.files&&w.target.files[0]&&(p(w.target.files[0]),!n)){const k=w.target.files[0].name;r(Pt(k.replace(/\.[^/.]+$/,"")).replace(/_/g," "))}};return e.jsx(yt,{isOpen:t,title:"Define New Standard",onClose:s,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-2xl border border-indigo-100 dark:border-indigo-800",children:e.jsxs("p",{className:"text-xs text-indigo-800 dark:text-indigo-300 leading-relaxed",children:["Create a custom standard entry. For best results, ",e.jsx("strong",{children:"attach a PDF/DOCX"}),' containing the full standard text. The AI will use this as the "Ground Truth" for citations.']})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase",children:["Standard Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",autoFocus:!0,className:"w-full p-3 pl-10 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-700 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all text-slate-800 dark:text-white",placeholder:"e.g. ISO 45001:2018 (OH&S)",value:n,onChange:w=>r(w.target.value),onKeyDown:w=>w.key==="Enter"&&d()}),e.jsx("div",{className:"absolute left-3 top-3 text-slate-400",children:e.jsx(g,{name:"Book",size:18})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Source Document (Optional)"}),e.jsxs("div",{onClick:()=>{var w;return(w=h.current)==null?void 0:w.click()},className:`group relative flex items-center justify-center border-2 border-dashed rounded-xl p-6 cursor-pointer transition-all ${c?"border-emerald-400 bg-emerald-50 dark:bg-emerald-900/10":"border-gray-200 dark:border-slate-700 hover:border-indigo-400 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:[e.jsx("input",{type:"file",ref:h,className:"hidden",accept:".pdf,.docx,.txt",onChange:b}),c?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-2 shadow-sm",children:e.jsx(g,{name:"CheckThick",size:20})}),e.jsx("p",{className:"text-sm font-bold text-emerald-700 dark:text-emerald-400 truncate max-w-[250px]",children:c.name}),e.jsx("p",{className:"text-[10px] text-emerald-600/70",children:"Click to change"})]}):e.jsxs("div",{className:"text-center text-slate-400 group-hover:text-indigo-500 transition-colors",children:[e.jsx(g,{name:"UploadCloud",size:28,className:"mx-auto mb-2"}),e.jsx("p",{className:"text-xs font-bold",children:"Click to Upload PDF / DOCX"}),e.jsx("p",{className:"text-[10px] opacity-70",children:"Max 10MB"})]})]})]})]}),e.jsxs("button",{onClick:d,disabled:!n.trim(),className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-sm shadow-lg shadow-indigo-500/30 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(g,{name:"Plus",size:18}),"Create Standard"]})]})})},ti=Ze.memo(({layoutMode:t,setLayoutMode:s,isSidebarOpen:a,sidebarWidth:n})=>{const r=l.useRef([]),c=l.useRef(null),[p,h]=l.useState({left:0,width:0,opacity:0,color:""});return l.useEffect(()=>{const d=()=>{const w=at.findIndex(I=>I.id===t),k=r.current[w];k&&h({left:k.offsetLeft,width:k.offsetWidth,opacity:1,color:at[w].colorClass})};d(),window.addEventListener("resize",d);const b=setTimeout(d,300);return()=>{window.removeEventListener("resize",d),clearTimeout(b)}},[t,a,n]),e.jsxs("div",{ref:c,className:"relative flex justify-between bg-gray-100 dark:bg-slate-950 p-1 rounded-xl w-full dark:shadow-[inset_0_1px_3px_rgba(0,0,0,0.5)]",children:[e.jsx("div",{className:`absolute top-1 bottom-1 shadow-sm rounded-lg transition-all duration-500 ease-fluid z-0 ${p.color}`,style:{left:p.left,width:p.width,opacity:p.opacity}}),at.map((d,b)=>e.jsxs("button",{ref:w=>{r.current[b]=w},onClick:()=>s(d.id),className:`flex-1 relative z-10 flex items-center justify-center gap-2 px-1 md:px-4 py-2 rounded-lg text-xs md:text-sm font-bold transition-colors duration-300 ${t===d.id?"text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(g,{name:d.icon,size:16}),e.jsx("span",{className:`${a?"hidden xl:inline":"hidden md:inline"}`,children:d.label})]},d.id))]})});function si(){var Yt;const[t,s]=l.useState(Date.now()),[a,n]=l.useState(1),[r,c]=l.useState(!0),[p,h]=l.useState(420),[d,b]=l.useState(!0),[w,k]=l.useState(!1),[I,A]=l.useState(!1),[T,R]=l.useState(!1),[G,$]=l.useState(!1),[Q,f]=l.useState(!1),[C,L]=l.useState(!1),[N,M]=l.useState("list"),[K,S]=l.useState(0),[D,J]=l.useState([]),[y,_]=l.useState(""),[V,X]=l.useState(""),[F,Y]=l.useState(""),[ee,pe]=l.useState(!1),[xe,ie]=l.useState(!1),[ke,Ee]=l.useState(null),[Ie,W]=l.useState(""),[re,u]=l.useState(null),[O,z]=l.useState(null),[q,B]=l.useState(!1),H=l.useRef(!1),se=l.useRef(!1),[ae,oe]=l.useState(null),[Me,je]=l.useState(null),[we,Pe]=l.useState({isOpen:!1,clause:null,fullText:{en:"",vi:""},isLoading:!1}),[te,ue]=l.useState("en"),[ge,Fe]=l.useState("vi"),[Nt,us]=l.useState("en"),[ii,Ot]=l.useState(""),[hs,ps]=l.useState(""),[ot,Ye]=l.useState({}),[Z,Ve]=l.useState(""),[de,lt]=l.useState(mt),[ne,We]=l.useState([]),[me,Ue]=l.useState(gr),[ve,dt]=l.useState({}),[Le,ct]=l.useState([]),[Ge,Ke]=l.useState([]),[fe,Oe]=l.useState(null),[_e,et]=l.useState({}),[ze,tt]=l.useState(null),[$e,He]=l.useState("evidence"),[Ct,zt]=l.useState(!1),[qe,$t]=l.useState(!1),[gs,Bt]=l.useState(""),[Ft,Je]=l.useState(""),[xt,Vt]=l.useState(!1),[ye,Ne]=l.useState({isOpen:!1,isPaused:!1,isFinished:!1,totalChunks:0,processedChunksCount:0,chunks:[],results:[],error:null,currentType:"report",targetLang:"en"}),[Wt,st]=l.useState(null),[ms,Ut]=l.useState(!1),[ut,Gt]=l.useState(""),[fs,Kt]=l.useState(!1),Ht=at.find(o=>o.id===$e)||at[0],Xe=l.useRef(null),ce=l.useMemo(()=>({...Rt,...ot}),[ot]),bs=l.useMemo(()=>Object.values(ve).some(o=>o.some(i=>i.status==="supplied")),[ve]),ht=me.trim().length>0||Ge.length>0||bs,vs=!qe&&ne.length>0&&ht,js=!xt&&fe&&Object.values(_e).some(o=>o);l.useMemo(()=>{const o=D.length,i=D.filter(x=>x.status==="valid").length;return{total:o,valid:i}},[D]);const he=l.useMemo(()=>D.find(o=>o.id===y),[D,y]),ks=(he==null?void 0:he.status)==="valid";l.useEffect(()=>{r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[r]),l.useEffect(()=>{document.documentElement.style.setProperty("--font-scale",a.toString())},[a]);const ys=()=>{try{const o=localStorage.getItem("iso_api_keys"),i=o?JSON.parse(o):[],x=new Set(i.map(j=>j.key));let m=!1;Tt.forEach((j,E)=>{j&&!x.has(j)&&(i.push({id:`fixed_key_${E}_${Math.random().toString(36).substr(2,5)}`,label:`Environment Key ${E+1}`,key:j,status:"unknown",latency:0,lastChecked:new Date().toISOString()}),m=!0)}),m&&localStorage.setItem("iso_api_keys",JSON.stringify(i));const v=localStorage.getItem("iso_active_key_id");return v&&i.some(j=>j.id===v)?_(v):i.length>0&&!y&&_(i[0].id),i}catch(o){return console.error("Failed to load keys",o),[]}},St=async o=>{try{await bt.migrateFromLocalStorage(o);const i=await bt.getDocument(o);i?(oe(i.content),je(i.fileName),u(`Restored source document: ${i.fileName}`),he!=null&&he.key&&jt.addDocuments(o,i.content,he.key).catch(x=>console.warn("Background Vectorization:",x))):(oe(null),je(null))}catch(i){console.error("Failed to load KB from DB",i),oe(null),je(null)}},qt=async(o,i,x)=>{try{await bt.saveDocument(o,x,i),console.log(`Saved ${x} to KnowledgeStore`),he!=null&&he.key&&(u("Vectorizing Source Document for AI Search..."),await jt.addDocuments(o,i,he.key),u("Document Vectorized for Semantic Search."))}catch(m){console.error("DB Save Failed",m),u("Warning: Failed to save document to persistent storage.")}},ws=async()=>{if(oe(null),je(null),Z)try{await bt.deleteDocument(Z),await jt.clear(),u("Source document removed from database.")}catch(o){console.error("Failed to clear KB",o)}},Ns=l.useCallback(o=>{o!==Z&&(Ve(o),St(o))},[Z]);l.useEffect(()=>{(async()=>{const i=ys();J(i),Ms(),i.length>0&&!ee&&Xt(i)})()},[]),l.useEffect(()=>{if(!xe)return;const o=setInterval(()=>{!qe&&!Ct&&!xt&&!ee&&D.length>0&&Cs()},45e3);return()=>clearInterval(o)},[xe,qe,Ct,xt,ee,D]);const Cs=async()=>{const i=[...D].sort((v,j)=>new Date(v.lastChecked||0).getTime()-new Date(j.lastChecked||0).getTime())[0];if(!i)return;J(v=>v.map(j=>j.id===i.id?{...j,status:"checking"}:j));const x=await pt(i.key),m=new Date().toISOString().split("T")[0];J(v=>v.map(j=>j.id===i.id?{...j,status:x.status,activeModel:x.activeModel||j.activeModel,latency:x.latency,lastChecked:new Date().toISOString(),lastResetDate:m}:j))},Ss=()=>{Ut(!0),setTimeout(()=>{st(null),Ut(!1)},300)},Jt=o=>{const i=o.message||"Unknown error";i.includes("ALL_KEYS_EXHAUSTED")?(st("All API Keys have been exhausted or Quota exceeded."),A(!0)):i.includes("API Key is missing")?(u("API Key is required. Please check settings."),A(!0)):st(i)},At=o=>{if(Xe.current){const i=Xe.current,x=i.selectionStart,m=i.selectionEnd,v=i.value,j=`
${o.trim()}
`,E=v.substring(0,x)+j+v.substring(m);Ue(E),$e!=="evidence"&&He("evidence"),setTimeout(()=>{Xe.current&&(Xe.current.focus(),Xe.current.setSelectionRange(x+j.length,x+j.length))},100)}else Ue(i=>i+`
`+o.trim()),$e!=="evidence"&&He("evidence")},pt=async o=>{const i=await os(o);let x="unknown";return i.isValid?x="valid":i.errorType==="network_error"?x="unknown":i.errorType&&(x=i.errorType),{status:x,activeModel:i.activeModel,latency:i.latency,errorMessage:i.errorMessage}},Xt=async o=>{pe(!0),J(m=>m.map(v=>({...v,status:"checking"})));const i=new Date().toISOString().split("T")[0],x=[...o];for(let m=0;m<x.length;m++){const v=x[m],j=await pt(v.key);x[m]={...v,status:j.status,activeModel:j.activeModel,latency:j.latency,lastChecked:new Date().toISOString(),lastResetDate:i},J(E=>{const P=[...E],U=P.findIndex(be=>be.id===v.id);return U!==-1&&(P[U]=x[m]),P}),await new Promise(E=>setTimeout(E,100))}J(m=>{const v=m.find(j=>j.id===y);if(!v||v.status!=="valid"&&v.status!=="unknown"){const j=m.filter(E=>E.status==="valid").sort((E,P)=>E.latency-P.latency)[0];j&&(_(j.id),localStorage.setItem("iso_active_key_id",j.id),setTimeout(()=>u(`Auto-switched to healthy key: ${j.label}`),0))}return localStorage.setItem("iso_api_keys",JSON.stringify(m)),m}),pe(!1)},As=async o=>{const i=D.find(m=>m.id===o);if(!i)return;J(m=>m.map(v=>v.id===o?{...v,status:"checking"}:v));const x=await pt(i.key);J(m=>{const v=m.map(j=>j.id===o?{...j,status:x.status,activeModel:x.activeModel||j.activeModel,latency:x.latency,lastChecked:new Date().toISOString()}:j);return localStorage.setItem("iso_api_keys",JSON.stringify(v)),v})},Es=async()=>{if(!V.trim())return;if(D.some(v=>v.key===V.trim())){u("This API Key is already in your pool!"),X("");return}pe(!0);const o=Date.now().toString(),i=await pt(V),x={id:o,label:F||`Key ${D.length+1}`,key:V,status:i.status,activeModel:i.activeModel,latency:i.latency,lastChecked:new Date().toISOString(),lastResetDate:new Date().toISOString().split("T")[0]},m=[...D,x];J(m),localStorage.setItem("iso_api_keys",JSON.stringify(m)),(D.length===0||(he==null?void 0:he.status)!=="valid"&&i.status==="valid")&&(_(o),localStorage.setItem("iso_active_key_id",o)),X(""),Y(""),pe(!1),i.status==="valid"?u("Key added successfully!"):st(i.errorMessage||"Connection failed. Please check your API Key and Network.")},Is=o=>{const i=D.filter(m=>m.id!==o);let x=y;if(y===o){const m=i.find(v=>v.status==="valid")||i[0];x=m?m.id:""}J(i),x!==y&&_(x),localStorage.setItem("iso_api_keys",JSON.stringify(i)),x?localStorage.setItem("iso_active_key_id",x):localStorage.removeItem("iso_active_key_id"),u("Key removed from pool.")},Ce=l.useCallback(async o=>{if(!navigator.onLine)return o("offline","local-model");const i=D.filter(m=>m.status!=="invalid").sort((m,v)=>m.status==="valid"&&v.status!=="valid"?-1:m.status!=="valid"&&v.status==="valid"?1:m.id===y?-1:v.id===y?1:m.latency-v.latency);if(i.length===0)throw new Error("API Key is missing or all keys are invalid.");let x;for(const m of i){const v=m.activeModel||ls[0];try{return m.id!==y&&_(m.id),await o(m.key,v)}catch(j){console.warn(`Key ${m.label} failed on ${v}:`,j),x=j;const E=(j.message||"").toLowerCase();E.includes("429")||E.includes("quota")||E.includes("resource exhausted")?J(P=>P.map(U=>U.id===m.id?{...U,status:"quota_exceeded"}:U)):(E.includes("403")||E.includes("key not valid")||E.includes("permission denied"))&&J(P=>P.map(U=>U.id===m.id?{...U,status:"invalid"}:U))}}throw new Error((x==null?void 0:x.message)||"ALL_KEYS_EXHAUSTED")},[D,y]),Ms=async()=>{try{const o=localStorage.getItem("iso_session_data"),i=localStorage.getItem("iso_custom_standards");if(i&&Ye(JSON.parse(i)),o){const x=JSON.parse(o);x.standardKey&&(Ve(x.standardKey),await St(x.standardKey)),x.auditInfo&&lt({...mt,...x.auditInfo}),x.selectedClauses&&We(x.selectedClauses),x.evidence&&Ue(x.evidence),x.matrixData&&dt(x.matrixData),x.evidenceTags&&ct(x.evidenceTags),x.analysisResult&&Oe(x.analysisResult),x.selectedFindings&&et(x.selectedFindings),x.finalReportText&&tt(x.finalReportText),z(new Date().toLocaleTimeString()),u("Previous session restored.")}}catch(o){console.error("Load failed",o)}},Ls=o=>{Ye(i=>({...i,[Z]:o})),u("Standard updated successfully.")},_s=o=>{Ye(i=>{const x={...i};return delete x[o],x}),u("Standard reset to default.")},Ts=async o=>{var x;const i=(x=o.target.files)==null?void 0:x[0];if(i){if(!Z||Z==="ADD_NEW"){u("Please select a Standard first before uploading a source document.");return}je(i.name),u("Parsing Standard Document...");try{const m=await as(i);oe(m),u(`Standard Loaded (${(m.length/1024).toFixed(0)}KB). Saving...`),Z&&await qt(Z,m,i.name)}catch(m){u(m.message),je(null),oe(null)}}},Rs=async(o,i)=>{f(!1);const x=`CUSTOM_${Date.now()}`;let m="";if(i){u("Processing document and extracting structure...");try{m=await as(i),oe(m),je(i.name),await qt(x,m,i.name),u("AI is analyzing structure... (This may take 15s)");try{const j=await Ce((E,P)=>Tr(m,o,E,P));if(j){Ye(E=>({...E,[x]:j})),Ve(x),u(`Successfully imported ${o} with full structure.`);return}}catch(j){console.error("AI Parse Failed, falling back to basic",j),u("AI parsing failed. Created basic structure instead.")}}catch(j){u(`File processing failed: ${j.message}`)}}else oe(null),je(null);const v={name:o,description:`Custom Standard created on ${new Date().toLocaleDateString()}`,groups:[{id:`GRP_${Date.now()}`,title:"General Requirements",icon:"Book",clauses:[{id:`CL_${Date.now()}_1`,code:"1",title:"General",description:"Requirement details pending AI extraction."}]}]};Ye(j=>({...j,[x]:v})),Ve(x),i||u(`Created basic standard: ${o}`)};l.useEffect(()=>{if(H.current||!me&&(!ne||ne.length===0)&&!se.current&&localStorage.getItem("iso_session_data"))return;const i=setTimeout(()=>{if(H.current)return;B(!0);const x={standardKey:Z,auditInfo:de,selectedClauses:ne,evidence:me,matrixData:ve,evidenceTags:Le,analysisResult:fe,selectedFindings:_e,finalReportText:ze};localStorage.setItem("iso_session_data",JSON.stringify(x)),localStorage.setItem("iso_custom_standards",JSON.stringify(ot)),localStorage.setItem("iso_api_keys",JSON.stringify(D)),se.current&&(se.current=!1),z(new Date().toLocaleTimeString()),setTimeout(()=>B(!1),500)},1e3);return()=>clearTimeout(i)},[Z,de,ne,me,ve,Le,fe,_e,ze,ot,D]),l.useEffect(()=>{const o=i=>{if(!H.current){const x={standardKey:Z,auditInfo:de,selectedClauses:ne,evidence:me,matrixData:ve,evidenceTags:Le,analysisResult:fe,selectedFindings:_e,finalReportText:ze};localStorage.setItem("iso_session_data",JSON.stringify(x))}};return window.addEventListener("beforeunload",o),()=>window.removeEventListener("beforeunload",o)},[Z,de,ne,me,ve,Le,fe,_e,ze]);const Ds=async o=>{if(o&&o.stopPropagation(),!!confirm("Start New Session? Current data will be moved to 'Backup Vault'."))try{const i={standardKey:Z,auditInfo:de,selectedClauses:ne,evidence:me,matrixData:ve,evidenceTags:Le,analysisResult:fe,selectedFindings:_e,finalReportText:ze};if(me.trim().length>0||ne.length>0){const m={id:`backup_${Date.now()}`,timestamp:Date.now(),label:"Backup (Pre-Reset)",triggerType:"MANUAL_BACKUP",data:i},v=localStorage.getItem("iso_session_history"),j=v?JSON.parse(v):[],E=[m,...j].slice(0,5);localStorage.setItem("iso_session_history",JSON.stringify(E))}se.current=!0,localStorage.removeItem("iso_session_data"),Ve(""),lt(mt),Ue(""),dt({}),ct([]),We([]),Ke([]),Oe(null),et({}),tt(null),z(null),s(Date.now()),oe(null),je(null),He("evidence"),u("New Session Started. (Previous session archived in Recall)")}catch(i){console.error("New Session Error",i),u("Error creating backup. Session reset anyway.")}},Ps=async o=>{try{H.current=!0,$(!1);const i=o.data;localStorage.setItem("iso_session_data",JSON.stringify(i)),i.standardKey&&(Ve(i.standardKey),await St(i.standardKey)),lt({...mt,...i.auditInfo||{}}),i.selectedClauses&&We(i.selectedClauses),i.evidence!==void 0&&Ue(i.evidence),i.matrixData&&dt(i.matrixData),i.evidenceTags&&ct(i.evidenceTags),Ke([]),i.analysisResult&&Oe(i.analysisResult),i.selectedFindings&&et(i.selectedFindings),i.finalReportText&&tt(i.finalReportText),s(Date.now()),z(new Date().toLocaleTimeString()),u(`Restored session from: ${new Date(o.timestamp).toLocaleTimeString()}`),setTimeout(()=>{H.current=!1,se.current=!1},1200)}catch(i){console.error("Restore failed",i),u("Failed to restore session snapshot."),H.current=!1}},Os=l.useCallback(async()=>{const o=Ge.filter(x=>x.status==="pending"||x.status==="error");if(o.length===0)return;zt(!0),Je("Processing documents with Vision AI...");let i=0;for(const x of o)try{Ke(v=>v.map(j=>j.id===x.id?{...j,status:"processing"}:j));let m="";if(x.file.type==="text/plain")m=await x.file.text();else{const v=await ds(x.file);m=await Ce(async(j,E)=>cs("Extract all text.",v,x.file.type,j,E))}if(m){const v=`

--- FILE: ${x.file.name} ---
`;At(v+m),Ke(j=>j.map(E=>E.id===x.id?{...E,status:"success",result:m}:E)),i++}else throw new Error("No text extracted")}catch(m){console.error("OCR Error",m),Ke(v=>v.map(j=>j.id===x.id?{...j,status:"error",error:m.message||"Failed"}:j))}zt(!1),Je(""),u(`Processed ${i} files.`)},[Ge,Ce]),zs=async o=>{var x;const i=(x=o.target.files)==null?void 0:x[0];if(i){ps(i.name);try{if(i.name.endsWith(".docx")){if(typeof mammoth>"u"){alert("Mammoth library not loaded for .docx support");return}const m=await i.arrayBuffer(),v=await mammoth.extractRawText({arrayBuffer:m});Ot(v.value)}else{const m=await i.text();Ot(m)}u("Template loaded successfully.")}catch(m){u("Failed to load template."),console.error(m)}}},Et=(o,i,x)=>{let m=o;if(i==="evidence"){const E=vt(ve,ne);E&&(m=`${o}

${E}`)}if(!m)return;const v=4e3,j=[];for(let E=0;E<m.length;E+=v)j.push(m.substring(E,E+v));Ne({isOpen:!0,isPaused:!1,isFinished:!1,totalChunks:j.length,processedChunksCount:0,chunks:j,results:new Array(j.length).fill(""),error:null,currentType:i,targetLang:x})},$s=()=>{Ne(o=>{const i=o.processedChunksCount,x=[...o.results];return x[i]=o.chunks[i],{...o,isPaused:!1,error:null,processedChunksCount:i+1,results:x}})},Bs=o=>{ie(o),localStorage.setItem("iso_auto_check",String(o)),u(o?"Auto-health check enabled.":"Auto-health check disabled.")},Fs=o=>{Ee(o.id),W(o.label)},Vs=()=>{ke&&(J(o=>o.map(i=>i.id===ke?{...i,label:Ie}:i)),Ee(null))},Zt=async o=>{Pe({isOpen:!0,clause:o,isLoading:!0,fullText:{en:"",vi:""}});try{const i=await Ce(async(x,m)=>_r(o,ce[Z].name,ae,x,m));Pe(x=>({...x,isLoading:!1,fullText:i}))}catch{Pe({isOpen:!1,clause:null,isLoading:!1,fullText:{en:"",vi:""}}),st("API Failed during lookup."),A(!0)}},Ws=o=>{if(!we.clause)return;const i=`
--- REFERENCE: [${we.clause.code}] ${we.clause.title} ---
${o}
--- END REFERENCE ---
`.trim();At(i),Pe({isOpen:!1,clause:null,isLoading:!1,fullText:{en:"",vi:""}})},It=l.useCallback(async()=>{if(!Z){u("Select a Standard first.");return}if(ne.length===0){u("Select at least one Clause to analyze.");return}if(!ht){u("No evidence provided. Please add text or files.");return}$t(!0),He("findings"),Oe([]);try{const o=ce[Z].groups.flatMap(P=>P.clauses),i=(P,U)=>{for(let be of U){if(be.id===P)return be;if(be.subClauses){const le=i(P,be.subClauses);if(le)return le}}},x=ne.map(P=>i(P,o)).filter(P=>!!P);let m=me;Ge.filter(P=>P.status==="success"&&P.result).forEach(P=>{m+=`

--- Document: ${P.file.name} ---
${P.result}`});const v=vt(ve,ne);v&&(m+=`

${v}`);let j="";Le.forEach(P=>{j+=`[Tagged for ${P.clauseId}]: "${P.text}"
`});const E=localStorage.getItem("iso_privacy_shield")==="true";for(let P=0;P<x.length;P++){const U=x[P];Bt(U.code),Je(`Analyzing [${U.code}] ${U.title}...`);try{const be=await Ce((Se,Lt)=>Rr({code:U.code,title:U.title,description:U.description},ce[Z].name,m.substring(0,5e4),j,Se,Lt,E)),le=wt(be);let Be;le&&typeof le=="object"?Be={clauseId:U.code,status:le.status||"N_A",reason:le.reason||"No reasoning provided.",evidence:le.evidence||"",suggestion:le.suggestion||"",conclusion_report:le.conclusion_report||"",crossRefs:le.crossRefs||[]}:Be={clauseId:U.code,status:"N_A",reason:"AI failed to format response.",evidence:"",suggestion:"",conclusion_report:"",crossRefs:[]},Oe(Se=>[...Se||[],Be]),et(Se=>({...Se,[U.code]:!0})),await new Promise(Se=>setTimeout(Se,50))}catch(be){console.error(`Error analyzing clause ${U.code}`,be),Oe(le=>[...le||[],{clauseId:U.code,status:"N_A",reason:"Analysis failed due to API error.",evidence:"",suggestion:"Retry manually.",conclusion_report:"",crossRefs:[]}])}}u(navigator.onLine?"Analysis Complete.":"Offline Analysis Complete.")}catch(o){Jt(o)}finally{$t(!1),Je(""),Bt("")}},[Z,ne,ht,me,Ge,ve,Le,ce,Ce]),Qt=async()=>{if(!fe||fe.length===0){u("No findings available to report.");return}const o=fe.filter(i=>_e[i.clauseId]);if(o.length===0){u("Please select at least one finding to include in the report.");return}Vt(!0),Je("Synthesizing Final Audit Report...");try{let i=me;const x=vt(ve,ne);x&&(i+=`

${x}`);const m=await Ce((v,j)=>{var E;return Dr({company:de.company,type:de.type,auditor:de.auditor,standard:(E=ce[Z])==null?void 0:E.name,findings:o,lang:te,fullEvidenceContext:i},v,j)});tt(m),He("report"),u("Report Generated Successfully.")}catch(i){Jt(i)}finally{Vt(!1),Je("")}};l.useEffect(()=>{if(!ye.isOpen||ye.isPaused||ye.isFinished)return;(async()=>{var m;const i=ye.processedChunksCount;if(i>=ye.totalChunks){Ne(v=>({...v,isFinished:!0}));try{const v=Js=>Pt(Js||"Unknown"),j=v((m=ce[Z])==null?void 0:m.name),E=v(de.type),P=v(de.smo),U=v(de.company),be=v(de.department),le=v(de.auditor),Be=new Date().toISOString().replace(/[:.]/g,"-"),Se=`${j}_${E}_${P}_${U}_${be}_Audit_Note_${le}_${Be}.txt`,Lt=ye.results.join(""),qs=new Blob([Lt],{type:"text/plain"}),es=URL.createObjectURL(qs),rt=document.createElement("a");rt.href=es,rt.download=Se,document.body.appendChild(rt),rt.click(),document.body.removeChild(rt),URL.revokeObjectURL(es)}catch(v){console.error("Download failed",v)}return}i>0&&await new Promise(v=>setTimeout(v,1500));const x=ye.chunks[i];try{let v=x;const E=`Translate to ${ye.targetLang==="vi"?"Vietnamese":"English"}. Keep formatting. ISO Audit Context.

Input:
"""${x}"""`;v=await Ce(async(P,U)=>(await new(await tr(async()=>{const{GoogleGenAI:Be}=await import("./vendor-genai-C1TFRE--.js");return{GoogleGenAI:Be}},[],import.meta.url)).GoogleGenAI({apiKey:P}).models.generateContent({model:U,contents:E})).text||x),Ne(P=>{const U=[...P.results];return U[i]=v,{...P,processedChunksCount:i+1,results:U}})}catch(v){console.error("Export Error",v);let j=v.message||"Unknown error";try{const E=j.indexOf("{");if(E!==-1){const P=j.substring(E),U=JSON.parse(P);U.error&&U.error.message&&(j=`API Error: ${U.error.message}`)}}catch{}Ne(E=>({...E,isPaused:!0,error:j}))}})()},[ye,Ce,Z,de,ce]);const Us=async()=>{Kt(!0);try{if(ut.trim()){const o=await os(ut),i={status:o.isValid?"valid":o.errorType||"unknown",errorMessage:o.errorMessage,activeModel:o.activeModel,latency:o.latency};if(i.status==="valid"){const x={id:`rescue_${Date.now()}`,label:"Rescue Key",key:ut,status:"valid",activeModel:i.activeModel,latency:i.latency,lastChecked:new Date().toISOString()};J(m=>[...m,x]),_(x.id),u("Rescue Key Added. Resuming..."),Ne(m=>({...m,isPaused:!1,error:null})),Gt("")}else u(`Rescue Key Invalid: ${i.errorMessage}`)}else Ne(o=>({...o,isPaused:!1,error:null}))}catch{u("Failed to resume.")}finally{Kt(!1)}};l.useEffect(()=>{const o=i=>{(i.metaKey||i.ctrlKey)&&i.key==="k"&&(i.preventDefault(),L(x=>!x))};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[]);const Gs=l.useMemo(()=>{const o=[{label:"Analyze Compliance",desc:"Start AI analysis",icon:"Wand2",shortcut:"AI",action:It},{label:"Validate API Key Pool",desc:"Check connection health",icon:"RefreshCw",action:()=>{Xt(D),u("Validating Neural Pool...")}},{label:"Settings",desc:"Manage configuration",icon:"Settings",action:()=>A(!0)},{label:"Generate Report",desc:"Synthesize final report",icon:"FileText",action:Qt},{label:"Toggle Dark Mode",desc:`Switch to ${r?"Light":"Dark"}`,icon:r?"Sun":"Moon",action:()=>c(!r)}];if(Z&&ce[Z]){const i=v=>v.reduce((j,E)=>(j.push(E),E.subClauses&&j.push(...i(E.subClauses)),j),[]),m=i(ce[Z].groups.flatMap(v=>v.clauses)).map(v=>({label:`[${v.code}] ${v.title}`,desc:v.description||"No description",icon:"Session6_Zap",type:"clause",action:()=>{const j=ne.includes(v.id);We(j?E=>E.filter(P=>P!==v.id):E=>[...E,v.id]),At(`[${v.code}] ${v.title}`),u(`Inserted clause ${v.code} and ${j?"removed from":"added to"} audit scope.`),L(!1)},onReference:j=>{j&&j.stopPropagation(),Zt(v),L(!1)}}));return[...o,...m]}return o},[r,Z,ce,ne,y,D,It]),Mt=l.useMemo(()=>{var x;const o=((x=ce[Z])==null?void 0:x.name)||"",i=o.match(/\((.*?)\)/);return i?i[1]:o.split(" ")[0]||"ISO"},[Z,ce]),Ks=l.useMemo(()=>{const o=Mt.toUpperCase();return o.includes("EMS")||o.includes("14001")?"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-700/50":o.includes("QMS")||o.includes("9001")?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-700/50":o.includes("ISMS")||o.includes("27001")?"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-700/50":"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300 border-indigo-100 dark:border-indigo-800/50"},[Mt]),Hs=()=>{if(qe)return"AI is analyzing...";const o=[];return ne.length===0&&o.push("Clauses"),ht||o.push("Evidence"),o.length>0?`Missing: ${o.join(" & ")}`:"Click to Start AI Analysis"};return e.jsxs("div",{className:"flex flex-col h-[100dvh] w-full bg-gray-50 dark:bg-slate-900 transition-colors duration-500 ease-soft relative animate-fade-in-up",children:[re&&e.jsx(mr,{message:re,onClose:()=>u(null)}),Wt&&e.jsxs("div",{className:`fixed z-[9999] top-20 left-4 right-4 md:left-auto md:right-5 md:w-96 md:max-w-sm bg-white dark:bg-slate-800 border-l-4 border-red-500 shadow-2xl rounded-r-xl p-4 animate-shake transition-all duration-300 ${ms?"opacity-0 translate-x-4":"opacity-100 translate-x-0"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 font-bold",children:[e.jsx(g,{name:"AlertCircle",size:20}),e.jsx("span",{children:"System Alert"})]}),e.jsx("button",{onClick:Ss,className:"text-gray-400 hover:text-slate-800 dark:hover:text-white transition-colors p-1 rounded-full hover:bg-gray-100 dark:hover:bg-slate-700",children:e.jsx(g,{name:"X",size:18})})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed mt-1",children:Wt})]}),e.jsx(kr,{isSidebarOpen:d,setIsSidebarOpen:b,displayBadge:Mt,badgeColorClass:Ks,setIsCmdPaletteOpen:L,fontSizeScale:a,setFontSizeScale:n,isDarkMode:r,setIsDarkMode:c,isSystemHealthy:ks,onOpenSettings:()=>A(!0),onOpenAbout:()=>k(!0)}),e.jsxs("main",{className:"flex-1 flex overflow-hidden relative",children:[e.jsx("div",{className:`${d?"translate-x-0":"-translate-x-full"} fixed top-16 bottom-0 left-0 z-[60] md:absolute md:inset-y-0 md:relative md:top-0 md:translate-x-0 md:transform-none transition-transform duration-300 ease-soft h-[calc(100%-4rem)] md:h-full`,children:e.jsx(Br,{isOpen:d,width:p,setWidth:h,standards:ce,standardKey:Z,setStandardKey:Ns,auditInfo:de,setAuditInfo:lt,selectedClauses:ne,setSelectedClauses:We,onAddNewStandard:()=>f(!0),onUpdateStandard:Ls,onResetStandard:_s,onReferenceClause:Zt,showIntegrityModal:T,setShowIntegrityModal:R,knowledgeFileName:Me,knowledgeBase:ae,onKnowledgeUpload:Ts,onClearKnowledge:ws},t)}),d&&e.jsx("div",{className:"fixed top-16 bottom-0 inset-x-0 bg-black/50 z-50 md:hidden backdrop-blur-sm transition-opacity duration-300 animate-in fade-in",onClick:()=>b(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col min-w-0 relative w-full transition-all duration-300 ease-soft ${Ht.bgSoft} border-t-4 ${Ht.borderClass} will-change-transform`,children:[e.jsxs("div",{className:"flex-shrink-0 px-4 md:px-6 py-3 border-b border-gray-200 dark:border-slate-800 bg-white/80 dark:bg-slate-900/80 backdrop-blur flex justify-between items-center gap-3",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(ti,{layoutMode:$e,setLayoutMode:He,isSidebarOpen:d,sidebarWidth:p})}),e.jsxs("div",{className:"flex gap-2 items-center flex-shrink-0 pl-2 border-l border-gray-200 dark:border-slate-800",children:[e.jsxs("button",{onClick:()=>$(!0),className:`h-10 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 border ${O?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800 shadow-sm":"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 border-gray-200 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700 hover:border-gray-300 dark:hover:border-slate-600"}`,title:O?`Last Auto-Saved: ${O}. Click to Open Time Machine.`:"Open Session History",children:[e.jsxs("div",{className:"relative",children:[e.jsx(g,{name:"History",size:18}),O&&e.jsxs("span",{className:"absolute -top-1 -right-1 flex h-2.5 w-2.5",children:[q&&e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:`relative inline-flex rounded-full h-2.5 w-2.5 ${q?"bg-red-500":"bg-emerald-500"}`})]})]}),e.jsx("span",{className:"hidden xl:inline text-xs font-bold",children:"Recall"})]}),e.jsxs("button",{onClick:o=>Ds(o),className:"h-10 w-10 md:w-auto md:px-4 bg-amber-50 dark:bg-amber-950/30 text-amber-600 dark:text-amber-500 border border-amber-200 dark:border-amber-800/50 rounded-xl flex items-center justify-center gap-2 transition-all shadow-sm hover:shadow-amber-500/20 hover:bg-amber-100 dark:hover:bg-amber-900/50 hover:text-amber-700 dark:hover:text-amber-400 duration-300 active:scale-95",title:"Start New Session (Archives current data)",children:[e.jsx(g,{name:"Session4_FilePlus",size:18}),e.jsx("span",{className:"hidden md:inline text-xs font-bold",children:"New"})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden relative p-2 md:p-4",children:[$e==="evidence"&&e.jsx(Jr,{evidence:me,setEvidence:Ue,uploadedFiles:Ge,setUploadedFiles:Ke,onOcrProcess:Os,isOcrLoading:Ct,onAnalyze:It,isReadyForAnalysis:vs,isAnalyzeLoading:qe,analyzeTooltip:Hs(),onExport:(o,i)=>Et(me,o,i),evidenceLanguage:Nt,setEvidenceLanguage:us,textareaRef:Xe,tags:Le,onAddTag:o=>ct(i=>[...i,o]),selectedClauses:ne,standards:ce,standardKey:Z,matrixData:ve,setMatrixData:dt}),$e==="findings"&&e.jsx(Xr,{analysisResult:fe,setAnalysisResult:Oe,selectedFindings:_e,setSelectedFindings:et,isAnalyzeLoading:qe,loadingMessage:Ft,currentAnalyzingClause:gs,viewMode:N,setViewMode:M,focusedFindingIndex:K,setFocusedFindingIndex:S,onExport:(o,i)=>{const x=(fe==null?void 0:fe.map(m=>`[${m.clauseId}] ${m.status}
Evidence: ${m.evidence}
Reason: ${m.reason}
Suggestion: ${m.suggestion}`).join(`

`))||"";Et(x,o,i)},notesLanguage:ge,setNotesLanguage:Fe}),$e==="report"&&e.jsx(Zr,{finalReportText:ze,setFinalReportText:tt,isReportLoading:xt,loadingMessage:Ft,templateFileName:hs,handleTemplateUpload:zs,handleGenerateReport:Qt,isReadyToSynthesize:js,onExport:(o,i)=>Et(ze||"",o,i),exportLanguage:te,setExportLanguage:ue})]})]})]}),e.jsx(vr,{isOpen:C,onClose:()=>L(!1),actions:Gs,onSelectAction:o=>{o.action()}}),e.jsx(Fr,{isOpen:w,onClose:()=>k(!1)}),e.jsx(Vr,{isOpen:we.isOpen,onClose:()=>Pe(o=>({...o,isOpen:!1})),clause:we.clause,standardName:((Yt=ce[Z])==null?void 0:Yt.name)||"",fullText:we.fullText,isLoading:we.isLoading,onInsert:Ws}),e.jsx(Wr,{isOpen:G,onClose:()=>$(!1),onRestore:Ps}),e.jsx(Yr,{exportState:ye,setExportState:Ne,rescueKey:ut,setRescueKey:Gt,handleResumeExport:Us,isRescuing:fs,onClose:()=>Ne(o=>({...o,isOpen:!1})),onSkip:$s}),e.jsx(Qr,{isOpen:I,onClose:()=>A(!1),apiKeys:D,newKeyInput:V,setNewKeyInput:X,isCheckingKey:ee,handleAddKey:Es,activeKeyId:y,editingKeyId:ke,editLabelInput:Ie,setEditLabelInput:W,handleSaveLabel:Vs,handleStartEdit:Fs,handleRefreshStatus:As,handleDeleteKey:Is,isAutoCheckEnabled:xe,toggleAutoCheck:Bs}),e.jsx(ei,{isOpen:Q,onClose:()=>f(!1),onAdd:Rs})]})}const xs=document.getElementById("root");if(!xs)throw new Error("Could not find root element to mount to");const ri=Qs.createRoot(xs);ri.render(e.jsx(Ze.StrictMode,{children:e.jsx(si,{})}));
