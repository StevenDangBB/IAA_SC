import{r as d,j as e,R as Z}from"./vendor-react--UE8qFvL.js";import{I as u,s as ee,c as te,S as se,u as U,a as ae,L as re,f as ne,T as le,b as ie,g as oe}from"./index-B83Jkm2e.js";import"./vendor-BhE6lIor.js";import"./vendor-genai-C0GBL7S7.js";const de=v=>{const m=d.useMemo(()=>{if(!v)return[];const b=[],x=w=>{w.forEach(h=>{b.push(h),h.subClauses&&x(h.subClauses)})};return v.groups.forEach(w=>x(w.clauses)),b},[v]),p=d.useCallback(b=>m.find(x=>x.id===b),[m]),l=d.useCallback(b=>m.find(x=>x.code===b),[m]);return{flatClauses:m,getClauseById:p,getClauseByCode:l}},ce=d.forwardRef(({standard:v,selectedClauses:m,matrixData:p,setMatrixData:l,onPasteFiles:b,uploadedFiles:x=[],onRemoveFile:w,onLookup:h},c)=>{const[s,r]=d.useState(null),C=d.useRef(null),{getClauseById:T}=de(v);d.useEffect(()=>{l(t=>{const i={...t};let g=!1,n=null;return m.forEach(o=>{if(!i[o]||i[o].length===0){const f=T(o);if(f){const N=f.description||"Requirement",z=N.length>300?N.split(/(?:\. |\n)/).filter(L=>L.trim().length>5):[N];i[o]=z.map((L,_)=>({id:`${o}_req_${_}`,requirement:L.trim(),evidenceInput:"",status:"pending"})),g=!0}}!n&&i[o]&&i[o].length>0&&(n={clauseId:o,rowId:i[o][0].id})}),!s&&n&&r(n),g?i:t})},[m,T,l]);const A=d.useCallback((t,i,g)=>{l(n=>({...n,[t]:n[t].map(o=>{if(o.id===i){const f=o.evidenceInput||"",z=f+(f&&g?`
`:"")+g;return{...o,evidenceInput:z,status:z.trim()?"supplied":"pending"}}return o})}))},[l]),P=d.useCallback((t,i,g)=>{l(n=>{const o=n[t];if(!o)return n;const f=o.findIndex(z=>z.id===i);if(f===-1||o[f].evidenceInput===g)return n;const N=[...o];return N[f]={...N[f],evidenceInput:g,status:g.trim()?"supplied":"pending"},{...n,[t]:N}})},[l]),I=d.useCallback((t,i,g)=>{const n=t.clipboardData.items,o=[];for(let f=0;f<n.length;f++)if(n[f].kind==="file"){const N=n[f].getAsFile();N&&o.push(N)}o.length>0&&(t.preventDefault(),b&&b(o,{clauseId:i,rowId:g}))},[b]);d.useImperativeHandle(c,()=>({insertEvidence:(t,i,g)=>A(t,i,g),handleExternalDictation:t=>{s&&A(s.clauseId,s.rowId,t)},getActiveRow:()=>s}));const j=d.useMemo(()=>{if(!s)return null;const t=T(s.clauseId),i=p[s.clauseId],g=i==null?void 0:i.find(n=>n.id===s.rowId);return!t||!g?null:{clause:t,row:g}},[s,p,T]),S=t=>{const i=t.file.type.startsWith("image/"),g=t.file.type.includes("pdf");return e.jsxs("div",{className:"relative group w-20 h-20 bg-gray-50 dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 flex flex-col items-center justify-center overflow-hidden transition-all hover:shadow-md hover:-translate-y-1",children:[i?e.jsx("img",{src:URL.createObjectURL(t.file),alt:"preview",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"}):e.jsxs("div",{className:"flex flex-col items-center p-2 text-center",children:[e.jsx(u,{name:g?"BookOpen":"FileText",size:24,className:"text-slate-400 mb-1"}),e.jsx("span",{className:"text-[9px] text-slate-500 line-clamp-2 leading-tight break-all",children:t.file.name})]}),e.jsxs("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-start justify-end p-1",children:[t.status==="processing"&&e.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-black/50 flex items-center justify-center",children:e.jsx(u,{name:"Loader",size:16,className:"animate-spin text-indigo-600"})}),t.status==="success"&&e.jsx("div",{className:"bg-emerald-500 rounded-full p-0.5 shadow-sm",children:e.jsx(u,{name:"CheckThick",size:10,className:"text-white"})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),w&&w(t.id)},className:"bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-all hover:scale-110 shadow-sm",title:"Remove File",children:e.jsx(u,{name:"X",size:10})})]})]},t.id)};return m.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 bg-gray-50/30 dark:bg-slate-900/30 rounded-3xl border-2 border-dashed border-gray-200 dark:border-slate-800 m-4",children:[e.jsx("div",{className:"p-6 bg-white dark:bg-slate-900 rounded-full shadow-depth mb-4",children:e.jsx(u,{name:"LayoutList",size:48,className:"text-indigo-200 dark:text-slate-700"})}),e.jsx("p",{className:"text-sm font-bold text-slate-500",children:"Select clauses to start mapping evidence."})]}):e.jsx("div",{className:"h-full flex flex-col relative animate-fade-in-up",children:e.jsxs("div",{className:"flex-1 min-h-0 bg-white dark:bg-slate-900 rounded-2xl border border-white/60 dark:border-slate-800 shadow-depth overflow-hidden flex",children:[e.jsxs("div",{className:"w-1/3 min-w-[260px] max-w-[350px] border-r border-gray-100 dark:border-slate-800 flex flex-col bg-slate-50/50 dark:bg-slate-950/30 backdrop-blur-sm",children:[e.jsxs("div",{className:"p-3 border-b border-gray-100 dark:border-slate-800 flex justify-between items-center bg-white/50 dark:bg-slate-900/50",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Requirement Checklist"}),e.jsxs("button",{onClick:()=>{const t=ee(p,m);t&&te(t)},className:"text-[10px] text-indigo-500 hover:text-indigo-600 font-bold flex items-center gap-1 transition-colors",children:[e.jsx(u,{name:"Copy",size:10})," Copy All"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-4",children:m.map(t=>{const i=T(t),g=p[t]||[];return i?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 px-2 py-1.5 group/header rounded-lg hover:bg-white dark:hover:bg-slate-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[e.jsx("span",{className:"text-[10px] font-black text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 px-1.5 py-0.5 rounded flex-shrink-0 border border-indigo-100 dark:border-indigo-800/50",children:i.code}),e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 truncate",title:i.title,children:i.title})]}),e.jsx("button",{onClick:n=>{n.stopPropagation(),h&&h(i)},className:"p-1 text-slate-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded opacity-0 group-hover/header:opacity-100 transition-all scale-90 hover:scale-100",title:"Read Clause Content",children:e.jsx(u,{name:"BookOpen",size:12})})]}),e.jsx("div",{className:"pl-2 space-y-1",children:g.map(n=>{const o=(s==null?void 0:s.rowId)===n.id,f=n.status==="supplied";return e.jsx("div",{onClick:()=>r({clauseId:t,rowId:n.id}),className:`group relative p-3 rounded-xl cursor-pointer transition-all border ${o?"bg-white dark:bg-slate-800 border-indigo-200 dark:border-indigo-600 shadow-sm ring-1 ring-indigo-500/10":"bg-transparent border-transparent hover:bg-white dark:hover:bg-slate-800/50 hover:border-slate-200 dark:hover:border-slate-700"}`,children:e.jsxs("div",{className:"flex items-start gap-2.5",children:[e.jsx("div",{className:`mt-1 w-2.5 h-2.5 rounded-full shrink-0 transition-all shadow-sm ${f?"bg-emerald-500 scale-110":o?"bg-indigo-500 scale-110":"bg-slate-200 dark:bg-slate-700"}`}),e.jsx("p",{className:`text-[11px] leading-relaxed line-clamp-3 ${o?"text-slate-800 dark:text-slate-100 font-medium":"text-slate-500 dark:text-slate-400"}`,children:n.requirement})]})},n.id)})})]},t):null})})]}),e.jsx("div",{className:"flex-1 flex flex-col bg-white dark:bg-slate-900 min-w-0 relative",children:j?e.jsxs("div",{className:"flex flex-col h-full animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"p-5 border-b border-gray-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50 backdrop-blur-md sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-black text-white bg-gradient-to-r from-indigo-500 to-purple-500 px-2 py-0.5 rounded shadow-sm",children:j.clause.code}),e.jsx("span",{className:"text-sm font-bold text-slate-800 dark:text-white tracking-tight",children:j.clause.title})]}),e.jsxs("button",{onClick:()=>h&&h(j.clause),className:"flex items-center gap-1.5 px-3 py-1.5 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg text-xs font-bold text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:border-indigo-300 transition-all shadow-sm active:scale-95",children:[e.jsx(u,{name:"BookOpen",size:14}),"Ref"]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border-l-4 border-indigo-400 dark:border-indigo-600 shadow-sm",children:e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300 leading-relaxed font-medium",children:j.row.requirement})})]}),x.length>0&&e.jsx("div",{className:"px-6 pt-4 pb-2 bg-slate-50/30 dark:bg-black/10",children:e.jsx("div",{className:"flex flex-wrap gap-3",children:x.map(S)})}),e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx("textarea",{ref:C,className:"w-full h-full p-6 text-base text-slate-800 dark:text-slate-200 bg-transparent outline-none resize-none leading-7 placeholder-slate-300 dark:placeholder-slate-600 font-medium",placeholder:"Type verified evidence here... (Drag & Drop files supported)",value:j.row.evidenceInput,onChange:t=>P(j.clause.id,j.row.id,t.target.value),onPaste:t=>I(t,j.clause.id,j.row.id),autoFocus:!0}),e.jsxs("div",{className:"absolute bottom-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[j.row.status==="supplied"&&e.jsxs("span",{className:"px-3 py-1.5 bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 rounded-full text-xs font-bold flex items-center gap-1 shadow-sm border border-emerald-200 dark:border-emerald-800",children:[e.jsx(u,{name:"CheckThick",size:12})," Saved"]}),e.jsx("button",{onClick:()=>P(j.clause.id,j.row.id,""),className:"p-2 bg-white dark:bg-slate-800 hover:bg-red-50 text-slate-400 hover:text-red-500 rounded-lg transition-colors shadow-sm border border-gray-200 dark:border-slate-700",title:"Clear Text",children:e.jsx(u,{name:"Trash2",size:16})})]})]}),e.jsxs("div",{className:"px-6 py-2 border-t border-gray-100 dark:border-slate-800 text-[10px] text-slate-400 flex justify-between bg-gray-50/80 dark:bg-slate-950/80 backdrop-blur-sm",children:[e.jsxs("span",{className:"font-mono",children:["Ln ",j.row.evidenceInput.split(`
`).length,", Col ",j.row.evidenceInput.length]}),e.jsxs("span",{children:[x.length," Attachment(s)"]})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-300 dark:text-slate-600",children:[e.jsx(u,{name:"ArrowLeft",size:32,className:"mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Select a requirement from the checklist"})]})})]})})}),xe=(v,m)=>{const[p,l]=d.useState(!1),b=d.useRef(null),x=d.useCallback(()=>{var h;if(p){(h=b.current)==null||h.stop(),l(!1);return}const w=window.SpeechRecognition||window.webkitSpeechRecognition;if(!w){alert("Voice-to-Text is not supported in this browser.");return}try{const c=new w;c.continuous=!0,c.interimResults=!0,c.lang=v==="vi"?"vi-VN":"en-US",c.onresult=s=>{let r="";for(let C=s.resultIndex;C<s.results.length;++C)s.results[C].isFinal&&(r+=s.results[C][0].transcript);r&&m(r.trim())},c.onerror=s=>{console.error("Speech Error",s.error),l(!1)},c.onend=()=>l(!1),c.start(),b.current=c,l(!0)}catch(c){console.error("Failed to start recognition",c),l(!1)}},[p,v,m]);return{isListening:p,toggleListening:x}},ue=Z.memo(({processes:v,activeProcessId:m,activeProcess:p,setActiveProcessId:l,addInterviewee:b,removeInterviewee:x})=>{var s;const[w,h]=d.useState(""),c=r=>{r.key==="Enter"&&w.trim()&&(b(w.trim()),h(""))};return e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-2 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl p-1.5 shadow-sm shrink-0 transition-colors",children:[e.jsxs("div",{className:"relative group w-full md:w-auto min-w-[200px] bg-gray-50 dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center hover:border-indigo-300 dark:hover:border-indigo-700 transition-colors",children:[e.jsx("div",{className:"absolute left-2 text-indigo-500 pointer-events-none",children:e.jsx(u,{name:"Session11_GridAdd",size:14})}),e.jsx("select",{value:m||"",onChange:r=>l(r.target.value),className:"w-full bg-transparent appearance-none pl-7 pr-6 py-2 text-xs font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",title:"Switch active process context",children:v.map(r=>e.jsx("option",{value:r.id,className:"text-slate-900 dark:text-white bg-white dark:bg-slate-900",children:r.name},r.id))}),e.jsx("div",{className:"absolute right-2 pointer-events-none text-slate-400",children:e.jsx(u,{name:"ChevronDown",size:12})})]}),e.jsx("div",{className:"w-px h-6 bg-gray-200 dark:bg-slate-700 hidden md:block"}),e.jsxs("div",{className:"flex-1 flex items-center gap-2 w-full overflow-x-auto custom-scrollbar px-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-slate-400 uppercase whitespace-nowrap",children:[e.jsx(u,{name:"User",size:12})," Persons:"]}),(s=p==null?void 0:p.interviewees)==null?void 0:s.map((r,C)=>e.jsxs("span",{className:"flex items-center gap-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300 text-[10px] font-bold px-2 py-0.5 rounded-md border border-indigo-100 dark:border-indigo-800 whitespace-nowrap animate-in zoom-in-95",children:[r,e.jsx("button",{onClick:()=>x(r),className:"hover:text-red-500 transition-colors",children:e.jsx(u,{name:"X",size:10})})]},C)),e.jsx("input",{className:"bg-transparent border-b border-dashed border-gray-300 dark:border-slate-700 text-xs py-0.5 px-1 outline-none focus:border-indigo-500 min-w-[100px] dark:text-slate-300 placeholder-slate-400 focus:placeholder-indigo-300 transition-all",placeholder:"+ Name & Enter",value:w,onChange:r=>h(r.target.value),onKeyDown:c})]})]})}),pe=({uploadedFiles:v,onOcrProcess:m,isOcrLoading:p,isProcessing:l,toggleListening:b,isListening:x,triggerFileUpload:w,onAnalyze:h,isReadyForAnalysis:c,isAnalyzeLoading:s})=>e.jsxs("div",{className:"flex-shrink-0 flex items-end gap-3 min-h-[52px]",children:[v.length>0&&e.jsxs("div",{className:"flex-1 flex gap-2 overflow-x-auto custom-scrollbar bg-gray-50 dark:bg-slate-900 p-1.5 rounded-xl border border-gray-200 dark:border-slate-800 animate-in fade-in slide-in-from-bottom-2",children:[v.map(r=>e.jsxs("div",{className:"relative group w-10 h-10 flex-shrink-0 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-100 dark:border-slate-700 flex items-center justify-center overflow-hidden transition-transform hover:scale-105",children:[e.jsx(u,{name:"FileText",size:16,className:"text-indigo-500"}),r.status==="processing"&&e.jsx("div",{className:"absolute inset-0 bg-white/50 flex items-center justify-center",children:e.jsx(u,{name:"Loader",size:14,className:"animate-spin text-indigo-600"})}),r.status==="success"&&e.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-emerald-500 rounded-full animate-ping-once"})]},r.id)),e.jsxs("button",{onClick:m,disabled:p||l,className:"px-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-[10px] font-bold shadow-md transition-all active:scale-95 disabled:opacity-50",children:["Process ",v.filter(r=>r.status==="pending").length]})]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsxs("button",{onClick:b,className:`px-4 h-[48px] rounded-xl text-xs font-bold flex items-center gap-2 transition-all shadow-sm border active:scale-95 ${x?"bg-red-50 text-red-600 border-red-200 animate-pulse":"bg-white dark:bg-slate-900 text-slate-600 dark:text-slate-300 border-gray-200 dark:border-slate-700 hover:border-indigo-500"}`,children:[e.jsx(u,{name:"Mic",size:18}),e.jsx("span",{className:"hidden md:inline",children:x?"Recording...":"Dictate"})]}),e.jsxs("button",{onClick:w,className:"px-4 h-[48px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 hover:border-indigo-500 text-slate-600 dark:text-slate-300 rounded-xl text-xs font-bold flex items-center gap-2 shadow-sm transition-all active:scale-95",children:[e.jsx(u,{name:"UploadCloud",size:18}),e.jsx("span",{className:"hidden md:inline",children:"Upload"})]}),e.jsxs("button",{onClick:h,disabled:!c,className:`px-6 h-[48px] rounded-xl font-bold transition-all flex items-center gap-2 shadow-lg ${c?"btn-shrimp text-white active:scale-95 hover:shadow-indigo-500/40":"bg-gray-200 dark:bg-slate-800 text-slate-400 cursor-not-allowed"}`,children:[s?e.jsx(se,{className:"text-white"}):e.jsx(u,{name:"Wand2",size:18}),e.jsx("span",{children:"Analyze"})]})]})]}),ge=()=>{const{knowledgeBase:v,standards:m,standardKey:p}=U(),{getActiveKey:l}=ae();return async x=>{var h;const w=new CustomEvent("OPEN_REFERENCE",{detail:x});if(window.dispatchEvent(w),v){const c=re.extractClauseContent(v,x.code,x.title);if(c&&c.length>20){setTimeout(()=>{const s=new CustomEvent("UPDATE_REFERENCE_CONTENT",{detail:{en:c,vi:`[SOURCE DOCUMENT EXTRACT]

${c}

(Auto-translated view not available in Offline Mode)`}});window.dispatchEvent(s)},300);return}else console.warn(`[Local Lookup] Could not find clause ${x.code} in source document. Falling back to AI.`)}try{const c=((h=m[p])==null?void 0:h.name)||"",s=l(),r=(s==null?void 0:s.key)||"",C=await ne(x,c,v,r),T=new CustomEvent("UPDATE_REFERENCE_CONTENT",{detail:C});window.dispatchEvent(T)}catch(c){console.error("Reference Fetch Failed",c);const s=new CustomEvent("UPDATE_REFERENCE_CONTENT",{detail:{en:"Failed to load content. Ensure API Key is valid or source document is attached.",vi:""}});window.dispatchEvent(s)}}},ve=({evidence:v,setEvidence:m,uploadedFiles:p,setUploadedFiles:l,isOcrLoading:b,onAnalyze:x,isReadyForAnalysis:w,isAnalyzeLoading:h,analyzeTooltip:c,evidenceLanguage:s,setEvidenceLanguage:r,onExport:C,selectedClauses:T=[],standards:A,standardKey:P,matrixData:I,setMatrixData:j})=>{const{activeProcess:S,activeProcessId:t,setActiveProcessId:i,processes:g,addInterviewee:n,removeInterviewee:o}=U(),[f,N]=d.useState(!1),[z,L]=d.useState(!1),_=d.useRef({}),q=d.useRef(null),O=d.useRef(null),V=ge(),B=d.useMemo(()=>I?Object.keys(I).sort((k,y)=>k.localeCompare(y,void 0,{numeric:!0,sensitivity:"base"})):[],[I]),M=le.find(a=>a.id==="evidence"),K=d.useCallback(a=>{a&&O.current?O.current.handleExternalDictation(a):alert("Please select a Requirement row in the Matrix first.")},[]),{isListening:G,toggleListening:W}=xe(s,K),$=d.useCallback((a,k)=>{var E;const y=k||((E=O.current)==null?void 0:E.getActiveRow());if(!y){alert("Please click/focus on a specific Requirement row to attach files.");return}const R=a.map(D=>{const F=Math.random().toString(36).substr(2,9);return _.current[F]=y,{id:F,file:D,status:"pending"}});l(D=>[...D,...R])},[l]),X=d.useCallback(a=>{l(k=>k.filter(y=>y.id!==a)),delete _.current[a]},[l]),H=d.useCallback(async()=>{const a=p.filter(k=>k.status==="pending"||k.status==="error");if(a.length!==0){L(!0);for(const k of a)try{l(R=>R.map(E=>E.id===k.id?{...E,status:"processing"}:E));let y="";if(k.file.type.startsWith("image/")){const R=await ie(k.file);y=await oe("Transcribe text.",R,k.file.type)}else k.file.type==="application/pdf"?y="[PDF Content extracted via OCR would go here - System limitation]":y=await k.file.text();if(y&&O.current){const R=_.current[k.id];if(R){const E=`[File: ${k.file.name}]`;O.current.insertEvidence(R.clauseId,R.rowId,`${E}
${y}`),l(D=>D.filter(F=>F.id!==k.id))}}}catch(y){console.error("Matrix OCR Error",y),l(R=>R.map(E=>E.id===k.id?{...E,status:"error",error:y.message||"Failed"}:E))}L(!1)}},[p,l]),J=d.useCallback(a=>{a.preventDefault(),N(!0)},[]),Q=d.useCallback(a=>{a.preventDefault(),N(!1)},[]),Y=d.useCallback(a=>{a.preventDefault(),N(!1),a.dataTransfer.files&&a.dataTransfer.files.length>0&&$(Array.from(a.dataTransfer.files))},[$]);return e.jsxs("div",{className:"h-full flex flex-col gap-2 md:gap-3 animate-fade-in-up relative p-1",children:[e.jsx(ue,{processes:g,activeProcessId:t,activeProcess:S,setActiveProcessId:a=>i(a),addInterviewee:n,removeInterviewee:o}),e.jsxs("div",{className:"flex-1 flex flex-col gap-2 min-h-0 relative",children:[e.jsx("input",{type:"file",ref:q,className:"hidden",accept:"image/*,application/pdf,text/plain",multiple:!0,onChange:a=>a.target.files&&$(Array.from(a.target.files))}),e.jsxs("div",{className:`flex-1 bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-t-4 border-t-${M.borderClass.replace("border-","")} overflow-hidden flex flex-row relative group transition-all duration-500 ease-fluid dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_4px_6px_-1px_rgba(0,0,0,0.5)] ${f?`${M.borderClass} ring-4 ring-blue-500/20 bg-blue-50/10`:"border-gray-100 dark:border-transparent"}`,onDragOver:J,onDragLeave:Q,onDrop:Y,children:[f&&e.jsxs("div",{className:"absolute inset-0 bg-blue-500/10 backdrop-blur-[2px] z-50 flex flex-col items-center justify-center pointer-events-none animate-in fade-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"p-6 rounded-full bg-white dark:bg-slate-900 shadow-2xl border-4 border-dashed border-blue-500",children:e.jsx(u,{name:"UploadCloud",size:48,className:"text-blue-600 animate-bounce"})}),e.jsx("h3",{className:"mt-4 text-xl font-black text-blue-700 dark:text-blue-400 uppercase tracking-widest",children:"Drop Files to Active Row"})]}),A&&P&&A[P]&&I&&j?B.length>0?e.jsx("div",{className:"flex-1 w-full h-full p-1",children:e.jsx(ce,{ref:O,standard:A[P],selectedClauses:B,matrixData:I,setMatrixData:j,onPasteFiles:$,uploadedFiles:p,onRemoveFile:X,onLookup:V})}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400 bg-gray-50/20 dark:bg-slate-900/50",children:[e.jsx("div",{className:"p-6 bg-white dark:bg-slate-800 rounded-full shadow-lg mb-4",children:e.jsx(u,{name:"LayoutList",size:48,className:"text-indigo-200 dark:text-slate-600"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-600 dark:text-slate-300",children:"No Clauses Planned"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-2 max-w-xs text-center",children:["Go to the ",e.jsx("strong",{children:"Planning"})," tab to select which clauses apply to the ",e.jsx("strong",{children:(S==null?void 0:S.name)||"Active"})," process."]})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(u,{name:"LayoutList",size:48,className:"mb-4 opacity-30"}),e.jsx("p",{children:"Please select a Standard to view the Matrix."})]})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex flex-row items-center justify-between gap-2 md:gap-3 w-full pt-1",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(pe,{uploadedFiles:p,onOcrProcess:H,isOcrLoading:b,isProcessing:z,toggleListening:W,isListening:G,triggerFileUpload:()=>{var a;return(a=q.current)==null?void 0:a.click()},onAnalyze:x,isReadyForAnalysis:w,isAnalyzeLoading:h})}),e.jsxs("button",{onClick:()=>C("evidence",s),className:"flex-none md:w-auto px-3 md:px-4 h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm whitespace-nowrap dark:shadow-md",title:"Export Raw Evidence",children:[e.jsx(u,{name:"Download"}),e.jsx("span",{className:"hidden md:inline",children:"Export"}),e.jsxs("div",{className:"lang-pill-container",children:[e.jsx("span",{onClick:a=>{a.stopPropagation(),r("en")},className:`lang-pill-btn ${s==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:a=>{a.stopPropagation(),r("vi")},className:`lang-pill-btn ${s==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]})]})]})};export{ve as EvidenceView};
