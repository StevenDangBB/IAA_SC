const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./EvidenceView-Fk9uDaJ_.js","./vendor-react--UE8qFvL.js","./vendor-BhE6lIor.js","./vendor-genai-C0GBL7S7.js","./FindingsView-C55Yrfdd.js","./ReportView-Ca6WtAA9.js","./PlanningView-DFhd3kjU.js"])))=>i.map(i=>d[i]);
var Rt=Object.defineProperty;var Tt=(s,t,r)=>t in s?Rt(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var Ie=(s,t,r)=>Tt(s,typeof t!="symbol"?t+"":t,r);import{r as u,j as e,R as ge,c as Pt}from"./vendor-react--UE8qFvL.js";import{G as ze,T as de}from"./vendor-genai-C0GBL7S7.js";import"./vendor-BhE6lIor.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();const Dt="modulepreload",_t=function(s,t){return new URL(s,t).href},Ve={},Se=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){const a=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),l=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=_t(c,n),c in Ve)return;Ve[c]=!0;const p=c.endsWith(".css"),h=p?'[rel="stylesheet"]':"";if(!!n)for(let y=a.length-1;y>=0;y--){const g=a[y];if(g.href===c&&(!p||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":Dt,p||(x.as="script"),x.crossOrigin="",x.href=c,l&&x.setAttribute("nonce",l),document.head.appendChild(x),p)return new Promise((y,g)=>{x.addEventListener("load",y),x.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=a,window.dispatchEvent(d),!d.defaultPrevented)throw a}return i.then(a=>{for(const d of a||[])d.status==="rejected"&&o(d.reason);return t().catch(o)})},Ot={name:"ISO 9001:2015 (QMS)",description:"Quality Management System",groups:[{id:"PLAN_9001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context of organization",description:"Internal and external issues that affect its ability to achieve intended results.",subClauses:[{id:"4.1",code:"4.1",title:"Understanding the organization",description:"Determining internal and external issues relevant to its purpose."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Understanding the needs and expectations of stakeholders."},{id:"4.3",code:"4.3",title:"Scope of QMS",description:"Determining the boundaries and applicability of the quality system."},{id:"4.4",code:"4.4",title:"QMS processes",description:"Establishing, implementing, and maintaining processes."}]},{id:"5",code:"5",title:"Leadership",description:"Top management commitment, policy and roles.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership commitment",description:"Demonstrating leadership and commitment to customer focus."},{id:"5.2",code:"5.2",title:"Policy",description:"Establishing and communicating the quality policy."},{id:"5.3",code:"5.3",title:"Roles & Authorities",description:"Ensuring responsibilities and authorities are assigned."}]},{id:"6",code:"6",title:"Planning",description:"Risks, opportunities and quality objectives.",subClauses:[{id:"6.1",code:"6.1",title:"Risks & Opportunities",description:"Actions to address risks and opportunities."},{id:"6.2",code:"6.2",title:"Quality objectives",description:"Establishing objectives and planning to achieve them."},{id:"6.3",code:"6.3",title:"Planning of changes",description:"Carrying out changes in a planned manner."}]}]},{id:"SUPPORT_9001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Providing necessary resources for the QMS.",subClauses:[{id:"7.1.1",code:"7.1.1",title:"General",description:"Determining and providing resources for QMS."},{id:"7.1.2",code:"7.1.2",title:"People",description:"Providing persons necessary for effective implementation."},{id:"7.1.3",code:"7.1.3",title:"Infrastructure",description:"Maintenance of buildings, equipment, and transport."},{id:"7.1.4",code:"7.1.4",title:"Process Environment",description:"Managing social (non-discriminatory), psychological (stress-reducing), and physical (temperature, hygiene) factors."},{id:"7.1.5",code:"7.1.5",title:"Monitoring resources",description:"Calibration and measurement traceability."},{id:"7.1.6",code:"7.1.6",title:"Knowledge",description:"Maintaining organizational knowledge and lessons learned."}]},{id:"7.2",code:"7.2",title:"Competence",description:"Ensuring workers are competent based on education/training."},{id:"7.3",code:"7.3",title:"Awareness",description:"Ensuring persons are aware of quality policy and objectives."},{id:"7.4",code:"7.4",title:"Communication",description:"Determining internal and external communications."},{id:"7.5",code:"7.5",title:"Documented info",description:"Control of information required by the standard.",subClauses:[{id:"7.5.1",code:"7.5.1",title:"General",description:"Determining necessary documented information for QMS."},{id:"7.5.2",code:"7.5.2",title:"Creating & Updating",description:"Ensuring proper identification, format, and review."},{id:"7.5.3",code:"7.5.3",title:"Control of info",description:"Ensuring availability, protection, and storage control.",subClauses:[{id:"7.5.3.1",code:"7.5.3.1",title:"Availability",description:"Ensuring info is available where needed."},{id:"7.5.3.2",code:"7.5.3.2",title:"Control",description:"Distribution, access, retrieval and use."}]}]}]},{id:"DO_9001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational planning",description:"Control of processes to meet P/S requirements."},{id:"8.2",code:"8.2",title:"Requirements for P/S",description:"Determining requirements and communicating with customers."},{id:"8.3",code:"8.3",title:"Design and development",description:"D&D of products and services.",subClauses:[{id:"8.3.1",code:"8.3.1",title:"General",description:"Establishing a D&D process."},{id:"8.3.2",code:"8.3.2",title:"Planning",description:"Determining D&D stages and controls."},{id:"8.3.3",code:"8.3.3",title:"Inputs",description:"Requirements essential for D&D."},{id:"8.3.4",code:"8.3.4",title:"Controls",description:"Ensuring reviews, verification, and validation."},{id:"8.3.5",code:"8.3.5",title:"Outputs",description:"Meeting input requirements."},{id:"8.3.6",code:"8.3.6",title:"Changes",description:"Controlling modifications to D&D."}]},{id:"8.4",code:"8.4",title:"External Providers",description:"Control of externally provided P/S.",subClauses:[{id:"8.4.1",code:"8.4.1",title:"General",description:"Evaluating and selecting external providers."},{id:"8.4.2",code:"8.4.2",title:"Type & Extent",description:"Controlling the impact of providers on results."},{id:"8.4.3",code:"8.4.3",title:"Information",description:"Communicating requirements to providers clearly."}]},{id:"8.5",code:"8.5",title:"Production & Delivery",description:"Control of production and service provision.",subClauses:[{id:"8.5.1",code:"8.5.1",title:"Control",description:"Availability of info, equipment and monitoring."},{id:"8.5.2",code:"8.5.2",title:"Identification",description:"Ensuring traceability throughout provision."},{id:"8.5.3",code:"8.5.3",title:"Property",description:"Safeguarding customer or provider assets."},{id:"8.5.4",code:"8.5.4",title:"Preservation",description:"Ensuring conformity during processing."},{id:"8.5.5",code:"8.5.5",title:"Post-delivery",description:"Statutory, regulatory, and warranty duties."},{id:"8.5.6",code:"8.5.6",title:"Control of changes",description:"Reviewing and controlling changes for production."}]},{id:"8.6",code:"8.6",title:"Release of P/S",description:"Verification that requirements have been met."},{id:"8.7",code:"8.7",title:"Nonconforming outputs",description:"Ensuring unintended use is prevented."}]},{id:"CHECK_ACT_9001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1",code:"9.1",title:"Monitoring & Evaluation",description:"Determining what needs to be monitored."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Scheduled review of QMS performance."},{id:"9.3",code:"9.3",title:"Management review",description:"Top management review of system suitability."},{id:"10.1",code:"10.1",title:"Improvement",description:"Determining opportunities for improvement."},{id:"10.2",code:"10.2",title:"NC & Corrective action",description:"Managing nonconformities and root causes."},{id:"10.3",code:"10.3",title:"Continual improvement",description:"Continually improving QMS effectiveness."}]}]},$t={name:"ISO/IEC 27001:2022 (ISMS)",description:"Information Security Management System",groups:[{id:"PLAN_27001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context of organization",description:"Internal/external issues and scope.",subClauses:[{id:"4.1",code:"4.1",title:"Context",description:"Identifying security issues."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Needs and expectations."},{id:"4.3",code:"4.3",title:"Scope",description:"Determining ISMS boundaries."},{id:"4.4",code:"4.4",title:"ISMS System",description:"Establishing processes."}]},{id:"5",code:"5",title:"Leadership",description:"Commitment and Policy.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership & Commitment",description:"Accountability."},{id:"5.2",code:"5.2",title:"Policy",description:"InfoSec policy."},{id:"5.3",code:"5.3",title:"Roles & Authorities",description:"Assigning responsibilities."}]},{id:"6",code:"6",title:"Planning",description:"Risk treatment.",subClauses:[{id:"6.1.1",code:"6.1.1",title:"General",description:"Risk actions."},{id:"6.1.2",code:"6.1.2",title:"Risk assessment",description:"Information security risk process."},{id:"6.1.3",code:"6.1.3",title:"Risk treatment",description:"SoA and planning."},{id:"6.2",code:"6.2",title:"Security objectives",description:"Achievement planning."}]}]},{id:"SUPPORT_27001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Availability."},{id:"7.2",code:"7.2",title:"Competence",description:"Training requirements."},{id:"7.3",code:"7.3",title:"Awareness",description:"Understanding policy."},{id:"7.4",code:"7.4",title:"Communication",description:"Info flow rules."},{id:"7.5",code:"7.5",title:"Documented info",description:"Control of records."}]},{id:"DO_27001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational planning",description:"Securing processes."},{id:"8.2",code:"8.2",title:"Risk assessment",description:"Execution at intervals."},{id:"8.3",code:"8.3",title:"Risk treatment",description:"Implementing treatments."}]},{id:"CHECK_ACT_27001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1",code:"9.1",title:"Monitoring",description:"Measuring effectiveness."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Periodic checks."},{id:"9.3",code:"9.3",title:"Management review",description:"Strategic eval."},{id:"10.1",code:"10.1",title:"Continual improvement",description:"Growth."},{id:"10.2",code:"10.2",title:"Nonconformity",description:"Corrective actions."}]},{id:"ANNEX_A_5",title:"Annex A.5 Organizational (37 Controls)",icon:"Lock",clauses:[{id:"A.5.1",code:"A.5.1",title:"Policies for information security",description:"Reviewed for suitability."},{id:"A.5.2",code:"A.5.2",title:"InfoSec roles",description:"Defined responsibilities."},{id:"A.5.3",code:"A.5.3",title:"Segregation of duties",description:"Conflict reduction."},{id:"A.5.4",code:"A.5.4",title:"Management responsibilities",description:"Committing to security."},{id:"A.5.5",code:"A.5.5",title:"Contact with authorities",description:"Regulation flow."},{id:"A.5.6",code:"A.5.6",title:"Special interest groups",description:"Trend tracking."},{id:"A.5.7",code:"A.5.7",title:"Threat intelligence",description:"Info collection."},{id:"A.5.8",code:"A.5.8",title:"IS in project mgmt",description:"Lifecycle inclusion."},{id:"A.5.9",code:"A.5.9",title:"Inventory of assets",description:"Critical asset list."},{id:"A.5.10",code:"A.5.10",title:"Acceptable use of assets",description:"Usage rules."},{id:"A.5.11",code:"A.5.11",title:"Return of assets",description:"Termination retrieval."},{id:"A.5.12",code:"A.5.12",title:"Classification of info",description:"Labeling based on value."},{id:"A.5.13",code:"A.5.13",title:"Labeling of info",description:"Visual markers."},{id:"A.5.14",code:"A.5.14",title:"Information transfer",description:"Securing transit."},{id:"A.5.15",code:"A.5.15",title:"Access control",description:"Authorization rules."},{id:"A.5.16",code:"A.5.16",title:"Identity management",description:"User ID lifecycle."},{id:"A.5.17",code:"A.5.17",title:"Authentication info",description:"Secrets management."},{id:"A.5.18",code:"A.5.18",title:"Access rights",description:"Provisioning/revoking."},{id:"A.5.19",code:"A.5.19",title:"IS in supplier relationships",description:"Agreements."},{id:"A.5.20",code:"A.5.20",title:"Supplier agreements",description:"Addressing security."},{id:"A.5.21",code:"A.5.21",title:"ICT supply chain",description:"Sourcing risks."},{id:"A.5.22",code:"A.5.22",title:"Monitoring suppliers",description:"Auditing delivery."},{id:"A.5.23",code:"A.5.23",title:"Cloud services",description:"SaaS security."},{id:"A.5.24",code:"A.5.24",title:"Incident management",description:"Planning response."},{id:"A.5.25",code:"A.5.25",title:"Incident assessment",description:"Severity eval."},{id:"A.5.26",code:"A.5.26",title:"Incident response",description:"Action taken."},{id:"A.5.27",code:"A.5.27",title:"Incident learning",description:"Root cause."},{id:"A.5.28",code:"A.5.28",title:"Evidence collection",description:"Forensics."},{id:"A.5.29",code:"A.5.29",title:"IS during disruption",description:"BCP security."},{id:"A.5.30",code:"A.5.30",title:"ICT readiness",description:"DR planning."},{id:"A.5.31",code:"A.5.31",title:"Legal compliance",description:"Regulatory requirements."},{id:"A.5.32",code:"A.5.32",title:"IP Rights",description:"Copyright protection."},{id:"A.5.33",code:"A.5.33",title:"Protection of records",description:"Integrity."},{id:"A.5.34",code:"A.5.34",title:"Privacy of PII",description:"GDPR/Data protection."},{id:"A.5.35",code:"A.5.35",title:"Independent review",description:"External auditing."},{id:"A.5.36",code:"A.5.36",title:"Policy compliance",description:"Adherence."},{id:"A.5.37",code:"A.5.37",title:"Operating procedures",description:"Standard documentation."}]},{id:"ANNEX_A_6",title:"Annex A.6 People (8 Controls)",icon:"Users",clauses:[{id:"A.6.1",code:"A.6.1",title:"Screening",description:"Background checks."},{id:"A.6.2",code:"A.6.2",title:"Terms of employment",description:"HR contracts."},{id:"A.6.3",code:"A.6.3",title:"Awareness",description:"InfoSec education."},{id:"A.6.4",code:"A.6.4",title:"Disciplinary process",description:"Breach handling."},{id:"A.6.5",code:"A.6.5",title:"Termination responsibilities",description:"Post-exit."},{id:"A.6.6",code:"A.6.6",title:"Confidentiality",description:"NDAs."},{id:"A.6.7",code:"A.6.7",title:"Remote working",description:"Teleworking rules."},{id:"A.6.8",code:"A.6.8",title:"Event reporting",description:"Anomaly reporting."}]},{id:"ANNEX_A_7",title:"Annex A.7 Physical (14 Controls)",icon:"Building",clauses:[{id:"A.7.1",code:"A.7.1",title:"Physical perimeters",description:"Barriers."},{id:"A.7.2",code:"A.7.2",title:"Physical entry",description:"Access systems."},{id:"A.7.3",code:"A.7.3",title:"Securing offices",description:"Locks."},{id:"A.7.4",code:"A.7.4",title:"Security monitoring",description:"CCTV."},{id:"A.7.5",code:"A.7.5",title:"Physical protection",description:"Disaster proofing."},{id:"A.7.6",code:"A.7.6",title:"Secure areas",description:"Restricted protocols."},{id:"A.7.7",code:"A.7.7",title:"Clear desk/screen",description:"Clean policy."},{id:"A.7.8",code:"A.7.8",title:"Equipment siting",description:"Safe placement."},{id:"A.7.9",code:"A.7.9",title:"Assets off-premises",description:"Mobile security."},{id:"A.7.10",code:"A.7.10",title:"Storage media",description:"Drive handling."},{id:"A.7.11",code:"A.7.11",title:"Utilities",description:"Power/Water safety."},{id:"A.7.12",code:"A.7.12",title:"Cabling security",description:"Line protection."},{id:"A.7.13",code:"A.7.13",title:"Equipment maintenance",description:"Care logs."},{id:"A.7.14",code:"A.7.14",title:"Secure disposal",description:"Data wiping."}]},{id:"ANNEX_A_8",title:"Annex A.8 Technological (34 Controls)",icon:"Cpu",clauses:[{id:"A.8.1",code:"A.8.1",title:"Endpoint devices",description:"Device agents."},{id:"A.8.2",code:"A.8.2",title:"Privileged access",description:"Admin rights."},{id:"A.8.3",code:"A.8.3",title:"Information access",description:"Need-to-know."},{id:"A.8.4",code:"A.8.4",title:"Source code access",description:"IP security."},{id:"A.8.5",code:"A.8.5",title:"Authentication",description:"MFA usage."},{id:"A.8.6",code:"A.8.6",title:"Capacity mgmt",description:"Resources."},{id:"A.8.7",code:"A.8.7",title:"Malware protection",description:"AV/EDR."},{id:"A.8.8",code:"A.8.8",title:"Vulnerabilities",description:"Patching."},{id:"A.8.9",code:"A.8.9",title:"Configuration",description:"Hardening."},{id:"A.8.10",code:"A.8.10",title:"Deletion",description:"Erasure."},{id:"A.8.11",code:"A.8.11",title:"Data masking",description:"Privacy."},{id:"A.8.12",code:"A.8.12",title:"DLP",description:"Leakage prevention."},{id:"A.8.13",code:"A.8.13",title:"Backup",description:"Redundancy."},{id:"A.8.14",code:"A.8.14",title:"Redundancy ICT",description:"HA systems."},{id:"A.8.15",code:"A.8.15",title:"Logging",description:"Audit trails."},{id:"A.8.16",code:"A.8.16",title:"Monitoring",description:"Health alerts."},{id:"A.8.17",code:"A.8.17",title:"Clock sync",description:"NTP."},{id:"A.8.18",code:"A.8.18",title:"Privileged utilities",description:"Restrict tools."},{id:"A.8.19",code:"A.8.19",title:"Software install",description:"Whitelisting."},{id:"A.8.20",code:"A.8.20",title:"Network security",description:"Firewalls."},{id:"A.8.21",code:"A.8.21",title:"Network services",description:"VPN/Gateways."},{id:"A.8.22",code:"A.8.22",title:"Segregation",description:"VLANs."},{id:"A.8.23",code:"A.8.23",title:"Web filtering",description:"Proxy."},{id:"A.8.24",code:"A.8.24",title:"Cryptography",description:"Encryption."},{id:"A.8.25",code:"A.8.25",title:"Secure SDLC",description:"Dev security."},{id:"A.8.26",code:"A.8.26",title:"Application security",description:"Design."},{id:"A.8.27",code:"A.8.27",title:"Architecture",description:"Engineering."},{id:"A.8.28",code:"A.8.28",title:"Secure coding",description:"OWASP."},{id:"A.8.29",code:"A.8.29",title:"Security testing",description:"VAPT."},{id:"A.8.30",code:"A.8.30",title:"Outsourced dev",description:"Contractor code."},{id:"A.8.31",code:"A.8.31",title:"Separation envs",description:"Dev/Prod."},{id:"A.8.32",code:"A.8.32",title:"Change mgmt",description:"RFCs."},{id:"A.8.33",code:"A.8.33",title:"Test info",description:"Protect data."},{id:"A.8.34",code:"A.8.34",title:"IS during audit",description:"Auditor access."}]}]},Bt={name:"ISO 14001:2015 (EMS)",description:"Environmental Management System",groups:[{id:"PLAN_14001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context",description:"Org Context.",subClauses:[{id:"4.1",code:"4.1",title:"Org Context",description:"Env issues."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Expectations."},{id:"4.3",code:"4.3",title:"Scope",description:"Boundaries."},{id:"4.4",code:"4.4",title:"EMS System",description:"Processes."}]},{id:"5",code:"5",title:"Leadership",description:"Commitment.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership & Commitment",description:"Duty."},{id:"5.2",code:"5.2",title:"Environmental Policy",description:"Goals."},{id:"5.3",code:"5.3",title:"Org Roles & Responsibilities",description:"Authorities."}]},{id:"6",code:"6",title:"Planning",description:"Aspects.",subClauses:[{id:"6.1.1",code:"6.1.1",title:"General",description:"Actions."},{id:"6.1.2",code:"6.1.2",title:"Environmental aspects",description:"Impacts."},{id:"6.1.3",code:"6.1.3",title:"Compliance obligations",description:"Legal."},{id:"6.1.4",code:"6.1.4",title:"Planning action",description:"Achievement."},{id:"6.2",code:"6.2",title:"Environmental objectives",description:"Plans."}]}]},{id:"SUPPORT_14001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Supply."},{id:"7.2",code:"7.2",title:"Competence",description:"Training."},{id:"7.3",code:"7.3",title:"Awareness",description:"EMS awareness."},{id:"7.4",code:"7.4",title:"Communication",description:"Internal/External.",subClauses:[{id:"7.4.1",code:"7.4.1",title:"General",description:"Criteria."},{id:"7.4.2",code:"7.4.2",title:"Internal",description:"Staff."},{id:"7.4.3",code:"7.4.3",title:"External",description:"Parties."}]},{id:"7.5",code:"7.5",title:"Documented info",description:"Control."}]},{id:"DO_14001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational control",description:"Lifecycle."},{id:"8.2",code:"8.2",title:"Emergency preparedness",description:"Response."}]},{id:"CHECK_ACT_14001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1.1",code:"9.1.1",title:"General",description:"Measurement."},{id:"9.1.2",code:"9.1.2",title:"Compliance evaluation",description:"Audit."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Scheduled review."},{id:"9.3",code:"9.3",title:"Management review",description:"Review outputs."},{id:"10.1",code:"10.1",title:"General",description:"Performance."},{id:"10.2",code:"10.2",title:"Nonconformity",description:"Corrective action."},{id:"10.3",code:"10.3",title:"Continual improvement",description:"Suitability."}]}]},zt={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Ft={};const Ut="5.2.0-REFACTOR",Kt="2026-03-05 08:00:00 (GMT+7)",Ze="gemini-3-pro-preview",Vt="gemini-2.5-flash-image",De={company:"",address:"",scope:"",soa:"",smo:"",auditor:"",type:""},Wt=()=>{try{if(typeof import.meta<"u"&&zt)return}catch{}try{if(typeof process<"u"&&Ft)return""}catch{}return""},Gt=Wt(),$e=[Gt,"AIzaSyC_yJCcSrU5eiKm_0MmMq1vwK-xyB72i4U"].filter(s=>s&&s.trim()!==""),Ht=["gemini-3-pro-preview","gemini-2.0-flash","gemini-2.0-flash-lite-preview-02-05","gemini-3-flash-preview"],Ce=[{id:"planning",label:"1. Planning",icon:"LayoutList",colorClass:"bg-orange-500",textClass:"text-orange-600",borderClass:"border-orange-500",bgSoft:"bg-orange-50 dark:bg-orange-950/30"},{id:"evidence",label:"2. Audit",icon:"FileSearch",colorClass:"bg-blue-500",textClass:"text-blue-600",borderClass:"border-blue-500",bgSoft:"bg-blue-50 dark:bg-blue-950/30"},{id:"findings",label:"3. Findings",icon:"Wand2",colorClass:"bg-purple-500",textClass:"text-purple-600",borderClass:"border-purple-500",bgSoft:"bg-purple-50 dark:bg-purple-950/30"},{id:"report",label:"4. Report",icon:"FileText",colorClass:"bg-emerald-500",textClass:"text-emerald-600",borderClass:"border-emerald-500",bgSoft:"bg-emerald-50 dark:bg-emerald-950/30"}],qt={"Stage 1":"Initial review of documentation and readiness.","Stage 2":"Evaluation of implementation and effectiveness.",Internal:"First-party audit to check own system.","PRE ASSESSMENT":"Gap analysis assessment.","PRE TRANSFER REVIEW":"Check valid certification for transfer.","TRANSITION AUDIT":"Ensure transition to new standard version.",CAV:"Surveillance assessment.",RAV:"Re-assessment of existing certification."},Qe={"ISO 9001:2015":Ot,"ISO 27001:2022":$t,"ISO 14001:2015":Bt},Jt=[{version:"5.2.0-REFACTOR",date:"2026-03-05",features:["CORE: Performance Architecture. Implemented Lazy Loading and Memoized Contexts.","UI: Enhanced Depth & Contrast (Layered Shadows).","TECH: React 19 Strict Mode Compatibility."]},{version:"5.1.0-SMART-ROUTING",date:"2026-03-01",features:["CORE: Added Smart Model Rotator. Automatically switches to Flash/Lite models when Pro quota is exceeded.","QUOTA: Integrated Gemini 2.0 Flash Lite for maximum availability."]}],Xt=[{icon:"ScanText",title:"Smart OCR",desc:"Extracts text from Images, PDFs & TXT."},{icon:"Wand2",title:"AI Analysis",desc:"Expert compliance evaluation."},{icon:"FileText",title:"Auto Report",desc:"Synthesizes final audit findings."},{icon:"LayoutList",title:"Matrix View",desc:"Structured Evidence Mapping."}],Yt="",Zt="ISO_AUDIT_DB",fe="knowledge_files",Qt=1;class es{constructor(){Ie(this,"dbPromise",null)}openDB(){return this.dbPromise?this.dbPromise:(this.dbPromise=new Promise((t,r)=>{const n=indexedDB.open(Zt,Qt);n.onupgradeneeded=i=>{const o=i.target.result;o.objectStoreNames.contains(fe)||o.createObjectStore(fe,{keyPath:"standardKey"})},n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{console.error("KnowledgeStore: DB Open Error",i),r(i.target.error)}}),this.dbPromise)}async saveDocument(t,r,n){try{const i=await this.openDB();return new Promise((o,a)=>{const l=i.transaction([fe],"readwrite").objectStore(fe),c={standardKey:t,fileName:r,content:n,timestamp:Date.now()},p=l.put(c);p.onsuccess=()=>o(),p.onerror=()=>a(p.error)})}catch(i){throw console.error("KnowledgeStore: Save Error",i),i}}async getDocument(t){try{const r=await this.openDB();return new Promise((n,i)=>{const d=r.transaction([fe],"readonly").objectStore(fe).get(t);d.onsuccess=()=>{n(d.result?d.result:null)},d.onerror=()=>i(d.error)})}catch(r){return console.error("KnowledgeStore: Get Error",r),null}}async deleteDocument(t){try{const r=await this.openDB();return new Promise((n,i)=>{const d=r.transaction([fe],"readwrite").objectStore(fe).delete(t);d.onsuccess=()=>n(),d.onerror=()=>i(d.error)})}catch(r){throw console.error("KnowledgeStore: Delete Error",r),r}}async migrateFromLocalStorage(t){const r=`iso_kb_content_${t}`,n=`iso_kb_name_${t}`,i=localStorage.getItem(r),o=localStorage.getItem(n);return i&&o?(console.log(`KnowledgeStore: Migrating ${t} from LocalStorage to IndexedDB...`),await this.saveDocument(t,o,i),localStorage.removeItem(r),localStorage.removeItem(n),!0):!1}}const Be=new es,et=u.createContext(void 0),We={maskCompany:!0,maskSmo:!0,maskPeople:!0,maskEmail:!0,maskPhone:!0,maskAddress:!0,maskIP:!0},ts=({children:s})=>{const[t,r]=u.useState({}),[n,i]=u.useState(""),[o,a]=u.useState(De),[d,l]=u.useState(We),[c,p]=u.useState([]),[h,b]=u.useState(null),[x,y]=u.useState(null),[g,f]=u.useState(Yt),[j,m]=u.useState({}),[k,A]=u.useState([]),[L,M]=u.useState([]),[$,O]=u.useState(null),[V,N]=u.useState(null),[R,E]=u.useState(null),[I,P]=u.useState({}),[H,F]=u.useState(null),U=u.useMemo(()=>({...Qe,...t}),[t]),Y=u.useMemo(()=>c.find(v=>v.id===h),[c,h]),oe=u.useRef(c);u.useEffect(()=>{oe.current=c},[c]),u.useEffect(()=>{if(!h){f(""),m({}),A([]),y(null);return}if(h===x)return;const v=oe.current.find(S=>S.id===h);v?(f(v.evidence||""),m(v.matrixData||{}),A(v.evidenceTags||[]),y(h)):y(null)},[h,x]),u.useEffect(()=>{x&&p(v=>v.map(S=>S.id===x&&(S.evidence!==g||S.matrixData!==j||S.evidenceTags!==k)?{...S,evidence:g,matrixData:j,evidenceTags:k}:S))},[g,j,k,x]);const ie=(v,S)=>{r(T=>({...T,[v]:S}))},ee=v=>{r(S=>({...S,[n]:v}))},J=v=>{r(S=>{const T={...S};return delete T[v],T}),n===v&&i("")},z=v=>{const S=`proc_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,T={id:S,name:v,evidence:"",interviewees:[],matrixData:{},evidenceTags:[],uploadedFiles:[]};p(_=>[..._,T]),b(S)},te=(v,S)=>{p(T=>T.map(_=>_.id===v?{..._,name:S}:_))},he=v=>{p(h===v?S=>{const T=S.filter(G=>G.id!==v),_=T.length>0?T[0].id:null;return b(_),T}:S=>S.filter(T=>T.id!==v))},re=(v,S)=>{if(!S)return null;const T=S.groups.flatMap(G=>G.clauses),_=(G,K)=>{for(const q of K){if(q.id===G)return q;if(q.subClauses){const le=_(G,q.subClauses);if(le)return le}}return null};return _(v,T)},D=v=>{p(T=>T.map(_=>{const G=v.find(K=>K.processId===_.id);if(G){const K={..._.matrixData},q=U[n];return G.clauses.forEach(le=>{if(!K[le]){const Ne=re(le,q),Te=(Ne==null?void 0:Ne.description)||"Requirement";K[le]=[{id:`${le}_req_0`,requirement:Te,evidenceInput:"",status:"pending"}]}}),{..._,matrixData:K}}return _}));const S=v.find(T=>T.processId===x);S&&m(T=>{const _={...T},G=U[n];return S.clauses.forEach(K=>{if(!_[K]){const q=re(K,G),le=(q==null?void 0:q.description)||"Requirement";_[K]=[{id:`${K}_req_0`,requirement:le,evidenceInput:"",status:"pending"}]}}),_})},B=(v,S)=>{p(T=>T.map(_=>{if(_.id!==v)return _;const G={..._.matrixData};if(G[S])delete G[S];else{const K=U[n],q=re(S,K),le=(q==null?void 0:q.description)||"Requirement";G[S]=[{id:`${S}_req_0`,requirement:le,evidenceInput:"",status:"pending"}]}return{..._,matrixData:G}})),x===v&&m(T=>{const _={...T};if(_[S])delete _[S];else{const G=U[n],K=re(S,G),q=(K==null?void 0:K.description)||"Requirement";_[S]=[{id:`${S}_req_0`,requirement:q,evidenceInput:"",status:"pending"}]}return _})},ae=v=>{p(S=>S.map(T=>T.id===h&&!T.interviewees.includes(v)?{...T,interviewees:[...T.interviewees,v]}:T))},W=v=>{p(S=>S.map(T=>T.id===h?{...T,interviewees:T.interviewees.filter(_=>_!==v)}:T))},Z=v=>{A(S=>[...S,v])},se=async v=>{try{const S=await Be.getDocument(v);S?(O(S.content),N(S.fileName)):(O(null),N(null))}catch(S){console.error(S)}},xe=async()=>{O(null),N(null),n&&await Be.deleteDocument(n)},je=(v,S)=>{O(v),N(S)},w=()=>{i(""),a(De),p([]),b(null),y(null),f(""),m({}),A([]),M([]),E(null),P({}),F(null),O(null),N(null),l(We)},Q=v=>{if(v.standardKey&&i(v.standardKey),v.auditInfo&&a({...De,...v.auditInfo}),v.selectedClauses&&M(v.selectedClauses),v.privacySettings&&l(v.privacySettings),v.processes&&v.processes.length>0)p(v.processes),v.activeProcessId&&b(v.activeProcessId);else if(v.scopes&&v.scopes.length>0){const S=v.scopes.map(T=>({...T,interviewees:[]}));p(S),v.activeScopeId&&b(v.activeScopeId)}v.analysisResult&&E(v.analysisResult),v.selectedFindings&&P(v.selectedFindings),v.finalReportText&&F(v.finalReportText),v.standardKey&&se(v.standardKey)},ne=u.useMemo(()=>({standards:U,standardKey:n,setStandardKey:i,customStandards:t,addCustomStandard:ie,updateStandard:ee,resetStandard:J,auditInfo:o,setAuditInfo:a,privacySettings:d,setPrivacySettings:l,processes:c,activeProcessId:h,activeProcess:Y,setActiveProcessId:b,addProcess:z,renameProcess:te,deleteProcess:he,batchUpdateProcessClauses:D,toggleProcessClause:B,addInterviewee:ae,removeInterviewee:W,evidence:g,setEvidence:f,matrixData:j,setMatrixData:m,evidenceTags:k,addEvidenceTag:Z,selectedClauses:L,setSelectedClauses:M,knowledgeBase:$,knowledgeFileName:V,loadKnowledgeForStandard:se,clearKnowledge:xe,setKnowledgeData:je,analysisResult:R,setAnalysisResult:E,selectedFindings:I,setSelectedFindings:P,finalReportText:H,setFinalReportText:F,resetSession:w,restoreSession:Q}),[U,n,t,o,d,c,h,Y,g,j,k,L,$,V,R,I,H]);return e.jsx(et.Provider,{value:ne,children:s})},ce=()=>{const s=u.useContext(et);if(!s)throw new Error("useAudit must be used within AuditProvider");return s},tt=u.createContext(void 0),ss=({children:s})=>{const[t,r]=u.useState(!0);u.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const[n,i]=u.useState(1);u.useEffect(()=>{document.documentElement.style.setProperty("--font-scale",n.toString())},[n]);const[o,a]=u.useState(!0),[d,l]=u.useState(420),[c,p]=u.useState({settings:!1,about:!1,integrity:!1,recall:!1,addStandard:!1,privacy:!1}),h=(g,f)=>{p(j=>({...j,[g]:f??!j[g]}))},[b,x]=u.useState(null),y=g=>x(g);return e.jsx(tt.Provider,{value:{isDarkMode:t,toggleDarkMode:()=>r(g=>!g),fontSizeScale:n,setFontSizeScale:i,isSidebarOpen:o,setSidebarOpen:a,sidebarWidth:d,setSidebarWidth:l,modals:c,toggleModal:h,toastMsg:b,showToast:y},children:s})},me=()=>{const s=u.useContext(tt);if(!s)throw new Error("useUI must be used within UIProvider");return s},st=u.createContext(void 0),is=({children:s})=>{const[t,r]=u.useState([]),[n,i]=u.useState(""),o=u.useRef([]);u.useEffect(()=>{o.current=t},[t]),u.useEffect(()=>{try{const b=localStorage.getItem("iso_api_keys"),x=b?JSON.parse(b):[],y=new Set(x.map(j=>j.key));let g=!1;$e.forEach((j,m)=>{j&&!y.has(j)&&(x.push({id:`env_key_${m}`,label:`Default Key ${m+1}`,key:j,status:"valid",latency:0,lastChecked:new Date().toISOString()}),g=!0)}),x.forEach(j=>{j.activeModel==="gemini-1.5-flash"&&(j.activeModel="gemini-2.0-flash-exp",g=!0)}),r(x),g&&localStorage.setItem("iso_api_keys",JSON.stringify(x));const f=localStorage.getItem("iso_active_key_id");f&&x.some(j=>j.id===f)?i(f):x.length>0&&i(x[0].id)}catch(b){console.error("Key Load Error",b)}},[]);const a=async(b,x)=>{if(!b.trim())return"empty";if(t.some(f=>f.key===b.trim()))return"duplicate";const y={id:Date.now().toString(),label:x||`Key ${t.length+1}`,key:b.trim(),status:"valid",activeModel:"gemini-2.0-flash-exp",latency:0,lastChecked:new Date().toISOString()},g=[...t,y];return r(g),localStorage.setItem("iso_api_keys",JSON.stringify(g)),t.length===0&&(i(y.id),localStorage.setItem("iso_active_key_id",y.id)),"valid"},d=b=>{const x=t.filter(y=>y.id!==b);if(r(x),localStorage.setItem("iso_api_keys",JSON.stringify(x)),n===b){const y=x[0],g=y?y.id:"";i(g),g?localStorage.setItem("iso_active_key_id",g):localStorage.removeItem("iso_active_key_id")}},l=async()=>{},c=async()=>{},p=()=>{},h=u.useCallback(()=>t.find(b=>b.id===n),[t,n]);return e.jsx(st.Provider,{value:{apiKeys:t,activeKeyId:n,isCheckingKey:!1,addKey:a,deleteKey:d,refreshKeyStatus:l,checkAllKeys:c,getActiveKey:h,isAutoCheckEnabled:!1,toggleAutoCheck:p,setActiveKeyId:i},children:s})},Ae=()=>{const s=u.useContext(st);if(!s)throw new Error("useKeyPool must be used within KeyPoolProvider");return s},Ge={BookOpen:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),e.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Quote:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2H4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8Z"}),e.jsx("path",{d:"M14 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2h-4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8Z"})]}),TDLogo:e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"tealNeonGrad",x1:"100%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#00f2c3",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"#0098f0",stopOpacity:"1"})]})}),e.jsx("path",{d:"M 20 20 H 65 L 55 30 H 30 V 65 L 20 75 V 20 Z",fill:"url(#tealNeonGrad)"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M 40 40 H 60 C 75 40, 85 50, 85 65 C 85 80, 75 90, 60 90 H 35 L 45 80 H 60 C 70 80, 75 75, 75 65 C 75 55, 70 50, 60 50 H 50 V 40 Z",fill:"url(#tealNeonGrad)"}),e.jsx("path",{d:"M 30 65 L 60 35",stroke:"white",strokeWidth:"0.5",strokeOpacity:"0.3"})]}),TDSolidLink:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"future_td_grad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#06b6d4"})," ",e.jsx("stop",{offset:"50%",stopColor:"#6366f1"})," ",e.jsx("stop",{offset:"100%",stopColor:"#f59e0b"})," "]}),e.jsxs("filter",{id:"glow_td",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"0.6",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("path",{d:"M5 6H11V18H14C17.866 18 21 15.3137 21 12C21 8.68629 17.866 6 14 6H11",stroke:"url(#future_td_grad)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#glow_td)"})]}),Grid:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]}),Session1_SparklePlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 3v18"}),e.jsx("path",{d:"M3 12h18"}),e.jsx("path",{d:"m15 9-6 6"}),e.jsx("path",{d:"m9 9 6 6"}),e.jsx("path",{d:"M12 2v4"}),e.jsx("path",{d:"m4.93 4.93 2.83 2.83"}),e.jsx("path",{d:"M2 12h4"}),e.jsx("path",{d:"m4.93 19.07 2.83-2.83"}),e.jsx("path",{d:"M12 22v-4"}),e.jsx("path",{d:"m19.07 19.07-2.83-2.83"}),e.jsx("path",{d:"M22 12h-4"}),e.jsx("path",{d:"m19.07 4.93-2.83 2.83"})]}),Session2_PlayCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polygon",{points:"10 8 16 12 10 16 10 8"})]}),Session3_Rocket:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"}),e.jsx("path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),e.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.1 4-1 4-1"}),e.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.1-1.62 1-4 1-4"})]}),Session4_FilePlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),e.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),Session5_RefreshCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e.jsx("path",{d:"M3 3v5h5"}),e.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),e.jsx("path",{d:"M16 21h5v-5"})]}),Session6_Zap:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Session7_Compass:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"})]}),Session8_Flag:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),e.jsx("line",{x1:"4",y1:"22",x2:"4",y2:"15"})]}),Session9_DoorOpen:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),e.jsx("path",{d:"M2 20h3"}),e.jsx("path",{d:"M13 20h9"}),e.jsx("path",{d:"M10 12v.01"}),e.jsx("path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z"})]}),Session10_Pulse:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),Session11_GridAdd:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),e.jsx("path",{d:"M3 17.5h7"}),e.jsx("path",{d:"M6.5 14v7"})]}),Session12_CleanSheet:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),e.jsx("path",{d:"M3 9h18"})]}),Session13_PowerBtn:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),e.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]}),Demo1_MultiFiles:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M3 15h6"}),e.jsx("path",{d:"M6 12v6"}),e.jsx("path",{d:"M16 18l2-2 2 2"}),e.jsx("path",{d:"M18 16v6"})]}),Demo2_CloudAdd:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 13v8"}),e.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),e.jsx("path",{d:"M16 17l-4-4-4 4"})]}),Demo3_FolderUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"}),e.jsx("path",{d:"M12 10v6"}),e.jsx("path",{d:"m9 13 3-3 3 3"})]}),Demo4_ImgStack:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"}),e.jsx("line",{x1:"16",y1:"5",x2:"22",y2:"5"}),e.jsx("line",{x1:"19",y1:"2",x2:"19",y2:"8"}),e.jsx("circle",{cx:"9",cy:"9",r:"2"}),e.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Demo5_Clip:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"}),e.jsx("path",{d:"M12 12h.01"})]}),Demo6_BoxUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),e.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),e.jsx("line",{x1:"12",y1:"12.01",x2:"12",y2:"22.08"}),e.jsx("polyline",{points:"16 12 12 8 8 12"})]}),Demo7_PlusCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M8 12h8"}),e.jsx("path",{d:"M12 8v8"})]}),Demo8_GridPlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}),e.jsx("path",{d:"M14 17h7"}),e.jsx("path",{d:"M17.5 13.5v7"})]}),Demo9_DocUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M12 18v-6"}),e.jsx("path",{d:"m9 15 3-3 3 3"})]}),Demo10_Layers:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}),e.jsx("path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}),e.jsx("path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"}),e.jsx("path",{d:"M12 8v4"})]}),Demo11_Scan:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),e.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),e.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),e.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),e.jsx("path",{d:"M7 12h10"}),e.jsx("path",{d:"M12 8v8"})]}),Demo12_Attach:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m4.5 16.5 7-7"}),e.jsx("path",{d:"m2 2 20 20"}),e.jsx("path",{d:"m12 12 7-7"}),e.jsx("path",{d:"M17 17v5"}),e.jsx("path",{d:"M22 12h-5"})]}),Demo13_Meteor:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m13 4 8.2 2.5a2 2 0 0 1 1.3 2.5L20 17.5"}),e.jsx("path",{d:"m8.5 7.5 10 10"}),e.jsx("path",{d:"M2 13.5V19a2 2 0 0 0 2 2h5.5"}),e.jsx("path",{d:"m13.5 8.5-5 5"}),e.jsx("path",{d:"M7 15c-1.5 1-2 2.5-2 2.5s1.5.5 2.5-2"}),e.jsx("path",{d:"M12 4V2"}),e.jsx("path",{d:"m16 6 2-2"}),e.jsx("path",{d:"M8 6 6 4"})]}),Sparkle:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:"text-amber-400 drop-shadow-[0_0_4px_rgba(252,211,77,0.7)] animate-pulse-slow",children:e.jsx("path",{d:"M12 2L14.4 9.6L22 12L14.4 14.4L12 22L9.6 14.4L2 12L9.6 9.6L12 2Z"})}),FilePlus2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M3 15h6"}),e.jsx("path",{d:"M6 12v6"})]}),History:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e.jsx("path",{d:"M3 3v5h5"}),e.jsx("path",{d:"M12 7v5l4 2"})]}),LayoutList:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}),e.jsx("path",{d:"M14 4h7"}),e.jsx("path",{d:"M14 9h7"}),e.jsx("path",{d:"M14 15h7"}),e.jsx("path",{d:"M14 20h7"})]}),Tag:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),FileEdit:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l1-3.95 5.42-5.44Z"})]}),Book:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),FileShield:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M12 13v7"}),e.jsx("path",{d:"M8.5 16.5c2 1 5 1 7 0"})]}),Users:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Lock:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),Cpu:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),e.jsx("rect",{x:"9",y:"9",width:"6",height:"6"}),e.jsx("path",{d:"M15 2v2"}),e.jsx("path",{d:"M15 20v2"}),e.jsx("path",{d:"M2 15h2"}),e.jsx("path",{d:"M2 9h2"}),e.jsx("path",{d:"M20 15h2"}),e.jsx("path",{d:"M20 9h2"}),e.jsx("path",{d:"M9 2v2"}),e.jsx("path",{d:"M9 20v2"})]}),CheckThick:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),CheckSquare:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"9 11 12 14 22 4"}),e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-3-2V5a2 2 0 0 1 2-2h11"})]}),Square:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})}),FileText:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"})]}),Search:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Trash2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("path",{d:"M14 11v6"})]}),ChevronDown:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})}),ChevronUp:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"18 15 12 9 6 15"})}),ChevronLeft:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"15 18 9 12 15 6"})}),ChevronRight:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"9 18 15 12 9 6"})}),Wand2:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z"}),e.jsx("path",{d:"m14 7 3 3"}),e.jsx("path",{d:"M5 6v4"}),e.jsx("path",{d:"M19 14v4"}),e.jsx("path",{d:"M10 2v2"}),e.jsx("path",{d:"M7 8H3"}),e.jsx("path",{d:"M21 16h-4"}),e.jsx("path",{d:"M11 3H9"})]}),AlertCircle:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),CheckCircle2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{d:"m9 12 2 2 4-4"})]}),Save:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),e.jsx("polyline",{points:"7 3 7 8 15 8"})]}),ExpandPanel:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"15 3 21 3 21 9"}),e.jsx("polyline",{points:"9 21 3 21 3 15"}),e.jsx("line",{x1:"21",y1:"3",x2:"14",y2:"10"}),e.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}),CollapsePanel:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"4 14 10 14 10 20"}),e.jsx("polyline",{points:"20 10 14 10 14 4"}),e.jsx("line",{x1:"14",y1:"10",x2:"21",y2:"3"}),e.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}),X:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Copy:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),e.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),Download:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-3-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Sun:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),RefreshCw:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 2v6h-6"}),e.jsx("path",{d:"M3 12a9 9 0 0 1 15-6.7L21 8"}),e.jsx("path",{d:"M3 22v-6h6"}),e.jsx("path",{d:"M21 12a9 9 0 0 1-15 6.7L3 16"})]}),Lightbulb:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 18h6"}),e.jsx("path",{d:"M10 22h4"}),e.jsx("path",{d:"M12 2v2"}),e.jsx("path",{d:"M12 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),e.jsx("path",{d:"M9 10a3 3 0 0 1 3-3 3 3 0 0 1 3 3v2H9z"})]}),AIIndicator:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:e.jsx("path",{d:"M12 2L14.4 9.6L22 12L14.4 14.4L12 22L9.6 14.4L2 12L9.6 9.6L12 2Z"})}),UploadCloud:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),e.jsx("path",{d:"M12 12v9"}),e.jsx("path",{d:"m16 16-4-4-4 4"})]}),Image:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),e.jsx("circle",{cx:"9",cy:"9",r:"2"}),e.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Info:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Settings:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Plus:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Minus:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})}),Key:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"m21 2-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0 3 3L22 7l-3-3m-3.5 3.5L19 4"})}),Loader:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-spin",children:e.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Keyboard:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2"}),e.jsx("path",{d:"M6 8h.01"}),e.jsx("path",{d:"M10 8h.01"}),e.jsx("path",{d:"M14 8h.01"}),e.jsx("path",{d:"M18 8h.01"}),e.jsx("path",{d:"M6 12h.01"}),e.jsx("path",{d:"M10 12h.01"}),e.jsx("path",{d:"M14 12h.01"}),e.jsx("path",{d:"M18 12h.01"}),e.jsx("path",{d:"M7 16h10"})]}),TextSize:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5h7v2"}),e.jsx("path",{d:"M6.5 5v14"}),e.jsx("path",{d:"M14 13v-2h7v2"}),e.jsx("path",{d:"M17.5 11v8"})]}),AuditUser:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"}),e.jsx("path",{d:"M22 22 18 18 16 20 20 24 24 20Z"})]}),ScanText:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5c0-1.1.9-2 2-2h2"}),e.jsx("path",{d:"M17 3h2c1.1 0 2 .9 2 2v2"}),e.jsx("path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2"}),e.jsx("path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2"}),e.jsx("path",{d:"M7 12h.01"}),e.jsx("path",{d:"M10 12h4"}),e.jsx("path",{d:"M17 12h.01"}),e.jsx("path",{d:"M12 7v10"})]}),Building:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2"}),e.jsx("path",{d:"M9 22v-4c0-1.1.9-2 2-2h2c1.1 0 2 .9 2 2v4"}),e.jsx("path",{d:"M8 6h.01"}),e.jsx("path",{d:"M16 6h.01"}),e.jsx("path",{d:"M12 6h.01"}),e.jsx("path",{d:"M12 10h.01"}),e.jsx("path",{d:"M12 14h.01"}),e.jsx("path",{d:"M12 18h.01"})]}),User:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Snowflake:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),e.jsx("line",{x1:"12",x2:"12",y2:"22"}),e.jsx("path",{d:"m20 16-4-4 4-4"}),e.jsx("path",{d:"m4 8 4 4-4 4"}),e.jsx("path",{d:"m16 4-4 4-4-4"}),e.jsx("path",{d:"m8 20 4-4 4 4"})]}),CheckLineart:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Mic:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),e.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),e.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),e.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}),ShieldEye:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),e.jsx("path",{d:"M12 8c-2.5 0-4.5 1.5-6 4 1.5 2.5 3.5 4 6 4s4.5-1.5 6-4c-1.5-2.5-3.5-4-6-4z"}),e.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]}),MapPin:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),Fence:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 6v14"}),e.jsx("path",{d:"M12 6v14"}),e.jsx("path",{d:"M20 6v14"}),e.jsx("path",{d:"M2 10h20"}),e.jsx("path",{d:"M2 16h20"})]}),Target:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("circle",{cx:"12",cy:"12",r:"6"}),e.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),FileSearch:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),e.jsx("path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3"}),e.jsx("path",{d:"m9 18-1.5-1.5"}),e.jsx("circle",{cx:"5",cy:"14",r:"3"})]}),Mail:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),e.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),Phone:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),Globe:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}),e.jsx("path",{d:"M2 12h20"})]})},C=({name:s,size:t=18,className:r="",onClick:n})=>{const i=Ge[s]||Ge.AlertCircle;if(ge.isValidElement(i)){const o=i;return ge.cloneElement(o,{width:t,height:t,className:`${r} ${o.props.className||""}`,onClick:n})}return e.jsx("span",{className:r,onClick:n,children:i})},He=({icon:s,iconColor:t,value:r,onChange:n,options:i,defaultText:o,onIconClick:a,iconTitle:d,id:l})=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:`absolute left-3 top-1/2 -translate-y-1/2 transition-all duration-300 z-10 flex items-center justify-center ${a?"cursor-pointer pointer-events-auto hover:scale-110 active:scale-95":"pointer-events-none"}`,onClick:c=>{a&&(c.stopPropagation(),a(c))},title:d,children:e.jsx("div",{className:t,children:e.jsx(C,{name:s,size:16})})}),e.jsxs("select",{id:l,value:r,onChange:n,className:`w-full appearance-none pl-10 pr-8 py-3 bg-gray-50 dark:bg-slate-950 border border-gray-100 dark:border-slate-800 rounded-xl text-xs font-normal outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all cursor-pointer shadow-sm hover:border-indigo-200 dark:hover:border-slate-600 hover:shadow-md dark:shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)] ${r?"text-slate-700 dark:text-slate-300":"text-gray-400"}`,children:[e.jsx("option",{value:"",disabled:!0,children:o}),i.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400 group-hover:text-indigo-500 transition-colors duration-300",children:e.jsx(C,{name:"ChevronDown",size:14})})]}),Le=({icon:s,iconColor:t,placeholder:r,value:n,onChange:i,className:o=""})=>e.jsxs("div",{className:`relative group ${o}`,children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none transition-colors duration-300",children:e.jsx("div",{className:t,children:e.jsx(C,{name:s,size:16})})}),e.jsx("input",{type:"text",placeholder:r,value:n,onChange:i,className:"w-full pl-10 pr-3 py-3 bg-gray-50 dark:bg-slate-950 border border-gray-100 dark:border-slate-800 rounded-xl text-xs font-normal text-slate-700 dark:text-slate-300 placeholder-gray-400 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all shadow-sm hover:border-indigo-200 dark:hover:border-slate-600 hover:shadow-md dark:shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)]"})]}),Ee=({isOpen:s,title:t,onClose:r,children:n})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-[300] flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:r,children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-3xl shadow-2xl border border-gray-100 dark:border-slate-800 transform transition-all animate-zoom-in-spring duration-300 overflow-hidden dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_10px_15px_-3px_rgba(0,0,0,0.5)]",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-lg font-black text-slate-800 dark:text-white tracking-tight",children:t}),e.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/20 transition-all duration-300 text-slate-400 hover:rotate-90",children:e.jsx(C,{name:"X",size:20})})]}),e.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto custom-scrollbar",children:n})]})}):null,rs=({message:s,onClose:t})=>{const[r,n]=u.useState(!1),[i,o]=u.useState(!1),a=()=>{n(!0),setTimeout(()=>t(),400)};return u.useEffect(()=>{o(!0);const h=setTimeout(a,4e3);return()=>clearTimeout(h)},[t]),e.jsx("div",{className:`fixed z-[9999] w-[90vw] max-w-sm md:w-auto md:max-w-md bottom-10 left-1/2 -translate-x-1/2 transition-all duration-500 ease-spring ${i?r?"opacity-0 scale-95 translate-y-8":"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-8"}`,children:e.jsxs("div",{className:"bg-slate-900/95 dark:bg-white/95 backdrop-blur-md text-white dark:text-slate-900 px-4 py-3 md:px-5 md:py-4 rounded-2xl shadow-2xl flex items-start gap-3 md:gap-4 border border-slate-700/50 dark:border-slate-200/50",children:[e.jsx("div",{className:"flex-shrink-0 p-1.5 bg-emerald-500 rounded-full text-white shadow-lg shadow-emerald-500/30 mt-0.5",children:e.jsx(C,{name:"CheckLineart",size:14})}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-60 leading-none mb-1",children:"System Notification"}),e.jsx("span",{className:"text-xs md:text-sm font-bold leading-snug break-words",children:s})]}),e.jsx("button",{onClick:a,className:"flex-shrink-0 -mr-2 -mt-2 p-2 text-slate-500 hover:text-white dark:hover:text-slate-900 transition-colors rounded-full hover:bg-white/10 dark:hover:bg-black/5",children:e.jsx(C,{name:"X",size:16})})]})})},li=({className:s})=>e.jsxs("div",{className:`flex items-center justify-center gap-1 ${s}`,children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-3 w-3 rounded-full bg-indigo-400 opacity-75"}),e.jsx(C,{name:"Sparkle",size:16,className:"animate-spin-slow text-yellow-300"})]}),ns=({message:s})=>e.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-slate-900/95 backdrop-blur-md z-50 flex flex-col items-center justify-center animate-in fade-in duration-500",children:[e.jsxs("div",{className:"relative w-28 h-28 mb-8",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-indigo-100 dark:border-indigo-900 rounded-full opacity-50"}),e.jsx("div",{className:"absolute inset-0 border-t-4 border-indigo-600 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-4 border-4 border-purple-100 dark:border-purple-900 rounded-full opacity-50"}),e.jsx("div",{className:"absolute inset-4 border-r-4 border-purple-500 rounded-full animate-spin-reverse"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"bg-gradient-to-tr from-indigo-500 to-purple-500 p-4 rounded-full shadow-lg shadow-indigo-500/50 animate-pulse",children:e.jsx(C,{name:"Wand2",className:"text-white",size:28})})}),e.jsx("div",{className:"absolute top-0 left-1/2 w-2 h-2 bg-cyan-400 rounded-full shadow-[0_0_10px_#22d3ee] animate-ping"})]}),e.jsx("h3",{className:"text-lg font-black text-slate-800 dark:text-white mb-2 animate-pulse px-4 text-center max-w-[80%]",children:s}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-mono flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Gemini AI Processing..."]})]}),os=({fontSizeScale:s,adjustFontSize:t})=>{const[r,n]=u.useState(!1),[i,o]=u.useState(null),a=u.useRef(null),d=l=>{if(l.stopPropagation(),!r&&a.current){const c=a.current.getBoundingClientRect(),p=window.innerWidth-c.right;o({top:c.bottom+8,right:p}),n(!0)}else n(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("button",{ref:a,onClick:d,className:`p-2 rounded-xl transition-all duration-300 shadow-sm ${r?"bg-indigo-100 text-indigo-700 dark:bg-slate-700 dark:text-indigo-400 scale-105":"bg-gray-50 dark:bg-slate-800 text-slate-700 dark:text-slate-200 hover:bg-indigo-50 hover:text-indigo-600"}`,title:"Adjust Font Size",children:e.jsx(C,{name:"TextSize",size:18})}),r&&i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[99] cursor-default",onClick:()=>n(!1)}),e.jsxs("div",{className:"fixed z-[100] flex items-center bg-white dark:bg-slate-900 rounded-full p-1.5 shadow-2xl border border-gray-200 dark:border-slate-700 animate-zoom-in-spring min-w-[140px] justify-between",style:{top:`${i.top}px`,right:`${i.right}px`},onClick:l=>l.stopPropagation(),children:[e.jsx("button",{onClick:()=>t("decrease"),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full text-slate-500 hover:text-indigo-600 transition-all duration-200 flex-shrink-0 active:scale-90",children:e.jsx(C,{name:"Minus",size:16})}),e.jsxs("span",{className:"text-sm font-black text-slate-800 dark:text-white select-none px-2 w-12 text-center",children:[(s*100).toFixed(0),"%"]}),e.jsx("button",{onClick:()=>t("increase"),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full text-slate-500 hover:text-indigo-600 transition-all duration-200 flex-shrink-0 active:scale-90",children:e.jsx(C,{name:"Plus",size:16})})]})]})]})},as=()=>{const{isSidebarOpen:s,setSidebarOpen:t,toggleModal:r,fontSizeScale:n,setFontSizeScale:i,isDarkMode:o,toggleDarkMode:a}=me(),{standards:d,standardKey:l,privacySettings:c}=ce(),{getActiveKey:p}=Ae(),h=p(),b=u.useMemo(()=>Object.values(c).some(m=>m===!0),[c]),x="flex items-center gap-2 px-3 py-1.5 rounded-full border shadow-sm backdrop-blur-md transition-all duration-300",y="text-[10px] font-black uppercase tracking-widest leading-none",g=u.useMemo(()=>{if(!h)return{status:"offline",dotColor:"bg-slate-300 dark:bg-slate-600",borderColor:"border-slate-200 dark:border-slate-700 text-slate-500",tooltip:"AI Offline: No API Key Configured"};const m=h.activeModel||"Unknown";let k="GEMINI";return m.includes("2.0-flash")?k="Flash 2.0":m.includes("3-pro")?k="Pro 3.0":m.includes("lite")&&(k="Flash Lite"),h.status==="valid"?{status:"online",dotColor:"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.6)] animate-pulse",borderColor:"border-emerald-200 dark:border-emerald-800/50 bg-emerald-50/50 dark:bg-emerald-900/10 text-emerald-700 dark:text-emerald-400",tooltip:`AI Ready: ${k}`}:h.status==="quota_exceeded"?{status:"warning",dotColor:"bg-orange-500",borderColor:"border-orange-200 dark:border-orange-800 bg-orange-50/50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400",tooltip:"Quota Exceeded: Switching to backup model..."}:{status:"error",dotColor:"bg-red-500",borderColor:"border-red-200 dark:border-red-800 bg-red-50/50 dark:bg-red-900/20 text-red-600 dark:text-red-400",tooltip:"Connection Error: Check API Key"}},[h]),f=u.useMemo(()=>{var A;const m=((A=d[l])==null?void 0:A.name)||"",k=m.match(/\((.*?)\)/);return k?k[1]:m.split(" ")[0]||"ISO"},[l,d]),j=u.useMemo(()=>{const m=f.toUpperCase();return m.includes("EMS")||m.includes("14001")?"bg-emerald-50/50 dark:bg-emerald-900/10 text-emerald-700 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800/50":m.includes("QMS")||m.includes("9001")?"bg-blue-50/50 dark:bg-blue-900/10 text-blue-700 dark:text-blue-400 border-blue-200 dark:border-blue-800/50":m.includes("ISMS")||m.includes("27001")?"bg-purple-50/50 dark:bg-purple-900/10 text-purple-700 dark:text-purple-400 border-purple-200 dark:border-purple-800/50":"bg-slate-50/50 dark:bg-slate-800/50 text-slate-600 dark:text-slate-400 border-slate-200 dark:border-slate-700"},[f]);return e.jsxs("header",{className:"flex-shrink-0 px-4 md:px-6 py-0 border-b border-white/50 dark:border-slate-800 bg-white/70 dark:bg-slate-900/80 backdrop-blur-xl shadow-glass z-[70] relative flex justify-between items-center h-16 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center h-full gap-4 md:gap-6",children:[e.jsx("div",{className:"relative group cursor-pointer flex items-center justify-center active:scale-95 transition-transform",onClick:()=>t(!s),title:"Toggle Sidebar",children:e.jsx("div",{className:"relative w-10 h-10 flex items-center justify-center",children:s?e.jsxs("div",{className:"relative w-8 h-8",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-transparent border-t-indigo-500 border-b-cyan-500 rounded-full animate-infinity-spin drop-shadow-md"}),e.jsx("div",{className:"absolute inset-2 border-2 border-transparent border-l-purple-500 border-r-pink-500 rounded-full animate-spin-reverse drop-shadow-sm"})]}):e.jsx("div",{className:"transform group-hover:scale-110 transition-transform duration-300 drop-shadow-[0_0_10px_rgba(99,102,241,0.5)]",children:e.jsx(C,{name:"TDLogo",size:32})})})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("h1",{className:"hidden md:block text-lg font-extrabold tracking-tight text-slate-800 dark:text-white leading-none",children:["ISO Audit ",e.jsx("span",{className:"font-light text-slate-400",children:"Pro"})]}),e.jsxs("div",{className:"hidden lg:flex items-center gap-2",children:[e.jsxs("div",{onClick:()=>r("settings",!0),className:`${x} ${g.borderColor} cursor-pointer hover:shadow-md hover:-translate-y-0.5 active:scale-95`,title:g.tooltip,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${g.dotColor}`}),e.jsx("span",{className:y,children:"AI"})]}),e.jsxs("div",{className:`${x} ${j}`,children:[e.jsx(C,{name:"Book",size:10,className:"opacity-70"}),e.jsx("span",{className:y,children:f})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>r("privacy",!0),className:`p-2 rounded-xl transition-all active:scale-95 border ${b?"text-emerald-600 bg-emerald-50 border-emerald-200 dark:bg-emerald-900/20 dark:border-emerald-800 dark:text-emerald-400 shadow-sm":"text-slate-400 hover:text-slate-600 hover:bg-slate-100 border-transparent dark:hover:bg-slate-800"}`,title:b?"Privacy Shield Active":"Configure Privacy Shield",children:e.jsx(C,{name:"ShieldEye",size:18})}),e.jsx("div",{className:"hidden lg:block w-px h-6 bg-slate-200 dark:bg-slate-700 mx-1"}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(os,{fontSizeScale:n,adjustFontSize:m=>i(k=>m==="increase"?Math.min(k+.1,1.3):Math.max(k-.1,.8))})}),e.jsx("button",{onClick:a,className:"p-2 rounded-xl text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-800 transition-all active:scale-95",children:e.jsx(C,{name:o?"Sun":"Moon",size:18})}),e.jsx("button",{onClick:()=>r("about",!0),className:"p-2 rounded-xl text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all active:scale-95",title:"About & Release Notes",children:e.jsx(C,{name:"Info",size:18})})]})]})},qe=({icon:s,iconColor:t,placeholder:r,value:n,onChange:i,className:o="",rows:a=2})=>e.jsxs("div",{className:`relative group ${o}`,children:[e.jsx("div",{className:"absolute left-3 top-3 pointer-events-none transition-colors duration-300",children:e.jsx("div",{className:t,children:e.jsx(C,{name:s,size:16})})}),e.jsx("textarea",{placeholder:r,value:n,onChange:i,rows:a,className:"w-full pl-10 pr-3 py-3 bg-gray-50 dark:bg-slate-950 border border-gray-100 dark:border-slate-800 rounded-xl text-sm font-normal text-slate-700 dark:text-slate-300 placeholder-gray-400 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all shadow-sm hover:border-indigo-200 dark:hover:border-slate-600 hover:shadow-md dark:shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)] resize-y min-h-[44px]"})]}),ls=({onAddNewStandard:s,onOpenIntegrity:t,onKnowledgeUpload:r,health:n,auditFieldIconColor:i,standardOptions:o})=>{var je;const{standardKey:a,setStandardKey:d,auditInfo:l,setAuditInfo:c,standards:p,knowledgeFileName:h,clearKnowledge:b,processes:x,activeProcessId:y,setActiveProcessId:g,addProcess:f,renameProcess:j,deleteProcess:m}=ce(),{showToast:k}=me(),A=u.useRef(null),L=u.useRef(null),M=u.useRef(null),$=u.useRef(!1),[O,V]=u.useState(""),[N,R]=u.useState(null),[E,I]=u.useState(""),[P,H]=u.useState(!1),[F,U]=u.useState(!1),Y=!!h,oe=!!a&&a!=="ADD_NEW",ie=Y?"BookOpen":"Book",ee=u.useMemo(()=>{var w;return a&&((w=p[a])==null?void 0:w.name.includes("27001"))},[a,p]);let J="text-gray-300 dark:text-slate-600",z="Please select an ISO Standard first to enable document upload.",te="cursor-not-allowed";Y?(J="text-emerald-500 drop-shadow-sm",z=`Source Attached: ${h}. Click to Replace.`,te="cursor-pointer"):oe&&(J=`${i} hover:text-indigo-600 dark:hover:text-indigo-300`,z="Click to upload Source PDF or Word (DOCX) for better accuracy",te="cursor-pointer hover:scale-110 active:scale-95");const he=()=>{oe&&A.current&&A.current.click()},re=w=>{w.target.files&&w.target.files.length>0&&(r(w),w.target.value="")},D=w=>{if(w.key==="Enter"){w.preventDefault();const Q=O.trim();if(Q){const ne=x.find(v=>v.name.toLowerCase()===Q.toLowerCase());ne?(g(ne.id),k(`Switched to: ${ne.name}`),U(!1),V(""),H(!1)):($.current=!0,f(Q),V(""),U(!0),H(!0),setTimeout(()=>{M.current&&(M.current.scrollTop=M.current.scrollHeight),L.current&&L.current.focus(),$.current=!1},50))}else U(!1)}else w.key==="Escape"&&(U(!1),V(""))},B=()=>{$.current||O.trim()||U(!1)},ae=(w,Q,ne)=>{w.stopPropagation(),w.preventDefault();const v=x.find(S=>S.id===Q);if(v){const S=v.evidence&&v.evidence.trim().length>0,T=Object.keys(v.matrixData).some(G=>v.matrixData[G].some(K=>K.evidenceInput&&K.evidenceInput.trim().length>0)),_=v.uploadedFiles&&v.uploadedFiles.length>0;S||T||_?window.confirm(`Delete process "${ne}"? 

 WARNING: This process contains evidence/files that will be permanently lost.`)&&(m(Q),k(`Deleted: ${ne}`)):(m(Q),k(`Deleted: ${ne}`))}},W=w=>{R(w.id),I(w.name)},Z=()=>{N&&E.trim()&&(j(N,E.trim()),k("Renamed successfully")),R(null)},se=u.useMemo(()=>x.filter(w=>w.name&&w.name.trim()!==""),[x]),xe=((je=se.find(w=>w.id===y))==null?void 0:je.name)||"Select Process";return e.jsxs("div",{className:"bg-gray-50/80 dark:bg-slate-900/50 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm p-3 space-y-4 w-full",children:[e.jsx("input",{type:"file",ref:A,accept:".pdf,.docx,.doc,.txt",className:"hidden",onChange:re}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:"Audit Standard"}),e.jsxs("div",{className:"relative group/source",children:[e.jsx(He,{id:"sidebar-standard-select",icon:ie,iconColor:`${J} transition-all duration-300 ${te}`,value:a,onChange:w=>{w.target.value==="ADD_NEW"?s():d(w.target.value)},options:o,defaultText:"Select ISO Standard",onIconClick:he,iconTitle:z}),Y&&e.jsx("button",{onClick:w=>{w.stopPropagation(),b()},className:"absolute right-9 top-1/2 -translate-y-1/2 p-1.5 text-slate-400 hover:text-red-500 bg-transparent hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full transition-all z-20 active:scale-95",title:"Remove Source File",children:e.jsx(C,{name:"Trash2",size:14})}),a&&e.jsx("button",{onClick:t,className:`absolute -top-1.5 -right-1.5 p-1 rounded-full shadow-lg transition-all hover:scale-110 active:scale-95 text-white ring-2 ring-white dark:ring-slate-900 ${n.isHealthy?"bg-emerald-500":"bg-orange-500"}`,title:"Integrity Check",children:e.jsx(C,{name:n.isHealthy?"CheckCircle2":"AlertCircle",size:10})})]}),e.jsx(He,{icon:"FileEdit",iconColor:i,value:l.type,onChange:w=>c({...l,type:w.target.value}),options:Object.keys(qt).map(w=>({value:w,label:w})),defaultText:"Select Audit Type"})]}),e.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700/50"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:"Organization Context"}),e.jsxs("div",{className:"grid grid-cols-[1.5fr_1fr] gap-2",children:[e.jsx(Le,{icon:"Building",iconColor:i,placeholder:"Company Name",value:l.company,onChange:w=>c({...l,company:w.target.value})}),e.jsx(Le,{icon:"Tag",iconColor:i,placeholder:"SMO/ID",value:l.smo,onChange:w=>c({...l,smo:w.target.value})})]}),e.jsx(qe,{icon:"MapPin",iconColor:i,placeholder:"Site Address / Locations...",value:l.address||"",onChange:w=>c({...l,address:w.target.value}),rows:2}),e.jsx(qe,{icon:"Target",iconColor:i,placeholder:"Audit Scope Description...",value:l.scope||"",onChange:w=>c({...l,scope:w.target.value}),rows:3}),ee&&e.jsx("div",{className:"animate-in fade-in slide-in-from-top-2",children:e.jsx(Le,{icon:"FileShield",iconColor:"text-purple-600 dark:text-purple-400",placeholder:"SoA Version / Reference (e.g. v2.0 2024)",value:l.soa||"",onChange:w=>c({...l,soa:w.target.value})})}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsx("label",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 uppercase",children:"Process Management"}),e.jsxs("span",{className:"text-[9px] text-slate-400 dark:text-slate-500 font-mono",children:[se.length," Items"]})]}),se.length===0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative group w-full",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none text-indigo-600 dark:text-indigo-400 group-focus-within:text-indigo-500",children:e.jsx(C,{name:"Plus",size:16})}),e.jsx("input",{ref:L,type:"text",value:O,placeholder:"Enter Process/Department...",onChange:w=>V(w.target.value),onKeyDown:D,className:"w-full pl-10 pr-3 py-2.5 bg-white dark:bg-slate-950 border border-indigo-100 dark:border-slate-700 rounded-xl text-xs font-bold text-slate-700 dark:text-slate-300 placeholder-indigo-300 dark:placeholder-slate-600 outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/10 transition-all shadow-sm",autoComplete:"off"})]}),e.jsxs("div",{className:"text-center py-4 text-[10px] text-red-400 font-bold bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800 animate-pulse",children:["! ACTION REQUIRED ",e.jsx("br",{})," ",e.jsx("span",{className:"font-normal text-slate-500",children:"Create a Process to Start"})]})]}):e.jsxs("div",{className:"relative",children:[e.jsxs("div",{onClick:()=>{F||H(!P)},className:`w-full flex items-center justify-between p-3 rounded-xl border cursor-pointer transition-all duration-200 ${P||F?"border-indigo-500 ring-1 ring-indigo-500 bg-white dark:bg-slate-900 shadow-md z-20":"bg-white dark:bg-slate-950 border-gray-100 dark:border-slate-800 hover:border-indigo-300 dark:hover:border-slate-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden flex-1",children:[e.jsx(C,{name:"Session11_GridAdd",size:16,className:"text-indigo-600 dark:text-indigo-400"}),F?e.jsx("input",{ref:L,autoFocus:!0,value:O,onChange:w=>V(w.target.value),onKeyDown:D,onBlur:B,placeholder:"Type Name & Enter to Add...",className:"bg-transparent border-none outline-none text-xs font-bold text-slate-800 dark:text-white placeholder-slate-400 w-full",onClick:w=>w.stopPropagation(),autoComplete:"off"}):e.jsx("span",{className:"text-xs font-bold truncate text-slate-700 dark:text-slate-300",children:xe})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!F&&e.jsx("div",{className:`p-1 rounded-full ${P?"bg-indigo-100 text-indigo-600 dark:bg-slate-800 dark:text-indigo-400":"hover:bg-gray-100 dark:hover:bg-slate-800 text-slate-400"}`,title:"Add New Process",onClick:w=>{w.stopPropagation(),H(!0),U(!0),V(""),setTimeout(()=>{var Q;return(Q=L.current)==null?void 0:Q.focus()},50)},children:e.jsx(C,{name:"Plus",size:14})}),F&&e.jsx("div",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400 hover:text-red-500",title:"Cancel / Close",onClick:w=>{w.stopPropagation(),U(!1),V("")},children:e.jsx(C,{name:"X",size:14})}),e.jsx(C,{name:"ChevronDown",size:14,className:`transition-transform duration-300 text-slate-400 ${P?"rotate-180":""}`})]})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${P?"max-h-[300px] opacity-100 mt-2":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"p-1 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-xl shadow-xl space-y-1",children:e.jsx("div",{ref:M,className:"max-h-[200px] overflow-y-auto custom-scrollbar px-1 space-y-1 pb-1 pt-1 scroll-smooth",children:se.map(w=>{const Q=y===w.id,ne=N===w.id;return e.jsxs("div",{className:`group flex items-center justify-between p-2 rounded-lg cursor-pointer transition-all ${Q?"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-900/30":"hover:bg-gray-50 dark:hover:bg-slate-800 border border-transparent"}`,onClick:()=>{ne||(g(w.id),F||H(!1))},children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden flex-1",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full flex-shrink-0 ${Q?"bg-indigo-500":"bg-slate-300 dark:bg-slate-700"}`}),ne?e.jsx("input",{autoFocus:!0,className:"w-full min-w-0 bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-xs font-bold px-1 py-0.5 rounded outline-none border border-indigo-300",value:E,onChange:v=>I(v.target.value),onKeyDown:v=>v.key==="Enter"&&Z(),onBlur:Z,onClick:v=>v.stopPropagation()}):e.jsx("span",{className:`text-xs truncate font-bold ${Q?"text-indigo-700 dark:text-indigo-300":"text-slate-600 dark:text-slate-400"}`,children:w.name})]}),!ne&&e.jsxs("div",{className:"flex items-center gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{type:"button",onClick:v=>{v.preventDefault(),v.stopPropagation(),W(w)},className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-md",title:"Rename",children:e.jsx(C,{name:"FileEdit",size:12})}),e.jsx("button",{type:"button",onClick:v=>ae(v,w.id,w.name),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md",title:"Delete",children:e.jsx(C,{name:"Trash2",size:12})})]})]},w.id)})})})})]})]})]}),e.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700/50"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:"Auditor"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.jsx(Le,{icon:"AuditUser",iconColor:i,placeholder:"Lead Auditor Name",value:l.auditor,onChange:w=>c({...l,auditor:w.target.value})})})]})]})},ds=({isOpen:s,onClose:t,health:r,isCustomStandard:n,onResetStandard:i,onAutoRepair:o,isRepairing:a,repairStats:d})=>e.jsx(Ee,{isOpen:s,title:"Standard Health Index",onClose:t,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-5 p-5 rounded-3xl bg-gray-50 dark:bg-slate-800 border border-gray-100 dark:border-slate-700 shadow-inner dark:shadow-[inset_0_2px_6px_rgba(0,0,0,0.4)]",children:[e.jsxs("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white text-2xl font-black shadow-xl ring-4 ring-white dark:ring-slate-700 ${r.score>90?"bg-gradient-to-br from-emerald-400 to-emerald-600":"bg-gradient-to-br from-orange-400 to-orange-600"}`,children:[r.score,"%"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-black text-slate-900 dark:text-slate-100 uppercase tracking-tight",children:"Data Health"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-snug mt-1",children:r.isHealthy?"Excellent! Data is accurate, clean, and complete for professional use.":"Standard data is incomplete or missing Source verification."})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Integrity Checklist"}),[...r.integrity,...r.completeness].map((l,c)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 rounded-2xl shadow-sm dark:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-1.5 rounded-full shadow-sm ${l.status==="pass"?"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20":"text-red-500 bg-red-50 dark:bg-red-900/20"}`,children:e.jsx(C,{name:l.status==="pass"?"CheckCircle2":"AlertCircle",size:18})}),e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:l.label})]}),e.jsx("span",{className:`text-[10px] font-black px-3 py-1 rounded-full shadow-sm uppercase ${l.status==="pass"?"text-emerald-700 bg-emerald-100":"text-red-700 bg-red-100"}`,children:l.detail})]},c))]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-slate-700 flex flex-col md:flex-row items-center justify-center gap-3",children:[n&&e.jsxs("button",{onClick:i,className:"px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 dark:bg-red-900/20 dark:hover:bg-red-900/40 dark:text-red-400 rounded-xl font-bold text-xs flex items-center gap-2 transition-all active:scale-95 border border-red-200 dark:border-red-800",children:[e.jsx(C,{name:"Trash2",size:14}),"Reset to Default"]}),d?e.jsxs("div",{className:"flex items-center gap-3 animate-in fade-in slide-in-from-right-5",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-bold text-emerald-600 uppercase",children:"Repair Complete"}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Added ",d.fixed," items, Cleaned ",d.cleaned," dupes."]})]}),e.jsx("button",{onClick:t,className:"px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl font-bold text-xs shadow-lg shadow-emerald-500/30",children:"Close & Continue"})]}):!r.isHealthy&&e.jsxs("button",{onClick:o,disabled:a,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-xs flex items-center gap-2 shadow-lg shadow-indigo-500/30 transition-all active:scale-95 disabled:opacity-70 disabled:active:scale-100",children:[a?e.jsx(C,{name:"Loader",className:"animate-spin"}):e.jsx(C,{name:"Wand2"}),a?"AI is Fixing...":"Auto-Repair Issues with AI"]})]})]})}),cs=(s,t,r,n)=>{const[i,o]=u.useState(s),[a,d]=u.useState(!1),l=u.useRef(null),c=u.useRef(s),p=u.useCallback(()=>d(!0),[]),h=u.useCallback(()=>d(!1),[]);return u.useEffect(()=>{a||(o(s),c.current=s)},[s,a]),u.useEffect(()=>{const b=y=>{if(a&&l.current){const g=Math.max(t,Math.min(y.clientX,r));c.current=g,l.current.style.width=`${g}px`}},x=()=>{a&&(h(),document.body.style.cursor="",document.body.style.userSelect="",o(c.current),n&&n(c.current))};return a&&(window.addEventListener("mousemove",b),window.addEventListener("mouseup",x),document.body.style.cursor="col-resize",document.body.style.userSelect="none"),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",x),document.body.style.cursor="",document.body.style.userSelect=""}},[a,t,r,h,n]),{width:i,isResizing:a,sidebarRef:l,startResizing:p}},us=(s,t,r)=>u.useMemo(()=>{if(!t||!s[t])return{isHealthy:!1,score:0,integrity:[],completeness:[]};const n=s[t],i=[],o=[],a=n.groups.flatMap(m=>m.clauses),d=m=>m.reduce((k,A)=>(k.push(A),A.subClauses&&k.push(...d(A.subClauses)),k),[]),l=d(a),c=l.filter(m=>!m.description||m.description.trim().length<2).length;i.push({label:"Content Quality",status:c===0?"pass":"fail",detail:c===0?"Descriptions OK":`${c} incomplete`});const p=new Set(l.map(m=>m.code)),h=l.length-p.size;if(i.push({label:"Data Cleanliness",status:h===0?"pass":"fail",detail:h===0?"Clean":`${h} Duplicates`}),r&&r.length>1e3){let m=0;const k=l.slice(0,20);k.forEach(M=>{r.includes(M.code)||m++});const A=m/k.length,L=A<.2;o.push({label:"Source Verification",status:L?"pass":"fail",detail:L?"Matches Document":`${(A*100).toFixed(0)}% Clauses Missing in Source`})}else o.push({label:"Source Verification",status:"fail",detail:"No Source Document Linked"});if(t.includes("9001")&&["8.4","8.6","8.7","7.1.4"].forEach(k=>{const A=l.some(L=>L.code===k);o.push({label:`Clause ${k}`,status:A?"pass":"fail",detail:A?"Present":"Missing (Required)"})}),t.includes("27001")){const m=l.filter(A=>A.code.startsWith("A.")),k=m.length>=90;o.push({label:"Annex A Controls",status:k?"pass":"fail",detail:k?`${m.length} Controls (OK)`:`${m.length}/93 (Incomplete)`})}const b=i.every(m=>m.status==="pass"),x=o.every(m=>m.status==="pass"),y=b&&x,g=i.length+o.length,f=i.filter(m=>m.status==="pass").length+o.filter(m=>m.status==="pass").length,j=Math.round(f/(g||1)*100);return{isHealthy:y,score:j,integrity:i,completeness:o}},[s,t,r]),ps=s=>{s&&(navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(s).catch(()=>Je(s)):Je(s))},Je=s=>{const t=document.createElement("textarea");t.value=s,t.style.position="fixed",t.style.left="-9999px",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(r){console.error(r)}document.body.removeChild(t)},di=s=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(s),n.onload=()=>t(n.result.split(",")[1]),n.onerror=i=>r(i)}),hs=async s=>{if(!window.pdfjsLib)throw new Error("PDF.js library not loaded");const t=await s.arrayBuffer(),r=await window.pdfjsLib.getDocument({data:t}).promise;let n="";for(let i=1;i<=r.numPages;i++){const d=(await(await r.getPage(i)).getTextContent()).items.map(l=>l.str).join(" ");n+=d+`

`}return n},Fe=async s=>{let t="";try{if(s.name.toLowerCase().endsWith(".pdf"))t=await hs(s);else if(s.name.toLowerCase().endsWith(".docx")){if(typeof mammoth>"u")throw new Error("Mammoth library missing");const r=await s.arrayBuffer();t=(await mammoth.extractRawText({arrayBuffer:r})).value}else{if(s.name.toLowerCase().endsWith(".doc"))throw new Error("Legacy Word (.doc) files are not supported due to browser limitations. Please save your file as .docx and try again.");t=await s.text()}if(!t||t.length<50)throw new Error("File content is too short or empty.");return t}catch(r){throw console.error("File processing error:",r),new Error(`Failed to parse ${s.name}: ${r.message}`)}},xs=s=>{if(!s)return null;let t=s.trim();t.startsWith("```")&&(t=t.replace(/^```(json)?/,"").replace(/```$/,""));const r=t.indexOf("["),n=t.indexOf("{"),i=t.lastIndexOf("]"),o=t.lastIndexOf("}");r!==-1&&i!==-1&&(n===-1||r<n)?t=t.substring(r,i+1):n!==-1&&o!==-1&&(t=t.substring(n,o+1));try{return JSON.parse(t)}catch{return console.error("JSON Parse Error on text:",t),null}},Re=s=>s?s.replace(/[^a-zA-Z0-9\s]/g,"").trim().replace(/\s+/g,"_").substring(0,30):"N_A",ci=(s,t)=>{let r="",n=!1;return t.forEach(i=>{const o=s[i];o&&o.some(a=>a.status==="supplied")&&(n=!0,r+=`
### EVIDENCE MATRIX FOR CLAUSE ${i}
`,r+=`| Requirement | Verified Evidence |
`,r+=`| :--- | :--- |
`,o.forEach(a=>{a.evidenceInput.trim()&&(r+=`| ${a.requirement.replace(/\|/g,"-")} | ${a.evidenceInput.replace(/\|/g,"-").replace(/\n/g," ")} |
`)}),r+=`
`)}),n?r:""},gs=s=>{let t=2166136261;for(let r=0;r<s.length;r++)t^=s.charCodeAt(r),t=Math.imul(t,16777619);return(t>>>0).toString(16)};async function ms(s,t,r=3){const n=[],i=[];for(const c of s){const p=t(c).then(h=>n.push(h));i.push(p),i.length>=r&&await Promise.race(i)}const o=[...s],a=[],d=async()=>{for(;o.length>0;){const c=o.shift();if(c){const p=await t(c);a.push(p)}}},l=Array(Math.min(s.length,r)).fill(null).map(()=>d());return await Promise.all(l),a}const _e={ANALYSIS:{id:"default_analysis",label:"Standard Analysis",description:"Strict ISO compliance check based on evidence.",isSystemDefault:!0,template:`
        Analyze the provided EVIDENCE against ISO Standard "{{STANDARD_NAME}}", Clause "{{CLAUSE_CODE}}: {{CLAUSE_TITLE}}".
        Clause Requirement: {{CLAUSE_DESC}}
        
        CONTEXT (Retrieved from Knowledge Base):
        """
        {{RAG_CONTEXT}}
        """

        EVIDENCE SECTIONS:
        """
        {{EVIDENCE}}
        """
        
        CROSS-REFERENCE CHECK:
        Check if this evidence also relates to other common ISO standards (like ISO 9001 if auditing 27001, or vice versa).

        HIERARCHY & GROUPING RULE (SMART AUDIT):
        1. **Parent-Child Inheritance:** If evaluating a parent clause (e.g., Clause 6), evidence found in its sub-clauses (e.g., 6.1, 6.2, 6.3) in the 'BROADER CONTEXT' section MUST be considered valid evidence for the parent.
        2. **PDCA Context:** If evidence exists in other clauses within the same PDCA phase (Plan/Do/Check/Act) that satisfies the intent of this clause, mark as COMPLIANT.
        3. **Missing Evidence:** Only mark as NC (Non-Conformity) if evidence is missing from DIRECT EVIDENCE **AND** BROADER CONTEXT **AND** GENERAL PROCESS EVIDENCE.

        DETERMINE:
        1. Status (COMPLIANT, NC_MINOR, NC_MAJOR, OFI, or N_A).
        2. Reason (Why? Be specific based on evidence. If Compliant via sub-clause, state "Compliance demonstrated via evidence in Clause X").
        3. **reason_en**: The Reason/Observation in clear professional English.
        4. **reason_vi**: The Reason/Observation translated into professional Vietnamese.
        5. Evidence Quote (Verbatim support, or summary of related clause evidence).
        6. Suggestion (If NC or OFI).
        7. CrossRefs (Array of strings, e.g. ["ISO 9001: 7.5.3"]).
        
        Output a SINGLE JSON Object.
        `},REPORT:{id:"system_integration_report_v3_process_grouped",label:"Process-Based Integration Format",description:"Plain Text format grouped by Process with Auditor info.",isSystemDefault:!0,template:`
        ROLE: ISO Audit Data Processor.
        TASK: Convert audit findings into a STRICT PLAIN TEXT format for legacy system integration, GROUPED BY PROCESS.

        CRITICAL FORMATTING RULES:
        1. OUTPUT MUST BE PLAIN TEXT ONLY.
        2. **GROUPING:** All findings must be grouped under their respective PROCESS Name.
        3. **HEADER:** Start each process section with:
           "PROCESS: [Process Name]"
           "AUDITOR: {{AUDITOR}}"
        4. CRITICAL: For 'VERIFIED_EVIDENCE', you MUST output the EXACT, FULL text provided in the input JSON for that finding. 
           - Do NOT summarize, truncate, or reformat. 
           - KEEP ALL original line breaks, bullet points, and spacing exactly as they appear in the source.
        5. Use exactly "====================" (20 dashes) as a separator between clauses.

        REQUIRED STRUCTURE:

        PROCESS: [Process Name]
        AUDITOR: {{AUDITOR}}
        INTERVIEWEES: [List of names if available]

        [Repeat for each finding in this process]
        CLAUSE_ID: [Code]
        CLAUSE_TITLE: [Title]
        STATUS: [Status]
        FINDING_DETAIL: [Reasoning]
        VERIFIED_EVIDENCE:
        [...Insert the exact full raw text of the evidence here, preserving all line breaks...]
        ====================

        INPUT CONTEXT:
        Entity: {{COMPANY}}
        Standard: {{STANDARD_NAME}}
        Auditor: {{AUDITOR}}
        Target Language: {{LANGUAGE}}

        FINDINGS DATA (Aggregated by Process):
        {{FINDINGS_JSON}}

        FULL EVIDENCE CONTEXT:
        """
        {{FULL_EVIDENCE_CONTEXT}}
        """
        `}};class fs{constructor(){Ie(this,"prompts");this.prompts={..._e},this.loadUserOverrides()}loadUserOverrides(){try{const t=localStorage.getItem("iso_prompt_overrides");if(t){const r=JSON.parse(t);this.prompts={...this.prompts,...r}}}catch(t){console.error("Failed to load prompt overrides",t)}}getPrompt(t){return this.prompts[t]||_e[t]}updatePrompt(t,r){this.prompts[t]={...this.prompts[t],template:r,isSystemDefault:!1},localStorage.setItem("iso_prompt_overrides",JSON.stringify(this.prompts))}resetToDefault(t){this.prompts[t]={..._e[t]},localStorage.setItem("iso_prompt_overrides",JSON.stringify(this.prompts))}hydrate(t,r){let n=t;for(const[i,o]of Object.entries(r)){const a=new RegExp(`{{${i}}}`,"g");n=n.replace(a,o||"")}return n}}const we=new fs,bs="ISO_VECTOR_DB",be="vectors",vs=1,ys=(s,t)=>{let r=0,n=0,i=0;for(let o=0;o<s.length;o++)r+=s[o]*t[o],n+=s[o]*s[o],i+=t[o]*t[o];return r/(Math.sqrt(n)*Math.sqrt(i))};class ks{constructor(){Ie(this,"dbPromise",null)}openDB(){return this.dbPromise?this.dbPromise:(this.dbPromise=new Promise((t,r)=>{const n=indexedDB.open(bs,vs);n.onupgradeneeded=i=>{const o=i.target.result;o.objectStoreNames.contains(be)||o.createObjectStore(be,{keyPath:"id"}).createIndex("source","metadata.source",{unique:!1})},n.onsuccess=i=>t(i.target.result),n.onerror=i=>r(i.target.error)}),this.dbPromise)}async embedText(t,r){var n,i;if(!t||!t.trim())return null;try{return((i=(n=(await new ze({apiKey:r}).models.embedContent({model:"text-embedding-004",contents:{parts:[{text:t}]}})).embeddings)==null?void 0:n[0])==null?void 0:i.values)||null}catch(o){return console.error("Embedding Error",o),null}}async addDocuments(t,r,n){const i=r.match(/[\s\S]{1,800}/g)||[],d=(await this.openDB()).transaction([be],"readwrite").objectStore(be);let l=0;for(const c of i){const p=await this.embedText(c,n);if(p){const h={id:`${t}_${l++}_${Date.now()}`,text:c,embedding:p,metadata:{source:t,type:"standard_content"}};d.put(h)}await new Promise(h=>setTimeout(h,50))}}async search(t,r,n=4){const i=await this.embedText(t,r);if(!i)return"";const o=await this.openDB();return new Promise(a=>{const c=o.transaction([be],"readonly").objectStore(be).openCursor(),p=[];c.onsuccess=h=>{const b=h.target.result;if(b){const x=b.value,y=ys(i,x.embedding);y>.5&&p.push({text:x.text,score:y}),b.continue()}else{p.sort((y,g)=>g.score-y.score);const x=p.slice(0,n).map(y=>y.text).join(`

---

`);a(x)}}})}async clear(){(await this.openDB()).transaction([be],"readwrite").objectStore(be).clear()}}const js=new ks,ws={patterns:{email:/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,phoneVN:/(\+84|0)(3|5|7|8|9)([0-9]{8})\b/g,ipAddress:/\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b/g,potentialName:new RegExp("(?<!^|\\. |\\? |! )([A-Z][a-z]+ [A-Z][a-z]+)","g")},redact(s,t,r){if(!s)return"";let n=s;if(!t)return n;if(r){if(t.maskCompany&&r.company&&r.company.length>2){const i=r.company.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");n=n.replace(new RegExp(i,"gi"),"[COMPANY_REDACTED]")}if(t.maskSmo&&r.smo&&r.smo.length>2){const i=r.smo.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");n=n.replace(new RegExp(i,"gi"),"[SMO_REDACTED]")}if(t.maskPeople&&r.auditor&&r.auditor.length>2){const i=r.auditor.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");n=n.replace(new RegExp(i,"gi"),"[AUDITOR_REDACTED]")}}return t.maskEmail&&(n=n.replace(this.patterns.email,"[EMAIL_REDACTED]")),t.maskPhone&&(n=n.replace(this.patterns.phoneVN,"[PHONE_REDACTED]")),t.maskIP&&(n=n.replace(this.patterns.ipAddress,"[IP_REDACTED]")),t.maskAddress&&(n=n.replace(/\d+\s+[A-Za-z]+\s+(Street|St|Ave|Avenue|Road|Rd|Lane|Ln|Ward|District)/gi,"[ADDRESS_REDACTED]")),(n.toLowerCase().includes("salary")||n.toLowerCase().includes("lng"))&&(n=n.replace(/(\d{1,3}[,.]\d{3}[,.]\d{3}|\d{7,})/g,"[MONEY_REDACTED]")),n}},Me={NC_MAJOR:["systemic failure","total breakdown","missing process","khng c quy trnh","cha thit lp","critical","nghim trng"],NC_MINOR:["isolated","single instance","partial","not fully","cha y ","mt s","incomplete","li nh"],OFI:["improve","better","consider","cn nhc","ci tin","optimize","efficiency"],COMPLIANT:["conforms","available","maintained","ph hp","y ","tun th","verified","t"]},Xe={analyze(s,t,r){const n=r.toLowerCase();let i="N_A",o="Offline Analysis: Insufficient data to determine compliance.",a="",d={MAJOR:0,MINOR:0,OFI:0,COMPLIANT:0};Me.NC_MAJOR.forEach(c=>{n.includes(c)&&(d.MAJOR+=2)}),Me.NC_MINOR.forEach(c=>{n.includes(c)&&(d.MINOR+=1)}),Me.OFI.forEach(c=>{n.includes(c)&&(d.OFI+=1)}),Me.COMPLIANT.forEach(c=>{n.includes(c)&&(d.COMPLIANT+=1)}),d.MAJOR>0?(i="NC_MAJOR",o="Offline Analysis detected critical keywords indicating a systemic issue.",a="Review the entire process and establish missing controls immediately."):d.MINOR>d.COMPLIANT?(i="NC_MINOR",o="Offline Analysis detected potential gaps in implementation.",a="Investigate specific instances and correct them."):d.OFI>0?(i="OFI",o="Opportunities for improvement found in text.",a="Consider optimizing based on best practices."):d.COMPLIANT>0?(i="COMPLIANT",o="Evidence suggests requirements are met."):r.length>50&&(i="COMPLIANT",o="Offline Analysis: No obvious non-conformity keywords detected.");const l={clauseId:s,status:i,reason:o,evidence:r.substring(0,100)+"...",suggestion:a,conclusion_report:`[OFFLINE] ${o}`,crossRefs:[]};return JSON.stringify(l)},extractClauseContent(s,t,r){if(!s)return null;const n=s.replace(/\r\n/g,`
`).replace(/[ \t]+/g," "),i=t.replace(/\./g,"\\."),o=r.split(" ")[0].replace(/[^a-zA-Z0-9]/g,""),a=new RegExp(`(?:^|\\n)\\s*${i}\\.?\\s+.*${o}`,"i"),d=new RegExp(`(?:^|\\n)\\s*${i}\\.?\\s+`,"i");let l=n.match(a);if(l||(l=n.match(d)),l&&l.index!==void 0){const c=l.index,p=t.split(".").map(Number),h=p[p.length-1],b=[...p];b[b.length-1]=h+1;const x=b.join("\\."),y=(p[0]+1).toString(),g=n.substring(c+l[0].length),f=new RegExp(`(?:^|\\n)\\s*(${x}|${y}\\.|${y}\\s|Annex|Bibliography)`,"i"),j=g.match(f);let m="";if(j&&j.index!==void 0)m=l[0]+g.substring(0,j.index);else{const k=/(?:^|\n)\s*\d{1,2}\.\d{1,2}(\.\d{1,2})?\s+[A-Z]/,A=g.match(k);A&&A.index!==void 0&&A.index>50?m=l[0]+g.substring(0,A.index):m=l[0]+g.substring(0,3e3)}return m.trim()}return null}},Cs={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Ss={};const ve=s=>{let t=s;if(!t&&$e.length>0&&(t=$e[0]),!t)try{typeof import.meta<"u"}catch{}if(!t&&typeof process<"u"&&Ss&&(t=""),!t)try{const n=localStorage.getItem("iso_api_keys"),i=localStorage.getItem("iso_active_key_id");if(n){const o=JSON.parse(n);if(Array.isArray(o)&&o.length>0){const a=o.find(d=>d.id===i);t=a?a.key:o[0].key}}}catch{}const r=(t||"").trim();return r?new ze({apiKey:r}):null},it=new Map,Ns=s=>{const t=it.get(s);return t?Date.now()>t:!0},As=s=>{console.warn(`[Smart Rotator]  Model ${s} hit rate limit. Cooling down for 60s.`),it.set(s,Date.now()+6e4)},Es=s=>new Promise(t=>setTimeout(t,s)),ye=async(s,t,r)=>{const n=[s,...Ht],i=[...new Set(n)].filter(d=>d&&!d.includes("1.5"));let o=i.filter(d=>Ns(d));o.length===0&&(console.warn("[Smart Rotator] All models in cooldown. Forcing retry on fallback."),o=["gemini-2.0-flash-lite-preview-02-05",...i]);let a=null;for(const d of o)try{console.log(`[${t}]  Attempting with: ${d}...`);const l=await r(d);if(l&&l.text)return l.text}catch(l){a=l;const c=(l.message||"").toLowerCase(),p=l.status||l.code||0;if(console.warn(`[${t}]  Failed on ${d}: ${c}`),p===429||c.includes("exhausted")||c.includes("too many requests"))As(d);else{if(p===403||c.includes("key not valid")||c.includes("api_key_invalid"))throw new Error("Invalid API Key. Please check your settings.");p===404||c.includes("not found")}await Es(500)}throw new Error(`All AI models failed. Last error: ${(a==null?void 0:a.message)||"Unknown"}`)},Is=async s=>{const t=s?s.trim().replace(/^["']|["']$/g,""):"";if(!t)return{isValid:!1,latency:0,errorType:"invalid",errorMessage:"Key is empty"};const r=new ze({apiKey:t}),n=["gemini-2.0-flash","gemini-3-flash-preview"];for(const i of n){const o=performance.now();try{return await r.models.generateContent({model:i,contents:{parts:[{text:"Hi"}]}}),{isValid:!0,latency:Math.round(performance.now()-o),activeModel:i}}catch(a){if((a.message||"").toLowerCase().includes("key")||a.status===403)return{isValid:!1,latency:0,errorType:"invalid",errorMessage:"Invalid API Key."}}}return{isValid:!0,latency:999,activeModel:"gemini-2.0-flash"}},rt=async(s,t,r,n,i,o,a=!1)=>{if(!navigator.onLine)return Xe.analyze(s.code,s.title,r);const d=ve(i);if(!d)throw new Error("API Key missing");const l=`${s.code} ${s.title} ${s.description}`,c=i||"",p=await js.search(l,c);let h=r+`

TAGGED SECTIONS:
`+n;a&&(h=ws.redact(h));const b=we.getPrompt("ANALYSIS"),x=we.hydrate(b.template,{STANDARD_NAME:t,CLAUSE_CODE:s.code,CLAUSE_TITLE:s.title,CLAUSE_DESC:s.description,RAG_CONTEXT:p||"No source document available for vector search.",EVIDENCE:h}),y={responseMimeType:"application/json",responseSchema:{type:de.OBJECT,properties:{clauseId:{type:de.STRING},status:{type:de.STRING,enum:["COMPLIANT","NC_MINOR","NC_MAJOR","OFI","N_A"]},reason:{type:de.STRING},reason_en:{type:de.STRING},reason_vi:{type:de.STRING},suggestion:{type:de.STRING},evidence:{type:de.STRING},conclusion_report:{type:de.STRING},crossRefs:{type:de.ARRAY,items:{type:de.STRING}}},required:["clauseId","status","reason","evidence"]}};try{return await ye(o||Ze,"Analysis",f=>d.models.generateContent({model:f,contents:x,config:y}))||"{}"}catch(g){return console.error("All Analysis Models Failed",g),Xe.analyze(s.code,s.title,r)}},Ls=async(s,t,r)=>{const n=ve(t);if(!n)throw new Error("API Key missing");const i=`
    ROLE: ISO Technical Reviewer.
    TASK: Critique this finding:
    Clause: ${s.clauseId} (${s.status})
    Evidence: "${s.evidence}"
    Reason: "${s.reason}"
    
    Output max 100 words critique.
    `;try{return await ye(r||"gemini-2.0-flash","Shadow Review",o=>n.models.generateContent({model:o,contents:i}))}catch{return"Review unavailable (API Error)."}},nt=async(s,t,r)=>{const n=ve(t);if(!n)throw new Error("API Key missing");const i=`
    ROLE: ISO Lead Auditor.
    TASK: Write a professional Executive Summary for an ISO Audit Report.
    
    CONTEXT:
    Company: ${s.company}
    Address: ${s.address||"N/A"}
    Audit Scope: ${s.scope||"N/A"}
    Statement of Applicability (SoA): ${s.soa||"N/A"}
    Standard: ${s.standard}
    Audit Type: ${s.type}
    Auditor: ${s.auditor}
    
    FINDINGS SUMMARY:
    Total Findings: ${s.findings.length}
    Major NCs: ${s.findings.filter(o=>o.status==="NC_MAJOR").length}
    Minor NCs: ${s.findings.filter(o=>o.status==="NC_MINOR").length}
    OFIs: ${s.findings.filter(o=>o.status==="OFI").length}
    
    LANGUAGE: ${s.lang==="vi"?"Vietnamese":"English"}
    
    OUTPUT FORMAT: Plain Text. Concise paragraphs covering:
    1. Overall Compliance Status.
    2. Confirmation of Audit Scope and Site Address (Confirm if scope was covered adequately).
    3. Key Strengths.
    4. Major Areas for Improvement.
    5. Recommendation for Certification (Yes/No/Conditional).
    `;try{return await ye(r||"gemini-3-pro-preview","Exec Summary",o=>n.models.generateContent({model:o,contents:i}))}catch{return"Executive Summary could not be generated."}},ot=async(s,t,r,n)=>{const i=ve(r);if(!i||!navigator.onLine)return`
        CLAUSE: ${s.clauseId}
        STATUS: ${s.status}
        FINDING: ${s.reason}
        EVIDENCE:
        ${s.evidence}
        `;const o=`
    ROLE: Audit Reporter.
    TASK: Format this single audit finding into a final report section.
    LANGUAGE: ${t==="vi"?"Vietnamese":"English"}
    
    INPUT:
    Clause: ${s.clauseId}
    Status: ${s.status}
    Observation: "${s.reason_vi&&t==="vi"?s.reason_vi:s.reason}"
    Evidence Block:
    """
    ${s.evidence}
    """
    
    RULES:
    1. Polish the 'Observation' to be professional.
    2. CRITICAL: For 'Verified Evidence', print the content of 'Evidence Block' VERBATIM. 
       - DO NOT summarize.
       - DO NOT remove bullets, dashes, or line breaks. 
       - DO NOT reformat list items into paragraphs.
       - Keep it exactly as provided in the block.
    3. Output in Markdown.
    
    OUTPUT TEMPLATE:
    ### Clause ${s.clauseId} - ${s.status}
    **Observation:** [Polished Observation]
    **Verified Evidence:**
    [Insert Exact Evidence Block Here]
    `;try{return await ye("gemini-2.0-flash",`Report Section ${s.clauseId}`,a=>i.models.generateContent({model:a,contents:o}))}catch{return`### Clause ${s.clauseId}
Error formatting section. Raw data:
${s.reason}
${s.evidence}`}},Ms=async(s,t,r,n)=>{const i=ve(n);if(!i)throw new Error("API Key missing");const o={parts:[{inlineData:{mimeType:r,data:t}},{text:s}]};try{return await ye(Vt,"OCR",a=>i.models.generateContent({model:a,contents:o}))}catch{return""}},Rs=async(s,t,r)=>{if(!s.trim())return"";const n=ve(r);if(!n)throw new Error("API Key missing");const i=`Translate to ${t==="vi"?"Vietnamese":"English"}. Keep formatting.

${s}`;try{return await ye("gemini-2.0-flash","Translation",o=>n.models.generateContent({model:o,contents:i}))}catch{return s}},at=async s=>"[]",Ts=async(s,t,r,n)=>{const i=ve(n);if(!i)return{en:"API Key missing",vi:""};const o=`
    ROLE: ISO Standard Expert.
    TASK: Provide the full official text (or detailed summary if copyrighted) for:
    Standard: ${t}
    Clause: ${s.code} - ${s.title}
    
    CONTEXT (from user document):
    """
    ${r?r.substring(0,3e3):"No local context provided."}
    """

    OUTPUT: JSON Object with keys:
    - en: English text
    - vi: Vietnamese translation
    `;try{const a=await ye(Ze,"Fetch Clause Text",d=>i.models.generateContent({model:d,contents:o,config:{responseMimeType:"application/json"}}));return JSON.parse(a)}catch(a){return console.error("Fetch Clause Failed",a),{en:"Content unavailable due to API error.",vi:""}}},lt=async(s,t,r)=>{const n=ve();if(!n)return{};const i=r.length>5e4?r.substring(0,5e4)+"...":r,o=`
    ROLE: ISO Analyst.
    TASK: Map the following Clause Codes to their Description/Requirement text found in the document.
    
    STANDARD: ${s}
    CODES TO FIND: ${JSON.stringify(t)}
    
    DOCUMENT CONTENT:
    """
    ${i}
    """
    
    OUTPUT: JSON Object { "CODE": "Description text extracted from document" }.
    Only include found codes.
    `;try{const a=await ye("gemini-2.0-flash","Map Requirements",d=>n.models.generateContent({model:d,contents:o,config:{responseMimeType:"application/json"}}));return JSON.parse(a)}catch(a){return console.error("Mapping Failed",a),{}}},Ye=Object.freeze(Object.defineProperty({__proto__:null,fetchFullClauseText:Ts,formatFindingReportSection:ot,generateAnalysis:rt,generateExecutiveSummary:nt,generateMissingDescriptions:at,generateOcrContent:Ms,mapStandardRequirements:lt,performShadowReview:Ls,translateChunk:Rs,validateApiKey:Is},Symbol.toStringTag,{value:"Module"})),Ps=()=>{const{standards:s,standardKey:t,addCustomStandard:r,setKnowledgeData:n}=ce(),{showToast:i}=me(),[o,a]=u.useState(!1);return{handleKnowledgeUpload:async l=>{if(!l.target.files||l.target.files.length===0)return;const c=l.target.files[0];a(!0);try{i("Processing document...");const p=await Fe(c);if(p.length<100&&i("Warning: Document text is very short."),t){await Be.saveDocument(t,c.name,p);const h=s[t];if(h){i("Analyzing document structure (this may take 30s)...");const b=[],x=j=>j.forEach(m=>{b.push(m),m.subClauses&&x(m.subClauses)});h.groups.forEach(j=>x(j.clauses));const y=b.map(j=>j.code),g=10;let f={};for(let j=0;j<y.length;j+=g){const m=y.slice(j,j+g),k=Math.round(j/y.length*100);k>0&&i(`Mapping content: ${k}%`);try{const A=await lt(h.name,m,p);f={...f,...A}}catch(A){console.warn("Batch mapping failed",A)}}if(Object.keys(f).length>0){const j=JSON.parse(JSON.stringify(h)),m=k=>{k.forEach(A=>{f[A.code]&&(A.description=f[A.code]),A.subClauses&&m(A.subClauses)})};j.groups.forEach(k=>m(k.clauses)),r(t,j),i(`Success! Enriched ${Object.keys(f).length} clauses.`)}else i("Analysis complete, but no matching clauses found.")}}n(p,c.name),l.target.value=""}catch(p){console.error("Knowledge Upload Error",p),i(`Upload Failed: ${p.message}`)}finally{a(!1)}},isProcessing:o}},Ds=()=>{const{standards:s,standardKey:t,updateStandard:r}=ce(),[n,i]=u.useState(!1),[o,a]=u.useState(null),[d,l]=u.useState([]);return{handleAutoRepair:async()=>{if(!(!t||!s[t])){i(!0),a(null);try{const p=JSON.parse(JSON.stringify(s[t])),h=[],b=[];let x=0;const y=g=>{g.forEach(f=>{(!f.description||f.description.trim().length<5)&&h.push({ref:f,code:f.code,title:f.title}),f.subClauses&&y(f.subClauses)})};if(p.groups.forEach(g=>y(g.clauses)),h.length>0){const g=h.map(m=>({code:m.code,title:m.title})),f=await at(g),j=xs(f);if(Array.isArray(j)){const m=j.reduce((k,A)=>(A.code&&A.description&&(k[A.code]=A.description),k),{});h.forEach(k=>{m[k.code]&&(k.ref.description=m[k.code],b.push(k.ref.id))})}}r(p),l(b),a({fixed:b.length,cleaned:x})}catch(p){console.error("Repair failed",p),alert("Failed to repair automatically. Check API Key.")}finally{i(!1)}}},isRepairing:n,repairStats:o,repairedIds:d}},_s=ge.memo(({isOpen:s,width:t,setWidth:r})=>{const[n,i]=u.useState(!0),{isResizing:o,sidebarRef:a,startResizing:d}=cs(t,300,800,r),{handleKnowledgeUpload:l}=Ps(),{handleAutoRepair:c,isRepairing:p,repairStats:h}=Ds(),{standards:b,standardKey:x,setStandardKey:y,resetStandard:g,auditInfo:f,knowledgeBase:j}=ce(),{modals:m,toggleModal:k}=me(),A=us(b,x,j),L=[...Object.keys(b).map(O=>({value:O,label:b[O].name})),{value:"ADD_NEW",label:"+ Add New Standard..."}],M=(()=>{let $=0;return x&&$++,f.type&&$++,f.company&&$++,f.auditor&&$++,Math.min(4,$)})();return e.jsxs("div",{ref:a,className:`${s?"border-r":"w-0 border-0 overflow-hidden"} flex flex-col bg-white dark:bg-slate-900 border-gray-200 dark:border-slate-800 shadow-2xl z-50 relative shrink-0 ${o?"transition-none":"transition-[width] duration-300 ease-soft"} h-full`,style:{width:s?window.innerWidth<768?"100%":t:0},children:[s&&e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1.5 cursor-col-resize hover:bg-indigo-500 transition-colors z-50 group resize-handle hidden md:block",onMouseDown:$=>{$.preventDefault(),d()}}),e.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 w-full md:min-w-[390px] flex flex-col transition-all duration-400 ease-soft overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between p-6 cursor-pointer group select-none hover:bg-gray-50 dark:hover:bg-slate-800/50 border-b border-gray-200 dark:border-slate-800",onClick:()=>i(!n),children:[e.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-500 transition-colors",children:[e.jsx(C,{name:"Session8_Flag",size:14,className:"text-indigo-500"}),"Audit Details"]}),e.jsxs("div",{className:"flex gap-4 items-center",onClick:$=>$.stopPropagation(),children:[e.jsx("div",{className:"flex gap-1 items-center",children:[1,2,3,4].map($=>e.jsx("div",{className:`w-3 h-1 rounded-full ${$<=M?"bg-indigo-500":"bg-gray-200 dark:bg-slate-700"}`},$))}),e.jsx(C,{name:"ChevronDown",size:14,className:`text-slate-400 transition-transform duration-300 ${n?"rotate-180":""}`})]})]}),e.jsx("div",{className:`flex-1 min-h-0 grid transition-all duration-300 ease-in-out ${n?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:e.jsx("div",{className:"overflow-hidden flex flex-col",children:e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 pt-2 pb-6",children:e.jsx(ls,{onAddNewStandard:()=>k("addStandard",!0),onOpenIntegrity:()=>k("integrity",!0),onKnowledgeUpload:l,health:A,auditFieldIconColor:"text-indigo-700 dark:text-indigo-400",standardOptions:L})})})})]}),e.jsx(ds,{isOpen:m.integrity,onClose:()=>k("integrity",!1),health:A,isCustomStandard:!!x&&!Qe[x],onResetStandard:()=>{g(x),k("integrity",!1)},onAutoRepair:c,isRepairing:p,repairStats:h})]})}),Os=({isOpen:s,onClose:t,settings:r,setSettings:n})=>{const i=d=>{n({...r,[d]:!r[d]})},o=d=>{n({maskCompany:d,maskSmo:d,maskPeople:d,maskEmail:d,maskPhone:d,maskAddress:d,maskIP:d})},a=(d,l,c,p)=>e.jsxs("div",{onClick:()=>i(l),className:`flex items-center justify-between p-3 rounded-xl border cursor-pointer transition-all ${r[l]?"bg-indigo-50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-800":"bg-white border-gray-100 dark:bg-slate-900 dark:border-slate-800 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${r[l]?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/40 dark:text-indigo-300":"bg-gray-100 text-slate-400 dark:bg-slate-800"}`,children:e.jsx(C,{name:c,size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-bold ${r[l]?"text-indigo-900 dark:text-indigo-100":"text-slate-600 dark:text-slate-400"}`,children:d}),e.jsx("p",{className:"text-[10px] text-slate-400",children:p})]})]}),e.jsx("div",{className:`w-10 h-5 rounded-full relative transition-colors ${r[l]?"bg-emerald-500":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white shadow-sm transition-all ${r[l]?"left-6":"left-1"}`})})]});return e.jsx(Ee,{isOpen:s,title:"Privacy Shield Configuration",onClose:t,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-2xl border border-indigo-100 dark:border-indigo-800 flex items-start gap-3",children:[e.jsx(C,{name:"ShieldEye",className:"text-indigo-600 dark:text-indigo-400 mt-1",size:24}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-indigo-900 dark:text-indigo-100",children:"Data Redaction Active"}),e.jsxs("p",{className:"text-xs text-indigo-700 dark:text-indigo-300 mt-1 leading-relaxed",children:["Selected information types will be replaced with placeholders (e.g., [EMAIL_REDACTED]) ",e.jsx("strong",{children:"before"})," sending data to the AI API. This processing happens entirely in your browser."]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pb-2",children:[e.jsx("button",{onClick:()=>o(!0),className:"text-[10px] font-bold text-indigo-600 hover:underline",children:"Select All"}),e.jsx("span",{className:"text-slate-300",children:"|"}),e.jsx("button",{onClick:()=>o(!1),className:"text-[10px] font-bold text-slate-500 hover:text-slate-700 hover:underline",children:"Clear All"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 max-h-[40vh] overflow-y-auto custom-scrollbar pr-1",children:[a("Company Name","maskCompany","Building","Matches exact name from Audit Charter"),a("SMO / ID","maskSmo","Tag","Matches SMO code from Audit Charter"),a("Person Names","maskPeople","Users","Matches Auditor & Interviewee names"),a("Emails","maskEmail","Mail","Standard email patterns"),a("Phone Numbers","maskPhone","Phone","Vietnamese & Intl phone patterns"),a("Addresses","maskAddress","MapPin","Street/District patterns"),a("IP Addresses","maskIP","Globe","IPv4 server addresses")]}),e.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-slate-800",children:e.jsx("button",{onClick:t,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/30 transition-all active:scale-95",children:"Save & Apply Shield"})})]})})},$s=({isOpen:s,onClose:t,onRestore:r})=>{const[n,i]=u.useState([]),[o,a]=u.useState(null);u.useEffect(()=>{s&&d()},[s]);const d=()=>{var h,b,x;try{const y=localStorage.getItem("iso_session_data");if(y){const f=JSON.parse(y),j=((h=f.evidence)==null?void 0:h.trim())||((b=f.selectedClauses)==null?void 0:b.length)>0||((x=f.auditInfo)==null?void 0:x.company);a(j?{id:"current_autosave",timestamp:Date.now(),label:"Latest Auto-Save",triggerType:"AUTO_SAVE",data:f}:null)}else a(null);const g=localStorage.getItem("iso_session_history");if(g){const f=JSON.parse(g);i(f.sort((j,m)=>m.timestamp-j.timestamp))}else i([])}catch(y){console.error("Failed to load session history",y)}},l=h=>new Date(h).toLocaleString(),c=h=>{let b=0;h.data.processes&&h.data.processes.length>0?b=h.data.processes.reduce((g,f)=>g+(f.evidence?f.evidence.length:0),0):h.data.scopes&&h.data.scopes.length>0?b=h.data.scopes.reduce((g,f)=>g+(f.evidence?f.evidence.length:0),0):h.data.evidence&&(b=h.data.evidence.length);const x=h.data.selectedClauses?h.data.selectedClauses.length:0,y=h.data.analysisResult?h.data.analysisResult.length:0;return e.jsxs("div",{className:"flex gap-3 mt-2 text-[10px] text-slate-500 font-mono",children:[e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(C,{name:"FileText",size:10})," ",b>0?`${(b/1024).toFixed(1)}KB Evid`:"No Evid"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(C,{name:"CheckSquare",size:10})," ",x," Clauses"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(C,{name:"Wand2",size:10})," ",y," Findings"]})]})},p=(h,b)=>e.jsxs("div",{onClick:()=>r(h),className:`group relative p-4 rounded-2xl border cursor-pointer transition-all duration-300 hover:scale-[1.02] active:scale-95 ${b?"bg-indigo-50/50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 ring-1 ring-indigo-500/20":"bg-white dark:bg-slate-900 border-gray-100 dark:border-slate-800 hover:border-indigo-300 dark:hover:border-indigo-700 hover:shadow-lg"}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[9px] font-black uppercase tracking-wider px-2 py-0.5 rounded-full ${b?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/30":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,children:b?"ACTIVE STATE":"BACKUP ARCHIVE"}),e.jsx("span",{className:"text-xs text-slate-400 font-mono",children:l(h.timestamp)})]})}),e.jsxs("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 truncate",children:[h.data.auditInfo.company||"Untitled Company",e.jsx("span",{className:"font-normal text-slate-400 mx-1",children:"|"}),h.data.auditInfo.type||"Untitled Audit"]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate mb-1",children:["Standard: ",Re(h.data.standardKey).replace(/_/g," ")]}),c(h),e.jsx("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"bg-indigo-600 text-white p-2 rounded-full shadow-xl",children:e.jsx(C,{name:"History",size:20})})})]},h.id);return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:t,children:e.jsxs("div",{className:"bg-white dark:bg-slate-950 w-full max-w-2xl rounded-3xl shadow-2xl border border-gray-200 dark:border-slate-800 overflow-hidden flex flex-col max-h-[85vh] animate-zoom-in-spring",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-900/50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(C,{name:"History",className:"text-indigo-500"}),"Session Time Machine"]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Select a restoration point. This will overwrite your current workspace."})]}),e.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-slate-800 text-slate-400 transition-colors",children:e.jsx(C,{name:"X",size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6 bg-gray-50/30 dark:bg-slate-950",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"Available Auto-Save"]}),o?p(o,!0):e.jsx("div",{className:"p-4 border border-dashed border-gray-300 dark:border-slate-700 rounded-xl text-center text-slate-400 text-xs italic",children:"No active auto-save data found."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(C,{name:"Lock",size:12}),"Backup Vault (Last 5 Resets)"]}),e.jsx("div",{className:"space-y-3",children:n.length>0?n.map(h=>p(h,!1)):e.jsxs("div",{className:"p-8 border border-dashed border-gray-300 dark:border-slate-700 rounded-xl text-center",children:[e.jsx(C,{name:"Archive",className:"mx-auto mb-2 text-slate-300",size:24}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Vault is empty."}),e.jsx("p",{className:"text-slate-400 text-xs",children:"Backups are created automatically when you start a New Session."})]})})]})]}),e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-slate-900 border-t border-gray-100 dark:border-slate-800 text-center",children:e.jsxs("p",{className:"text-[10px] text-slate-400",children:[e.jsx("span",{className:"font-bold text-indigo-500",children:"Pro Tip:"})," Backups are stored locally in your browser. Clearing cache will delete them."]})})]})}):null},Bs=({isOpen:s,onClose:t})=>{const[r,n]=u.useState(!1),[i,o]=u.useState("overview");if(u.useEffect(()=>{s&&(n(!1),o("overview"))},[s]),!s)return null;const a=[{id:"overview",label:"Overview",icon:"Session1_SparklePlus"},{id:"guide",label:"User Guide",icon:"BookOpen"},{id:"tech",label:"Architecture",icon:"Cpu"},{id:"changelog",label:"Releases",icon:"History"}],d=[{layer:"Frontend",tech:"React 19 + Vite",role:"Component Lifecycle, State Management",color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-900/20"},{layer:"Styling",tech:"Tailwind CSS",role:"Utility-first, Dark mode adaptive, Glassmorphism",color:"text-cyan-600 dark:text-cyan-400",bg:"bg-cyan-50 dark:bg-cyan-900/20"},{layer:"AI Engine",tech:"Google Gemini 3.0",role:"Reasoning, Analysis, Vision OCR",color:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-900/20"},{layer:"Storage",tech:"IndexedDB + LocalStorage",role:"Vector Store, Session Persistence",color:"text-purple-600 dark:text-purple-400",bg:"bg-purple-50 dark:bg-purple-900/20"}];return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[9999] p-4 fade-in",onClick:t,children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-2xl w-full max-w-5xl flex flex-col h-[90vh] md:h-[85vh] border border-white/20 dark:border-slate-700/50 transform transition-all scale-100 overflow-hidden relative",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"flex-shrink-0 relative overflow-hidden group border-b border-gray-100 dark:border-slate-800",children:[e.jsxs("div",{className:"absolute inset-0 bg-slate-900",children:[e.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-cyan-600/10 rounded-full blur-[80px] translate-y-1/2 -translate-x-1/2"})]}),e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-slate-400 hover:text-white z-50 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-all backdrop-blur-sm",children:e.jsx(C,{name:"X",size:20})}),e.jsxs("div",{className:"relative px-6 py-8 md:px-10 flex flex-col md:flex-row items-center md:items-start gap-8 z-10",children:[e.jsx("div",{className:"relative flex-shrink-0",children:e.jsx("div",{className:"relative w-24 h-24 rounded-full p-1 bg-gradient-to-br from-indigo-500 to-cyan-500 shadow-glow mx-auto md:mx-0",children:e.jsx("div",{className:"w-full h-full rounded-full overflow-hidden bg-slate-950 relative",children:r?e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-950",children:e.jsx(C,{name:"TDLogo",size:48})}):e.jsx("img",{src:"./author.png",alt:"Author",className:"w-full h-full object-cover",onError:()=>n(!0)})})})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsxs("h2",{className:"text-3xl md:text-4xl font-black text-white tracking-tight leading-tight mb-2 drop-shadow-md",children:["ISO Audit ",e.jsx("span",{className:"font-light opacity-80",children:"Pro"})]}),e.jsx("p",{className:"text-slate-300 text-sm font-medium mb-6 max-w-lg mx-auto md:mx-0 leading-relaxed opacity-90",children:"The AI-Powered Compliance Assistant leveraging Gemini 3.0 for intelligent, automated ISO auditing."}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center md:justify-start",children:a.map(l=>e.jsxs("button",{onClick:()=>o(l.id),className:`px-4 py-2 rounded-xl text-xs font-bold flex items-center gap-2 transition-all duration-300 backdrop-blur-md border ${i===l.id?"bg-white/20 border-white/30 text-white shadow-lg":"bg-slate-800/40 border-slate-700/50 text-slate-400 hover:bg-slate-800/60 hover:text-white"}`,children:[e.jsx(C,{name:l.icon,size:14})," ",l.label]},l.id))})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 md:p-10 bg-gray-50/50 dark:bg-slate-950 text-slate-800 dark:text-slate-200",children:[i==="overview"&&e.jsxs("div",{className:"animate-fade-in-up space-y-8",children:[e.jsxs("div",{className:"p-6 rounded-2xl bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:e.jsx(C,{name:"Session10_Pulse",size:100})}),e.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 border-b border-gray-100 dark:border-slate-800 pb-2",children:"System Status"}),e.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-y-3 gap-x-6 items-center relative z-10",children:[e.jsx("span",{className:"text-sm font-medium text-slate-500 text-right",children:"Version"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-mono font-bold text-indigo-600 dark:text-indigo-400 text-sm bg-indigo-50 dark:bg-indigo-900/20 px-2 py-0.5 rounded",children:["v",Ut]}),e.jsx("span",{className:"text-[10px] text-emerald-600 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-0.5 rounded font-bold uppercase",children:"Stable"})]}),e.jsx("span",{className:"text-sm font-medium text-slate-500 text-right",children:"Build"}),e.jsx("span",{className:"font-mono text-[10px] text-slate-500 break-words",children:Kt}),e.jsx("span",{className:"text-sm font-medium text-slate-500 text-right",children:"Engine"}),e.jsx("span",{className:"font-mono text-[10px] font-bold text-amber-600 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded w-fit",children:"Gemini 3.0 Pro / Flash"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Xt.map((l,c)=>e.jsxs("div",{className:"p-5 bg-white dark:bg-slate-900 rounded-2xl border border-gray-100 dark:border-slate-800 flex items-start gap-4 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl text-indigo-600 dark:text-indigo-400 shadow-sm",children:e.jsx(C,{name:l.icon,size:20})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-sm text-slate-900 dark:text-white mb-1",children:l.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed",children:l.desc})]})]},c))})]}),i==="guide"&&e.jsx("div",{className:"animate-fade-in-up space-y-8 max-w-3xl mx-auto",children:e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-indigo-500 rounded-full"})," Workflow"]}),e.jsx("div",{className:"space-y-4 relative pl-4 border-l-2 border-indigo-100 dark:border-indigo-900/50",children:[{title:"Context Setup",desc:"Select a Standard (ISO 9001/27001) via Sidebar. Upload a source PDF to enable Retrieval-Augmented Generation (RAG)."},{title:"Evidence Collection",desc:"Use the 'Audit' tab. Toggle between Document Mode (Unstructured) and Matrix Mode (Structured). Drop files directly onto matrix rows."},{title:"AI Analysis",desc:"Select clauses and click 'Analyze'. The engine uses a Dual-Stream approach to verify compliance against the standard."},{title:"Reporting",desc:"Review findings, refine conclusions, and generate the final report in Markdown or Plain Text."}].map((l,c)=>e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute -left-[25px] top-0 w-5 h-5 rounded-full bg-indigo-100 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 text-[10px] font-bold flex items-center justify-center border-2 border-white dark:border-slate-900",children:c+1}),e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200",children:l.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 leading-relaxed",children:l.desc})]},c))})]})}),i==="tech"&&e.jsx("div",{className:"animate-fade-in-up space-y-8",children:e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:d.map((l,c)=>e.jsxs("div",{className:"p-5 bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 rounded-2xl shadow-sm flex flex-col gap-3 hover:border-indigo-200 dark:hover:border-indigo-800 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-50 dark:border-slate-800/50",children:[e.jsx("span",{className:"font-bold text-sm text-slate-700 dark:text-slate-300",children:l.layer}),e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase ${l.bg} ${l.color}`,children:l.tech})]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed",children:[e.jsx("strong",{className:"text-slate-700 dark:text-slate-300",children:"Role:"})," ",l.role]})]},c))})}),i==="changelog"&&e.jsx("div",{className:"animate-fade-in-up",children:e.jsxs("div",{className:"space-y-8 pl-4 relative",children:[e.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-px bg-gradient-to-b from-indigo-500 via-slate-200 to-transparent dark:via-slate-800"}),Jt.map((l,c)=>e.jsxs("div",{className:"relative pl-6",children:[e.jsx("div",{className:`absolute left-[-4px] top-1.5 w-2 h-2 rounded-full border border-white dark:border-slate-900 transition-all ${c===0?"bg-indigo-500 scale-125 shadow-[0_0_0_4px_rgba(99,102,241,0.2)]":"bg-slate-300 dark:bg-slate-700"}`}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h4",{className:`text-sm font-bold ${c===0?"text-indigo-600 dark:text-indigo-400":"text-slate-800 dark:text-slate-200"}`,children:["v",l.version]}),e.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded",children:l.date})]}),e.jsx("ul",{className:"space-y-2",children:l.features.map((p,h)=>e.jsxs("li",{className:"text-xs text-slate-600 dark:text-slate-300 flex items-start gap-2 leading-relaxed",children:[e.jsx("span",{className:"w-1 h-1 bg-slate-300 dark:bg-slate-600 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:p})]},h))})]},c))]})}),e.jsxs("div",{className:"mt-12 pt-8 border-t border-gray-100 dark:border-slate-800 flex flex-col items-center opacity-70",children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:"Architected By"})}),e.jsxs("h3",{className:"text-sm font-bold text-slate-800 dark:text-white",children:["Trung Dang Hoang ",e.jsx("span",{className:"text-slate-400 font-normal italic",children:"(Steven)"})]}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:" 2026 ISO Audit Pro. All Rights Reserved."})]})]})]})})},zs=({children:s,commandActions:t,onRestoreSnapshot:r})=>{const{isSidebarOpen:n,setSidebarOpen:i,sidebarWidth:o,setSidebarWidth:a,toastMsg:d,showToast:l,modals:c,toggleModal:p}=me(),{privacySettings:h,setPrivacySettings:b}=ce();return e.jsxs("div",{className:"flex flex-col h-[100dvh] w-full bg-slate-100 dark:bg-slate-950 transition-colors duration-500 ease-soft relative overflow-hidden",children:[d&&e.jsx(rs,{message:d,onClose:()=>l("")}),e.jsx(as,{}),e.jsxs("main",{className:"flex-1 flex overflow-hidden relative shadow-inner",children:[e.jsx("div",{className:`${n?"translate-x-0":"-translate-x-full"} fixed top-16 bottom-0 left-0 z-[60] md:absolute md:inset-y-0 md:relative md:top-0 md:translate-x-0 md:transform-none transition-transform duration-300 ease-soft h-[calc(100%-4rem)] md:h-full shadow-2xl`,children:e.jsx(_s,{isOpen:n,width:o,setWidth:a})}),n&&e.jsx("div",{className:"fixed top-16 bottom-0 inset-x-0 bg-black/50 z-50 md:hidden backdrop-blur-sm transition-opacity duration-300 animate-in fade-in",onClick:()=>i(!1)}),e.jsx("div",{className:"flex-1 flex flex-col min-w-0 relative w-full transition-all duration-300 ease-soft bg-white/50 dark:bg-slate-900/50 backdrop-blur-md shadow-inner-depth",children:s})]}),e.jsx(Bs,{isOpen:c.about,onClose:()=>p("about",!1)}),e.jsx($s,{isOpen:c.recall,onClose:()=>p("recall",!1),onRestore:r}),e.jsx(Os,{isOpen:c.privacy,onClose:()=>p("privacy",!1),settings:h,setSettings:b})]})},Fs=ge.memo(({layoutMode:s,setLayoutMode:t,isSidebarOpen:r,sidebarWidth:n})=>{const i=u.useRef([]),o=u.useRef(null),[a,d]=u.useState({left:0,width:0,opacity:0,color:""});return u.useEffect(()=>{const l=()=>{const p=Ce.findIndex(b=>b.id===s),h=i.current[p];h&&d({left:h.offsetLeft,width:h.offsetWidth,opacity:1,color:Ce[p].colorClass})};l(),window.addEventListener("resize",l);const c=setTimeout(l,300);return()=>{window.removeEventListener("resize",l),clearTimeout(c)}},[s,r,n]),e.jsx("div",{className:"flex gap-2 w-full",children:e.jsxs("div",{ref:o,className:"relative flex-1 flex justify-between bg-gray-100 dark:bg-slate-950 p-1 rounded-xl dark:shadow-[inset_0_1px_3px_rgba(0,0,0,0.5)]",children:[e.jsx("div",{className:`absolute top-1 bottom-1 shadow-sm rounded-lg transition-all duration-500 ease-fluid z-0 ${a.color}`,style:{left:a.left,width:a.width,opacity:a.opacity}}),Ce.map((l,c)=>e.jsxs("button",{ref:p=>{i.current[c]=p},onClick:()=>t(l.id),className:`flex-1 relative z-10 flex items-center justify-center gap-2 px-1 md:px-4 py-2 rounded-lg text-xs md:text-sm font-bold transition-colors duration-300 ${s===l.id?"text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(C,{name:l.icon,size:16}),e.jsx("span",{className:`${r?"hidden xl:inline":"hidden md:inline"}`,children:l.label})]},l.id))]})})}),Us=({isOpen:s,onClose:t,clause:r,standardName:n,fullText:i,isLoading:o})=>{const[a,d]=u.useState("en"),[l,c]=u.useState(!1),[p,h]=u.useState(""),b=a==="en"?i.en:i.vi,x=u.useMemo(()=>{if(!n)return{text:"ISO",colorClass:"bg-gray-100 text-gray-600"};const g=n.match(/\((.*?)\)/),f=g?g[1]:n.split(" ")[0]||"ISO",j=f.toUpperCase();let m="bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300 border-indigo-100 dark:border-indigo-800/50";return j.includes("EMS")||j.includes("14001")?m="bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-700/50":j.includes("QMS")||j.includes("9001")?m="bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-700/50":(j.includes("ISMS")||j.includes("27001"))&&(m="bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-700/50"),{text:f,colorClass:m}},[n]);u.useEffect(()=>{if(!s){h("");return}if(o||!b){h("");return}const g=b.split(`
`);let f=0,j="";const m=setTimeout(()=>{const k=setInterval(()=>{f<g.length?(j+=(g[f]||"")+`
`,h(j),f++):clearInterval(k)},20);return()=>clearInterval(k)},50);return()=>clearTimeout(m)},[s,b,o]);const y=()=>{ps(b),c(!0),setTimeout(()=>c(!1),2e3)};return e.jsx(Ee,{isOpen:s,title:"Clause Reference",onClose:t,children:e.jsxs("div",{className:"flex flex-col h-full gap-3",children:[r&&e.jsxs("div",{className:"flex items-start gap-3 pb-2 border-b border-gray-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm font-black text-indigo-700 dark:text-indigo-400 uppercase bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded-lg border border-indigo-100 dark:border-indigo-800 shrink-0",children:r.code}),e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-white leading-tight mt-1",children:r.title})]}),o?e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-slate-500 gap-4",children:[e.jsxs("div",{className:"relative w-16 h-16",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-indigo-200 dark:border-indigo-800 rounded-full opacity-20"}),e.jsx("div",{className:"absolute inset-0 border-t-2 border-indigo-600 rounded-full animate-spin"})]}),e.jsx("span",{className:"text-sm font-bold animate-pulse",children:"Consulting Gemini AI Auditor..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded-full border shadow-sm uppercase tracking-wider ${x.colorClass}`,children:x.text}),e.jsxs("div",{className:"lang-pill-container shadow-sm border-gray-200 dark:border-slate-700",children:[e.jsx("span",{onClick:()=>d("en"),className:`lang-pill-btn ${a==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:()=>d("vi"),className:`lang-pill-btn ${a==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-auto",children:e.jsx("button",{onClick:y,disabled:l,className:`p-2 rounded-xl transition-all hover:scale-110 active:scale-95 disabled:opacity-70 border shadow-sm ${l?"text-emerald-600 border-emerald-200 bg-emerald-50 dark:bg-emerald-900/20":"bg-white dark:bg-slate-800 border-gray-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600"}`,title:l?"Copied!":"Copy to Clipboard",children:e.jsx(C,{name:l?"CheckThick":"Copy",size:16})})})]}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto custom-scrollbar bg-gray-50/50 dark:bg-slate-950/50 rounded-2xl border border-gray-100 dark:border-slate-800 relative shadow-inner text-left",children:e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.jsxs("p",{className:"text-xs md:text-sm text-slate-800 dark:text-slate-200 whitespace-pre-wrap leading-7 font-medium tracking-wide",children:[p,!o&&p!==b&&e.jsx("span",{className:"inline-block w-1.5 h-4 bg-indigo-500 animate-pulse ml-1 align-middle"})]})})})]})]})})},Ks=({isOpen:s,onClose:t,apiKeys:r,newKeyInput:n,setNewKeyInput:i,handleAddKey:o,activeKeyId:a,editingKeyId:d,editLabelInput:l,setEditLabelInput:c,handleSaveLabel:p,handleStartEdit:h,handleDeleteKey:b})=>{const[x,y]=u.useState("keys"),[g,f]=u.useState("ANALYSIS"),[j,m]=u.useState("");u.useEffect(()=>{s&&x==="prompts"&&m(we.getPrompt(g).template)},[s,x,g]);const k=()=>{we.updatePrompt(g,j);const L=document.getElementById("save-prompt-btn");L&&(L.innerText="Saved!",setTimeout(()=>L.innerText="Save Prompt",1e3))},A=()=>{we.resetToDefault(g),m(we.getPrompt(g).template)};return e.jsxs(Ee,{isOpen:s,title:"Settings & Configuration",onClose:t,children:[e.jsxs("div",{className:"flex gap-2 mb-4 border-b border-gray-100 dark:border-slate-800 pb-2",children:[e.jsx("button",{onClick:()=>y("keys"),className:`px-4 py-2 text-xs font-bold rounded-lg transition-colors ${x==="keys"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":"text-slate-500 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:"API Keys"}),e.jsx("button",{onClick:()=>y("prompts"),className:`px-4 py-2 text-xs font-bold rounded-lg transition-colors ${x==="prompts"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":"text-slate-500 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:"AI Prompts"})]}),x==="keys"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-4 rounded-2xl border border-gray-100 dark:border-slate-700 dark:shadow-inner",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-3",children:"Google Gemini API Keys"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",name:"search_query_custom",id:"custom_search_input_x",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false","data-lpignore":"true",placeholder:"Paste API Key (AIza...)",className:"flex-1 p-2.5 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-600 rounded-xl text-xs font-mono outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500/50 text-slate-800 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 transition-all dark:shadow-[inset_0_1px_2px_rgba(0,0,0,0.5)]",value:n,onChange:L=>i(L.target.value),onKeyDown:L=>L.key==="Enter"&&o()}),e.jsx("button",{onClick:o,className:"p-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold text-xs transition-colors shadow-sm min-w-[60px] flex items-center justify-center",children:"Add"})]}),e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:[r.map(L=>e.jsxs("div",{className:`flex items-center justify-between p-2.5 rounded-xl border transition-all duration-200 ${L.id===a?"bg-indigo-50 border-indigo-200 dark:bg-indigo-500/20 dark:border-indigo-500/50 shadow-sm":"bg-white border-gray-100 dark:bg-slate-900 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-slate-500"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${L.id===a?"bg-indigo-200 text-indigo-700 dark:bg-indigo-800 dark:text-white":"bg-gray-100 text-gray-400 dark:bg-slate-800"}`,children:e.jsx(C,{name:"Key",size:14})}),e.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[d===L.id?e.jsx("input",{autoFocus:!0,className:"text-xs font-bold bg-white dark:bg-slate-950 text-slate-900 dark:text-white border-b-2 border-indigo-500 outline-none w-32 px-1 rounded-t",value:l,onChange:M=>c(M.target.value),onBlur:p,onKeyDown:M=>M.key==="Enter"&&p()}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:()=>h(L),className:`text-xs font-bold truncate cursor-pointer transition-colors ${L.id===a?"text-indigo-700 dark:text-indigo-200":"text-slate-700 dark:text-slate-200 hover:text-indigo-500 dark:hover:text-indigo-400"}`,children:L.label}),L.id===a&&e.jsx("span",{className:"text-[9px] bg-indigo-600 text-white px-1.5 py-0.5 rounded font-bold uppercase",children:"Active"})]}),e.jsxs("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-mono truncate",children:[L.key.substr(0,8),"...******"]})]})]}),e.jsx("button",{onClick:M=>{M.stopPropagation(),b(L.id)},className:"p-1.5 text-slate-400 hover:text-red-500 dark:text-slate-500 dark:hover:text-red-400 transition-colors",title:"Delete Key",children:e.jsx(C,{name:"Trash2",size:14})})]},L.id)),r.length===0&&e.jsx("div",{className:"text-center p-4 text-slate-400 text-xs italic",children:"No API Keys found. Add one above to start."})]})]}),e.jsx("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/10 rounded-xl border border-yellow-100 dark:border-yellow-800/30",children:e.jsxs("p",{className:"text-[10px] text-yellow-700 dark:text-yellow-500 flex items-center gap-2",children:[e.jsx(C,{name:"Info",size:12}),"Keys are stored locally in your browser. We do not validate them until you run an analysis."]})})]}),x==="prompts"&&e.jsxs("div",{className:"flex flex-col h-[60vh]",children:[e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{onClick:()=>f("ANALYSIS"),className:`flex-1 py-2 text-xs font-bold rounded-lg border ${g==="ANALYSIS"?"bg-indigo-100 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-200":"border-gray-200 dark:border-slate-700 text-slate-500"}`,children:"Analysis Logic"}),e.jsx("button",{onClick:()=>f("REPORT"),className:`flex-1 py-2 text-xs font-bold rounded-lg border ${g==="REPORT"?"bg-indigo-100 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-200":"border-gray-200 dark:border-slate-700 text-slate-500"}`,children:"Report Format"})]}),e.jsx("div",{className:"flex-1 relative border border-gray-200 dark:border-slate-700 rounded-xl overflow-hidden",children:e.jsx("textarea",{className:"w-full h-full p-4 bg-gray-50 dark:bg-slate-950 text-xs font-mono text-slate-700 dark:text-slate-300 resize-none outline-none leading-relaxed",value:j,onChange:L=>m(L.target.value)})}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("button",{onClick:A,className:"text-xs text-slate-400 hover:text-red-500 underline",children:"Reset to Default"}),e.jsx("button",{id:"save-prompt-btn",onClick:k,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-xs shadow-md transition-all active:scale-95",children:"Save Prompt"})]})]})]})},Vs=({isOpen:s,onClose:t,onAdd:r})=>{const[n,i]=u.useState(""),[o,a]=u.useState(null),d=u.useRef(null),l=()=>{n.trim()&&(r(n.trim(),o),i(""),a(null))},c=p=>{if(p.target.files&&p.target.files[0]&&(a(p.target.files[0]),!n)){const h=p.target.files[0].name;i(Re(h.replace(/\.[^/.]+$/,"")).replace(/_/g," "))}};return e.jsx(Ee,{isOpen:s,title:"Define New Standard",onClose:t,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-2xl border border-indigo-100 dark:border-indigo-800",children:e.jsxs("p",{className:"text-xs text-indigo-800 dark:text-indigo-300 leading-relaxed",children:["Create a custom standard entry. For best results, ",e.jsx("strong",{children:"attach a PDF/DOCX"}),' containing the full standard text. The AI will use this as the "Ground Truth" for citations.']})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase",children:["Standard Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",autoFocus:!0,className:"w-full p-3 pl-10 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-700 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all text-slate-800 dark:text-white",placeholder:"e.g. ISO 45001:2018 (OH&S)",value:n,onChange:p=>i(p.target.value),onKeyDown:p=>p.key==="Enter"&&l()}),e.jsx("div",{className:"absolute left-3 top-3 text-slate-400",children:e.jsx(C,{name:"Book",size:18})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Source Document (Optional)"}),e.jsxs("div",{onClick:()=>{var p;return(p=d.current)==null?void 0:p.click()},className:`group relative flex items-center justify-center border-2 border-dashed rounded-xl p-6 cursor-pointer transition-all ${o?"border-emerald-400 bg-emerald-50 dark:bg-emerald-900/10":"border-gray-200 dark:border-slate-700 hover:border-indigo-400 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:[e.jsx("input",{type:"file",ref:d,className:"hidden",accept:".pdf,.docx,.txt",onChange:c}),o?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-2 shadow-sm",children:e.jsx(C,{name:"CheckThick",size:20})}),e.jsx("p",{className:"text-sm font-bold text-emerald-700 dark:text-emerald-400 truncate max-w-[250px]",children:o.name}),e.jsx("p",{className:"text-[10px] text-emerald-600/70",children:"Click to change"})]}):e.jsxs("div",{className:"text-center text-slate-400 group-hover:text-indigo-500 transition-colors",children:[e.jsx(C,{name:"UploadCloud",size:28,className:"mx-auto mb-2"}),e.jsx("p",{className:"text-xs font-bold",children:"Click to Upload PDF / DOCX"}),e.jsx("p",{className:"text-[10px] opacity-70",children:"Max 10MB"})]})]})]})]}),e.jsxs("button",{onClick:l,disabled:!n.trim(),className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-sm shadow-lg shadow-indigo-500/30 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(C,{name:"Plus",size:18}),"Create Standard"]})]})})},Ws=({exportState:s,setExportState:t,rescueKey:r,setRescueKey:n,handleResumeExport:i,isRescuing:o,onClose:a,onSkip:d})=>s.isOpen?e.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-800 p-6 animate-zoom-in-spring",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[s.isFinished?e.jsx(C,{name:"CheckCircle2",className:"text-emerald-500",size:24}):e.jsx(C,{name:"Loader",className:"animate-spin text-indigo-500",size:24}),s.isFinished?"Export Complete":"Processing Export..."]}),s.error?e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-xl border border-red-100 dark:border-red-800 mb-4 animate-shake",children:[e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[e.jsx(C,{name:"AlertCircle",size:16})," Process Paused"]}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300 mb-3 leading-relaxed font-mono bg-white/50 dark:bg-black/20 p-2 rounded border border-red-100 dark:border-red-800/50 break-words max-h-24 overflow-y-auto",children:s.error}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"password",placeholder:"Paste Emergency Google AI Key...",className:"w-full p-2 text-xs rounded-lg border border-red-200 dark:border-red-800 bg-white dark:bg-slate-950 outline-none focus:border-red-500",value:r,onChange:l=>n(l.target.value)})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{onClick:i,disabled:o||!r.trim(),className:"w-full py-2 text-xs font-bold bg-red-500 text-white rounded-lg hover:bg-red-600 flex items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:active:scale-100",children:[o?e.jsx(C,{name:"Loader",className:"animate-spin",size:12}):e.jsx(C,{name:"Zap",size:12}),"Use Rescue Key"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:d,className:"flex-1 py-2 text-xs font-bold bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors flex items-center justify-center gap-1",title:"Skip translation for this chunk and use original text",children:[e.jsx(C,{name:"Minus",size:12})," Skip / Use Original"]}),e.jsx("button",{onClick:()=>t(l=>({...l,isOpen:!1})),className:"px-4 py-2 text-xs font-bold text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:"Cancel"})]})]})]}):e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"relative pt-1",children:[e.jsxs("div",{className:"flex mb-2 items-center justify-between",children:[e.jsx("div",{children:e.jsx("span",{className:"text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-indigo-600 bg-indigo-200 dark:text-indigo-200 dark:bg-indigo-900/50",children:s.isFinished?"Done":"Translating"})}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"text-xs font-semibold inline-block text-indigo-600 dark:text-indigo-400",children:[Math.round(s.processedChunksCount/Math.max(s.totalChunks,1)*100),"%"]})})]}),e.jsx("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-indigo-100 dark:bg-slate-800",children:e.jsx("div",{style:{width:`${Math.round(s.processedChunksCount/Math.max(s.totalChunks,1)*100)}%`},className:`shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center transition-all duration-500 ease-out ${s.isFinished?"bg-emerald-500":"bg-indigo-500"}`})})]}),e.jsx("div",{className:"text-center space-y-1",children:s.isFinished?e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-bold",children:"File has been downloaded successfully."}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-mono",children:["Processing Chunk ",Math.min(s.processedChunksCount+1,s.totalChunks)," of ",s.totalChunks]}),e.jsxs("p",{className:"text-[10px] text-slate-400 italic",children:["Target Language: ",s.targetLang==="vi"?"Vietnamese":"English"]})]})}),s.isFinished&&e.jsx("div",{className:"flex justify-center pt-2",children:e.jsxs("button",{onClick:a,className:"px-6 py-3 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-xl font-bold text-sm transition-all active:scale-95 flex items-center gap-2",children:[e.jsx(C,{name:"X",size:16}),"Close Window"]})})]})]})}):null,Gs=()=>{const{standardKey:s,auditInfo:t,selectedClauses:r,activeProcessId:n,processes:i,analysisResult:o,selectedFindings:a,finalReportText:d,restoreSession:l,customStandards:c}=ce(),[p,h]=u.useState(null),[b,x]=u.useState(!1),y=u.useRef(!1);return u.useEffect(()=>{try{const f=localStorage.getItem("iso_session_data"),j=localStorage.getItem("iso_custom_standards");if(f){y.current=!0;const m=JSON.parse(f);l(m),h(new Date().toLocaleTimeString()),setTimeout(()=>y.current=!1,1e3)}}catch(f){console.error("Load failed",f)}},[]),u.useEffect(()=>{if(y.current)return;const f=setTimeout(()=>{x(!0);const j={standardKey:s,auditInfo:t,selectedClauses:r,activeProcessId:n,processes:i,analysisResult:o,selectedFindings:a,finalReportText:d};localStorage.setItem("iso_session_data",JSON.stringify(j)),localStorage.setItem("iso_custom_standards",JSON.stringify(c)),h(new Date().toLocaleTimeString()),setTimeout(()=>x(!1),500)},1e3);return()=>clearTimeout(f)},[s,t,r,n,i,o,a,d,c]),{lastSavedTime:p,isSaving:b,createManualBackup:()=>{try{const f={standardKey:s,auditInfo:t,selectedClauses:r,activeProcessId:n,processes:i,analysisResult:o,selectedFindings:a,finalReportText:d},j={id:`backup_${Date.now()}`,timestamp:Date.now(),label:"Manual Backup",triggerType:"MANUAL_BACKUP",data:f},m=localStorage.getItem("iso_session_history"),k=m?JSON.parse(m):[],A=[j,...k].slice(0,5);return localStorage.setItem("iso_session_history",JSON.stringify(A)),!0}catch{return!1}}}},Oe=new Map,Hs=()=>{const{standards:s,standardKey:t,setAnalysisResult:r,processes:n,privacySettings:i}=ce(),{apiKeys:o,activeKeyId:a}=Ae(),{showToast:d}=me(),[l,c]=u.useState(!1),[p,h]=u.useState(""),[b,x]=u.useState(0),[y,g]=u.useState([]),f=u.useRef(0);return{handleAnalyze:u.useCallback(async()=>{if(!t||n.length===0){d("No processes or standard found to analyze.");return}c(!0),f.current=0,x(0),g(["Initializing AI Audit Engine...","Scanning process matrices..."]),await new Promise(m=>setTimeout(m,500));try{const m=s[t],k=o.find(N=>N.id===a),A=[],L=N=>{const R=E=>{for(const I of E){if(I.id===N)return I;if(I.subClauses){const P=R(I.subClauses);if(P)return P}}return null};for(const E of m.groups){const I=R(E.clauses);if(I)return I}return null};n.forEach(N=>{const R=N.matrixData||{};Object.keys(R).forEach(E=>{const I=L(E);I&&A.push({process:N,cid:E,clause:I})})});const M=A.length;if(M===0)throw new Error("No clauses mapped in any process. Please go to Planning tab to select clauses.");g(N=>[...N,`Found ${M} compliance checkpoints across ${n.length} processes.`]);const V=(await ms(A,async({process:N,cid:R,clause:E})=>{if(!E)return null;const I=N.name||"Unnamed Process";h(`[${I}] ${E.code}`),(f.current%2===0||M<10)&&g(D=>{const B=[...D,`> Processing ${I} / Clause ${E.code}...`];return B.length>8?B.slice(B.length-8):B});const P=N.matrixData[R]||[],H=P.some(D=>D.status==="supplied");let F="",U="";H&&(F=P.filter(D=>D.status==="supplied").map(D=>`[Requirement]: ${D.requirement}
[Evidence]: ${D.evidenceInput}`).join(`

`),U=P.filter(D=>D.status==="supplied").map(D=>D.evidenceInput).join(`

`));let Y="",oe="";const ie=m.groups.find(D=>{const B=W=>W.flatMap(Z=>[Z.id,...Z.subClauses?B(Z.subClauses):[]]);return B(D.clauses).includes(R)});if(ie){oe=ie.title;const D=[],B=W=>W.flatMap(Z=>[Z.id,...Z.subClauses?B(Z.subClauses):[]]);B(ie.clauses).forEach(W=>{if(W===R)return;const Z=N.matrixData[W];if(Z&&Z.some(se=>se.status==="supplied")){const se=Z.filter(xe=>xe.status==="supplied").map(xe=>xe.evidenceInput).join(" ");se.trim().length>5&&D.push(`[Related Clause ${W} Evidence]: ${se.substring(0,600)}...`)}}),D.length>0&&(Y=D.join(`
`))}const ee=N.evidence||"",J=ee.length>8e3?ee.substring(0,8e3)+"...(truncated)":ee,z=`
                ${F?`### DIRECT EVIDENCE (Clause ${E.code}):
${F}`:"### DIRECT EVIDENCE: None specifically recorded for this exact clause number."}
                
                ${Y?`### BROADER CONTEXT (PDCA Group - ${oe}):
(The following evidence comes from related sub-clauses or sibling clauses within the same PDCA phase. Use this to verify high-level compliance, e.g., evidence in 6.1 proves compliance for 6).
${Y}`:""}

                ${J?`### GENERAL PROCESS EVIDENCE (${I}):
${J}`:""}
                
                CRITICAL INSTRUCTION: 
                1. If Direct Evidence is missing, YOU MUST look at 'BROADER CONTEXT' and 'GENERAL PROCESS EVIDENCE'.
                2. Evidence found in sub-clauses (e.g., 6.1, 6.2) IS VALID evidence for the parent clause (e.g., 6). Do not mark as NC if the requirement is met in the sub-clauses.
                3. If the intent of the clause is met anywhere in this context, mark as COMPLIANT.
                `.trim(),te=(N.evidenceTags||[]).filter(D=>D.clauseId===R).map(D=>`Tagged Excerpt: "${D.text}"`).join(`
`),he=z+te,re=gs(`${R}_${N.id}_${he}_${k==null?void 0:k.activeModel}`);if(Oe.has(re))return console.log(`[Cache Hit] ${I} - Clause ${R}`),f.current++,x(Math.round(f.current/M*100)),Oe.get(re);try{const D=await rt({code:E.code,title:E.title,description:E.description},m.name,z,te,k==null?void 0:k.key,k==null?void 0:k.activeModel,i.maskCompany),B=JSON.parse(D),ae=U.trim().length>0?U:B.evidence||"Analyzed based on broader context/sub-clauses.",W={clauseId:B.clauseId||E.code,status:B.status||"N_A",reason:B.reason||"Analysis completed.",reason_en:B.reason_en||B.reason,reason_vi:B.reason_vi,suggestion:B.suggestion||"",evidence:ae,conclusion_report:B.conclusion_report||B.reason,crossRefs:B.crossRefs||[],processId:N.id,processName:I};return Oe.set(re,W),f.current++,x(Math.round(f.current/M*100)),W}catch(D){return console.error(`Error analyzing ${R} in ${I}`,D),g(B=>[...B,`x Error on ${R}: ${D.message}`]),f.current++,x(Math.round(f.current/M*100)),null}},3)).filter(N=>N!==null);V.length>0?(r(N=>{const R=N?[...N]:[];return V.forEach(E=>{const I=R.findIndex(P=>P.clauseId===E.clauseId&&P.processId===E.processId);I>=0?R[I]=E:R.push(E)}),R.sort((E,I)=>{const P=E.clauseId.localeCompare(I.clauseId,void 0,{numeric:!0});return P!==0?P:(E.processName||"").localeCompare(I.processName||"")})}),g(N=>[...N,"Synthesis Complete. Rendering Results..."]),await new Promise(N=>setTimeout(N,600)),d(`Success! Updated ${V.length} findings.`)):d("Analysis finished but returned no valid results.")}catch(m){console.error("Analysis Workflow Error",m),g(k=>[...k,`CRITICAL ERROR: ${m.message}`]),d("Failed: "+m.message),await new Promise(k=>setTimeout(k,2e3))}finally{c(!1),h("")}},[t,n,o,a,i,s]),isAnalyzeLoading:l,currentAnalyzingClause:p,progressPercent:b,analysisLogs:y}},qs=s=>{const{analysisResult:t,auditInfo:r,standards:n,standardKey:i,setFinalReportText:o,selectedFindings:a}=ce(),{apiKeys:d,activeKeyId:l}=Ae(),{showToast:c}=me(),[p,h]=u.useState(!1),[b,x]=u.useState(""),[y,g]=u.useState([]),[f,j]=u.useState(0),[m,k]=u.useState(""),[A,L]=u.useState(""),[M,$]=u.useState(!1);return{isReportLoading:p,reportLoadingMessage:b,reportTemplateName:A,isTemplateProcessing:M,handleTemplateUpload:async N=>{var E;const R=(E=N.target.files)==null?void 0:E[0];if(R){$(!0),x("Processing Template...");try{const I=Date.now(),P=await Fe(R);Date.now()-I<500&&await new Promise(H=>setTimeout(H,500)),k(P),L(R.name),c(`Template "${R.name}" loaded.`)}catch(I){c(`Template Error: ${I.message}`)}finally{$(!1),x("")}}},handleGenerateReport:async()=>{var R;if(!t||t.length===0){c("No findings to report.");return}const N=t.filter(E=>a[E.clauseId]);if(N.length===0){c("No findings selected. Please select at least one finding.");return}h(!0),g([]),j(0),x("Initializing Report Engine...");try{const E=d.find(z=>z.id===l),I=((R=n[i])==null?void 0:R.name)||"ISO Standard",P=E==null?void 0:E.key,H=E==null?void 0:E.activeModel,F=[];x("Drafting Executive Summary..."),g(z=>[...z,`Analysing ${N.length} selected findings...`]);const U=await nt({company:r.company||"N/A",address:r.address||"N/A",scope:r.scope||"N/A",soa:r.soa||"N/A",type:r.type||"Internal Audit",auditor:r.auditor||"N/A",standard:I,findings:N,lang:s},P,H);F.push(`# AUDIT REPORT: ${r.company}

## EXECUTIVE SUMMARY
${U}
`),g(z=>[...z,"Executive Summary: Completed"]),j(10),F.push("## DETAILED FINDINGS");const Y={};N.forEach(z=>{const te=z.processName||"General / Unassigned";Y[te]||(Y[te]=[]),Y[te].push(z)});const oe=Object.keys(Y).sort();let ie=0;const ee=N.length;for(const z of oe){const te=Y[z],he=r.auditor||"[Auditor Name]";F.push(`### PROCESS: ${z}
**Execution performed by:** ${he}
`);for(const re of te){const D=`Clause ${re.clauseId}`;x(`Formatting ${z} - ${D}...`),g(W=>[...W,`Processing ${z} / ${D}...`]);const B=await ot(re,s,P,H);F.push(B),ie++;const ae=10+Math.round(ie/ee*90);j(ae),ie%3===0&&await new Promise(W=>setTimeout(W,200))}F.push("---")}x("Finalizing document..."),g(z=>[...z,"Stitching report sections..."]);const J=F.join(`

`);o(m?`TEMPLATE APPLIED:
${m}

GENERATED CONTENT:
${J}`:J),g(z=>[...z,"Done."]),j(100),c("Report Generated Successfully.")}catch(E){console.error(E),g(I=>[...I,`ERROR: ${E.message}`]),c("Report Generation Failed.")}finally{setTimeout(()=>{h(!1),x("")},1e3)}},generationLogs:y,progressPercent:f}},Js=()=>{const{evidence:s,matrixData:t,analysisResult:r,finalReportText:n,standards:i,standardKey:o,auditInfo:a,processes:d,activeProcessId:l}=ce(),{apiKeys:c,activeKeyId:p,addKey:h}=Ae(),{showToast:b}=me(),[x,y]=u.useState({isOpen:!1,isPaused:!1,isFinished:!1,totalChunks:0,processedChunksCount:0,chunks:[],results:[],error:null,currentType:"report",targetLang:"en"}),[g,f]=u.useState(""),[j,m]=u.useState(!1),k=(M,$)=>{let O="";if(M==="evidence")O=`EVIDENCE DUMP
Date: ${new Date().toLocaleString()}

`,O+=`--- GENERAL EVIDENCE ---
${s}

`,O+=`--- MATRIX EVIDENCE ---
`,Object.keys(t).forEach(N=>{t[N].forEach(E=>{E.status==="supplied"&&(O+=`[Clause ${N}] ${E.requirement}
EVIDENCE: ${E.evidenceInput}
---
`)})});else if(M==="notes"){if(!r)return b("No findings.");O=r.map(N=>`[${N.clauseId}] ${N.status}
Observation: ${N.reason}
Evidence: ${N.evidence}
`).join(`
----------------------------------------

`)}else if(M==="report"){if(!n)return b("No report text.");O=n}if(!O.trim())return b("Nothing to export.");const V=O.match(/[\s\S]{1,3000}/g)||[];y({isOpen:!0,isPaused:!1,isFinished:!1,totalChunks:V.length,processedChunksCount:0,chunks:V,results:[],error:null,currentType:M,targetLang:$})};return u.useEffect(()=>{(async()=>{var $;if(x.isOpen&&!x.isPaused&&!x.isFinished){const O=x.processedChunksCount;if(O>=x.totalChunks){const N=x.results.join(""),R=(($=i[o])==null?void 0:$.name)||"ISO";let E="ISO";R.includes("27001")?E="27k":R.includes("9001")?E="9k":R.includes("14001")&&(E="14k");const I=d.find(J=>J.id===l),P=I?I.name:"General";let H="Document";x.currentType==="notes"?H="Audit_Note":x.currentType==="evidence"?H="Evidence":x.currentType==="report"&&(H="Report");const F=new Date,U=`${F.getFullYear()}${String(F.getMonth()+1).padStart(2,"0")}${String(F.getDate()).padStart(2,"0")}`,oe=`${[E,Re(a.company||"Company"),Re(P),H,U].filter(J=>J&&J!=="N_A").join("_")}_${x.targetLang}.txt`,ie=new Blob([N],{type:"text/plain"}),ee=document.createElement("a");ee.href=URL.createObjectURL(ie),ee.download=oe,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),y(J=>({...J,isFinished:!0}));return}const V=x.chunks[O];try{const N=c.find(P=>P.id===p);await new Promise(P=>setTimeout(P,200));const R=g||(N==null?void 0:N.key),{translateChunk:E}=await Se(async()=>{const{translateChunk:P}=await Promise.resolve().then(()=>Ye);return{translateChunk:P}},void 0,import.meta.url),I=await E(V,x.targetLang,R);y(P=>({...P,results:[...P.results,I],processedChunksCount:P.processedChunksCount+1}))}catch(N){y(R=>({...R,isPaused:!0,error:N.message||"Translation failed."}))}}})()},[x,p,g,c]),{handleExport:k,exportState:x,setExportState:y,rescueKey:g,setRescueKey:f,handleResumeExport:async()=>{m(!0);const{validateApiKey:M}=await Se(async()=>{const{validateApiKey:O}=await Promise.resolve().then(()=>Ye);return{validateApiKey:O}},void 0,import.meta.url);(await M(g)).isValid?(await h(g,"Rescue Key"),y(O=>({...O,isPaused:!1,error:null})),f("")):b("Rescue Key Invalid."),m(!1)},isRescuing:j,handleSkipExportChunk:()=>{y(M=>({...M,results:[...M.results,M.chunks[M.processedChunksCount]],processedChunksCount:M.processedChunksCount+1,isPaused:!1,error:null}))}}},Xs=()=>{u.useEffect(()=>{const s=t=>{if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"].includes(t.key))return;const n=document.activeElement;if(!n)return;const i=n.tagName.toLowerCase(),o=i==="input",a=i==="textarea",d=i==="select";if(!o&&!a&&!d||a&&!t.ctrlKey||d&&(t.key==="ArrowUp"||t.key==="ArrowDown")&&!t.ctrlKey||o&&(t.key==="ArrowLeft"||t.key==="ArrowRight")&&!t.ctrlKey)return;let l=0;if((t.key==="ArrowDown"||t.key==="ArrowRight"&&t.ctrlKey)&&(l=1),(t.key==="ArrowUp"||t.key==="ArrowLeft"&&t.ctrlKey)&&(l=-1),t.key==="Enter"){if(a)return;l=t.shiftKey?-1:1}if(l!==0){t.preventDefault();const p=document.querySelectorAll('input:not([type="hidden"]):not([type="file"]):not([disabled]):not([readonly]), textarea:not([disabled]):not([readonly]), select:not([disabled])'),b=Array.from(p).filter(g=>g.offsetParent!==null),x=b.indexOf(n);if(x===-1)return;const y=x+l;if(y>=0&&y<b.length){const g=b[y];if(g.focus(),g.tagName.toLowerCase()==="input"){const f=g.type;if(["text","search","url","tel","password"].includes(f))try{g.select()}catch{}}g.scrollIntoView({behavior:"smooth",block:"center"})}}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[])},Ys=ge.lazy(()=>Se(()=>import("./EvidenceView-Fk9uDaJ_.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(s=>({default:s.EvidenceView}))),Zs=ge.lazy(()=>Se(()=>import("./FindingsView-C55Yrfdd.js"),__vite__mapDeps([4,1,2,3]),import.meta.url).then(s=>({default:s.FindingsView}))),Qs=ge.lazy(()=>Se(()=>import("./ReportView-Ca6WtAA9.js"),__vite__mapDeps([5,1,2,3]),import.meta.url).then(s=>({default:s.ReportView}))),ei=ge.lazy(()=>Se(()=>import("./PlanningView-DFhd3kjU.js"),__vite__mapDeps([6,1,2,3]),import.meta.url).then(s=>({default:s.PlanningView}))),ti=()=>{var Ke;const[s,t]=u.useState("planning");Xs();const{isSidebarOpen:r,sidebarWidth:n,showToast:i,modals:o,toggleModal:a,setSidebarOpen:d}=me(),{evidence:l,setEvidence:c,matrixData:p,setMatrixData:h,evidenceTags:b,addEvidenceTag:x,selectedClauses:y,standards:g,standardKey:f,auditInfo:j,setKnowledgeData:m,analysisResult:k,setAnalysisResult:A,selectedFindings:L,setSelectedFindings:M,finalReportText:$,setFinalReportText:O,resetSession:V,restoreSession:N,addCustomStandard:R,setStandardKey:E,activeProcessId:I,processes:P,privacySettings:H}=ce(),{apiKeys:F,addKey:U,deleteKey:Y,refreshKeyStatus:oe,activeKeyId:ie,isCheckingKey:ee,isAutoCheckEnabled:J,toggleAutoCheck:z}=Ae(),{lastSavedTime:te,isSaving:he,createManualBackup:re}=Gs(),[D,B]=u.useState([]),[ae,W]=u.useState({isOpen:!1,clause:null,fullText:{en:"",vi:""},isLoading:!1}),[Z,se]=u.useState(""),[xe,je]=u.useState("list"),[w,Q]=u.useState(0),[ne,v]=u.useState("en"),[S,T]=u.useState("en"),[_,G]=u.useState("en"),{handleAnalyze:K,isAnalyzeLoading:q,currentAnalyzingClause:le,progressPercent:Ne,analysisLogs:Te}=Hs(),{isReportLoading:ct,reportLoadingMessage:ut,reportTemplateName:pt,isTemplateProcessing:ht,handleTemplateUpload:xt,handleGenerateReport:gt,generationLogs:mt,progressPercent:ft}=qs(_),{handleExport:Pe,exportState:bt,setExportState:Ue,rescueKey:vt,setRescueKey:yt,handleResumeExport:kt,isRescuing:jt,handleSkipExportChunk:wt}=Js();u.useEffect(()=>{const X=pe=>W({isOpen:!0,clause:pe.detail,fullText:{en:"",vi:""},isLoading:!0}),ue=pe=>W(Mt=>({...Mt,fullText:pe.detail,isLoading:!1})),ke=pe=>{pe.detail&&t(pe.detail)};return window.addEventListener("OPEN_REFERENCE",X),window.addEventListener("UPDATE_REFERENCE_CONTENT",ue),window.addEventListener("SWITCH_LAYOUT",ke),()=>{window.removeEventListener("OPEN_REFERENCE",X),window.removeEventListener("UPDATE_REFERENCE_CONTENT",ue),window.removeEventListener("SWITCH_LAYOUT",ke)}},[]);const Ct=u.useMemo(()=>{const X=Ce.find(ue=>ue.id===s);return X?`${X.colorClass} ${X.borderClass}`:"bg-slate-500 border-slate-600"},[s]),St=u.useMemo(()=>{switch(s){case"planning":return"selection:bg-orange-200 selection:text-orange-900 dark:selection:bg-orange-900 dark:selection:text-orange-100 bg-orange-50/80 dark:bg-orange-950/20";case"evidence":return"selection:bg-blue-200 selection:text-blue-900 dark:selection:bg-blue-900 dark:selection:text-blue-100 bg-blue-50/80 dark:bg-blue-950/20";case"findings":return"selection:bg-purple-200 selection:text-purple-900 dark:selection:bg-purple-900 dark:selection:text-purple-100 bg-purple-50/80 dark:bg-purple-950/20";case"report":return"selection:bg-emerald-200 selection:text-emerald-900 dark:selection:bg-emerald-900 dark:selection:text-emerald-100 bg-emerald-50/80 dark:bg-emerald-950/20";default:return"selection:bg-indigo-200 selection:text-indigo-900"}},[s]),Nt=Ce.find(X=>X.id===s)||Ce[0],At=(!I||P.length===0)&&s!=="planning",Et=async()=>{const X=await U(Z);X==="valid"?(se(""),i("Success: API Key is Active")):X==="quota_exceeded"?(se(""),i("Added: Key Quota Exhausted")):i(X==="duplicate"?"Info: Key already exists":"Failed: Invalid API Key or Network Error")},It=u.useMemo(()=>{if(!f||!I||q)return!1;const X=Object.values(p).some(ke=>ke.some(pe=>pe.status==="supplied")),ue=l&&l.trim().length>10;return X||ue},[f,I,p,l,q]),Lt=async()=>{t("findings"),await K()};return e.jsxs(zs,{commandActions:[],onRestoreSnapshot:N,children:[e.jsxs("div",{className:`flex-shrink-0 px-4 md:px-6 py-3 border-b border-gray-200 dark:border-slate-800 transition-colors duration-500 ease-fluid flex justify-between items-center gap-3 border-t-4 ${Nt.borderClass} ${Ct.split(" ")[0].replace("bg-","bg-opacity-10 ")}`,children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(Fs,{layoutMode:s,setLayoutMode:t,isSidebarOpen:r,sidebarWidth:n})}),e.jsxs("div",{className:"flex gap-2 items-center flex-shrink-0 pl-2 border-l border-gray-200 dark:border-slate-800",children:[e.jsxs("button",{onClick:()=>a("recall",!0),className:`h-10 px-4 rounded-xl flex items-center justify-center gap-2 transition-all border shadow-sm ${te?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600":"bg-white dark:bg-slate-800 text-slate-500"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(C,{name:"History",size:18}),te&&e.jsx("span",{className:"absolute -top-1 -right-1 flex h-2.5 w-2.5",children:e.jsx("span",{className:`relative inline-flex rounded-full h-2.5 w-2.5 ${he?"bg-red-500":"bg-emerald-500"}`})})]}),e.jsx("span",{className:"hidden xl:inline text-xs font-bold",children:"Recall"})]}),e.jsxs("button",{onClick:()=>{confirm("Start New Session?")&&(re(),V(),i("Session Reset."))},className:"h-10 px-4 bg-amber-50 dark:bg-amber-950/30 text-amber-600 border border-amber-200 rounded-xl flex items-center justify-center gap-2 hover:bg-amber-100 transition-all shadow-sm",children:[e.jsx(C,{name:"Session4_FilePlus",size:18}),e.jsx("span",{className:"hidden md:inline text-xs font-bold",children:"New"})]})]})]}),e.jsxs("div",{className:`flex-1 overflow-hidden relative p-2 md:p-4 transition-colors duration-500 ease-fluid ${St}`,children:[At&&e.jsx("div",{className:"absolute inset-0 z-50 bg-white/80 dark:bg-slate-950/80 backdrop-blur-sm flex flex-col items-center justify-center animate-in fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-3xl shadow-floating border border-indigo-100 dark:border-indigo-900 max-w-md text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/50 rounded-full flex items-center justify-center mx-auto mb-4 text-indigo-600",children:e.jsx(C,{name:"Session11_GridAdd",size:32})}),e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white mb-2",children:"Process Required"}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6 leading-relaxed",children:["Define at least one ",e.jsx("strong",{children:"Process"})," to begin evidence collection."]}),e.jsx("div",{className:"flex gap-3 justify-center",children:e.jsx("button",{onClick:()=>t("planning"),className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg transition-transform active:scale-95",children:"Go to Planning"})})]})}),e.jsxs(u.Suspense,{fallback:e.jsx(ns,{message:"Loading View..."}),children:[s==="planning"&&e.jsx(ei,{}),s==="evidence"&&e.jsx(Ys,{evidence:l,setEvidence:c,uploadedFiles:D,setUploadedFiles:B,onOcrProcess:()=>{},isOcrLoading:!1,onAnalyze:Lt,isReadyForAnalysis:It,isAnalyzeLoading:q,analyzeTooltip:"Run AI Analysis",onExport:Pe,evidenceLanguage:ne,setEvidenceLanguage:v,textareaRef:{current:null},tags:b,onAddTag:x,selectedClauses:y,standards:g,standardKey:f,matrixData:p,setMatrixData:h},I),s==="findings"&&e.jsx(Zs,{analysisResult:k,setAnalysisResult:A,selectedFindings:L,setSelectedFindings:M,isAnalyzeLoading:q,loadingMessage:"Scanning Matrix Evidence...",currentAnalyzingClause:le,viewMode:xe,setViewMode:je,focusedFindingIndex:w,setFocusedFindingIndex:Q,onExport:Pe,notesLanguage:S,setNotesLanguage:T,progressPercent:Ne,analysisLogs:Te}),s==="report"&&e.jsx(Qs,{finalReportText:$,setFinalReportText:O,isReportLoading:ct,loadingMessage:ut,templateFileName:pt,isTemplateProcessing:ht,handleTemplateUpload:xt,handleGenerateReport:gt,isReadyToSynthesize:!!k&&k.length>0,onExport:Pe,exportLanguage:_,setExportLanguage:G,analysisResult:k,generationLogs:mt,progressPercent:ft,selectedFindings:L})]})]}),e.jsx(Ks,{isOpen:o.settings,onClose:()=>a("settings",!1),apiKeys:F,newKeyInput:Z,setNewKeyInput:se,isCheckingKey:ee,handleAddKey:Et,activeKeyId:ie,editingKeyId:null,editLabelInput:"",setEditLabelInput:()=>{},handleSaveLabel:()=>{},handleStartEdit:()=>{},handleRefreshStatus:oe,handleDeleteKey:Y,isAutoCheckEnabled:J,toggleAutoCheck:z}),e.jsx(Vs,{isOpen:o.addStandard,onClose:()=>a("addStandard",!1),onAdd:async(X,ue)=>{a("addStandard",!1);const ke=`CUSTOM_${Date.now()}`;if(ue){const pe=await Fe(ue);m(pe,ue.name)}R(ke,{name:X,description:"Custom",groups:[]}),E(ke)}}),e.jsx(Us,{isOpen:ae.isOpen,onClose:()=>W(X=>({...X,isOpen:!1})),clause:ae.clause,standardName:((Ke=g[f])==null?void 0:Ke.name)||"",fullText:ae.fullText,isLoading:ae.isLoading}),e.jsx(Ws,{exportState:bt,setExportState:Ue,rescueKey:vt,setRescueKey:yt,handleResumeExport:kt,isRescuing:jt,onClose:()=>Ue(X=>({...X,isOpen:!1})),onSkip:wt})]})};function si(){return e.jsx(ss,{children:e.jsx(is,{children:e.jsx(ts,{children:e.jsx(ti,{})})})})}const dt=document.getElementById("root");if(!dt)throw new Error("Could not find root element to mount to");const ii=Pt.createRoot(dt);ii.render(e.jsx(ge.StrictMode,{children:e.jsx(si,{})}));export{C as I,Xe as L,li as S,Ce as T,Ae as a,di as b,ps as c,me as d,rt as e,Ts as f,Ms as g,Re as h,Ls as p,ci as s,Rs as t,ce as u};
