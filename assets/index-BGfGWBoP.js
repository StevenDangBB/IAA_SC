const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./EvidenceView-B73Vlh2i.js","./vendor-react--UE8qFvL.js","./vendor-BhE6lIor.js","./vendor-genai-C0GBL7S7.js","./FindingsView-Be-As1ey.js","./ReportView-C2lFpEiR.js","./PlanningView-BQTpkZ9M.js"])))=>i.map(i=>d[i]);
var Pt=Object.defineProperty;var Dt=(t,s,n)=>s in t?Pt(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var Ue=(t,s,n)=>Dt(t,typeof s!="symbol"?s+"":s,n);import{r as d,j as e,R as je,c as _t}from"./vendor-react--UE8qFvL.js";import{G as ot,T as Y}from"./vendor-genai-C0GBL7S7.js";import"./vendor-BhE6lIor.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Ot="modulepreload",$t=function(t,s){return new URL(t,s).href},dt={},_e=function(s,n,r){let i=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),l=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=$t(u,r),u in dt)return;dt[u]=!0;const h=u.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(!!r)for(let f=a.length-1;f>=0;f--){const g=a[f];if(g.href===u&&(!h||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${p}`))return;const x=document.createElement("link");if(x.rel=h?"stylesheet":Ot,h||(x.as="script"),x.crossOrigin="",x.href=u,l&&x.setAttribute("nonce",l),document.head.appendChild(x),h)return new Promise((f,g)=>{x.addEventListener("load",f),x.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return s().catch(o)})},Bt={name:"ISO 9001:2015 (QMS)",description:"Quality Management System",groups:[{id:"PLAN_9001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context of organization",description:"Internal and external issues that affect its ability to achieve intended results.",subClauses:[{id:"4.1",code:"4.1",title:"Understanding the organization",description:"Determining internal and external issues relevant to its purpose."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Understanding the needs and expectations of stakeholders."},{id:"4.3",code:"4.3",title:"Scope of QMS",description:"Determining the boundaries and applicability of the quality system."},{id:"4.4",code:"4.4",title:"QMS processes",description:"Establishing, implementing, and maintaining processes."}]},{id:"5",code:"5",title:"Leadership",description:"Top management commitment, policy and roles.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership commitment",description:"Demonstrating leadership and commitment to customer focus."},{id:"5.2",code:"5.2",title:"Policy",description:"Establishing and communicating the quality policy."},{id:"5.3",code:"5.3",title:"Roles & Authorities",description:"Ensuring responsibilities and authorities are assigned."}]},{id:"6",code:"6",title:"Planning",description:"Risks, opportunities and quality objectives.",subClauses:[{id:"6.1",code:"6.1",title:"Risks & Opportunities",description:"Actions to address risks and opportunities."},{id:"6.2",code:"6.2",title:"Quality objectives",description:"Establishing objectives and planning to achieve them."},{id:"6.3",code:"6.3",title:"Planning of changes",description:"Carrying out changes in a planned manner."}]}]},{id:"SUPPORT_9001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Providing necessary resources for the QMS.",subClauses:[{id:"7.1.1",code:"7.1.1",title:"General",description:"Determining and providing resources for QMS."},{id:"7.1.2",code:"7.1.2",title:"People",description:"Providing persons necessary for effective implementation."},{id:"7.1.3",code:"7.1.3",title:"Infrastructure",description:"Maintenance of buildings, equipment, and transport."},{id:"7.1.4",code:"7.1.4",title:"Process Environment",description:"Managing social (non-discriminatory), psychological (stress-reducing), and physical (temperature, hygiene) factors."},{id:"7.1.5",code:"7.1.5",title:"Monitoring resources",description:"Calibration and measurement traceability."},{id:"7.1.6",code:"7.1.6",title:"Knowledge",description:"Maintaining organizational knowledge and lessons learned."}]},{id:"7.2",code:"7.2",title:"Competence",description:"Ensuring workers are competent based on education/training."},{id:"7.3",code:"7.3",title:"Awareness",description:"Ensuring persons are aware of quality policy and objectives."},{id:"7.4",code:"7.4",title:"Communication",description:"Determining internal and external communications."},{id:"7.5",code:"7.5",title:"Documented info",description:"Control of information required by the standard.",subClauses:[{id:"7.5.1",code:"7.5.1",title:"General",description:"Determining necessary documented information for QMS."},{id:"7.5.2",code:"7.5.2",title:"Creating & Updating",description:"Ensuring proper identification, format, and review."},{id:"7.5.3",code:"7.5.3",title:"Control of info",description:"Ensuring availability, protection, and storage control.",subClauses:[{id:"7.5.3.1",code:"7.5.3.1",title:"Availability",description:"Ensuring info is available where needed."},{id:"7.5.3.2",code:"7.5.3.2",title:"Control",description:"Distribution, access, retrieval and use."}]}]}]},{id:"DO_9001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational planning",description:"Control of processes to meet P/S requirements."},{id:"8.2",code:"8.2",title:"Requirements for P/S",description:"Determining requirements and communicating with customers."},{id:"8.3",code:"8.3",title:"Design and development",description:"D&D of products and services.",subClauses:[{id:"8.3.1",code:"8.3.1",title:"General",description:"Establishing a D&D process."},{id:"8.3.2",code:"8.3.2",title:"Planning",description:"Determining D&D stages and controls."},{id:"8.3.3",code:"8.3.3",title:"Inputs",description:"Requirements essential for D&D."},{id:"8.3.4",code:"8.3.4",title:"Controls",description:"Ensuring reviews, verification, and validation."},{id:"8.3.5",code:"8.3.5",title:"Outputs",description:"Meeting input requirements."},{id:"8.3.6",code:"8.3.6",title:"Changes",description:"Controlling modifications to D&D."}]},{id:"8.4",code:"8.4",title:"External Providers",description:"Control of externally provided P/S.",subClauses:[{id:"8.4.1",code:"8.4.1",title:"General",description:"Evaluating and selecting external providers."},{id:"8.4.2",code:"8.4.2",title:"Type & Extent",description:"Controlling the impact of providers on results."},{id:"8.4.3",code:"8.4.3",title:"Information",description:"Communicating requirements to providers clearly."}]},{id:"8.5",code:"8.5",title:"Production & Delivery",description:"Control of production and service provision.",subClauses:[{id:"8.5.1",code:"8.5.1",title:"Control",description:"Availability of info, equipment and monitoring."},{id:"8.5.2",code:"8.5.2",title:"Identification",description:"Ensuring traceability throughout provision."},{id:"8.5.3",code:"8.5.3",title:"Property",description:"Safeguarding customer or provider assets."},{id:"8.5.4",code:"8.5.4",title:"Preservation",description:"Ensuring conformity during processing."},{id:"8.5.5",code:"8.5.5",title:"Post-delivery",description:"Statutory, regulatory, and warranty duties."},{id:"8.5.6",code:"8.5.6",title:"Control of changes",description:"Reviewing and controlling changes for production."}]},{id:"8.6",code:"8.6",title:"Release of P/S",description:"Verification that requirements have been met."},{id:"8.7",code:"8.7",title:"Nonconforming outputs",description:"Ensuring unintended use is prevented."}]},{id:"CHECK_ACT_9001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1",code:"9.1",title:"Monitoring & Evaluation",description:"Determining what needs to be monitored."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Scheduled review of QMS performance."},{id:"9.3",code:"9.3",title:"Management review",description:"Top management review of system suitability."},{id:"10.1",code:"10.1",title:"Improvement",description:"Determining opportunities for improvement."},{id:"10.2",code:"10.2",title:"NC & Corrective action",description:"Managing nonconformities and root causes."},{id:"10.3",code:"10.3",title:"Continual improvement",description:"Continually improving QMS effectiveness."}]}]},zt={name:"ISO/IEC 27001:2022 (ISMS)",description:"Information Security Management System",groups:[{id:"PLAN_27001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context of organization",description:"Internal/external issues and scope.",subClauses:[{id:"4.1",code:"4.1",title:"Context",description:"Identifying security issues."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Needs and expectations."},{id:"4.3",code:"4.3",title:"Scope",description:"Determining ISMS boundaries."},{id:"4.4",code:"4.4",title:"ISMS System",description:"Establishing processes."}]},{id:"5",code:"5",title:"Leadership",description:"Commitment and Policy.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership & Commitment",description:"Accountability."},{id:"5.2",code:"5.2",title:"Policy",description:"InfoSec policy."},{id:"5.3",code:"5.3",title:"Roles & Authorities",description:"Assigning responsibilities."}]},{id:"6",code:"6",title:"Planning",description:"Risk treatment.",subClauses:[{id:"6.1.1",code:"6.1.1",title:"General",description:"Risk actions."},{id:"6.1.2",code:"6.1.2",title:"Risk assessment",description:"Information security risk process."},{id:"6.1.3",code:"6.1.3",title:"Risk treatment",description:"SoA and planning."},{id:"6.2",code:"6.2",title:"Security objectives",description:"Achievement planning."},{id:"6.3",code:"6.3",title:"Planning of changes",description:"Changes to the ISMS shall be carried out in a planned manner."}]}]},{id:"SUPPORT_27001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Availability."},{id:"7.2",code:"7.2",title:"Competence",description:"Training requirements."},{id:"7.3",code:"7.3",title:"Awareness",description:"Understanding policy."},{id:"7.4",code:"7.4",title:"Communication",description:"Info flow rules."},{id:"7.5",code:"7.5",title:"Documented info",description:"Control of records."}]},{id:"DO_27001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational planning",description:"Securing processes."},{id:"8.2",code:"8.2",title:"Risk assessment",description:"Execution at intervals."},{id:"8.3",code:"8.3",title:"Risk treatment",description:"Implementing treatments."}]},{id:"CHECK_ACT_27001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1",code:"9.1",title:"Monitoring",description:"Measuring effectiveness."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Periodic checks."},{id:"9.3",code:"9.3",title:"Management review",description:"Strategic eval."},{id:"10.1",code:"10.1",title:"Continual improvement",description:"Growth."},{id:"10.2",code:"10.2",title:"Nonconformity",description:"Corrective actions."}]},{id:"ANNEX_A_5",title:"Annex A.5 Organizational (37 Controls)",icon:"Lock",clauses:[{id:"A.5.1",code:"A.5.1",title:"Policies for information security",description:"Reviewed for suitability."},{id:"A.5.2",code:"A.5.2",title:"InfoSec roles",description:"Defined responsibilities."},{id:"A.5.3",code:"A.5.3",title:"Segregation of duties",description:"Conflict reduction."},{id:"A.5.4",code:"A.5.4",title:"Management responsibilities",description:"Committing to security."},{id:"A.5.5",code:"A.5.5",title:"Contact with authorities",description:"Regulation flow."},{id:"A.5.6",code:"A.5.6",title:"Special interest groups",description:"Trend tracking."},{id:"A.5.7",code:"A.5.7",title:"Threat intelligence",description:"Info collection."},{id:"A.5.8",code:"A.5.8",title:"IS in project mgmt",description:"Lifecycle inclusion."},{id:"A.5.9",code:"A.5.9",title:"Inventory of assets",description:"Critical asset list."},{id:"A.5.10",code:"A.5.10",title:"Acceptable use of assets",description:"Usage rules."},{id:"A.5.11",code:"A.5.11",title:"Return of assets",description:"Termination retrieval."},{id:"A.5.12",code:"A.5.12",title:"Classification of info",description:"Labeling based on value."},{id:"A.5.13",code:"A.5.13",title:"Labeling of info",description:"Visual markers."},{id:"A.5.14",code:"A.5.14",title:"Information transfer",description:"Securing transit."},{id:"A.5.15",code:"A.5.15",title:"Access control",description:"Authorization rules."},{id:"A.5.16",code:"A.5.16",title:"Identity management",description:"User ID lifecycle."},{id:"A.5.17",code:"A.5.17",title:"Authentication info",description:"Secrets management."},{id:"A.5.18",code:"A.5.18",title:"Access rights",description:"Provisioning/revoking."},{id:"A.5.19",code:"A.5.19",title:"IS in supplier relationships",description:"Agreements."},{id:"A.5.20",code:"A.5.20",title:"Supplier agreements",description:"Addressing security."},{id:"A.5.21",code:"A.5.21",title:"ICT supply chain",description:"Sourcing risks."},{id:"A.5.22",code:"A.5.22",title:"Monitoring suppliers",description:"Auditing delivery."},{id:"A.5.23",code:"A.5.23",title:"Cloud services",description:"SaaS security."},{id:"A.5.24",code:"A.5.24",title:"Incident management",description:"Planning response."},{id:"A.5.25",code:"A.5.25",title:"Incident assessment",description:"Severity eval."},{id:"A.5.26",code:"A.5.26",title:"Incident response",description:"Action taken."},{id:"A.5.27",code:"A.5.27",title:"Incident learning",description:"Root cause."},{id:"A.5.28",code:"A.5.28",title:"Evidence collection",description:"Forensics."},{id:"A.5.29",code:"A.5.29",title:"IS during disruption",description:"BCP security."},{id:"A.5.30",code:"A.5.30",title:"ICT readiness",description:"DR planning."},{id:"A.5.31",code:"A.5.31",title:"Legal compliance",description:"Regulatory requirements."},{id:"A.5.32",code:"A.5.32",title:"IP Rights",description:"Copyright protection."},{id:"A.5.33",code:"A.5.33",title:"Protection of records",description:"Integrity."},{id:"A.5.34",code:"A.5.34",title:"Privacy of PII",description:"GDPR/Data protection."},{id:"A.5.35",code:"A.5.35",title:"Independent review",description:"External auditing."},{id:"A.5.36",code:"A.5.36",title:"Policy compliance",description:"Adherence."},{id:"A.5.37",code:"A.5.37",title:"Operating procedures",description:"Standard documentation."}]},{id:"ANNEX_A_6",title:"Annex A.6 People (8 Controls)",icon:"Users",clauses:[{id:"A.6.1",code:"A.6.1",title:"Screening",description:"Background checks."},{id:"A.6.2",code:"A.6.2",title:"Terms of employment",description:"HR contracts."},{id:"A.6.3",code:"A.6.3",title:"Awareness",description:"InfoSec education."},{id:"A.6.4",code:"A.6.4",title:"Disciplinary process",description:"Breach handling."},{id:"A.6.5",code:"A.6.5",title:"Termination responsibilities",description:"Post-exit."},{id:"A.6.6",code:"A.6.6",title:"Confidentiality",description:"NDAs."},{id:"A.6.7",code:"A.6.7",title:"Remote working",description:"Teleworking rules."},{id:"A.6.8",code:"A.6.8",title:"Event reporting",description:"Anomaly reporting."}]},{id:"ANNEX_A_7",title:"Annex A.7 Physical (14 Controls)",icon:"Building",clauses:[{id:"A.7.1",code:"A.7.1",title:"Physical perimeters",description:"Barriers."},{id:"A.7.2",code:"A.7.2",title:"Physical entry",description:"Access systems."},{id:"A.7.3",code:"A.7.3",title:"Securing offices",description:"Locks."},{id:"A.7.4",code:"A.7.4",title:"Security monitoring",description:"CCTV."},{id:"A.7.5",code:"A.7.5",title:"Physical protection",description:"Disaster proofing."},{id:"A.7.6",code:"A.7.6",title:"Secure areas",description:"Restricted protocols."},{id:"A.7.7",code:"A.7.7",title:"Clear desk/screen",description:"Clean policy."},{id:"A.7.8",code:"A.7.8",title:"Equipment siting",description:"Safe placement."},{id:"A.7.9",code:"A.7.9",title:"Assets off-premises",description:"Mobile security."},{id:"A.7.10",code:"A.7.10",title:"Storage media",description:"Drive handling."},{id:"A.7.11",code:"A.7.11",title:"Utilities",description:"Power/Water safety."},{id:"A.7.12",code:"A.7.12",title:"Cabling security",description:"Line protection."},{id:"A.7.13",code:"A.7.13",title:"Equipment maintenance",description:"Care logs."},{id:"A.7.14",code:"A.7.14",title:"Secure disposal",description:"Data wiping."}]},{id:"ANNEX_A_8",title:"Annex A.8 Technological (34 Controls)",icon:"Cpu",clauses:[{id:"A.8.1",code:"A.8.1",title:"Endpoint devices",description:"Device agents."},{id:"A.8.2",code:"A.8.2",title:"Privileged access",description:"Admin rights."},{id:"A.8.3",code:"A.8.3",title:"Information access",description:"Need-to-know."},{id:"A.8.4",code:"A.8.4",title:"Source code access",description:"IP security."},{id:"A.8.5",code:"A.8.5",title:"Authentication",description:"MFA usage."},{id:"A.8.6",code:"A.8.6",title:"Capacity mgmt",description:"Resources."},{id:"A.8.7",code:"A.8.7",title:"Malware protection",description:"AV/EDR."},{id:"A.8.8",code:"A.8.8",title:"Vulnerabilities",description:"Patching."},{id:"A.8.9",code:"A.8.9",title:"Configuration",description:"Hardening."},{id:"A.8.10",code:"A.8.10",title:"Deletion",description:"Erasure."},{id:"A.8.11",code:"A.8.11",title:"Data masking",description:"Privacy."},{id:"A.8.12",code:"A.8.12",title:"DLP",description:"Leakage prevention."},{id:"A.8.13",code:"A.8.13",title:"Backup",description:"Redundancy."},{id:"A.8.14",code:"A.8.14",title:"Redundancy ICT",description:"HA systems."},{id:"A.8.15",code:"A.8.15",title:"Logging",description:"Audit trails."},{id:"A.8.16",code:"A.8.16",title:"Monitoring",description:"Health alerts."},{id:"A.8.17",code:"A.8.17",title:"Clock sync",description:"NTP."},{id:"A.8.18",code:"A.8.18",title:"Privileged utilities",description:"Restrict tools."},{id:"A.8.19",code:"A.8.19",title:"Software install",description:"Whitelisting."},{id:"A.8.20",code:"A.8.20",title:"Network security",description:"Firewalls."},{id:"A.8.21",code:"A.8.21",title:"Network services",description:"VPN/Gateways."},{id:"A.8.22",code:"A.8.22",title:"Segregation",description:"VLANs."},{id:"A.8.23",code:"A.8.23",title:"Web filtering",description:"Proxy."},{id:"A.8.24",code:"A.8.24",title:"Cryptography",description:"Encryption."},{id:"A.8.25",code:"A.8.25",title:"Secure SDLC",description:"Dev security."},{id:"A.8.26",code:"A.8.26",title:"Application security",description:"Design."},{id:"A.8.27",code:"A.8.27",title:"Architecture",description:"Engineering."},{id:"A.8.28",code:"A.8.28",title:"Secure coding",description:"OWASP."},{id:"A.8.29",code:"A.8.29",title:"Security testing",description:"VAPT."},{id:"A.8.30",code:"A.8.30",title:"Outsourced dev",description:"Contractor code."},{id:"A.8.31",code:"A.8.31",title:"Separation envs",description:"Dev/Prod."},{id:"A.8.32",code:"A.8.32",title:"Change mgmt",description:"RFCs."},{id:"A.8.33",code:"A.8.33",title:"Test info",description:"Protect data."},{id:"A.8.34",code:"A.8.34",title:"IS during audit",description:"Auditor access."}]}]},Ft={name:"ISO 14001:2015 (EMS)",description:"Environmental Management System",groups:[{id:"PLAN_14001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context",description:"Org Context.",subClauses:[{id:"4.1",code:"4.1",title:"Org Context",description:"Env issues."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Expectations."},{id:"4.3",code:"4.3",title:"Scope",description:"Boundaries."},{id:"4.4",code:"4.4",title:"EMS System",description:"Processes."}]},{id:"5",code:"5",title:"Leadership",description:"Commitment.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership & Commitment",description:"Duty."},{id:"5.2",code:"5.2",title:"Environmental Policy",description:"Goals."},{id:"5.3",code:"5.3",title:"Org Roles & Responsibilities",description:"Authorities."}]},{id:"6",code:"6",title:"Planning",description:"Aspects.",subClauses:[{id:"6.1.1",code:"6.1.1",title:"General",description:"Actions."},{id:"6.1.2",code:"6.1.2",title:"Environmental aspects",description:"Impacts."},{id:"6.1.3",code:"6.1.3",title:"Compliance obligations",description:"Legal."},{id:"6.1.4",code:"6.1.4",title:"Planning action",description:"Achievement."},{id:"6.2",code:"6.2",title:"Environmental objectives",description:"Plans."}]}]},{id:"SUPPORT_14001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Supply."},{id:"7.2",code:"7.2",title:"Competence",description:"Training."},{id:"7.3",code:"7.3",title:"Awareness",description:"EMS awareness."},{id:"7.4",code:"7.4",title:"Communication",description:"Internal/External.",subClauses:[{id:"7.4.1",code:"7.4.1",title:"General",description:"Criteria."},{id:"7.4.2",code:"7.4.2",title:"Internal",description:"Staff."},{id:"7.4.3",code:"7.4.3",title:"External",description:"Parties."}]},{id:"7.5",code:"7.5",title:"Documented info",description:"Control."}]},{id:"DO_14001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational control",description:"Lifecycle."},{id:"8.2",code:"8.2",title:"Emergency preparedness",description:"Response."}]},{id:"CHECK_ACT_14001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1.1",code:"9.1.1",title:"General",description:"Measurement."},{id:"9.1.2",code:"9.1.2",title:"Compliance evaluation",description:"Audit."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Scheduled review."},{id:"9.3",code:"9.3",title:"Management review",description:"Review outputs."},{id:"10.1",code:"10.1",title:"General",description:"Performance."},{id:"10.2",code:"10.2",title:"Nonconformity",description:"Corrective action."},{id:"10.3",code:"10.3",title:"Continual improvement",description:"Suitability."}]}]},Ut={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Wt={};const Kt="4.4.0-RELEASE",Vt="2026-03-09 09:00:00 (GMT+7)",Gt="gemini-3-pro-preview",Ht="gemini-2.5-flash-image",et={company:"",address:"",scope:"",soa:"",smo:"",auditor:"",type:"",totalEmployees:0,totalSites:0},We={auditDates:[new Date().toISOString().split("T")[0]],startTime:"08:30",endTime:"17:00",lunchStartTime:"12:00",lunchEndTime:"13:00"},qt=()=>{try{if(typeof import.meta<"u"&&Ut)return}catch{}try{if(typeof process<"u"&&Wt)return""}catch{}return""},Jt=qt(),Ve=[Jt,"AIzaSyC_yJCcSrU5eiKm_0MmMq1vwK-xyB72i4U"].filter(t=>t&&t.trim()!==""),Yt=["gemini-3-pro-preview","gemini-2.0-flash","gemini-2.0-flash-lite-preview-02-05","gemini-3-flash-preview"],De=[{id:"planning",label:"1. Planning",icon:"LayoutList",colorClass:"bg-orange-500",textClass:"text-orange-600",borderClass:"border-orange-500",bgSoft:"bg-orange-50 dark:bg-orange-950/30"},{id:"evidence",label:"2. Audit",icon:"FileSearch",colorClass:"bg-blue-500",textClass:"text-blue-600",borderClass:"border-blue-500",bgSoft:"bg-blue-50 dark:bg-blue-950/30"},{id:"findings",label:"3. Findings",icon:"Wand2",colorClass:"bg-purple-500",textClass:"text-purple-600",borderClass:"border-purple-500",bgSoft:"bg-purple-50 dark:bg-purple-950/30"},{id:"report",label:"4. Report",icon:"FileText",colorClass:"bg-emerald-500",textClass:"text-emerald-600",borderClass:"border-emerald-500",bgSoft:"bg-emerald-50 dark:bg-emerald-950/30"}],ct={"Pre Assessment":"The objective of the assessment is to ascertain the organisation's progress towards implementing a management system by conducting a gap analysis.","Pre-transfer Review":"To confirm if the certification is valid and eligible for transfer, recommending a result.","Pre-transfer visit":"To confirm if the certification is valid and eligible for transfer, recommending a result.","Readiness Review":"The objective of the readiness review is to ensure the client organization has planned and initiated the implementation of the changes within the standard that will affect their transition process. The review will also include confirmation of the time needed, locations to be visited, and timeframes to allow planning of the transition audit.",IAV1:"The objective of the assessment is to determine the organisation's readiness for the stage 2 audit and to ensure its effective planning.",IAV2:"The objective of the assessment is to conduct a certification assessment to ensure the elements of the proposed scope of registration and the requirements of the management standard are effectively addressed by the organisation's management system and to confirm the forward strategic plan. If this visit is part of a multi-location assessment, the final recommendation will be contingent of the findings from all assessments.",CAV:"The objective of the assessment is to conduct a surveillance assessment and look for positive evidence to ensure the elements of the scope of certification and the requirements of the management standard are effectively addressed by the organisation's management system demonstrating the ability to support the achievement of statutory, regulatory and contractual requirements and the organisations specified objectives, as applicable with regard to the scope of the management standard, and to confirm the on-going achievement and applicability of the forward strategic plan.","M-NC Close out":"The objective of the assessment is to verify the effectiveness of the corrective action taken to address the major non-conformity and the minor non-conformities raised at the last assessment visit.","Migration Op1":"The objective of the visit is to conduct an audit against the requirements of ISO 45001 which takes into consideration existing arrangements for certification to BS OHSAS 18001. The audit will ensure the proposed scope of certification to ISO 45001 and the requirements of the management system are effectively addressed and implemented.","Migration Op2":"The objective of the visit is to plan and progress migration to ISO 45001 whilst confirming existing management system arrangements for conformity to BS OHSAS 18001 are maintained. The audit will provide a plan for ensuring the proposed scope of certification to ISO 45001 and the requirements of the management system are effectively addressed and implemented.","Migration Op3":"The objective of the visit is to conduct an audit against the requirements of ISO 45001 as part of a full recertification audit. The audit will ensure the proposed scope of certification to ISO 45001 and the requirements of the management system are effectively addressed and implemented. (Note: this option is not applicable to registrations that involve recertification by strategic review and additional time will be required to cover the significant new and changed requirements in ISO 45001:2018)","Recert op1":"The objective of the assessment is to ascertain the integrity of the organisation's management system over the current assessment cycle to enable re-certification and confirm the forward strategic assessment plan.","Recert op2":"The objective of the assessment is to conduct a re-assessment of the existing certification to ensure the elements of the proposed scope of registration and the requirements of the management standard are effectively addressed by the organisation's management system.","Transition Audit (1)":"The objective of the visit is to conduct a certification transition assessment to ensure the elements of the scope of registration and the requirements of the new management standard are effectively addressed by the organization's management system.","Transition Audit (2)":"The objective of the visit is to conduct a certification transition and surveillance assessment to ensure the elements of the scope of registration and the requirements of the new management standard are effectively addressed by the organization's management system.","Transition Audit (3)":"The objective of the visit is to conduct a certification transition and recertification assessment to ensure the elements of the scope of registration and the requirements of the new management standard are effectively addressed by the organization's management system.","Verification Audit":"The objective of the assessment was to conduct verification of the requirements of the management standard are effectively addressed by the organization's management system and to confirm the forward strategic plan."},ft={"ISO 9001:2015":Bt,"ISO 27001:2022":zt,"ISO 14001:2015":Ft},Xt=[{version:"4.4.0-RELEASE",date:"2026-03-09",features:["INTELLIGENCE: Added 'Context Aggregation'. AI now checks sibling clauses/sub-clauses for evidence (e.g., verifying 7.5 via 7.5.3).","EXPORT: Smart Multi-language Export. Detects Vietnamese text automatically to force AI translation if needed.","CORE: Improved Type Safety in Planning Module and optimized Workload Calculation."]},{version:"4.3.0-REFACTORED",date:"2026-03-08",features:["ARCHITECTURAL: Decomposed Planning View into sub-components for better maintainability.","PERFORMANCE: Optimized Context API with useCallback to reduce re-renders.","UX: Cleaned up UI interactions for WD allocation and Site management."]},{version:"4.2.0-OPTIMIZED",date:"2026-03-08",features:["PERFORMANCE: Reduced AI Token usage by 40% via Compact-CSV Context Injection.","CORE: Rendering optimization for Planning Matrix and Schedule Generator.","UX: Hardware-accelerated animations for smoother transitions on lower-end devices."]},{version:"4.1.0-STABLE",date:"2026-03-07",features:["REFACTOR: Codebase cleanup and performance optimization for Planning View.","FEATURE: Bi-directional Resource Sync. Adding staff in Planning now auto-updates Global Headcount.","UX: Improved Auditor Competency tagging and visual cues."]}],Zt="",Qt="ISO_AUDIT_DB",Se="knowledge_files",Ne="structured_clauses",es=2;class ts{constructor(){Ue(this,"dbPromise",null)}openDB(){return this.dbPromise?this.dbPromise:(this.dbPromise=new Promise((s,n)=>{const r=indexedDB.open(Qt,es);r.onupgradeneeded=i=>{const o=i.target.result;if(o.objectStoreNames.contains(Se)||o.createObjectStore(Se,{keyPath:"standardKey"}),!o.objectStoreNames.contains(Ne)){const a=o.createObjectStore(Ne,{keyPath:"id"});a.createIndex("standardKey","standardKey",{unique:!1}),a.createIndex("code","code",{unique:!1})}},r.onsuccess=i=>{s(i.target.result)},r.onerror=i=>{console.error("KnowledgeStore: DB Open Error",i),n(i.target.error)}}),this.dbPromise)}async saveDocument(s,n,r){try{const i=await this.openDB();return new Promise((o,a)=>{const l=i.transaction([Se],"readwrite").objectStore(Se),u={standardKey:s,fileName:n,content:r,timestamp:Date.now()},h=l.put(u);h.onsuccess=()=>o(),h.onerror=()=>a(h.error)})}catch(i){throw console.error("KnowledgeStore: Save Doc Error",i),i}}async getDocument(s){try{const n=await this.openDB();return new Promise((r,i)=>{const c=n.transaction([Se],"readonly").objectStore(Se).get(s);c.onsuccess=()=>r(c.result?c.result:null),c.onerror=()=>i(c.error)})}catch{return null}}async bulkSaveClauses(s,n){const r=await this.openDB();return new Promise((i,o)=>{const a=r.transaction([Ne],"readwrite"),c=a.objectStore(Ne);n.forEach(l=>{const u={id:`${s}_${l.code}`,standardKey:s,code:l.code,title:l.title,content:l.content};c.put(u)}),a.oncomplete=()=>i(),a.onerror=()=>o(a.error)})}async getClauseContent(s,n){try{const r=await this.openDB();return new Promise(i=>{const c=r.transaction([Ne],"readonly").objectStore(Ne).get(`${s}_${n}`);c.onsuccess=()=>{const l=c.result;i(l?l.content:null)},c.onerror=()=>i(null)})}catch{return null}}async deleteStandardData(s){const n=await this.openDB();return n.transaction([Se],"readwrite").objectStore(Se).delete(s),new Promise(i=>{const o=n.transaction([Ne],"readwrite"),a=o.objectStore(Ne),l=a.index("standardKey").openKeyCursor(IDBKeyRange.only(s));l.onsuccess=u=>{const h=u.target.result;h&&(a.delete(h.primaryKey),h.continue())},o.oncomplete=()=>i()})}}const He=new ts,bt=d.createContext(void 0),ut={maskCompany:!0,maskSmo:!0,maskPeople:!0,maskEmail:!0,maskPhone:!0,maskAddress:!0,maskIP:!0},ss=({children:t})=>{const[s,n]=d.useState({}),[r,i]=d.useState(""),[o,a]=d.useState(et),[c,l]=d.useState(ut),[u,h]=d.useState(ct),[p,m]=d.useState([]),[x,f]=d.useState(null),[g,b]=d.useState([]),[j,y]=d.useState([]),[E,I]=d.useState(We),[P,q]=d.useState([]),[re,ne]=d.useState(null),[U,O]=d.useState(Zt),[D,T]=d.useState({}),[C,_]=d.useState([]),[V,z]=d.useState([]),[K,F]=d.useState(null),[H,B]=d.useState(null),[N,L]=d.useState(null),[J,ee]=d.useState({}),[Z,te]=d.useState(null),k=d.useMemo(()=>({...ft,...s}),[s]),M=d.useMemo(()=>p.find(v=>v.id===x),[p,x]),G=d.useRef(p);d.useEffect(()=>{G.current=p},[p]),d.useEffect(()=>{const v=localStorage.getItem("iso_audit_types_config");if(v)try{h(JSON.parse(v))}catch(w){console.error("Failed to load audit types config",w)}},[]),d.useEffect(()=>{if(!x){O(""),T({}),_([]),ne(null);return}if(x===re)return;const v=G.current.find(w=>w.id===x);v?(O(v.evidence||""),T(v.matrixData||{}),_(v.evidenceTags||[]),ne(x)):ne(null)},[x,re]),d.useEffect(()=>{re&&m(v=>v.map(w=>w.id===re&&(w.evidence!==U||w.matrixData!==D||w.evidenceTags!==C)?{...w,evidence:U,matrixData:D,evidenceTags:C}:w))},[U,D,C,re]),d.useEffect(()=>{const v=g.reduce((w,R)=>w+(R.employeeCount||0),0);a(w=>{let R={...w},$=!1;w.totalSites!==g.length&&(R.totalSites=g.length,$=!0);const ae=w.totalEmployees||0;return v>ae&&(R.totalEmployees=v,$=!0),$?R:w})},[g,o.totalEmployees,o.totalSites]);const W=d.useCallback((v,w)=>{n(R=>({...R,[v]:w}))},[]),se=d.useCallback(v=>{n(w=>({...w,[r]:v}))},[r]),oe=d.useCallback(v=>{n(w=>{const R={...w};return delete R[v],R}),r===v&&i("")},[r]),le=d.useCallback((v,w)=>{h(R=>{const $={...R,[v]:w};return localStorage.setItem("iso_audit_types_config",JSON.stringify($)),$})},[]),Q=d.useCallback(v=>{h(w=>{const R={...w};return delete R[v],localStorage.setItem("iso_audit_types_config",JSON.stringify(R)),R})},[]),he=d.useCallback(()=>{h(ct),localStorage.removeItem("iso_audit_types_config")},[]),xe=d.useCallback(v=>{const w=`proc_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,R={id:w,name:v,evidence:"",interviewees:[],matrixData:{},evidenceTags:[],uploadedFiles:[],siteIds:[]};m($=>[...$,R]),f(w)},[]),ye=d.useCallback((v,w)=>{m(R=>R.map($=>$.id===v?{...$,name:w}:$))},[]),be=d.useCallback((v,w)=>{m(R=>R.map($=>$.id===v?{...$,competencyCode:w}:$))},[]),Ie=d.useCallback((v,w)=>{m(R=>R.map($=>$.id===v?{...$,siteIds:w}:$))},[]),Te=d.useCallback(v=>{m(x===v?w=>{const R=w.filter(ae=>ae.id!==v),$=R.length>0?R[0].id:null;return f($),R}:w=>w.filter(R=>R.id!==v))},[x]),S=d.useCallback((v,w)=>{if(!w)return null;const R=w.groups.flatMap(ae=>ae.clauses),$=(ae,ce)=>{for(const ue of ce){if(ue.id===ae)return ue;if(ue.subClauses){const ge=$(ae,ue.subClauses);if(ge)return ge}}return null};return $(v,R)},[]),ie=d.useCallback(v=>{m(R=>R.map($=>{const ae=v.find(ce=>ce.processId===$.id);if(ae){const ce={...$.matrixData},ue=k[r];return ae.clauses.forEach(ge=>{if(!ce[ge]){const $e=S(ge,ue),Ze=($e==null?void 0:$e.description)||"Requirement";ce[ge]=[{id:`${ge}_req_0`,requirement:Ze,evidenceInput:"",status:"pending"}]}}),{...$,matrixData:ce}}return $}));const w=v.find(R=>R.processId===re);w&&T(R=>{const $={...R},ae=k[r];return w.clauses.forEach(ce=>{if(!$[ce]){const ue=S(ce,ae),ge=(ue==null?void 0:ue.description)||"Requirement";$[ce]=[{id:`${ce}_req_0`,requirement:ge,evidenceInput:"",status:"pending"}]}}),$})},[k,r,re,S]),de=d.useCallback((v,w)=>{m(R=>R.map($=>{if($.id!==v)return $;const ae={...$.matrixData};if(ae[w])delete ae[w];else{const ce=k[r],ue=S(w,ce),ge=(ue==null?void 0:ue.description)||"Requirement";ae[w]=[{id:`${w}_req_0`,requirement:ge,evidenceInput:"",status:"pending"}]}return{...$,matrixData:ae}})),re===v&&T(R=>{const $={...R};if($[w])delete $[w];else{const ae=k[r],ce=S(w,ae),ue=(ce==null?void 0:ce.description)||"Requirement";$[w]=[{id:`${w}_req_0`,requirement:ue,evidenceInput:"",status:"pending"}]}return $})},[k,r,re,S]),X=d.useCallback(v=>{m(w=>w.map(R=>R.id===x&&!R.interviewees.includes(v)?{...R,interviewees:[...R.interviewees,v]}:R))},[x]),me=d.useCallback(v=>{m(w=>w.map(R=>R.id===x?{...R,interviewees:R.interviewees.filter($=>$!==v)}:R))},[x]),Re=d.useCallback(v=>{_(w=>[...w,v])},[]),Ce=d.useCallback(async v=>{try{const w=await He.getDocument(v);w?(F(w.content),B(w.fileName)):(F(null),B(null))}catch(w){console.error(w)}},[]),Pe=d.useCallback(async()=>{F(null),B(null),r&&await He.deleteStandardData(r)},[r]),Le=d.useCallback((v,w)=>{F(v),B(w)},[]),Be=d.useCallback(()=>{i(""),a(et),m([]),f(null),ne(null),O(""),T({}),_([]),z([]),L(null),ee({}),te(null),F(null),B(null),l(ut),b([]),y([]),q([]),I(We)},[]),ze=d.useCallback(v=>{if(v.standardKey&&i(v.standardKey),v.auditInfo&&a({...et,...v.auditInfo}),v.selectedClauses&&z(v.selectedClauses),v.privacySettings&&l(v.privacySettings),v.processes&&v.processes.length>0)m(v.processes),v.activeProcessId&&f(v.activeProcessId);else if(v.scopes&&v.scopes.length>0){const w=v.scopes.map(R=>({...R,interviewees:[]}));m(w),v.activeScopeId&&f(v.activeScopeId)}v.analysisResult&&L(v.analysisResult),v.selectedFindings&&ee(v.selectedFindings),v.finalReportText&&te(v.finalReportText),v.auditSites&&b(v.auditSites),v.auditTeam&&y(v.auditTeam),v.auditPlanConfig&&I({...We,...v.auditPlanConfig,auditDates:v.auditPlanConfig.auditDates||We.auditDates}),v.auditSchedule&&q(v.auditSchedule),v.standardKey&&Ce(v.standardKey)},[Ce]),Xe=d.useMemo(()=>({standards:k,standardKey:r,setStandardKey:i,customStandards:s,addCustomStandard:W,updateStandard:se,resetStandard:oe,auditInfo:o,setAuditInfo:a,privacySettings:c,setPrivacySettings:l,auditTypeOptions:u,addAuditType:le,deleteAuditType:Q,resetAuditTypes:he,processes:p,activeProcessId:x,activeProcess:M,setActiveProcessId:f,addProcess:xe,renameProcess:ye,updateProcessCode:be,updateProcessSites:Ie,deleteProcess:Te,batchUpdateProcessClauses:ie,toggleProcessClause:de,addInterviewee:X,removeInterviewee:me,auditSites:g,setAuditSites:b,auditTeam:j,setAuditTeam:y,auditPlanConfig:E,setAuditPlanConfig:I,auditSchedule:P,setAuditSchedule:q,evidence:U,setEvidence:O,matrixData:D,setMatrixData:T,evidenceTags:C,addEvidenceTag:Re,selectedClauses:V,setSelectedClauses:z,knowledgeBase:K,knowledgeFileName:H,loadKnowledgeForStandard:Ce,clearKnowledge:Pe,setKnowledgeData:Le,analysisResult:N,setAnalysisResult:L,selectedFindings:J,setSelectedFindings:ee,finalReportText:Z,setFinalReportText:te,resetSession:Be,restoreSession:ze}),[k,r,s,o,c,u,p,x,M,g,j,E,P,U,D,C,V,K,H,N,J,Z,W,se,oe,le,Q,he,xe,ye,be,Ie,Te,ie,de,X,me,Re,Ce,Pe,Le,Be,ze]);return e.jsx(bt.Provider,{value:Xe,children:t})},fe=()=>{const t=d.useContext(bt);if(!t)throw new Error("useAudit must be used within AuditProvider");return t},vt=d.createContext(void 0),is=({children:t})=>{const[s,n]=d.useState(!0);d.useEffect(()=>{s?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[s]);const[r,i]=d.useState(1);d.useEffect(()=>{document.documentElement.style.setProperty("--font-scale",r.toString())},[r]);const[o,a]=d.useState(!0),[c,l]=d.useState(420),[u,h]=d.useState({settings:!1,about:!1,integrity:!1,recall:!1,addStandard:!1}),p=(g,b)=>{h(j=>({...j,[g]:b??!j[g]}))},[m,x]=d.useState(null),f=g=>x(g);return e.jsx(vt.Provider,{value:{isDarkMode:s,toggleDarkMode:()=>n(g=>!g),fontSizeScale:r,setFontSizeScale:i,isSidebarOpen:o,setSidebarOpen:a,sidebarWidth:c,setSidebarWidth:l,modals:u,toggleModal:p,toastMsg:m,showToast:f},children:t})},ke=()=>{const t=d.useContext(vt);if(!t)throw new Error("useUI must be used within UIProvider");return t},yt=d.createContext(void 0),rs=({children:t})=>{const[s,n]=d.useState([]),[r,i]=d.useState(""),o=d.useRef([]);d.useEffect(()=>{o.current=s},[s]),d.useEffect(()=>{try{const m=localStorage.getItem("iso_api_keys"),x=m?JSON.parse(m):[],f=new Set(x.map(j=>j.key));let g=!1;Ve.forEach((j,y)=>{j&&!f.has(j)&&(x.push({id:`env_key_${y}`,label:`Default Key ${y+1}`,key:j,status:"valid",latency:0,lastChecked:new Date().toISOString()}),g=!0)}),x.forEach(j=>{j.activeModel==="gemini-1.5-flash"&&(j.activeModel="gemini-2.0-flash-exp",g=!0)}),n(x),g&&localStorage.setItem("iso_api_keys",JSON.stringify(x));const b=localStorage.getItem("iso_active_key_id");b&&x.some(j=>j.id===b)?i(b):x.length>0&&i(x[0].id)}catch(m){console.error("Key Load Error",m)}},[]);const a=async(m,x)=>{if(!m.trim())return"empty";if(s.some(b=>b.key===m.trim()))return"duplicate";const f={id:Date.now().toString(),label:x||`Key ${s.length+1}`,key:m.trim(),status:"valid",activeModel:"gemini-2.0-flash-exp",latency:0,lastChecked:new Date().toISOString()},g=[...s,f];return n(g),localStorage.setItem("iso_api_keys",JSON.stringify(g)),s.length===0&&(i(f.id),localStorage.setItem("iso_active_key_id",f.id)),"valid"},c=m=>{const x=s.filter(f=>f.id!==m);if(n(x),localStorage.setItem("iso_api_keys",JSON.stringify(x)),r===m){const f=x[0],g=f?f.id:"";i(g),g?localStorage.setItem("iso_active_key_id",g):localStorage.removeItem("iso_active_key_id")}},l=async()=>{},u=async()=>{},h=()=>{},p=d.useCallback(()=>s.find(m=>m.id===r),[s,r]);return e.jsx(yt.Provider,{value:{apiKeys:s,activeKeyId:r,isCheckingKey:!1,addKey:a,deleteKey:c,refreshKeyStatus:l,checkAllKeys:u,getActiveKey:p,isAutoCheckEnabled:!1,toggleAutoCheck:h,setActiveKeyId:i},children:t})},Oe=()=>{const t=d.useContext(yt);if(!t)throw new Error("useKeyPool must be used within KeyPoolProvider");return t},pt={BookOpen:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),e.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Quote:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2H4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8Z"}),e.jsx("path",{d:"M14 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2h-4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8Z"})]}),TDLogo:e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"tealNeonGrad",x1:"100%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#00f2c3",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"#0098f0",stopOpacity:"1"})]})}),e.jsx("path",{d:"M 20 20 H 65 L 55 30 H 30 V 65 L 20 75 V 20 Z",fill:"url(#tealNeonGrad)"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M 40 40 H 60 C 75 40, 85 50, 85 65 C 85 80, 75 90, 60 90 H 35 L 45 80 H 60 C 70 80, 75 75, 75 65 C 75 55, 70 50, 60 50 H 50 V 40 Z",fill:"url(#tealNeonGrad)"}),e.jsx("path",{d:"M 30 65 L 60 35",stroke:"white",strokeWidth:"0.5",strokeOpacity:"0.3"})]}),TDSolidLink:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"future_td_grad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#06b6d4"})," ",e.jsx("stop",{offset:"50%",stopColor:"#6366f1"})," ",e.jsx("stop",{offset:"100%",stopColor:"#f59e0b"})," "]}),e.jsxs("filter",{id:"glow_td",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"0.6",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("path",{d:"M5 6H11V18H14C17.866 18 21 15.3137 21 12C21 8.68629 17.866 6 14 6H11",stroke:"url(#future_td_grad)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#glow_td)"})]}),Grid:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]}),Session1_SparklePlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 3v18"}),e.jsx("path",{d:"M3 12h18"}),e.jsx("path",{d:"m15 9-6 6"}),e.jsx("path",{d:"m9 9 6 6"}),e.jsx("path",{d:"M12 2v4"}),e.jsx("path",{d:"m4.93 4.93 2.83 2.83"}),e.jsx("path",{d:"M2 12h4"}),e.jsx("path",{d:"m4.93 19.07 2.83-2.83"}),e.jsx("path",{d:"M12 22v-4"}),e.jsx("path",{d:"m19.07 19.07-2.83-2.83"}),e.jsx("path",{d:"M22 12h-4"}),e.jsx("path",{d:"m19.07 4.93-2.83 2.83"})]}),Session2_PlayCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polygon",{points:"10 8 16 12 10 16 10 8"})]}),Session3_Rocket:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"}),e.jsx("path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),e.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.1 4-1 4-1"}),e.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.1-1.62 1-4 1-4"})]}),Session4_FilePlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),e.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),Session5_RefreshCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e.jsx("path",{d:"M3 3v5h5"}),e.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),e.jsx("path",{d:"M16 21h5v-5"})]}),Session6_Zap:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Session7_Compass:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"})]}),Session8_Flag:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),e.jsx("line",{x1:"4",y1:"22",x2:"4",y2:"15"})]}),Session9_DoorOpen:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),e.jsx("path",{d:"M2 20h3"}),e.jsx("path",{d:"M13 20h9"}),e.jsx("path",{d:"M10 12v.01"}),e.jsx("path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z"})]}),Session10_Pulse:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),Session11_GridAdd:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),e.jsx("path",{d:"M3 17.5h7"}),e.jsx("path",{d:"M6.5 14v7"})]}),Session12_CleanSheet:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),e.jsx("path",{d:"M3 9h18"})]}),Session13_PowerBtn:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),e.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]}),Demo1_MultiFiles:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M3 15h6"}),e.jsx("path",{d:"M6 12v6"}),e.jsx("path",{d:"M16 18l2-2 2 2"}),e.jsx("path",{d:"M18 16v6"})]}),Demo2_CloudAdd:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 13v8"}),e.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),e.jsx("path",{d:"M16 17l-4-4-4 4"})]}),Demo3_FolderUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"}),e.jsx("path",{d:"M12 10v6"}),e.jsx("path",{d:"m9 13 3-3 3 3"})]}),Demo4_ImgStack:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"}),e.jsx("line",{x1:"16",y1:"5",x2:"22",y2:"5"}),e.jsx("line",{x1:"19",y1:"2",x2:"19",y2:"8"}),e.jsx("circle",{cx:"9",cy:"9",r:"2"}),e.jsx("path",{d:"m21 15-3-3a22 22 0 0 1-2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),e.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.1 4-1 4-1"}),e.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.1-1.62 1-4 1-4"})]}),Demo5_Clip:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"}),e.jsx("path",{d:"M12 12h.01"})]}),Demo6_BoxUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),e.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),e.jsx("line",{x1:"12",y1:"12.01",x2:"12",y2:"22.08"}),e.jsx("polyline",{points:"16 12 12 8 8 12"})]}),Demo7_PlusCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M8 12h8"}),e.jsx("path",{d:"M12 8v8"})]}),Demo8_GridPlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}),e.jsx("path",{d:"M14 17h7"}),e.jsx("path",{d:"M17.5 13.5v7"})]}),Demo9_DocUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M12 18v-6"}),e.jsx("path",{d:"m9 15 3-3 3 3"})]}),Demo10_Layers:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}),e.jsx("path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}),e.jsx("path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"}),e.jsx("path",{d:"M12 8v4"})]}),Demo11_Scan:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),e.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),e.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),e.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),e.jsx("path",{d:"M7 12h10"}),e.jsx("path",{d:"M12 8v8"})]}),Demo12_Attach:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m4.5 16.5 7-7"}),e.jsx("path",{d:"m2 2 20 20"}),e.jsx("path",{d:"m12 12 7-7"}),e.jsx("path",{d:"M17 17v5"}),e.jsx("path",{d:"M22 12h-5"})]}),Demo13_Meteor:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m13 4 8.2 2.5a2 2 0 0 1 1.3 2.5L20 17.5"}),e.jsx("path",{d:"m8.5 7.5 10 10"}),e.jsx("path",{d:"M2 13.5V19a2 2 0 0 0 2 2h5.5"}),e.jsx("path",{d:"m13.5 8.5-5 5"}),e.jsx("path",{d:"M7 15c-1.5 1-2 2.5-2 2.5s1.5.5 2.5-2"}),e.jsx("path",{d:"M12 4V2"}),e.jsx("path",{d:"m16 6 2-2"}),e.jsx("path",{d:"M8 6 6 4"})]}),Sparkle:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:"text-amber-400 drop-shadow-[0_0_4px_rgba(252,211,77,0.7)] animate-pulse-slow",children:e.jsx("path",{d:"M12 2L14.4 9.6L22 12L14.4 14.4L12 22L9.6 14.4L2 12L9.6 9.6L12 2Z"})}),FilePlus2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M3 15h6"}),e.jsx("path",{d:"M6 12v6"})]}),History:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e.jsx("path",{d:"M3 3v5h5"}),e.jsx("path",{d:"M12 7v5l4 2"})]}),LayoutList:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}),e.jsx("path",{d:"M14 4h7"}),e.jsx("path",{d:"M14 9h7"}),e.jsx("path",{d:"M14 15h7"}),e.jsx("path",{d:"M14 20h7"})]}),Tag:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),FileEdit:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l1-3.95 5.42-5.44Z"})]}),Book:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),FileShield:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M12 13v7"}),e.jsx("path",{d:"M8.5 16.5c2 1 5 1 7 0"})]}),Users:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Lock:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),Cpu:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),e.jsx("rect",{x:"9",y:"9",width:"6",height:"6"}),e.jsx("path",{d:"M15 2v2"}),e.jsx("path",{d:"M15 20v2"}),e.jsx("path",{d:"M2 15h2"}),e.jsx("path",{d:"M2 9h2"}),e.jsx("path",{d:"M20 15h2"}),e.jsx("path",{d:"M20 9h2"}),e.jsx("path",{d:"M9 2v2"}),e.jsx("path",{d:"M9 20v2"})]}),CheckThick:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),CheckSquare:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"9 11 12 14 22 4"}),e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-3-2V5a2 2 0 0 1 2-2h11"})]}),Square:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})}),FileText:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"})]}),Search:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Trash2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("path",{d:"M14 11v6"})]}),ChevronDown:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})}),ChevronUp:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"18 15 12 9 6 15"})}),ChevronLeft:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"15 18 9 12 15 6"})}),ChevronRight:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"9 18 15 12 9 6"})}),Wand2:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z"}),e.jsx("path",{d:"m14 7 3 3"}),e.jsx("path",{d:"M5 6v4"}),e.jsx("path",{d:"M19 14v4"}),e.jsx("path",{d:"M10 2v2"}),e.jsx("path",{d:"M7 8H3"}),e.jsx("path",{d:"M21 16h-4"}),e.jsx("path",{d:"M11 3H9"})]}),AlertCircle:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),CheckCircle2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{d:"m9 12 2 2 4-4"})]}),Save:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),e.jsx("polyline",{points:"7 3 7 8 15 8"})]}),ExpandPanel:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"15 3 21 3 21 9"}),e.jsx("polyline",{points:"9 21 3 21 3 15"}),e.jsx("line",{x1:"21",y1:"3",x2:"14",y2:"10"}),e.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}),CollapsePanel:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"4 14 10 14 10 20"}),e.jsx("polyline",{points:"20 10 14 10 14 4"}),e.jsx("line",{x1:"14",y1:"10",x2:"21",y2:"3"}),e.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}),X:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Copy:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),e.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),Download:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-3-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Sun:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),RefreshCw:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 2v6h-6"}),e.jsx("path",{d:"M3 12a9 9 0 0 1 15-6.7L21 8"}),e.jsx("path",{d:"M3 22v-6h6"}),e.jsx("path",{d:"M21 12a9 9 0 0 1-15 6.7L3 16"})]}),Lightbulb:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 18h6"}),e.jsx("path",{d:"M10 22h4"}),e.jsx("path",{d:"M12 2v2"}),e.jsx("path",{d:"M12 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),e.jsx("path",{d:"M9 10a3 3 0 0 1 3-3 3 3 0 0 1 3 3v2H9z"})]}),AIIndicator:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:e.jsx("path",{d:"M12 2L14.4 9.6L22 12L14.4 14.4L12 22L9.6 14.4L2 12L9.6 9.6L12 2Z"})}),UploadCloud:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),e.jsx("path",{d:"M12 12v9"}),e.jsx("path",{d:"m16 16-4-4-4 4"})]}),Image:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),e.jsx("circle",{cx:"9",cy:"9",r:"2"}),e.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Info:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Settings:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Plus:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Minus:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})}),Key:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"m21 2-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0 3 3L22 7l-3-3m-3.5 3.5L19 4"})}),Loader:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-spin",children:e.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Keyboard:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2"}),e.jsx("path",{d:"M6 8h.01"}),e.jsx("path",{d:"M10 8h.01"}),e.jsx("path",{d:"M14 8h.01"}),e.jsx("path",{d:"M18 8h.01"}),e.jsx("path",{d:"M6 12h.01"}),e.jsx("path",{d:"M10 12h.01"}),e.jsx("path",{d:"M14 12h.01"}),e.jsx("path",{d:"M18 12h.01"}),e.jsx("path",{d:"M7 16h10"})]}),TextSize:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5h7v2"}),e.jsx("path",{d:"M6.5 5v14"}),e.jsx("path",{d:"M14 13v-2h7v2"}),e.jsx("path",{d:"M17.5 11v8"})]}),AuditUser:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"}),e.jsx("path",{d:"M22 22 18 18 16 20 20 24 24 20Z"})]}),ScanText:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5c0-1.1.9-2 2-2h2"}),e.jsx("path",{d:"M17 3h2c1.1 0 2 .9 2 2v2"}),e.jsx("path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2"}),e.jsx("path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2"}),e.jsx("path",{d:"M7 12h.01"}),e.jsx("path",{d:"M10 12h4"}),e.jsx("path",{d:"M17 12h.01"}),e.jsx("path",{d:"M12 7v10"})]}),Building:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2"}),e.jsx("path",{d:"M9 22v-4c0-1.1.9-2 2-2h2c1.1 0 2 .9 2 2v4"}),e.jsx("path",{d:"M8 6h.01"}),e.jsx("path",{d:"M16 6h.01"}),e.jsx("path",{d:"M12 6h.01"}),e.jsx("path",{d:"M12 10h.01"}),e.jsx("path",{d:"M12 14h.01"}),e.jsx("path",{d:"M12 18h.01"})]}),User:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Snowflake:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),e.jsx("line",{x1:"12",x2:"12",y2:"22"}),e.jsx("path",{d:"m20 16-4-4 4-4"}),e.jsx("path",{d:"m4 8 4 4-4 4"}),e.jsx("path",{d:"m16 4-4 4-4-4"}),e.jsx("path",{d:"m8 20 4-4 4 4"})]}),CheckLineart:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Mic:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),e.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),e.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),e.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}),ShieldEye:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),e.jsx("path",{d:"M12 8c-2.5 0-4.5 1.5-6 4 1.5 2.5 3.5 4 6 4s4.5-1.5 6-4c-1.5-2.5-3.5-4-6-4z"}),e.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]}),MapPin:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),Fence:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 6v14"}),e.jsx("path",{d:"M12 6v14"}),e.jsx("path",{d:"M20 6v14"}),e.jsx("path",{d:"M2 10h20"}),e.jsx("path",{d:"M2 16h20"})]}),Target:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("circle",{cx:"12",cy:"12",r:"6"}),e.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),FileSearch:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),e.jsx("path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3"}),e.jsx("path",{d:"m9 18-1.5-1.5"}),e.jsx("circle",{cx:"5",cy:"14",r:"3"})]}),Mail:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),e.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),Phone:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),Globe:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}),e.jsx("path",{d:"M2 12h20"})]}),Calendar:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})},A=({name:t,size:s=18,className:n="",onClick:r,title:i})=>{const o=pt[t]||pt.AlertCircle;if(je.isValidElement(o)){const a=o,c={width:s,height:s,className:`${n} ${a.props.className||""}`,onClick:r};return i&&(c.title=i),je.cloneElement(a,c)}return e.jsx("span",{className:n,onClick:r,title:i,children:o})},ht=({icon:t,iconColor:s,value:n,onChange:r,options:i,defaultText:o,onIconClick:a,iconTitle:c,id:l})=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:`absolute left-3 top-1/2 -translate-y-1/2 transition-all duration-300 z-10 flex items-center justify-center ${a?"cursor-pointer pointer-events-auto hover:scale-110 active:scale-95":"pointer-events-none"}`,onClick:u=>{a&&(u.stopPropagation(),a(u))},title:c,children:e.jsx("div",{className:s,children:e.jsx(A,{name:t,size:16})})}),e.jsxs("select",{id:l,value:n,onChange:r,className:`w-full appearance-none pl-10 pr-8 h-11 bg-gray-50 dark:bg-slate-950 border border-gray-100 dark:border-slate-800 rounded-xl text-xs font-medium outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all cursor-pointer shadow-sm hover:border-indigo-200 dark:hover:border-slate-600 hover:shadow-md dark:shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)] ${n?"text-slate-900 dark:text-white":"text-gray-400"}`,children:[e.jsx("option",{value:"",disabled:!0,children:o}),i.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400 group-hover:text-indigo-500 transition-colors duration-300",children:e.jsx(A,{name:"ChevronDown",size:14})})]}),tt=({icon:t,iconColor:s,placeholder:n,value:r,onChange:i,className:o=""})=>e.jsxs("div",{className:`relative group ${o}`,children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none transition-colors duration-300",children:e.jsx("div",{className:s,children:e.jsx(A,{name:t,size:16})})}),e.jsx("input",{type:"text",placeholder:n,value:r,onChange:i,className:"w-full pl-10 pr-3 h-11 bg-gray-50 dark:bg-slate-950 border border-gray-100 dark:border-slate-800 rounded-xl text-xs font-medium text-slate-900 dark:text-white placeholder-gray-400 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all shadow-sm hover:border-indigo-200 dark:hover:border-slate-600 hover:shadow-md dark:shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)]"})]}),Ye=({isOpen:t,title:s,onClose:n,children:r})=>t?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-[300] flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:n,children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-3xl shadow-2xl border border-gray-100 dark:border-slate-800 transform transition-all animate-zoom-in-spring duration-300 overflow-hidden dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_10px_15px_-3px_rgba(0,0,0,0.5)]",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-lg font-black text-slate-800 dark:text-white tracking-tight",children:s}),e.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/20 transition-all duration-300 text-slate-400 hover:rotate-90",children:e.jsx(A,{name:"X",size:20})})]}),e.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto custom-scrollbar",children:r})]})}):null,ns=({message:t,onClose:s})=>{const[n,r]=d.useState(!1),[i,o]=d.useState(!1),a=()=>{r(!0),setTimeout(()=>s(),400)};return d.useEffect(()=>{o(!0);const p=setTimeout(a,4e3);return()=>clearTimeout(p)},[s]),e.jsx("div",{className:`fixed z-[9999] w-[90vw] max-w-sm md:w-auto md:max-w-md bottom-10 left-1/2 -translate-x-1/2 transition-all duration-500 ease-spring ${i?n?"opacity-0 scale-95 translate-y-8":"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-8"}`,children:e.jsxs("div",{className:"bg-slate-900/95 dark:bg-white/95 backdrop-blur-md text-white dark:text-slate-900 px-4 py-3 md:px-5 md:py-4 rounded-2xl shadow-2xl flex items-start gap-3 md:gap-4 border border-slate-700/50 dark:border-slate-200/50",children:[e.jsx("div",{className:"flex-shrink-0 p-1.5 bg-emerald-500 rounded-full text-white shadow-lg shadow-emerald-500/30 mt-0.5",children:e.jsx(A,{name:"CheckLineart",size:14})}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-60 leading-none mb-1",children:"System Notification"}),e.jsx("span",{className:"text-xs md:text-sm font-bold leading-snug break-words",children:t})]}),e.jsx("button",{onClick:a,className:"flex-shrink-0 -mr-2 -mt-2 p-2 text-slate-500 hover:text-white dark:hover:text-slate-900 transition-colors rounded-full hover:bg-white/10 dark:hover:bg-black/5",children:e.jsx(A,{name:"X",size:16})})]})})},di=({className:t})=>e.jsxs("div",{className:`flex items-center justify-center gap-1 ${t}`,children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-3 w-3 rounded-full bg-indigo-400 opacity-75"}),e.jsx(A,{name:"Sparkle",size:16,className:"animate-spin-slow text-yellow-300"})]}),os=({message:t})=>e.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-slate-900/95 backdrop-blur-md z-50 flex flex-col items-center justify-center animate-in fade-in duration-500",children:[e.jsxs("div",{className:"relative w-28 h-28 mb-8",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-indigo-100 dark:border-indigo-900 rounded-full opacity-50"}),e.jsx("div",{className:"absolute inset-0 border-t-4 border-indigo-600 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-4 border-4 border-purple-100 dark:border-purple-900 rounded-full opacity-50"}),e.jsx("div",{className:"absolute inset-4 border-r-4 border-purple-500 rounded-full animate-spin-reverse"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"bg-gradient-to-tr from-indigo-500 to-purple-500 p-4 rounded-full shadow-lg shadow-indigo-500/50 animate-pulse",children:e.jsx(A,{name:"Wand2",className:"text-white",size:28})})}),e.jsx("div",{className:"absolute top-0 left-1/2 w-2 h-2 bg-cyan-400 rounded-full shadow-[0_0_10px_#22d3ee] animate-ping"})]}),e.jsx("h3",{className:"text-lg font-black text-slate-800 dark:text-white mb-2 animate-pulse px-4 text-center max-w-[80%]",children:t}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-mono flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Gemini AI Processing..."]})]}),as=({fontSizeScale:t,adjustFontSize:s})=>{const[n,r]=d.useState(!1),[i,o]=d.useState(null),a=d.useRef(null),c=l=>{if(l.stopPropagation(),!n&&a.current){const u=a.current.getBoundingClientRect(),h=window.innerWidth-u.right;o({top:u.bottom+8,right:h}),r(!0)}else r(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("button",{ref:a,onClick:c,className:`p-2 rounded-xl transition-all active:scale-95 ${n?"bg-slate-100 text-slate-900 dark:bg-slate-800 dark:text-white":"text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-800"}`,title:"Adjust Font Size",children:e.jsx(A,{name:"TextSize",size:18})}),n&&i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[99] cursor-default",onClick:()=>r(!1)}),e.jsxs("div",{className:"fixed z-[100] flex items-center bg-white dark:bg-slate-900 rounded-full p-1.5 shadow-2xl border border-gray-200 dark:border-slate-700 animate-zoom-in-spring min-w-[140px] justify-between",style:{top:`${i.top}px`,right:`${i.right}px`},onClick:l=>l.stopPropagation(),children:[e.jsx("button",{onClick:()=>s("decrease"),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full text-slate-500 hover:text-indigo-600 transition-all duration-200 flex-shrink-0 active:scale-90",children:e.jsx(A,{name:"Minus",size:16})}),e.jsxs("span",{className:"text-sm font-black text-slate-800 dark:text-white select-none px-2 w-12 text-center",children:[(t*100).toFixed(0),"%"]}),e.jsx("button",{onClick:()=>s("increase"),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full text-slate-500 hover:text-indigo-600 transition-all duration-200 flex-shrink-0 active:scale-90",children:e.jsx(A,{name:"Plus",size:16})})]})]})]})},ls=()=>{const{isSidebarOpen:t,setSidebarOpen:s,toggleModal:n,fontSizeScale:r,setFontSizeScale:i,isDarkMode:o,toggleDarkMode:a}=ke(),{standards:c,standardKey:l,privacySettings:u}=fe(),{getActiveKey:h}=Oe(),p=h(),m=d.useMemo(()=>Object.values(u).some(I=>I===!0),[u]),x="flex items-center justify-center gap-2 px-3 h-7 rounded-full border shadow-sm backdrop-blur-md transition-all duration-300",f="text-[10px] font-black uppercase tracking-widest leading-none pt-px",g=d.useMemo(()=>{if(!p)return"OFFLINE";const P=(p.activeModel||"gemini-3-pro-preview").toLowerCase();if(P.includes("gemini-3"))return P.includes("flash")?"3.0 FLASH":"3.0 PRO";if(P.includes("gemini-2.0")||P.includes("gemini-2")){if(P.includes("lite"))return"2.0 LITE";if(P.includes("flash"))return"2.0 FLASH";if(P.includes("pro"))return"2.0 PRO";if(P.includes("exp"))return"2.0 EXP"}if(P.includes("gemini-1.5")){if(P.includes("flash"))return"1.5 FLASH";if(P.includes("pro"))return"1.5 PRO"}return P.includes("flash")?"FLASH AI":P.includes("pro")?"PRO AI":P.includes("ultra")?"ULTRA AI":"GEMINI AI"},[p]),b=d.useMemo(()=>p?p.status==="valid"?{status:"online",dotColor:"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.6)] animate-pulse",borderColor:"border-emerald-200 dark:border-emerald-800/50 bg-emerald-50/50 dark:bg-emerald-900/10 text-emerald-700 dark:text-emerald-400",tooltip:`AI Ready: ${p.activeModel||"Default Model"}`}:p.status==="quota_exceeded"?{status:"warning",dotColor:"bg-orange-500",borderColor:"border-orange-200 dark:border-orange-800 bg-orange-50/50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400",tooltip:"Quota Exceeded: Switching to backup model..."}:{status:"error",dotColor:"bg-red-500",borderColor:"border-red-200 dark:border-red-800 bg-red-50/50 dark:bg-red-900/20 text-red-600 dark:text-red-400",tooltip:"Connection Error: Check API Key"}:{status:"offline",dotColor:"bg-slate-300 dark:bg-slate-600",borderColor:"border-slate-200 dark:border-slate-700 text-slate-500",tooltip:"AI Offline: No API Key Configured"},[p]),j=d.useMemo(()=>m?"bg-emerald-50/50 dark:bg-emerald-900/10 text-emerald-700 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800/50 shadow-[0_0_8px_rgba(16,185,129,0.1)]":"bg-slate-50/50 dark:bg-slate-800/50 text-slate-400 dark:text-slate-500 border-slate-200 dark:border-slate-700 opacity-80",[m]),y=d.useMemo(()=>{var q;const I=((q=c[l])==null?void 0:q.name)||"",P=I.match(/\((.*?)\)/);return P?P[1]:I.split(" ")[0]||"ISO"},[l,c]),E=d.useMemo(()=>{const I=y.toUpperCase();return I.includes("EMS")||I.includes("14001")?"bg-emerald-50/50 dark:bg-emerald-900/10 text-emerald-700 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800/50":I.includes("QMS")||I.includes("9001")?"bg-blue-50/50 dark:bg-blue-900/10 text-blue-700 dark:text-blue-400 border-blue-200 dark:border-blue-800/50":I.includes("ISMS")||I.includes("27001")?"bg-purple-50/50 dark:bg-purple-900/10 text-purple-700 dark:text-purple-400 border-purple-200 dark:border-purple-800/50":"bg-slate-50/50 dark:bg-slate-800/50 text-slate-600 dark:text-slate-400 border-slate-200 dark:border-slate-700"},[y]);return e.jsxs("header",{className:"flex-shrink-0 px-4 md:px-6 py-0 border-b border-white/50 dark:border-slate-800 bg-white/70 dark:bg-slate-900/80 backdrop-blur-xl shadow-glass z-[70] relative flex justify-between items-center h-16 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center h-full gap-4 md:gap-6",children:[e.jsx("div",{className:"relative group cursor-pointer flex items-center justify-center active:scale-95 transition-transform",onClick:()=>s(!t),title:"Toggle Sidebar",children:e.jsx("div",{className:"relative w-10 h-10 flex items-center justify-center",children:t?e.jsxs("div",{className:"relative w-8 h-8",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-transparent border-t-indigo-500 border-b-cyan-500 rounded-full animate-infinity-spin drop-shadow-md"}),e.jsx("div",{className:"absolute inset-2 border-2 border-transparent border-l-purple-500 border-r-pink-500 rounded-full animate-spin-reverse drop-shadow-sm"})]}):e.jsx("div",{className:"transform group-hover:scale-110 transition-transform duration-300 drop-shadow-[0_0_10px_rgba(99,102,241,0.5)]",children:e.jsx(A,{name:"TDLogo",size:32})})})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("h1",{className:"hidden md:block text-lg font-extrabold tracking-tight text-slate-800 dark:text-white leading-none",children:["ISO AUDITING TOOL ",e.jsx("span",{className:"bg-slate-900 text-white dark:bg-white dark:text-slate-900 px-1.5 py-0.5 rounded text-xs align-middle ml-1 tracking-wider shadow-sm font-black border border-white/20 dark:border-slate-800/50",children:"PRO"})]}),e.jsxs("div",{className:"hidden lg:flex items-center gap-2",children:[e.jsxs("div",{className:`${x} ${b.borderColor} cursor-default select-none`,title:b.tooltip,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${b.dotColor}`}),e.jsx("span",{className:f,children:g})]}),e.jsx("div",{className:`${x} ${j}`,title:m?"Privacy Shield: Active (Data Redacted)":"Privacy Shield: Inactive",children:e.jsx(A,{name:"ShieldEye",size:14,className:m?"animate-pulse":""})}),e.jsxs("div",{className:`${x} ${E}`,children:[e.jsx(A,{name:"Book",size:12,className:"opacity-70"}),e.jsx("span",{className:f,children:y})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>n("settings",!0),className:"p-2 rounded-xl text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-800 transition-all active:scale-95",title:"Settings & Configuration",children:e.jsx(A,{name:"Settings",size:18})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(as,{fontSizeScale:r,adjustFontSize:I=>i(P=>I==="increase"?Math.min(P+.1,1.3):Math.max(P-.1,.8))})}),e.jsx("button",{onClick:a,className:"p-2 rounded-xl text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-800 transition-all active:scale-95",children:e.jsx(A,{name:o?"Sun":"Moon",size:18})}),e.jsx("button",{onClick:()=>n("about",!0),className:"p-2 rounded-xl text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all active:scale-95",title:"About & Release Notes",children:e.jsx(A,{name:"Info",size:18})})]})]})},xt=({icon:t,iconColor:s,placeholder:n,value:r,onChange:i,className:o="",rows:a=2})=>e.jsxs("div",{className:`relative group ${o}`,children:[e.jsx("div",{className:"absolute left-3 top-3 pointer-events-none transition-colors duration-300",children:e.jsx("div",{className:s,children:e.jsx(A,{name:t,size:16})})}),e.jsx("textarea",{placeholder:n,value:r,onChange:i,rows:a,className:"w-full pl-10 pr-3 py-3 bg-gray-50 dark:bg-slate-950 border border-gray-100 dark:border-slate-800 rounded-xl text-sm font-medium text-slate-900 dark:text-white placeholder-gray-400 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all shadow-sm hover:border-indigo-200 dark:hover:border-slate-600 hover:shadow-md dark:shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)] resize-y min-h-[44px]"})]}),st=({text:t})=>e.jsxs("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:[t," ",e.jsx("span",{className:"text-red-500",title:"Required Field",children:"*"})]}),ds=({onAddNewStandard:t,onOpenIntegrity:s,onKnowledgeUpload:n,health:r,auditFieldIconColor:i,standardOptions:o})=>{var Te;const{standardKey:a,setStandardKey:c,auditInfo:l,setAuditInfo:u,standards:h,knowledgeFileName:p,clearKnowledge:m,processes:x,activeProcessId:f,setActiveProcessId:g,addProcess:b,renameProcess:j,deleteProcess:y,auditTypeOptions:E,auditSites:I,setAuditSites:P,auditTeam:q}=fe(),{showToast:re}=ke(),ne=d.useRef(null),U=d.useRef(null),O=d.useRef(null),D=d.useRef(!1),[T,C]=d.useState(""),[_,V]=d.useState(null),[z,K]=d.useState(""),[F,H]=d.useState(!1),[B,N]=d.useState(!1),L=!!p,J=!!a&&a!=="ADD_NEW",ee=L?"BookOpen":"Book",Z=d.useMemo(()=>{var S;return a&&((S=h[a])==null?void 0:S.name.includes("27001"))},[a,h]),te=d.useMemo(()=>q.reduce((S,ie)=>S+(ie.manDays||0),0),[q]);let k="text-gray-300 dark:text-slate-600",M="Please select an ISO Standard first to enable document upload.",G="cursor-not-allowed";L?(k="text-emerald-500 drop-shadow-sm",M=`Source Attached: ${p}. Click to Replace.`,G="cursor-pointer"):J&&(k=`${i} hover:text-indigo-600 dark:hover:text-indigo-300`,M="Click to upload Source PDF or Word (DOCX) for better accuracy",G="cursor-pointer hover:scale-110 active:scale-95");const W=()=>{J&&ne.current&&ne.current.click()},se=S=>{S.target.files&&S.target.files.length>0&&(n(S),S.target.value="")},oe=S=>{const ie=parseInt(S.target.value)||0,de=ie-I.length;if(de>0){const X=[];for(let me=0;me<de;me++)X.push({id:`site_auto_${Date.now()}_${me}`,name:`Site ${I.length+me+1}`,address:"",scope:"",isMain:!1,employeeCount:0});P([...I,...X])}else if(de<0){const X=I.slice(0,ie);P(X)}},le=S=>{if(S.key==="Enter"){S.preventDefault();const ie=T.trim();if(ie){const de=x.find(X=>X.name.toLowerCase()===ie.toLowerCase());de?(g(de.id),re(`Switched to: ${de.name}`),N(!1),C(""),H(!1)):(D.current=!0,b(ie),C(""),N(!0),H(!0),setTimeout(()=>{O.current&&(O.current.scrollTop=O.current.scrollHeight),U.current&&U.current.focus(),D.current=!1},50))}else N(!1)}else S.key==="Escape"&&(N(!1),C(""))},Q=()=>{D.current||T.trim()||N(!1)},he=(S,ie,de)=>{S.stopPropagation(),S.preventDefault();const X=x.find(me=>me.id===ie);if(X){const me=X.evidence&&X.evidence.trim().length>0,Re=Object.keys(X.matrixData).some(Pe=>X.matrixData[Pe].some(Le=>Le.evidenceInput&&Le.evidenceInput.trim().length>0)),Ce=X.uploadedFiles&&X.uploadedFiles.length>0;me||Re||Ce?window.confirm(`Delete process "${de}"? 

 WARNING: This process contains evidence/files that will be permanently lost.`)&&(y(ie),re(`Deleted: ${de}`)):(y(ie),re(`Deleted: ${de}`))}},xe=S=>{V(S.id),K(S.name)},ye=()=>{_&&z.trim()&&(j(_,z.trim()),re("Renamed successfully")),V(null)},be=d.useMemo(()=>x.filter(S=>S.name&&S.name.trim()!==""),[x]),Ie=((Te=be.find(S=>S.id===f))==null?void 0:Te.name)||"Select Process";return e.jsxs("div",{className:"bg-gray-50/80 dark:bg-slate-900/50 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm p-3 space-y-4 w-full",children:[e.jsx("input",{type:"file",ref:ne,accept:".pdf,.docx,.doc,.txt",className:"hidden",onChange:se}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(st,{text:"Audit Standard"}),e.jsxs("div",{className:"relative group/source",children:[e.jsx(ht,{id:"sidebar-standard-select",icon:ee,iconColor:`${k} transition-all duration-300 ${G}`,value:a,onChange:S=>{S.target.value==="ADD_NEW"?t():c(S.target.value)},options:o,defaultText:"Select ISO Standard",onIconClick:W,iconTitle:M}),L&&e.jsx("button",{onClick:S=>{S.stopPropagation(),m()},className:"absolute right-9 top-1/2 -translate-y-1/2 p-1.5 text-slate-400 hover:text-red-500 bg-transparent hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full transition-all z-20 active:scale-95",title:"Remove Source File",children:e.jsx(A,{name:"Trash2",size:14})}),a&&e.jsx("button",{onClick:s,className:`absolute -top-1.5 -right-1.5 p-1 rounded-full shadow-lg transition-all hover:scale-110 active:scale-95 text-white ring-2 ring-white dark:ring-slate-900 ${r.isHealthy?"bg-emerald-500":"bg-orange-500"}`,title:"Integrity Check",children:e.jsx(A,{name:r.isHealthy?"CheckCircle2":"AlertCircle",size:10})})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(st,{text:"Audit Type"}),e.jsx(ht,{icon:"FileEdit",iconColor:i,value:l.type,onChange:S=>u({...l,type:S.target.value}),options:Object.keys(E).map(S=>({value:S,label:S})),defaultText:"Select Type"})]}),e.jsxs("div",{className:"w-[80px]",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:"Total WD"}),e.jsx("div",{className:"h-11 bg-slate-100 dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-xl flex items-center justify-center text-xs font-mono font-bold text-slate-700 dark:text-white shadow-inner",title:"Total Man-Days calculated from Audit Team list",children:te})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(st,{text:"Organization Context"}),e.jsx(tt,{icon:"Building",iconColor:i,placeholder:"Company Name",value:l.company,onChange:S=>u({...l,company:S.target.value})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"basis-1/2",children:e.jsx(tt,{icon:"Tag",iconColor:i,placeholder:"SMO/ID",value:l.smo,onChange:S=>u({...l,smo:S.target.value})})}),e.jsxs("div",{className:"basis-1/4 relative group",children:[e.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 pointer-events-none transition-colors duration-300",children:e.jsx("div",{className:i,children:e.jsx(A,{name:"MapPin",size:14})})}),e.jsx("input",{type:"number",placeholder:"Sites",title:"Total Sites (Auto-Syncs with Logistics)",value:I.length||"",onChange:oe,className:"w-full pl-7 pr-1 h-11 bg-gray-50 dark:bg-slate-950 border border-gray-100 dark:border-slate-800 rounded-xl text-sm font-medium text-slate-900 dark:text-white placeholder-gray-400 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all shadow-sm hover:border-indigo-200 dark:hover:border-slate-600 hover:shadow-md dark:shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)] [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),e.jsxs("div",{className:"basis-1/4 relative group",children:[e.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 pointer-events-none transition-colors duration-300",children:e.jsx("div",{className:i,children:e.jsx(A,{name:"Users",size:14})})}),e.jsx("input",{type:"number",placeholder:"Staff",title:"Total Employees (All Sites)",value:l.totalEmployees||"",onChange:S=>u({...l,totalEmployees:parseInt(S.target.value)||0}),className:"w-full pl-7 pr-1 h-11 bg-gray-50 dark:bg-slate-950 border border-gray-100 dark:border-slate-800 rounded-xl text-sm font-medium text-slate-900 dark:text-white placeholder-gray-400 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all shadow-sm hover:border-indigo-200 dark:hover:border-slate-600 hover:shadow-md dark:shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)] [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]}),e.jsx(xt,{icon:"MapPin",iconColor:i,placeholder:"Site Address / Locations...",value:l.address||"",onChange:S=>u({...l,address:S.target.value}),rows:2}),e.jsx(xt,{icon:"Target",iconColor:i,placeholder:"Audit Scope Description...",value:l.scope||"",onChange:S=>u({...l,scope:S.target.value}),rows:3}),Z&&e.jsx("div",{className:"animate-in fade-in slide-in-from-top-2",children:e.jsx(tt,{icon:"FileShield",iconColor:"text-purple-600 dark:text-purple-400",placeholder:"SoA Version / Reference (e.g. v2.0 2024)",value:l.soa||"",onChange:S=>u({...l,soa:S.target.value})})}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsxs("label",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 uppercase",children:["Process Management ",e.jsx("span",{className:"text-red-500",title:"Required Field",children:"*"})]}),e.jsxs("span",{className:"text-[9px] text-slate-400 dark:text-slate-500 font-mono",children:[be.length," Items"]})]}),be.length===0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative group w-full",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none text-indigo-600 dark:text-indigo-400 group-focus-within:text-indigo-500",children:e.jsx(A,{name:"Plus",size:16})}),e.jsx("input",{ref:U,type:"text",value:T,placeholder:"Enter Process/Department...",onChange:S=>C(S.target.value),onKeyDown:le,className:"w-full pl-10 pr-3 h-11 bg-white dark:bg-slate-950 border border-indigo-100 dark:border-slate-700 rounded-xl text-xs font-medium text-slate-900 dark:text-white placeholder-indigo-300 dark:placeholder-slate-600 outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/10 transition-all shadow-sm",autoComplete:"off"})]})}):e.jsxs("div",{className:"relative",children:[e.jsxs("div",{onClick:()=>{B||H(!F)},className:`w-full h-11 flex items-center justify-between px-3 rounded-xl border cursor-pointer transition-all duration-200 ${F||B?"border-indigo-500 ring-1 ring-indigo-500 bg-white dark:bg-slate-900 shadow-md z-20":"bg-white dark:bg-slate-900 border-gray-100 dark:border-slate-800 hover:border-indigo-300 dark:hover:border-slate-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden flex-1",children:[e.jsx(A,{name:"Session11_GridAdd",size:16,className:"text-indigo-600 dark:text-indigo-400"}),B?e.jsx("input",{ref:U,autoFocus:!0,value:T,onChange:S=>C(S.target.value),onKeyDown:le,onBlur:Q,placeholder:"Type Name & Enter to Add...",className:"bg-transparent border-none outline-none text-xs font-medium text-slate-900 dark:text-white placeholder-slate-400 w-full",onClick:S=>S.stopPropagation(),autoComplete:"off"}):e.jsx("span",{className:"text-xs font-bold truncate text-slate-700 dark:text-slate-300",children:Ie})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!B&&e.jsx("div",{className:`p-1 rounded-full ${F?"bg-indigo-100 text-indigo-600 dark:bg-slate-800 dark:text-indigo-400":"hover:bg-gray-100 dark:hover:bg-slate-800 text-slate-400"}`,title:"Add New Process",onClick:S=>{S.stopPropagation(),H(!0),N(!0),C(""),setTimeout(()=>{var ie;return(ie=U.current)==null?void 0:ie.focus()},50)},children:e.jsx(A,{name:"Plus",size:14})}),B&&e.jsx("div",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400 hover:text-red-500",title:"Cancel / Close",onClick:S=>{S.stopPropagation(),N(!1),C("")},children:e.jsx(A,{name:"X",size:14})}),e.jsx(A,{name:"ChevronDown",size:14,className:`transition-transform duration-300 text-slate-400 ${F?"rotate-180":""}`})]})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${F?"max-h-[300px] opacity-100 mt-2":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"p-1 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl shadow-xl space-y-1",children:e.jsx("div",{ref:O,className:"max-h-[200px] overflow-y-auto custom-scrollbar px-1 space-y-1 pb-1 pt-1 scroll-smooth",children:be.map(S=>{const ie=f===S.id,de=_===S.id;return e.jsxs("div",{className:`group flex items-center justify-between p-2 rounded-lg cursor-pointer transition-all ${ie?"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-900/30":"hover:bg-gray-50 dark:hover:bg-slate-800 border border-transparent"}`,onClick:()=>{de||(g(S.id),B||H(!1))},children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden flex-1",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full flex-shrink-0 ${ie?"bg-indigo-500":"bg-slate-300 dark:bg-slate-700"}`}),de?e.jsx("input",{autoFocus:!0,className:"w-full min-w-0 bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-xs font-bold px-1 py-0.5 rounded outline-none border border-indigo-300",value:z,onChange:X=>K(X.target.value),onKeyDown:X=>X.key==="Enter"&&ye(),onBlur:ye,onClick:X=>X.stopPropagation()}):e.jsx("span",{className:`text-xs truncate font-bold ${ie?"text-indigo-700 dark:text-indigo-300":"text-slate-600 dark:text-slate-400"}`,children:S.name})]}),!de&&e.jsxs("div",{className:"flex items-center gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{type:"button",onClick:X=>{X.preventDefault(),X.stopPropagation(),xe(S)},className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-md",title:"Rename",children:e.jsx(A,{name:"FileEdit",size:12})}),e.jsx("button",{type:"button",onClick:X=>he(X,S.id,S.name),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md",title:"Delete",children:e.jsx(A,{name:"Trash2",size:12})})]})]},S.id)})})})})]})]})]})]})},cs=({isOpen:t,onClose:s,health:n,isCustomStandard:r,onResetStandard:i,onAutoRepair:o,isRepairing:a,repairStats:c})=>e.jsx(Ye,{isOpen:t,title:"Standard Health Index",onClose:s,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-5 p-5 rounded-3xl bg-gray-50 dark:bg-slate-800 border border-gray-100 dark:border-slate-700 shadow-inner dark:shadow-[inset_0_2px_6px_rgba(0,0,0,0.4)]",children:[e.jsxs("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white text-2xl font-black shadow-xl ring-4 ring-white dark:ring-slate-700 ${n.score>90?"bg-gradient-to-br from-emerald-400 to-emerald-600":"bg-gradient-to-br from-orange-400 to-orange-600"}`,children:[n.score,"%"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-black text-slate-900 dark:text-slate-100 uppercase tracking-tight",children:"Data Health"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-snug mt-1",children:n.isHealthy?"Excellent! Data is accurate, clean, and complete for professional use.":"Standard data is incomplete or missing Source verification."})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Integrity Checklist"}),[...n.integrity,...n.completeness].map((l,u)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 rounded-2xl shadow-sm dark:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-1.5 rounded-full shadow-sm ${l.status==="pass"?"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20":"text-red-500 bg-red-50 dark:bg-red-900/20"}`,children:e.jsx(A,{name:l.status==="pass"?"CheckCircle2":"AlertCircle",size:18})}),e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:l.label})]}),e.jsx("span",{className:`text-[10px] font-black px-3 py-1 rounded-full shadow-sm uppercase ${l.status==="pass"?"text-emerald-700 bg-emerald-100":"text-red-700 bg-red-100"}`,children:l.detail})]},u))]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-slate-700 flex flex-col md:flex-row items-center justify-center gap-3",children:[r&&e.jsxs("button",{onClick:i,className:"px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 dark:bg-red-900/20 dark:hover:bg-red-900/40 dark:text-red-400 rounded-xl font-bold text-xs flex items-center gap-2 transition-all active:scale-95 border border-red-200 dark:border-red-800",children:[e.jsx(A,{name:"Trash2",size:14}),"Reset to Default"]}),c?e.jsxs("div",{className:"flex items-center gap-3 animate-in fade-in slide-in-from-right-5",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-bold text-emerald-600 uppercase",children:"Repair Complete"}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Added ",c.fixed," items, Cleaned ",c.cleaned," dupes."]})]}),e.jsx("button",{onClick:s,className:"px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl font-bold text-xs shadow-lg shadow-emerald-500/30",children:"Close & Continue"})]}):!n.isHealthy&&e.jsxs("button",{onClick:o,disabled:a,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-xs flex items-center gap-2 shadow-lg shadow-indigo-500/30 transition-all active:scale-95 disabled:opacity-70 disabled:active:scale-100",children:[a?e.jsx(A,{name:"Loader",className:"animate-spin"}):e.jsx(A,{name:"Wand2"}),a?"AI is Fixing...":"Auto-Repair Issues with AI"]})]})]})}),us=(t,s,n,r)=>{const[i,o]=d.useState(t),[a,c]=d.useState(!1),l=d.useRef(null),u=d.useRef(t),h=d.useCallback(()=>c(!0),[]),p=d.useCallback(()=>c(!1),[]);return d.useEffect(()=>{a||(o(t),u.current=t)},[t,a]),d.useEffect(()=>{const m=f=>{if(a&&l.current){const g=Math.max(s,Math.min(f.clientX,n));u.current=g,l.current.style.width=`${g}px`}},x=()=>{a&&(p(),document.body.style.cursor="",document.body.style.userSelect="",o(u.current),r&&r(u.current))};return a&&(window.addEventListener("mousemove",m),window.addEventListener("mouseup",x),document.body.style.cursor="col-resize",document.body.style.userSelect="none"),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",x),document.body.style.cursor="",document.body.style.userSelect=""}},[a,s,n,p,r]),{width:i,isResizing:a,sidebarRef:l,startResizing:h}},ps=(t,s,n)=>d.useMemo(()=>{if(!s||!t[s])return{isHealthy:!1,score:0,integrity:[],completeness:[]};const r=t[s],i=[],o=[],a=r.groups.flatMap(y=>y.clauses),c=y=>y.reduce((E,I)=>(E.push(I),I.subClauses&&E.push(...c(I.subClauses)),E),[]),l=c(a),u=l.filter(y=>!y.description||y.description.trim().length<2).length;i.push({label:"Content Quality",status:u===0?"pass":"fail",detail:u===0?"Descriptions OK":`${u} incomplete`});const h=new Set(l.map(y=>y.code)),p=l.length-h.size;if(i.push({label:"Data Cleanliness",status:p===0?"pass":"fail",detail:p===0?"Clean":`${p} Duplicates`}),n&&n.length>1e3){let y=0;const E=l.slice(0,20);E.forEach(q=>{n.includes(q.code)||y++});const I=y/E.length,P=I<.2;o.push({label:"Source Verification",status:P?"pass":"fail",detail:P?"Matches Document":`${(I*100).toFixed(0)}% Clauses Missing in Source`})}else o.push({label:"Source Verification",status:"fail",detail:"No Source Document Linked"});if(s.includes("9001")&&["8.4","8.6","8.7","7.1.4"].forEach(E=>{const I=l.some(P=>P.code===E);o.push({label:`Clause ${E}`,status:I?"pass":"fail",detail:I?"Present":"Missing (Required)"})}),s.includes("27001")){const y=l.filter(I=>I.code.startsWith("A.")),E=y.length>=90;o.push({label:"Annex A Controls",status:E?"pass":"fail",detail:E?`${y.length} Controls (OK)`:`${y.length}/93 (Incomplete)`})}const m=i.every(y=>y.status==="pass"),x=o.every(y=>y.status==="pass"),f=m&&x,g=i.length+o.length,b=i.filter(y=>y.status==="pass").length+o.filter(y=>y.status==="pass").length,j=Math.round(b/(g||1)*100);return{isHealthy:f,score:j,integrity:i,completeness:o}},[t,s,n]),hs=t=>{t&&(navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t).catch(()=>mt(t)):mt(t))},mt=t=>{const s=document.createElement("textarea");s.value=t,s.style.position="fixed",s.style.left="-9999px",document.body.appendChild(s),s.focus(),s.select();try{document.execCommand("copy")}catch(n){console.error(n)}document.body.removeChild(s)},ci=t=>new Promise((s,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>s(r.result.split(",")[1]),r.onerror=i=>n(i)}),xs=async t=>{if(!window.pdfjsLib)throw new Error("PDF.js library not loaded");const s=await t.arrayBuffer(),n=await window.pdfjsLib.getDocument({data:s}).promise;let r="";for(let i=1;i<=n.numPages;i++){const c=(await(await n.getPage(i)).getTextContent()).items.map(l=>l.str).join(" ");r+=c+`

`}return r},at=async t=>{let s="";try{if(t.name.toLowerCase().endsWith(".pdf"))s=await xs(t);else if(t.name.toLowerCase().endsWith(".docx")){if(typeof mammoth>"u")throw new Error("Mammoth library missing");const n=await t.arrayBuffer();s=(await mammoth.extractRawText({arrayBuffer:n})).value}else{if(t.name.toLowerCase().endsWith(".doc"))throw new Error("Legacy Word (.doc) files are not supported due to browser limitations. Please save your file as .docx and try again.");s=await t.text()}if(!s||s.length<50)throw new Error("File content is too short or empty.");return s}catch(n){throw console.error("File processing error:",n),new Error(`Failed to parse ${t.name}: ${n.message}`)}},ms=t=>{if(!t)return null;let s=t.trim();s.startsWith("```")&&(s=s.replace(/^```(json)?/,"").replace(/```$/,""));const n=s.indexOf("["),r=s.indexOf("{"),i=s.lastIndexOf("]"),o=s.lastIndexOf("}");n!==-1&&i!==-1&&(r===-1||n<r)?s=s.substring(n,i+1):r!==-1&&o!==-1&&(s=s.substring(r,o+1));try{return JSON.parse(s)}catch{return console.error("JSON Parse Error on text:",s),null}},qe=t=>t?t.replace(/[^a-zA-Z0-9\s]/g,"").trim().replace(/\s+/g,"_").substring(0,30):"N_A",gs=t=>{let s=2166136261;for(let n=0;n<t.length;n++)s^=t.charCodeAt(n),s=Math.imul(s,16777619);return(s>>>0).toString(16)};async function fs(t,s,n=3){const r=[],i=[...t],o=async()=>{for(;i.length>0;){const c=i.shift();if(c){const l=await s(c);r.push(l)}}},a=Array(Math.min(t.length,n)).fill(null).map(()=>o());return await Promise.all(a),r}const Ge=t=>t?t.replace(/\[\[SOURCE_FILE:.*?\]\][\r\n]*/g,""):"",bs=t=>t?t.replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/__(.*?)__/g,"$1").replace(/_(.*?)_/g,"$1").replace(/^\s*#+\s+/gm,"").replace(/`{3}[\s\S]*?`{3}/g,"").replace(/`/g,"").replace(/\[(.*?)\]\(.*?\)/g,"$1"):"",vs=t=>/[]/i.test(t),Ke={NC_MAJOR:["systemic failure","total breakdown","missing process","khng c quy trnh","cha thit lp","critical","nghim trng"],NC_MINOR:["isolated","single instance","partial","not fully","cha y ","mt s","incomplete","li nh"],OFI:["improve","better","consider","cn nhc","ci tin","optimize","efficiency"],COMPLIANT:["conforms","available","maintained","ph hp","y ","tun th","verified","t"]},Je={analyze(t,s,n){const r=n.toLowerCase();let i="N_A",o="Offline Analysis: Insufficient data to determine compliance.",a="",c={MAJOR:0,MINOR:0,OFI:0,COMPLIANT:0};Ke.NC_MAJOR.forEach(u=>{r.includes(u)&&(c.MAJOR+=2)}),Ke.NC_MINOR.forEach(u=>{r.includes(u)&&(c.MINOR+=1)}),Ke.OFI.forEach(u=>{r.includes(u)&&(c.OFI+=1)}),Ke.COMPLIANT.forEach(u=>{r.includes(u)&&(c.COMPLIANT+=1)}),c.MAJOR>0?(i="NC_MAJOR",o="Offline Analysis detected critical keywords indicating a systemic issue.",a="Review the entire process and establish missing controls immediately."):c.MINOR>c.COMPLIANT?(i="NC_MINOR",o="Offline Analysis detected potential gaps in implementation.",a="Investigate specific instances and correct them."):c.OFI>0?(i="OFI",o="Opportunities for improvement found in text.",a="Consider optimizing based on best practices."):c.COMPLIANT>0?(i="COMPLIANT",o="Evidence suggests requirements are met."):n.length>50&&(i="COMPLIANT",o="Offline Analysis: No obvious non-conformity keywords detected.");const l={clauseId:t,status:i,reason:o,evidence:n.substring(0,100)+"...",suggestion:a,conclusion_report:`[OFFLINE] ${o}`,crossRefs:[]};return JSON.stringify(l)},parseStandardToStructuralData(t){if(!t)return[];const s=t.replace(/\r\n/g,`
`),n=[],r=/(?:^|\n)\s*(\d{1,2}\.\d{1,2}(?:\.\d{1,2})?)\s+([^\n]+)/g;let i;const o=[];for(;(i=r.exec(s))!==null;){const a=i[1];a.length>10||o.push({code:a,title:i[2].trim(),index:i.index})}for(let a=0;a<o.length;a++){const c=o[a],l=o[a+1],u=c.index,h=l?l.index:s.length,p=s.substring(u,h),m=p.indexOf(`
`),x=m>-1?p.substring(m).trim():p;x.length>10&&n.push({code:c.code,title:c.title,content:x})}return n},performHybridSegmentation(t,s){if(!t||!s||s.length===0)return[];const n=t.replace(/\r\n/g,`
`),r=[],i=[];s.forEach(o=>{const a=o.title.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),c=new RegExp(`(?:^|\\n)\\s*${o.code.replace(/\./g,"\\.")}\\s+(?:${a.split(" ").slice(0,3).join(".*?")})`,"i"),l=n.match(c);l&&l.index!==void 0&&i.push({code:o.code,title:o.title,index:l.index})}),i.sort((o,a)=>o.index-a.index);for(let o=0;o<i.length;o++){const a=i[o],c=i[o+1],l=a.index,u=c?c.index:n.length,h=n.substring(l,u),p=h.indexOf(`
`),m=p>-1?h.substring(p).trim():h;r.push({code:a.code,title:a.title,content:m})}return r},extractClauseContent(t,s,n){try{const r=s.replace(/\./g,"\\."),i=new RegExp(`(?:^|\\n)\\s*${r}(?:\\s+|\\.).*?(?=(?:^|\\n)\\s*\\d+\\.\\d+|$)`,"is"),o=t.match(i);if(o)return o[0].trim()}catch(r){console.error("Fallback extraction failed",r)}return null}},it={ANALYSIS:{id:"default_analysis",label:"Standard Analysis",description:"Strict ISO compliance check.",isSystemDefault:!0,template:`
        Analyze EVIDENCE against ISO "{{STANDARD_NAME}}", Clause "{{CLAUSE_CODE}}: {{CLAUSE_TITLE}}".
        Req: {{CLAUSE_DESC}}
        
        CTX:
        """
        {{RAG_CONTEXT}}
        """

        EVIDENCE:
        """
        {{EVIDENCE}}
        """
        
        RULES:
        1. **Cross-Clause Validation**: Look at "BROADER CONTEXT" in the evidence. If evidence from a related clause (e.g. A.5.24) covers the requirements of this clause (e.g. A.5.25), mark as COMPLIANT. Do NOT mark NC simply because "Direct Evidence" is empty.
        2. **Process Approach**: Evaluate if the process described in "GENERAL PROCESS EVIDENCE" effectively meets the intent of this clause.
        3. **Hierarchy**: Evidence in sub-clauses (e.g. 7.5.1) verifies the parent (7.5).
        4. **Compliance**: Mark NC *only* if the requirement is missing in ALL provided evidence streams (Direct, Broader Context, and General Process).

        OUTPUT JSON:
        {
          "status": "COMPLIANT" | "NC_MINOR" | "NC_MAJOR" | "OFI" | "N_A",
          "reason": "Concise technical justification. If based on broader context, explicitly state 'Verified via [Related Clause] evidence'.",
          "reason_en": "English justification.",
          "reason_vi": "Vietnamese justification.",
          "evidence": "Key quote or summary of the supporting evidence.",
          "suggestion": "If NC/OFI, specific action.",
          "crossRefs": ["ISO 9001: 7.5.3"]
        }
        `},REPORT:{id:"batch_process_report",label:"Batch Process Report",description:"Generates report section for a whole process at once.",isSystemDefault:!0,template:`
        ROLE: ISO Audit Reporter.
        TASK: Convert JSON findings for process "{{PROCESS_NAME}}" into PLAIN TEXT report.
        
        CTX:
        Org: {{COMPANY}} | Std: {{STANDARD_NAME}} | Lang: {{LANGUAGE}}
        Auditor: {{AUDITOR}} | Interviewees: {{INTERVIEWEES}}

        INPUT JSON (Findings):
        {{FINDINGS_JSON}}

        OUTPUT FORMAT RULES:
        1. Plain text only. STRICTLY NO MARKDOWN. Do NOT use **bold** or *italics* or # headers.
        2. STRICTLY NO CONVERSATIONAL TEXT. Start directly with the content. Do not include "Here is the report" or similar.
        3. Start with:
           PROCESS: {{PROCESS_NAME}}
           Execution performed by: {{AUDITOR}}
           Auditees: {{INTERVIEWEES}}
        4. For each finding:
           CLAUSE: [Code] [Title]
           STATUS: [Status]
           OBSERVATION: [Reason in target lang]
           EVIDENCE: [Evidence text preserved exactly]
           ----------------------------------------
        5. Do not summarize evidence. Keep line breaks.
        `},SCHEDULING:{id:"smart_scheduler_v4",label:"Smart Scheduler V4",description:"Strict 8-Hour Rule & AM/PM Slot Enforcement.",isSystemDefault:!0,template:`
        ROLE: Expert ISO Lead Auditor & Scheduler.
        TASK: Create a professional audit agenda strictly adhering to availability and work hours.
        
        GLOBAL PARAMETERS:
        - Work Day Start: {{START_TIME}}
        - Work Day End: {{END_TIME}}
        - Lunch Break: {{LUNCH_START}} to {{LUNCH_END}} (This period MUST be empty for everyone)
        - 1.0 WD = 8 Hours of Work (excluding lunch).
        - 0.5 WD = 4 Hours of Work (Morning OR Afternoon).
        
        INPUTS:
        Sites: {{SITES_COMPACT}}
        Team: {{TEAM_COMPACT}} (Format: Name,Role,Codes,[Date=YYYY-MM-DD|WD=X|Slot=AM/PM/FULL/OFF...])
        Process Requirements:
        {{PROCESS_REQUIREMENTS}}

        CRITICAL RESOURCE ALLOCATION RULES:
        
        1. **MANDATORY SLOT ENFORCEMENT (WD ALLOCATION)**: 
           - You MUST check the 'Slot' and 'WD' for each auditor on each date.
           - If Slot='OFF' (WD=0): This auditor is UNAVAILABLE. Do not assign them any clauses, meetings, or activities on this specific date.
           - If Slot='AM' (WD=0.5): Schedule ONLY between {{START_TIME}} and {{LUNCH_START}}. Max duration: 4 hours. Do NOT schedule in PM.
           - If Slot='PM' (WD=0.5): Schedule ONLY between {{LUNCH_END}} and {{END_TIME}}. Max duration: 4 hours. Do NOT schedule in AM.
           - If Slot='FULL' (WD=1.0): Schedule active audit tasks for exactly 8 hours total (Morning + Afternoon, skipping lunch).
        
        2. **LOAD BALANCING**:
           - Split processes/clauses among available auditors.
           - Parallel sessions are allowed if different auditors are used.

        3. **DETAILED ACTIVITY DESCRIPTIONS**:
           - Format: "Topic Name / Tn Ch  (Clause IDs)"
           - Use NEWLINES to separate topics within one session.

        4. **EVENTS**:
           - Day 1 Start: "Opening Meeting" (All Team present).
           - Daily: "Lunch Break" at {{LUNCH_START}} (All Team).
           - Last Day End: "Closing Meeting" (All Team present).

        JSON OUTPUT SCHEMA:
        [
          {
            "day": 1,
            "date": "YYYY-MM-DD",
            "timeSlot": "HH:MM - HH:MM", // Ensure correct math (Start + Duration)
            "activity": "Context (4.1)
Leadership (5.1)", 
            "siteName": "Site Name",
            "auditorName": "Name", 
            "processName": "Process Name",
            "clauseRefs": ["4.1", "4.2"], 
            "isRemote": false
          }
        ]
        `},OCR:{id:"ocr_extraction",label:"OCR Extraction",description:"Extract text from image.",isSystemDefault:!0,template:`
        You are an OCR engine. Output ONLY the text found in the image.
        Maintain layout/tables if possible. No conversational text.
        `}};class ys{constructor(){Ue(this,"prompts");this.prompts={...it},this.loadUserOverrides()}loadUserOverrides(){try{const s=localStorage.getItem("iso_prompt_overrides");if(s){const n=JSON.parse(s);this.prompts={...this.prompts,...n}}}catch(s){console.error("Failed to load prompt overrides",s)}}getPrompt(s){return this.prompts[s]||it[s]}updatePrompt(s,n){this.prompts[s]={...this.prompts[s],template:n,isSystemDefault:!1},localStorage.setItem("iso_prompt_overrides",JSON.stringify(this.prompts))}resetToDefault(s){this.prompts[s]={...it[s]},localStorage.setItem("iso_prompt_overrides",JSON.stringify(this.prompts))}hydrate(s,n){let r=s;for(const[i,o]of Object.entries(n)){const a=new RegExp(`{{${i}}}`,"g");r=r.replace(a,o||"")}return r}}const ve=new ys,js="ISO_VECTOR_DB",Ae="vectors",ks=1,ws=(t,s)=>{let n=0,r=0,i=0;for(let o=0;o<t.length;o++)n+=t[o]*s[o],r+=t[o]*t[o],i+=s[o]*s[o];return n/(Math.sqrt(r)*Math.sqrt(i))};class Cs{constructor(){Ue(this,"dbPromise",null)}openDB(){return this.dbPromise?this.dbPromise:(this.dbPromise=new Promise((s,n)=>{const r=indexedDB.open(js,ks);r.onupgradeneeded=i=>{const o=i.target.result;o.objectStoreNames.contains(Ae)||o.createObjectStore(Ae,{keyPath:"id"}).createIndex("source","metadata.source",{unique:!1})},r.onsuccess=i=>s(i.target.result),r.onerror=i=>n(i.target.error)}),this.dbPromise)}async embedText(s,n){var r,i;if(!s||!s.trim())return null;try{return((i=(r=(await new ot({apiKey:n}).models.embedContent({model:"text-embedding-004",contents:{parts:[{text:s}]}})).embeddings)==null?void 0:r[0])==null?void 0:i.values)||null}catch(o){return console.error("Embedding Error",o),null}}async addDocuments(s,n,r){const i=n.match(/[\s\S]{1,800}/g)||[],c=(await this.openDB()).transaction([Ae],"readwrite").objectStore(Ae);let l=0;for(const u of i){const h=await this.embedText(u,r);if(h){const p={id:`${s}_${l++}_${Date.now()}`,text:u,embedding:h,metadata:{source:s,type:"standard_content"}};c.put(p)}await new Promise(p=>setTimeout(p,50))}}async search(s,n,r=4){const i=await this.embedText(s,n);if(!i)return"";const o=await this.openDB();return new Promise(a=>{const u=o.transaction([Ae],"readonly").objectStore(Ae).openCursor(),h=[];u.onsuccess=p=>{const m=p.target.result;if(m){const x=m.value,f=ws(i,x.embedding);f>.5&&h.push({text:x.text,score:f}),m.continue()}else{h.sort((f,g)=>g.score-f.score);const x=h.slice(0,r).map(f=>f.text).join(`

---

`);a(x)}}})}async clear(){(await this.openDB()).transaction([Ae],"readwrite").objectStore(Ae).clear()}}const Ss=new Cs,Ns={patterns:{email:/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,phoneVN:/(\+84|0)(3|5|7|8|9)([0-9]{8})\b/g,ipAddress:/\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b/g,potentialName:new RegExp("(?<!^|\\. |\\? |! )([A-Z][a-z]+ [A-Z][a-z]+)","g")},redact(t,s,n){if(!t)return"";let r=t;if(!s)return r;if(n){if(s.maskCompany&&n.company&&n.company.length>2){const i=n.company.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");r=r.replace(new RegExp(i,"gi"),"[COMPANY_REDACTED]")}if(s.maskSmo&&n.smo&&n.smo.length>2){const i=n.smo.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");r=r.replace(new RegExp(i,"gi"),"[SMO_REDACTED]")}if(s.maskPeople&&n.auditor&&n.auditor.length>2){const i=n.auditor.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");r=r.replace(new RegExp(i,"gi"),"[AUDITOR_REDACTED]")}}return s.maskEmail&&(r=r.replace(this.patterns.email,"[EMAIL_REDACTED]")),s.maskPhone&&(r=r.replace(this.patterns.phoneVN,"[PHONE_REDACTED]")),s.maskIP&&(r=r.replace(this.patterns.ipAddress,"[IP_REDACTED]")),s.maskAddress&&(r=r.replace(/\d+\s+[A-Za-z]+\s+(Street|St|Ave|Avenue|Road|Rd|Lane|Ln|Ward|District)/gi,"[ADDRESS_REDACTED]")),(r.toLowerCase().includes("salary")||r.toLowerCase().includes("lng"))&&(r=r.replace(/(\d{1,3}[,.]\d{3}[,.]\d{3}|\d{7,})/g,"[MONEY_REDACTED]")),r}},rt={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},jt=t=>{var s;if(t!=null&&t.trim())return t.trim();if(Ve.length>0&&((s=Ve[0])!=null&&s.trim()))return Ve[0].trim();try{if(typeof import.meta<"u"&&(rt!=null&&rt.VITE_API_KEY))return}catch{}try{const n=localStorage.getItem("iso_api_keys"),r=localStorage.getItem("iso_active_key_id");if(n){const i=JSON.parse(n);if(Array.isArray(i)&&i.length>0){const o=i.find(a=>a.id===r);return o?o.key:i[0].key}}}catch{}return null},we=t=>{const s=jt(t);return s?new ot({apiKey:s}):null},kt=new Map,As=t=>{const s=kt.get(t);return s?Date.now()>s:!0},Es=t=>{console.warn(`[Smart Rotator]  Model ${t} hit rate limit. Cooling down for 60s.`),kt.set(t,Date.now()+6e4)},Is=t=>new Promise(s=>setTimeout(s,t)),Ee=async(t,s,n)=>{const r=Yt.filter(l=>!l.includes("1.5")),i=[t,...r],o=[...new Set(i)].filter(Boolean);let a=o.filter(l=>As(l));a.length===0&&(console.warn("[Smart Rotator] All models in cooldown. Forcing retry on fallback."),a=["gemini-2.0-flash-lite-preview-02-05",...o]);let c=null;for(const l of a)try{console.log(`[${s}]  Attempting with: ${l}...`);const u=await n(l);if(u&&u.text)return u.text}catch(u){c=u;const h=(u.message||"").toLowerCase(),p=u.status||u.code||0;if(console.warn(`[${s}]  Failed on ${l}: ${h}`),p===429||h.includes("exhausted")||h.includes("too many requests"))Es(l);else if(p===403||h.includes("key not valid")||h.includes("api_key_invalid"))throw new Error("Invalid API Key. Please check your settings.");await Is(500)}throw new Error(`All AI models failed. Last error: ${(c==null?void 0:c.message)||"Unknown"}`)},Ts=async t=>{const s=t?t.trim().replace(/^["']|["']$/g,""):"";if(!s)return{isValid:!1,latency:0,errorType:"invalid",errorMessage:"Key is empty"};const n=new ot({apiKey:s}),r=["gemini-2.0-flash-lite-preview-02-05","gemini-2.0-flash"];for(const i of r){const o=performance.now();try{return await n.models.generateContent({model:i,contents:{parts:[{text:"Hi"}]}}),{isValid:!0,latency:Math.round(performance.now()-o),activeModel:i}}catch(a){if((a.message||"").toLowerCase().includes("key")||a.status===403)return{isValid:!1,latency:0,errorType:"invalid",errorMessage:"Invalid API Key."}}}return{isValid:!0,latency:999,activeModel:"gemini-2.0-flash"}},wt=async(t,s,n,r,i,o,a=!1)=>{if(!navigator.onLine)return Je.analyze(t.code,t.title,n);const c=we(i);if(!c)throw new Error("API Key missing");let l=n+`

TAGGED SECTIONS:
`+r;a&&(l=Ns.redact(l)),l.length>25e3&&(l=l.substring(0,15e3)+`
...[TRUNCATED]...
`+l.substring(l.length-1e4));const u=`${t.code} ${t.title} ${t.description}`,h=i||jt()||"",p=await Ss.search(u,h),m=p.length>4e3?p.substring(0,4e3):p,x=ve.getPrompt("ANALYSIS"),f=ve.hydrate(x.template,{STANDARD_NAME:s,CLAUSE_CODE:t.code,CLAUSE_TITLE:t.title,CLAUSE_DESC:t.description,RAG_CONTEXT:m||"No source doc.",EVIDENCE:l}),g={responseMimeType:"application/json",responseSchema:{type:Y.OBJECT,properties:{clauseId:{type:Y.STRING},status:{type:Y.STRING,enum:["COMPLIANT","NC_MINOR","NC_MAJOR","OFI","N_A"]},reason:{type:Y.STRING},reason_en:{type:Y.STRING},reason_vi:{type:Y.STRING},suggestion:{type:Y.STRING},evidence:{type:Y.STRING},conclusion_report:{type:Y.STRING},crossRefs:{type:Y.ARRAY,items:{type:Y.STRING}}},required:["clauseId","status","reason","evidence"]}};try{return await Ee(o||Gt,"Analysis",j=>c.models.generateContent({model:j,contents:f,config:g}))||"{}"}catch(b){return console.error("All Analysis Models Failed",b),Je.analyze(t.code,t.title,n)}},Ls=async(t,s,n)=>{const r=we(s);if(!r)throw new Error("API Key missing");const i=`Critique ISO finding (max 50 words):
    Clause: ${t.clauseId} (${t.status})
    Evid: "${t.evidence.substring(0,500)}"
    Reason: "${t.reason}"`;try{return await Ee("gemini-2.0-flash","Shadow Review",o=>r.models.generateContent({model:o,contents:i}))}catch{return"Review unavailable."}},Ms=async(t,s,n,r,i,o,a)=>{const c=we(i);if(!c)throw new Error("API Key missing");let l=[...s];const u=t.map(j=>`${j.id},${j.name},${j.isMain?"HQ":"Site"}`).join(`
`),h=l.map(j=>{let y="";return j.availabilityMatrix&&Object.keys(j.availabilityMatrix).length>0?y=`[${Object.entries(j.availabilityMatrix).map(([I,P])=>`Date=${I}|WD=${P.allocation}|Slot=${P.slot||"FULL"}`).join("; ")}]`:y=j.isRemote?"REMOTE_ALL":"ONSITE_ALL",`${j.name},${j.role},${j.competencyCodes||"ALL"},${y}`}).join(`
`),p=n.map(j=>{const y=j.siteIds&&j.siteIds.length>0?j.siteIds.join(";"):"ALL",E=Object.keys(j.matrixData).join(";");return`${j.name},${j.competencyCode||"NONE"},${y},[${E}]`}).join(`
`),m=r.auditDates.join(", ");let f=ve.getPrompt("SCHEDULING").template.replace("{{SITES_COMPACT}}",`[ID,Name,Type]
${u}`).replace("{{TEAM_COMPACT}}",`[Name,Role,Codes,Availability]
${h}`).replace("{{PROCESS_REQUIREMENTS}}",`[Name,ReqCode,SiteIDs,Clauses]
${p}`);const g=ve.hydrate(f,{START_TIME:r.startTime,END_TIME:r.endTime,LUNCH_START:r.lunchStartTime,LUNCH_END:r.lunchEndTime,DATES:m,SITES_COMPACT:"",TEAM_COMPACT:"",PROCESS_REQUIREMENTS:""}),b={responseMimeType:"application/json",responseSchema:{type:Y.ARRAY,items:{type:Y.OBJECT,properties:{day:{type:Y.INTEGER},date:{type:Y.STRING},timeSlot:{type:Y.STRING},activity:{type:Y.STRING},siteName:{type:Y.STRING},auditorName:{type:Y.STRING},processName:{type:Y.STRING},clauseRefs:{type:Y.ARRAY,items:{type:Y.STRING}},isRemote:{type:Y.BOOLEAN}},required:["day","date","timeSlot","activity","auditorName","processName"]}}};try{return await Ee(o||"gemini-3-pro-preview","Audit Schedule",j=>c.models.generateContent({model:j,contents:g,config:b}))}catch(j){throw console.error("Schedule Gen Failed",j),j}},Ct=async(t,s,n)=>{const r=we(s);if(!r)throw new Error("API Key missing");const i=`
    Write Plain Text ISO Audit Exec Summary.
    Context: ${t.company}, ${t.type}, ${t.standard}.
    Auditor: ${t.auditor}.
    Findings: ${t.findings.length} Total.
    Lang: ${t.lang}.
    
    STRICT RULES:
    1. Summarize compliance, strengths, weaknesses. 
    2. No Markdown. No bold (**). No italics (*). Output purely plain text.
    3. Output ONLY the summary content. Do not include any intro/outro conversational text.
    `;try{return await Ee(n||"gemini-3-pro-preview","Exec Summary",o=>r.models.generateContent({model:o,contents:i}))}catch{return"Executive Summary unavailable."}},St=async(t,s,n)=>{const r=we(s);if(!r)throw new Error("API Key missing");const i=ve.getPrompt("REPORT"),o=ve.hydrate(i.template,{PROCESS_NAME:t.processName,AUDITOR:t.auditor,INTERVIEWEES:t.interviewees,COMPANY:t.company,STANDARD_NAME:t.standardName,LANGUAGE:t.language,FINDINGS_JSON:JSON.stringify(t.findings)});try{return await Ee(n||"gemini-2.0-flash",`Batch Report: ${t.processName}`,a=>r.models.generateContent({model:a,contents:o}))}catch{return`[Error formatting process: ${t.processName}]`}},Rs=async(t,s,n,r)=>{const i=we(r);if(!i)throw new Error("API Key missing");try{return(await i.models.generateContent({model:Ht,contents:{parts:[{inlineData:{mimeType:n,data:s}},{text:t+" Transcribe all visible text accurately."}]}})).text||""}catch(o){throw console.error("OCR Failed",o),new Error("OCR Failed: "+o.message)}},Ps=async(t,s,n)=>{const r=we(n);if(!r)throw new Error("API Key missing");const o=`
    ROLE: Professional ISO Translator.
    TASK: Translate the input text to ${s==="vi"?"Vietnamese":"English"}.
    
    CONSTRAINTS:
    1. Output ONLY the translated content. Do NOT add conversational text.
    2. Do NOT use Markdown formatting. No bold (**), no italics (*), no headers (#). Output pure plain text.
    3. Maintain line breaks and lists structure (using - or numbers), but no rich text symbols.
    4. Use precise ISO auditing terminology.

    INPUT TEXT:
    """
    ${t}
    """
    `;try{return await Ee("gemini-2.0-flash","Translate",a=>r.models.generateContent({model:a,contents:o}))}catch{return t}},Nt=async(t,s)=>{const n=we(s);if(!n)throw new Error("API Key missing");const r=`
    I have a list of ISO Clauses with titles but missing descriptions.
    Please generate a concise, professional 1-sentence description for each based on standard ISO knowledge.
    Output JSON array: [{ "code": "...", "description": "..." }]
    
    Input:
    ${JSON.stringify(t)}
    `,i={responseMimeType:"application/json",responseSchema:{type:Y.ARRAY,items:{type:Y.OBJECT,properties:{code:{type:Y.STRING},description:{type:Y.STRING}},required:["code","description"]}}};try{return await Ee("gemini-2.0-flash","Repair Descriptions",o=>n.models.generateContent({model:o,contents:r,config:i}))}catch{throw new Error("Failed to repair descriptions.")}},At=async(t,s,n)=>{const r=we(n);if(!r)throw new Error("API Key missing");const i=`
    Analyze the following ISO Standard document text.
    Identify EVERY clause, sub-clause, and annex control.
    Return a strictly structured JSON array of objects with 'code' and 'title'.
    
    Example: 
    [{"code": "4.1", "title": "Understanding the organization"}, {"code": "4.2", "title": "Interested parties"}, ...]
    
    Ensure you capture hierarchical clauses (e.g. 7.5, 7.5.1, 7.5.2). 
    Do NOT invent clauses. Only extract what is in the text.
    
    DOCUMENT TEXT:
    """
    ${t.substring(0,8e4)} ... [truncated if too long]
    """
    `,o={responseMimeType:"application/json",responseSchema:{type:Y.ARRAY,items:{type:Y.OBJECT,properties:{code:{type:Y.STRING},title:{type:Y.STRING}},required:["code","title"]}}};try{const a=await Ee("gemini-2.0-flash","Index Structure",c=>r.models.generateContent({model:c,contents:i,config:o}));return JSON.parse(a)}catch(a){throw console.error("Indexing Failed",a),new Error("Failed to map document structure via AI.")}},gt=Object.freeze(Object.defineProperty({__proto__:null,generateAnalysis:wt,generateAuditSchedule:Ms,generateExecutiveSummary:Ct,generateMissingDescriptions:Nt,generateOcrContent:Rs,generateProcessBatchReport:St,mapStandardStructure:At,performShadowReview:Ls,translateChunk:Ps,validateApiKey:Ts},Symbol.toStringTag,{value:"Module"})),Ds=()=>{const{standardKey:t,setKnowledgeData:s,standards:n}=fe(),{getActiveKey:r}=Oe(),{showToast:i}=ke(),[o,a]=d.useState(!1);return{handleKnowledgeUpload:async l=>{var h;if(!l.target.files||l.target.files.length===0)return;const u=l.target.files[0];a(!0);try{i("Reading document...");const p=await at(u);if(p.length<100&&i("Warning: Document text is very short."),t){await He.saveDocument(t,u.name,p);let m=Je.parseStandardToStructuralData(p);const x=r(),f=((h=n[t])==null?void 0:h.name)||"ISO Standard";if(x&&x.key){i(" Smart Indexing: Using AI to map document structure (One-time)...");try{const g=await At(p,f,x.key);if(g&&g.length>0){const b=Je.performHybridSegmentation(p,g);b.length>m.length&&(m=b,console.log("Upgraded to AI-Assisted Indexing",m.length))}}catch(g){console.warn("AI Indexing skipped/failed, using local regex only.",g)}}m.length>0?(await He.bulkSaveClauses(t,m),i(`Success! Indexed ${m.length} clauses for offline lookup.`)):i("Document saved. (Note: Auto-indexing found few matches, lookups might be limited).")}s(p,u.name),l.target.value=""}catch(p){console.error("Knowledge Upload Error",p),i(`Upload Failed: ${p.message}`)}finally{a(!1)}},isProcessing:o}},_s=()=>{const{standards:t,standardKey:s,updateStandard:n}=fe(),[r,i]=d.useState(!1),[o,a]=d.useState(null),[c,l]=d.useState([]);return{handleAutoRepair:async()=>{if(!(!s||!t[s])){i(!0),a(null);try{const h=JSON.parse(JSON.stringify(t[s])),p=[],m=[];let x=0;const f=g=>{g.forEach(b=>{(!b.description||b.description.trim().length<5)&&p.push({ref:b,code:b.code,title:b.title}),b.subClauses&&f(b.subClauses)})};if(h.groups.forEach(g=>f(g.clauses)),p.length>0){const g=p.map(y=>({code:y.code,title:y.title})),b=await Nt(g),j=ms(b);if(Array.isArray(j)){const y=j.reduce((E,I)=>(I.code&&I.description&&(E[I.code]=I.description),E),{});p.forEach(E=>{y[E.code]&&(E.ref.description=y[E.code],m.push(E.ref.id))})}}n(h),l(m),a({fixed:m.length,cleaned:x})}catch(h){console.error("Repair failed",h),alert("Failed to repair automatically. Check API Key.")}finally{i(!1)}}},isRepairing:r,repairStats:o,repairedIds:c}},Os=je.memo(({isOpen:t,width:s,setWidth:n})=>{const[r,i]=d.useState(!0),{isResizing:o,sidebarRef:a,startResizing:c}=us(s,300,800,n),{handleKnowledgeUpload:l}=Ds(),{handleAutoRepair:u,isRepairing:h,repairStats:p}=_s(),{standards:m,standardKey:x,setStandardKey:f,resetStandard:g,auditInfo:b,knowledgeBase:j,processes:y}=fe(),{modals:E,toggleModal:I}=ke(),P=ps(m,x,j),q=[...Object.keys(m).map(z=>({value:z,label:m[z].name})),{value:"ADD_NEW",label:"+ Add New Standard..."}],re=5,ne=(()=>{let V=0;return x&&x!=="ADD_NEW"&&V++,b.type&&V++,b.company&&V++,b.auditor&&V++,y.length>0&&V++,V})(),U=ne/re*100,O=!x||x==="ADD_NEW",D=y.length===0,T=O||D?"bg-orange-500":"bg-emerald-500",C=O||D?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400";let _=`Completed: ${ne} / ${re}`;return O?_="Standard Required":D&&(_="Process Required"),e.jsxs("div",{ref:a,className:`${t?"border-r":"w-0 border-0 overflow-hidden"} flex flex-col bg-white dark:bg-slate-900 border-gray-200 dark:border-slate-800 shadow-2xl z-50 relative shrink-0 ${o?"transition-none":"transition-[width] duration-300 ease-soft"} h-full`,style:{width:t?window.innerWidth<768?"100%":s:0},children:[t&&e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1.5 cursor-col-resize hover:bg-indigo-500 transition-colors z-50 group resize-handle hidden md:block",onMouseDown:V=>{V.preventDefault(),c()}}),e.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 w-full md:min-w-[390px] flex flex-col transition-all duration-400 ease-soft overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-3 p-6 cursor-pointer group select-none hover:bg-gray-50 dark:hover:bg-slate-800/50 border-b border-gray-200 dark:border-slate-800 transition-colors",onClick:()=>i(!r),children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-500 transition-colors",children:[e.jsx(A,{name:"Session8_Flag",size:14,className:"text-indigo-500"}),"Audit Details"]}),e.jsx(A,{name:"ChevronDown",size:14,className:`text-slate-400 transition-transform duration-300 ${r?"rotate-180":""}`})]}),e.jsx("span",{className:`text-[9px] font-bold px-2 py-0.5 rounded shadow-sm uppercase tracking-wide transition-colors ${C}`,children:_})]}),e.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-700 ease-spring ${T}`,style:{width:`${Math.max(5,U)}%`}})})]}),e.jsx("div",{className:`flex-1 min-h-0 grid transition-all duration-300 ease-in-out ${r?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:e.jsx("div",{className:"overflow-hidden flex flex-col",children:e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 pt-2 pb-6",children:e.jsx(ds,{onAddNewStandard:()=>I("addStandard",!0),onOpenIntegrity:()=>I("integrity",!0),onKnowledgeUpload:l,health:P,auditFieldIconColor:"text-indigo-700 dark:text-indigo-400",standardOptions:q})})})})]}),e.jsx(cs,{isOpen:E.integrity,onClose:()=>I("integrity",!1),health:P,isCustomStandard:!!x&&!ft[x],onResetStandard:()=>{g(x),I("integrity",!1)},onAutoRepair:u,isRepairing:h,repairStats:p})]})}),$s=({isOpen:t,onClose:s,onRestore:n})=>{const[r,i]=d.useState([]),[o,a]=d.useState(null);d.useEffect(()=>{t&&c()},[t]);const c=()=>{var p,m,x;try{const f=localStorage.getItem("iso_session_data");if(f){const b=JSON.parse(f),j=((p=b.evidence)==null?void 0:p.trim())||((m=b.selectedClauses)==null?void 0:m.length)>0||((x=b.auditInfo)==null?void 0:x.company);a(j?{id:"current_autosave",timestamp:Date.now(),label:"Latest Auto-Save",triggerType:"AUTO_SAVE",data:b}:null)}else a(null);const g=localStorage.getItem("iso_session_history");if(g){const b=JSON.parse(g);i(b.sort((j,y)=>y.timestamp-j.timestamp))}else i([])}catch(f){console.error("Failed to load session history",f)}},l=p=>new Date(p).toLocaleString(),u=p=>{let m=0;p.data.processes&&p.data.processes.length>0?m=p.data.processes.reduce((g,b)=>g+(b.evidence?b.evidence.length:0),0):p.data.scopes&&p.data.scopes.length>0?m=p.data.scopes.reduce((g,b)=>g+(b.evidence?b.evidence.length:0),0):p.data.evidence&&(m=p.data.evidence.length);const x=p.data.selectedClauses?p.data.selectedClauses.length:0,f=p.data.analysisResult?p.data.analysisResult.length:0;return e.jsxs("div",{className:"flex gap-3 mt-2 text-[10px] text-slate-500 font-mono",children:[e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(A,{name:"FileText",size:10})," ",m>0?`${(m/1024).toFixed(1)}KB Evid`:"No Evid"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(A,{name:"CheckSquare",size:10})," ",x," Clauses"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(A,{name:"Wand2",size:10})," ",f," Findings"]})]})},h=(p,m)=>e.jsxs("div",{onClick:()=>n(p),className:`group relative p-4 rounded-2xl border cursor-pointer transition-all duration-300 hover:scale-[1.02] active:scale-95 ${m?"bg-indigo-50/50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 ring-1 ring-indigo-500/20":"bg-white dark:bg-slate-900 border-gray-100 dark:border-slate-800 hover:border-indigo-300 dark:hover:border-indigo-700 hover:shadow-lg"}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[9px] font-black uppercase tracking-wider px-2 py-0.5 rounded-full ${m?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/30":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,children:m?"ACTIVE STATE":"BACKUP ARCHIVE"}),e.jsx("span",{className:"text-xs text-slate-400 font-mono",children:l(p.timestamp)})]})}),e.jsxs("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 truncate",children:[p.data.auditInfo.company||"Untitled Company",e.jsx("span",{className:"font-normal text-slate-400 mx-1",children:"|"}),p.data.auditInfo.type||"Untitled Audit"]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate mb-1",children:["Standard: ",qe(p.data.standardKey).replace(/_/g," ")]}),u(p),e.jsx("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"bg-indigo-600 text-white p-2 rounded-full shadow-xl",children:e.jsx(A,{name:"History",size:20})})})]},p.id);return t?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:s,children:e.jsxs("div",{className:"bg-white dark:bg-slate-950 w-full max-w-2xl rounded-3xl shadow-2xl border border-gray-200 dark:border-slate-800 overflow-hidden flex flex-col max-h-[85vh] animate-zoom-in-spring",onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-900/50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(A,{name:"History",className:"text-indigo-500"}),"Session Time Machine"]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Select a restoration point. This will overwrite your current workspace."})]}),e.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-slate-800 text-slate-400 transition-colors",children:e.jsx(A,{name:"X",size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6 bg-gray-50/30 dark:bg-slate-950",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"Available Auto-Save"]}),o?h(o,!0):e.jsx("div",{className:"p-4 border border-dashed border-gray-300 dark:border-slate-700 rounded-xl text-center text-slate-400 text-xs italic",children:"No active auto-save data found."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(A,{name:"Lock",size:12}),"Backup Vault (Last 5 Resets)"]}),e.jsx("div",{className:"space-y-3",children:r.length>0?r.map(p=>h(p,!1)):e.jsxs("div",{className:"p-8 border border-dashed border-gray-300 dark:border-slate-700 rounded-xl text-center",children:[e.jsx(A,{name:"Archive",className:"mx-auto mb-2 text-slate-300",size:24}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Vault is empty."}),e.jsx("p",{className:"text-slate-400 text-xs",children:"Backups are created automatically when you start a New Session."})]})})]})]}),e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-slate-900 border-t border-gray-100 dark:border-slate-800 text-center",children:e.jsxs("p",{className:"text-[10px] text-slate-400",children:[e.jsx("span",{className:"font-bold text-indigo-500",children:"Pro Tip:"})," Backups are stored locally in your browser. Clearing cache will delete them."]})})]})}):null},Bs=({isOpen:t,onClose:s})=>{const[n,r]=d.useState(!1),[i,o]=d.useState("overview");if(d.useEffect(()=>{t&&(r(!1),o("overview"))},[t]),!t)return null;const a=[{id:"overview",label:"Overview",icon:"Session1_SparklePlus"},{id:"guide",label:"User Manual",icon:"BookOpen"},{id:"tech",label:"Data Topology",icon:"Cpu"},{id:"changelog",label:"Releases",icon:"History"}],c=[{layer:"Presentation",tech:"React 19 + Tailwind",role:"Atomic UI Components, Glassmorphism",color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-900/20"},{layer:"Intelligence",tech:"Gemini 3.0 Pro",role:"Reasoning Engine, Multi-Modal Analysis",color:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-900/20"},{layer:"Storage",tech:"IndexedDB + LocalStorage",role:"Vector Embeddings, Session Persistence",color:"text-purple-600 dark:text-purple-400",bg:"bg-purple-50 dark:bg-purple-900/20"},{layer:"Security",tech:"Client-Side Redaction",role:"PII Masking (Regex/Heuristic)",color:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-900/20"}];return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[9999] p-4 fade-in",onClick:s,children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-2xl w-full max-w-6xl flex flex-col h-[90vh] md:h-[85vh] border border-white/20 dark:border-slate-700/50 transform transition-all scale-100 overflow-hidden relative",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"flex-shrink-0 relative overflow-hidden group border-b border-gray-100 dark:border-slate-800",children:[e.jsxs("div",{className:"absolute inset-0 bg-slate-900",children:[e.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-cyan-600/10 rounded-full blur-[80px] translate-y-1/2 -translate-x-1/2"})]}),e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-slate-400 hover:text-white z-50 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-all backdrop-blur-sm",children:e.jsx(A,{name:"X",size:20})}),e.jsxs("div",{className:"relative px-6 py-8 md:px-10 flex flex-col md:flex-row items-center md:items-start gap-8 z-10",children:[e.jsx("div",{className:"relative flex-shrink-0",children:e.jsx("div",{className:"relative w-24 h-24 rounded-full p-1 bg-gradient-to-br from-indigo-500 to-cyan-500 shadow-glow mx-auto md:mx-0",children:e.jsx("div",{className:"w-full h-full rounded-full overflow-hidden bg-slate-950 relative",children:n?e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-950",children:e.jsx(A,{name:"TDLogo",size:48})}):e.jsx("img",{src:"./author.png",alt:"Author",className:"w-full h-full object-cover",onError:()=>r(!0)})})})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsxs("h2",{className:"text-3xl md:text-4xl font-black text-white tracking-tight leading-tight mb-2 drop-shadow-md",children:["ISO AUDIT PRO ",e.jsx("span",{className:"bg-white text-slate-900 px-2 py-0.5 rounded ml-2 text-xl shadow-lg align-middle border border-slate-200",children:"v4.0"})]}),e.jsx("p",{className:"text-slate-300 text-sm font-medium mb-6 max-w-2xl mx-auto md:mx-0 leading-relaxed opacity-90",children:"The AI-Powered Compliance Assistant leveraging Gemini 3.0. Designed for Auditors, by Auditors."}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center md:justify-start",children:a.map(l=>e.jsxs("button",{onClick:()=>o(l.id),className:`px-4 py-2 rounded-xl text-xs font-bold flex items-center gap-2 transition-all duration-300 backdrop-blur-md border ${i===l.id?"bg-white/20 border-white/30 text-white shadow-lg":"bg-slate-800/40 border-slate-700/50 text-slate-400 hover:bg-slate-800/60 hover:text-white"}`,children:[e.jsx(A,{name:l.icon,size:14})," ",l.label]},l.id))})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 md:p-10 bg-gray-50/50 dark:bg-slate-950 text-slate-800 dark:text-slate-200",children:[i==="overview"&&e.jsxs("div",{className:"animate-fade-in-up space-y-8",children:[e.jsxs("div",{className:"p-6 rounded-2xl bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:e.jsx(A,{name:"Session10_Pulse",size:100})}),e.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 border-b border-gray-100 dark:border-slate-800 pb-2",children:"Production Status"}),e.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-y-3 gap-x-6 items-center relative z-10",children:[e.jsx("span",{className:"text-sm font-medium text-slate-500 text-right",children:"Version"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-mono font-bold text-indigo-600 dark:text-indigo-400 text-sm bg-indigo-50 dark:bg-indigo-900/20 px-2 py-0.5 rounded",children:["v",Kt]}),e.jsx("span",{className:"text-[10px] text-emerald-600 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-0.5 rounded font-bold uppercase",children:"Stable / PRD"})]}),e.jsx("span",{className:"text-sm font-medium text-slate-500 text-right",children:"Build"}),e.jsx("span",{className:"font-mono text-[10px] text-slate-500 break-words",children:Vt}),e.jsx("span",{className:"text-sm font-medium text-slate-500 text-right",children:"Engine"}),e.jsx("span",{className:"font-mono text-[10px] font-bold text-amber-600 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded w-fit",children:"Gemini 3.0 Pro"})]})]}),e.jsxs("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:[e.jsx("h3",{children:"Welcome to Project Onyx"}),e.jsx("p",{children:"This application is designed to streamline the ISO audit lifecycle. It acts as an intelligent co-pilot, helping you map evidence to clauses, verify compliance, and draft professional reports in seconds."}),e.jsxs("p",{children:[e.jsx("strong",{children:"Philosophy:"}),' We believe in "Augmented Intelligence"  the AI does not replace the auditor; it handles the drudgery (mapping, typing, formatting) so the auditor can focus on judgment and interviewing.']})]})]}),i==="guide"&&e.jsxs("div",{className:"animate-fade-in-up space-y-8 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-slate-800",children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white",children:"Auditor's Field Manual"}),e.jsx("div",{className:"text-[10px] bg-indigo-100 text-indigo-700 px-2 py-1 rounded font-bold",children:"Recommended Workflow"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center font-bold",children:"1"}),e.jsx("h4",{className:"font-bold text-lg",children:"Initialize Session"})]}),e.jsxs("div",{className:"pl-11 text-sm text-slate-600 dark:text-slate-400 space-y-2",children:[e.jsxs("p",{children:["Start in the ",e.jsx("strong",{children:"Sidebar"}),". Enter the audit context (Client Name, Auditor Name)."]}),e.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[e.jsx("li",{children:"Select a Standard (e.g., ISO 9001:2015)."}),e.jsx("li",{children:'(Optional) Upload a PDF of the standard for "Ground Truth" RAG lookup.'}),e.jsxs("li",{children:["Configure ",e.jsx("strong",{children:"Privacy Shield"})," if dealing with sensitive client data."]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-500 text-white flex items-center justify-center font-bold",children:"2"}),e.jsx("h4",{className:"font-bold text-lg",children:"Define Processes"})]}),e.jsxs("div",{className:"pl-11 text-sm text-slate-600 dark:text-slate-400 space-y-2",children:[e.jsxs("p",{children:["The system is ",e.jsx("strong",{children:"Process-Centric"}),'. In the Sidebar, create processes (e.g., "HR", "Sales", "IT").']}),e.jsxs("p",{className:"bg-orange-50 dark:bg-orange-900/20 p-2 rounded border border-orange-100 dark:border-orange-800 text-orange-700 dark:text-orange-400 text-xs",children:[e.jsx("strong",{children:"Tip:"})," An audit finding is always tied to a Process + Clause combination."]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 text-white flex items-center justify-center font-bold",children:"3"}),e.jsx("h4",{className:"font-bold text-lg",children:"Plan & Map Clauses"})]}),e.jsxs("div",{className:"pl-11 text-sm text-slate-600 dark:text-slate-400 space-y-2",children:[e.jsxs("p",{children:["Go to ",e.jsx("strong",{children:"Tab 1: Planning"}),". Use the Matrix View to assign clauses to processes."]}),e.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[e.jsx("li",{children:"Click cells to toggle applicability."}),e.jsx("li",{children:'Use the "Resources" sub-tab to generate an automated Audit Agenda/Schedule using AI.'})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-cyan-500 text-white flex items-center justify-center font-bold",children:"4"}),e.jsx("h4",{className:"font-bold text-lg",children:"Collect Evidence"})]}),e.jsxs("div",{className:"pl-11 text-sm text-slate-600 dark:text-slate-400 space-y-2",children:[e.jsxs("p",{children:["Go to ",e.jsx("strong",{children:"Tab 2: Audit"}),". This is your execution screen."]}),e.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[e.jsx("li",{children:"Select a Process from the top bar."}),e.jsx("li",{children:"Select a Clause in the sidebar checklist."}),e.jsxs("li",{children:["Type evidence or ",e.jsx("strong",{children:"Drop Files"})," (Images/PDF) directly into the text editor."]}),e.jsx("li",{children:"The AI handles OCR automatically for images."})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold",children:"5"}),e.jsx("h4",{className:"font-bold text-lg",children:"Analyze & Report"})]}),e.jsxs("div",{className:"pl-11 text-sm text-slate-600 dark:text-slate-400 space-y-2",children:[e.jsxs("p",{children:['Click "Analyze" in the Audit tab. Move to ',e.jsx("strong",{children:"Tab 3: Findings"}),"."]}),e.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[e.jsx("li",{children:'Review AI judgments (Compliant/NC). Use "Shadow Review" to critique the finding.'}),e.jsxs("li",{children:["Finally, go to ",e.jsx("strong",{children:"Tab 4: Report"})," to generate the Executive Summary and full report."]})]})]})]})]})]}),i==="tech"&&e.jsxs("div",{className:"animate-fade-in-up space-y-8",children:[e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:c.map((l,u)=>e.jsxs("div",{className:"p-5 bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 rounded-2xl shadow-sm flex flex-col gap-3 hover:border-indigo-200 dark:hover:border-indigo-800 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-gray-50 dark:border-slate-800/50",children:[e.jsx("span",{className:"font-bold text-sm text-slate-700 dark:text-slate-300",children:l.layer}),e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase ${l.bg} ${l.color}`,children:l.tech})]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed",children:[e.jsx("strong",{className:"text-slate-700 dark:text-slate-300",children:"Role:"})," ",l.role]})]},u))}),e.jsxs("div",{className:"mt-8 p-6 bg-slate-50 dark:bg-slate-950 rounded-2xl border border-slate-200 dark:border-slate-800",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-white mb-4",children:"Data Topology & Flow"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"min-w-[120px] text-xs font-mono font-bold text-indigo-600 dark:text-indigo-400 text-right mt-1",children:"AuditProcess"}),e.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:["The root container. Contains ",e.jsx("code",{className:"bg-slate-200 dark:bg-slate-800 px-1 rounded",children:"matrixData"})," (Process x Clause mapping) and ",e.jsx("code",{className:"bg-slate-200 dark:bg-slate-800 px-1 rounded",children:"evidence"})," (Unstructured text)."]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"min-w-[120px] text-xs font-mono font-bold text-indigo-600 dark:text-indigo-400 text-right mt-1",children:"AnalysisResult"}),e.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Generated by AI. It is ",e.jsx("strong",{children:"stateless"})," relative to the source evidence (snapshot in time). If you edit evidence, you must re-run analysis."]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"min-w-[120px] text-xs font-mono font-bold text-indigo-600 dark:text-indigo-400 text-right mt-1",children:"Dual-Stream Engine"}),e.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:["The AI prompt receives two distinct streams:",e.jsxs("ol",{className:"list-decimal pl-4 mt-1 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Direct Evidence:"})," Specific text typed into the matrix row for that exact clause."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Contextual Evidence:"}),' General process notes + evidence from "Sibling Clauses" (e.g., verifying Clause 6 checks 6.1 and 6.2 automatically).']})]})]})]})]})]})]}),i==="changelog"&&e.jsx("div",{className:"animate-fade-in-up",children:e.jsxs("div",{className:"space-y-8 pl-4 relative",children:[e.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-px bg-gradient-to-b from-indigo-500 via-slate-200 to-transparent dark:via-slate-800"}),Xt.map((l,u)=>e.jsxs("div",{className:"relative pl-6",children:[e.jsx("div",{className:`absolute left-[-4px] top-1.5 w-2 h-2 rounded-full border border-white dark:border-slate-900 transition-all ${u===0?"bg-indigo-500 scale-125 shadow-[0_0_0_4px_rgba(99,102,241,0.2)]":"bg-slate-300 dark:bg-slate-700"}`}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h4",{className:`text-sm font-bold ${u===0?"text-indigo-600 dark:text-indigo-400":"text-slate-800 dark:text-slate-200"}`,children:["v",l.version]}),e.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded",children:l.date})]}),e.jsx("ul",{className:"space-y-2",children:l.features.map((h,p)=>e.jsxs("li",{className:"text-xs text-slate-600 dark:text-slate-300 flex items-start gap-2 leading-relaxed",children:[e.jsx("span",{className:"w-1 h-1 bg-slate-300 dark:bg-slate-600 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:h})]},p))})]},u))]})}),e.jsxs("div",{className:"mt-12 pt-8 border-t border-gray-100 dark:border-slate-800 flex flex-col items-center opacity-70",children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:"Architected By"})}),e.jsxs("h3",{className:"text-sm font-bold text-slate-800 dark:text-white",children:["Trung Dang Hoang ",e.jsx("span",{className:"text-slate-400 font-normal italic",children:"(Steven)"})]}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:" 2026 ISO AUDIT PRO. All Rights Reserved."})]})]})]})})},zs=({children:t,commandActions:s,onRestoreSnapshot:n})=>{const{isSidebarOpen:r,setSidebarOpen:i,sidebarWidth:o,setSidebarWidth:a,toastMsg:c,showToast:l,modals:u,toggleModal:h}=ke(),{privacySettings:p,setPrivacySettings:m}=fe();return e.jsxs("div",{className:"flex flex-col h-[100dvh] w-full bg-slate-100 dark:bg-slate-950 transition-colors duration-500 ease-soft relative overflow-hidden",children:[c&&e.jsx(ns,{message:c,onClose:()=>l("")}),e.jsx(ls,{}),e.jsxs("main",{className:"flex-1 flex overflow-hidden relative shadow-inner",children:[e.jsx("div",{className:`${r?"translate-x-0":"-translate-x-full"} fixed top-16 bottom-0 left-0 z-[60] md:absolute md:inset-y-0 md:relative md:top-0 md:translate-x-0 md:transform-none transition-transform duration-300 ease-soft h-[calc(100%-4rem)] md:h-full shadow-2xl`,children:e.jsx(Os,{isOpen:r,width:o,setWidth:a})}),r&&e.jsx("div",{className:"fixed top-16 bottom-0 inset-x-0 bg-black/50 z-50 md:hidden backdrop-blur-sm transition-opacity duration-300 animate-in fade-in",onClick:()=>i(!1)}),e.jsx("div",{className:"flex-1 flex flex-col min-w-0 relative w-full transition-all duration-300 ease-soft bg-white/50 dark:bg-slate-900/50 backdrop-blur-md shadow-inner-depth",children:t})]}),e.jsx(Bs,{isOpen:u.about,onClose:()=>h("about",!1)}),e.jsx($s,{isOpen:u.recall,onClose:()=>h("recall",!1),onRestore:n})]})},Fs=je.memo(({layoutMode:t,setLayoutMode:s,isSidebarOpen:n,sidebarWidth:r})=>{const i=d.useRef([]),o=d.useRef(null),[a,c]=d.useState({left:0,width:0,opacity:0,color:""});return d.useEffect(()=>{const l=()=>{const h=De.findIndex(m=>m.id===t),p=i.current[h];p&&c({left:p.offsetLeft,width:p.offsetWidth,opacity:1,color:De[h].colorClass})};l(),window.addEventListener("resize",l);const u=setTimeout(l,300);return()=>{window.removeEventListener("resize",l),clearTimeout(u)}},[t,n,r]),e.jsx("div",{className:"flex gap-2 w-full",children:e.jsxs("div",{ref:o,className:"relative flex-1 flex justify-between bg-gray-100 dark:bg-slate-950 p-1 rounded-xl dark:shadow-[inset_0_1px_3px_rgba(0,0,0,0.5)]",children:[e.jsx("div",{className:`absolute top-1 bottom-1 shadow-sm rounded-lg transition-all duration-500 ease-fluid z-0 ${a.color}`,style:{left:a.left,width:a.width,opacity:a.opacity}}),De.map((l,u)=>e.jsxs("button",{ref:h=>{i.current[u]=h},onClick:()=>s(l.id),className:`flex-1 relative z-10 flex items-center justify-center gap-2 px-1 md:px-4 py-2 rounded-lg text-xs md:text-sm font-bold transition-colors duration-300 ${t===l.id?"text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(A,{name:l.icon,size:16}),e.jsx("span",{className:`${n?"hidden xl:inline":"hidden md:inline"}`,children:l.label})]},l.id))]})})}),Us=({isOpen:t,onClose:s,clause:n,standardName:r,fullText:i,isLoading:o})=>{const[a,c]=d.useState("en"),[l,u]=d.useState(!1),[h,p]=d.useState(""),m=a==="en"?i.en:i.vi,x=d.useMemo(()=>{if(!r)return{text:"ISO",colorClass:"bg-gray-100 text-gray-600"};const g=r.match(/\((.*?)\)/),b=g?g[1]:r.split(" ")[0]||"ISO",j=b.toUpperCase();let y="bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300 border-indigo-100 dark:border-indigo-800/50";return j.includes("EMS")||j.includes("14001")?y="bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-700/50":j.includes("QMS")||j.includes("9001")?y="bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-700/50":(j.includes("ISMS")||j.includes("27001"))&&(y="bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-700/50"),{text:b,colorClass:y}},[r]);d.useEffect(()=>{if(!t){p("");return}if(o||!m){p("");return}const g=m.split(`
`);let b=0,j="";const y=setTimeout(()=>{const E=setInterval(()=>{b<g.length?(j+=(g[b]||"")+`
`,p(j),b++):clearInterval(E)},20);return()=>clearInterval(E)},50);return()=>clearTimeout(y)},[t,m,o]);const f=()=>{hs(m),u(!0),setTimeout(()=>u(!1),2e3)};return e.jsx(Ye,{isOpen:t,title:"Clause Reference",onClose:s,children:e.jsxs("div",{className:"flex flex-col h-full gap-3",children:[n&&e.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b border-gray-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-base font-black text-indigo-700 dark:text-indigo-400 uppercase bg-indigo-50 dark:bg-indigo-900/30 px-3 py-1.5 rounded-lg border border-indigo-100 dark:border-indigo-800 shrink-0",children:n.code}),e.jsx("h4",{className:"text-base md:text-lg font-bold text-slate-800 dark:text-white leading-snug mt-0.5",children:n.title})]}),o?e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-slate-500 gap-4",children:[e.jsxs("div",{className:"relative w-16 h-16",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-indigo-200 dark:border-indigo-800 rounded-full opacity-20"}),e.jsx("div",{className:"absolute inset-0 border-t-2 border-indigo-600 rounded-full animate-spin"})]}),e.jsx("span",{className:"text-sm font-bold animate-pulse",children:"Consulting Gemini AI Auditor..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded-full border shadow-sm uppercase tracking-wider ${x.colorClass}`,children:x.text}),e.jsxs("div",{className:"lang-pill-container shadow-sm border-gray-200 dark:border-slate-700",children:[e.jsx("span",{onClick:()=>c("en"),className:`lang-pill-btn ${a==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:()=>c("vi"),className:`lang-pill-btn ${a==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-auto",children:e.jsx("button",{onClick:f,disabled:l,className:`p-2 rounded-xl transition-all hover:scale-110 active:scale-95 disabled:opacity-70 border shadow-sm ${l?"text-emerald-600 border-emerald-200 bg-emerald-50 dark:bg-emerald-900/20":"bg-white dark:bg-slate-800 border-gray-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600"}`,title:l?"Copied!":"Copy to Clipboard",children:e.jsx(A,{name:l?"CheckThick":"Copy",size:16})})})]}),e.jsx("div",{className:"flex-1 p-5 overflow-y-auto custom-scrollbar bg-gray-50/50 dark:bg-slate-950/50 rounded-2xl border border-gray-100 dark:border-slate-800 relative shadow-inner text-left",children:e.jsx("div",{className:"prose prose-sm md:prose-base dark:prose-invert max-w-none",children:e.jsxs("p",{className:"text-sm md:text-base text-slate-800 dark:text-slate-200 whitespace-pre-wrap leading-8 font-medium tracking-wide",children:[h,!o&&h!==m&&e.jsx("span",{className:"inline-block w-1.5 h-5 bg-indigo-500 animate-pulse ml-1 align-middle"})]})})})]})]})})},Ws=({isOpen:t,onClose:s,apiKeys:n,newKeyInput:r,setNewKeyInput:i,handleAddKey:o,activeKeyId:a,editingKeyId:c,editLabelInput:l,setEditLabelInput:u,handleSaveLabel:h,handleStartEdit:p,handleDeleteKey:m})=>{const{auditTypeOptions:x,addAuditType:f,deleteAuditType:g,resetAuditTypes:b,privacySettings:j,setPrivacySettings:y}=fe(),[E,I]=d.useState("keys"),[P,q]=d.useState("ANALYSIS"),[re,ne]=d.useState(""),[U,O]=d.useState(""),[D,T]=d.useState(""),[C,_]=d.useState(null);d.useEffect(()=>{t&&E==="prompts"&&ne(ve.getPrompt(P).template)},[t,E,P]);const V=()=>{ve.updatePrompt(P,re);const N=document.getElementById("save-prompt-btn");N&&(N.innerText="Saved!",setTimeout(()=>N.innerText="Save Prompt",1e3))},z=()=>{ve.resetToDefault(P),ne(ve.getPrompt(P).template)},K=()=>{!U.trim()||!D.trim()||(f(U.trim(),D.trim()),O(""),T(""),_(null))},F=N=>{y({...j,[N]:!j[N]})},H=N=>{y({maskCompany:N,maskSmo:N,maskPeople:N,maskEmail:N,maskPhone:N,maskAddress:N,maskIP:N})},B=(N,L,J,ee)=>e.jsxs("div",{onClick:()=>F(L),className:`flex items-center justify-between p-3 rounded-xl border cursor-pointer transition-all ${j[L]?"bg-indigo-50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-800":"bg-white border-gray-100 dark:bg-slate-900 dark:border-slate-800 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${j[L]?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/40 dark:text-indigo-300":"bg-gray-100 text-slate-400 dark:bg-slate-800"}`,children:e.jsx(A,{name:J,size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-bold ${j[L]?"text-indigo-900 dark:text-indigo-100":"text-slate-600 dark:text-slate-400"}`,children:N}),e.jsx("p",{className:"text-[10px] text-slate-400",children:ee})]})]}),e.jsx("div",{className:`w-10 h-5 rounded-full relative transition-colors ${j[L]?"bg-emerald-500":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white shadow-sm transition-all ${j[L]?"left-6":"left-1"}`})})]});return e.jsxs(Ye,{isOpen:t,title:"Settings & Configuration",onClose:s,children:[e.jsxs("div",{className:"flex gap-2 mb-4 border-b border-gray-100 dark:border-slate-800 pb-2 overflow-x-auto custom-scrollbar",children:[e.jsx("button",{onClick:()=>I("keys"),className:`px-4 py-2 text-xs font-bold rounded-lg transition-colors whitespace-nowrap ${E==="keys"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":"text-slate-500 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:"API Keys"}),e.jsxs("button",{onClick:()=>I("privacy"),className:`px-4 py-2 text-xs font-bold rounded-lg transition-colors whitespace-nowrap flex items-center gap-2 ${E==="privacy"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":"text-slate-500 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:[e.jsx(A,{name:"ShieldEye",size:12})," Privacy"]}),e.jsx("button",{onClick:()=>I("types"),className:`px-4 py-2 text-xs font-bold rounded-lg transition-colors whitespace-nowrap ${E==="types"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":"text-slate-500 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:"Audit Types"}),e.jsx("button",{onClick:()=>I("prompts"),className:`px-4 py-2 text-xs font-bold rounded-lg transition-colors whitespace-nowrap ${E==="prompts"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":"text-slate-500 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:"AI Prompts"})]}),E==="keys"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-4 rounded-2xl border border-gray-100 dark:border-slate-700 dark:shadow-inner",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-3",children:"Google Gemini API Keys"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",name:"search_query_custom",id:"custom_search_input_x",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false","data-lpignore":"true",placeholder:"Paste API Key (AIza...)",className:"flex-1 p-2.5 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-600 rounded-xl text-xs font-mono outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500/50 text-slate-800 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 transition-all dark:shadow-[inset_0_1px_2px_rgba(0,0,0,0.5)]",value:r,onChange:N=>i(N.target.value),onKeyDown:N=>N.key==="Enter"&&o()}),e.jsx("button",{onClick:o,className:"p-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold text-xs transition-colors shadow-sm min-w-[60px] flex items-center justify-center",children:"Add"})]}),e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:[n.map(N=>e.jsxs("div",{className:`flex items-center justify-between p-2.5 rounded-xl border transition-all duration-200 ${N.id===a?"bg-indigo-50 border-indigo-200 dark:bg-indigo-500/20 dark:border-indigo-500/50 shadow-sm":"bg-white border-gray-100 dark:bg-slate-900 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-slate-500"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${N.id===a?"bg-indigo-200 text-indigo-700 dark:bg-indigo-800 dark:text-white":"bg-gray-100 text-gray-400 dark:bg-slate-800"}`,children:e.jsx(A,{name:"Key",size:14})}),e.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[c===N.id?e.jsx("input",{autoFocus:!0,className:"text-xs font-bold bg-white dark:bg-slate-950 text-slate-900 dark:text-white border-b-2 border-indigo-500 outline-none w-32 px-1 rounded-t",value:l,onChange:L=>u(L.target.value),onBlur:h,onKeyDown:L=>L.key==="Enter"&&h()}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:()=>p(N),className:`text-xs font-bold truncate cursor-pointer transition-colors ${N.id===a?"text-indigo-700 dark:text-indigo-200":"text-slate-700 dark:text-slate-200 hover:text-indigo-500 dark:hover:text-indigo-400"}`,children:N.label}),N.id===a&&e.jsx("span",{className:"text-[9px] bg-indigo-600 text-white px-1.5 py-0.5 rounded font-bold uppercase",children:"Active"})]}),e.jsxs("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-mono truncate",children:[N.key.substr(0,8),"...******"]})]})]}),e.jsx("button",{onClick:L=>{L.stopPropagation(),m(N.id)},className:"p-1.5 text-slate-400 hover:text-red-500 dark:text-slate-500 dark:hover:text-red-400 transition-colors",title:"Delete Key",children:e.jsx(A,{name:"Trash2",size:14})})]},N.id)),n.length===0&&e.jsx("div",{className:"text-center p-4 text-slate-400 text-xs italic",children:"No API Keys found. Add one above to start."})]})]}),e.jsx("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/10 rounded-xl border border-yellow-100 dark:border-yellow-800/30",children:e.jsxs("p",{className:"text-[10px] text-yellow-700 dark:text-yellow-500 flex items-center gap-2",children:[e.jsx(A,{name:"Info",size:12}),"Keys are stored locally in your browser. We do not validate them until you run an analysis."]})})]}),E==="privacy"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-2xl border border-indigo-100 dark:border-indigo-800 flex items-start gap-3",children:[e.jsx(A,{name:"ShieldEye",className:"text-indigo-600 dark:text-indigo-400 mt-1",size:24}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-indigo-900 dark:text-indigo-100",children:"Data Redaction Active"}),e.jsxs("p",{className:"text-xs text-indigo-700 dark:text-indigo-300 mt-1 leading-relaxed",children:["Selected information types will be replaced with placeholders (e.g., [EMAIL_REDACTED]) ",e.jsx("strong",{children:"before"})," sending data to the AI API. This processing happens entirely in your browser."]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pb-2",children:[e.jsx("button",{onClick:()=>H(!0),className:"text-[10px] font-bold text-indigo-600 hover:underline",children:"Select All"}),e.jsx("span",{className:"text-slate-300",children:"|"}),e.jsx("button",{onClick:()=>H(!1),className:"text-[10px] font-bold text-slate-500 hover:text-slate-700 hover:underline",children:"Clear All"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 max-h-[40vh] overflow-y-auto custom-scrollbar pr-1",children:[B("Company Name","maskCompany","Building","Matches exact name from Audit Charter"),B("SMO / ID","maskSmo","Tag","Matches SMO code from Audit Charter"),B("Person Names","maskPeople","Users","Matches Auditor & Interviewee names"),B("Emails","maskEmail","Mail","Standard email patterns"),B("Phone Numbers","maskPhone","Phone","Vietnamese & Intl phone patterns"),B("Addresses","maskAddress","MapPin","Street/District patterns"),B("IP Addresses","maskIP","Globe","IPv4 server addresses")]})]}),E==="types"&&e.jsxs("div",{className:"flex flex-col h-[60vh]",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-4 rounded-2xl border border-gray-100 dark:border-slate-700 mb-4",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-3",children:"Add / Edit Audit Type"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{className:"w-full p-2 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-600 rounded-lg text-xs font-bold outline-none focus:border-indigo-500",placeholder:"Type Name (e.g. Stage 2, Special Audit)",value:U,onChange:N=>O(N.target.value),disabled:!!C}),e.jsx("textarea",{className:"w-full p-2 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-600 rounded-lg text-xs outline-none focus:border-indigo-500 min-h-[60px]",placeholder:"Audit Objective Description...",value:D,onChange:N=>T(N.target.value)}),e.jsxs("div",{className:"flex justify-end gap-2",children:[C&&e.jsx("button",{onClick:()=>{_(null),O(""),T("")},className:"px-3 py-1.5 text-xs text-slate-500 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:K,disabled:!U.trim()||!D.trim(),className:"px-4 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-xs font-bold shadow-sm disabled:opacity-50",children:C?"Update Objective":"Add Type"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2 pr-1",children:Object.entries(x).map(([N,L])=>e.jsxs("div",{className:"p-3 bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 rounded-xl group hover:border-indigo-200 dark:hover:border-slate-600 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-indigo-700 dark:text-indigo-300",children:N}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>{_(N),O(N),T(L)},className:"p-1.5 text-slate-400 hover:text-indigo-500 bg-gray-50 dark:bg-slate-800 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded",children:e.jsx(A,{name:"FileEdit",size:12})}),e.jsx("button",{onClick:()=>{confirm(`Delete type "${N}"?`)&&g(N)},className:"p-1.5 text-slate-400 hover:text-red-500 bg-gray-50 dark:bg-slate-800 hover:bg-red-50 dark:hover:bg-red-900/30 rounded",children:e.jsx(A,{name:"Trash2",size:12})})]})]}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 leading-snug",children:L})]},N))}),e.jsx("div",{className:"pt-2 border-t border-gray-100 dark:border-slate-800 mt-2",children:e.jsx("button",{onClick:()=>{confirm("Reset all audit types to system default?")&&b()},className:"text-xs text-red-500 hover:underline",children:"Reset Defaults"})})]}),E==="prompts"&&e.jsxs("div",{className:"flex flex-col h-[60vh]",children:[e.jsxs("div",{className:"flex gap-2 mb-3 overflow-x-auto custom-scrollbar pb-1",children:[e.jsx("button",{onClick:()=>q("ANALYSIS"),className:`flex-shrink-0 px-3 py-2 text-xs font-bold rounded-lg border whitespace-nowrap ${P==="ANALYSIS"?"bg-indigo-100 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-200":"border-gray-200 dark:border-slate-700 text-slate-500"}`,children:"Analysis Logic"}),e.jsx("button",{onClick:()=>q("REPORT"),className:`flex-shrink-0 px-3 py-2 text-xs font-bold rounded-lg border whitespace-nowrap ${P==="REPORT"?"bg-indigo-100 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-200":"border-gray-200 dark:border-slate-700 text-slate-500"}`,children:"Report Format"}),e.jsx("button",{onClick:()=>q("SCHEDULING"),className:`flex-shrink-0 px-3 py-2 text-xs font-bold rounded-lg border whitespace-nowrap ${P==="SCHEDULING"?"bg-indigo-100 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-200":"border-gray-200 dark:border-slate-700 text-slate-500"}`,children:"Scheduling"}),e.jsx("button",{onClick:()=>q("OCR"),className:`flex-shrink-0 px-3 py-2 text-xs font-bold rounded-lg border whitespace-nowrap ${P==="OCR"?"bg-indigo-100 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-200":"border-gray-200 dark:border-slate-700 text-slate-500"}`,children:"OCR"})]}),e.jsx("div",{className:"flex-1 relative border border-gray-200 dark:border-slate-700 rounded-xl overflow-hidden",children:e.jsx("textarea",{className:"w-full h-full p-4 bg-gray-50 dark:bg-slate-950 text-xs font-mono text-slate-700 dark:text-slate-300 resize-none outline-none leading-relaxed",value:re,onChange:N=>ne(N.target.value)})}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("button",{onClick:z,className:"text-xs text-slate-400 hover:text-red-500 underline",children:"Reset to Default"}),e.jsx("button",{id:"save-prompt-btn",onClick:V,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-xs shadow-md transition-all active:scale-95",children:"Save Prompt"})]})]})]})},Ks=({isOpen:t,onClose:s,onAdd:n})=>{const[r,i]=d.useState(""),[o,a]=d.useState(null),c=d.useRef(null),l=()=>{r.trim()&&(n(r.trim(),o),i(""),a(null))},u=h=>{if(h.target.files&&h.target.files[0]&&(a(h.target.files[0]),!r)){const p=h.target.files[0].name;i(qe(p.replace(/\.[^/.]+$/,"")).replace(/_/g," "))}};return e.jsx(Ye,{isOpen:t,title:"Define New Standard",onClose:s,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-2xl border border-indigo-100 dark:border-indigo-800",children:e.jsxs("p",{className:"text-xs text-indigo-800 dark:text-indigo-300 leading-relaxed",children:["Create a custom standard entry. For best results, ",e.jsx("strong",{children:"attach a PDF/DOCX"}),' containing the full standard text. The AI will use this as the "Ground Truth" for citations.']})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase",children:["Standard Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",autoFocus:!0,className:"w-full p-3 pl-10 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-700 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all text-slate-800 dark:text-white",placeholder:"e.g. ISO 45001:2018 (OH&S)",value:r,onChange:h=>i(h.target.value),onKeyDown:h=>h.key==="Enter"&&l()}),e.jsx("div",{className:"absolute left-3 top-3 text-slate-400",children:e.jsx(A,{name:"Book",size:18})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Source Document (Optional)"}),e.jsxs("div",{onClick:()=>{var h;return(h=c.current)==null?void 0:h.click()},className:`group relative flex items-center justify-center border-2 border-dashed rounded-xl p-6 cursor-pointer transition-all ${o?"border-emerald-400 bg-emerald-50 dark:bg-emerald-900/10":"border-gray-200 dark:border-slate-700 hover:border-indigo-400 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:[e.jsx("input",{type:"file",ref:c,className:"hidden",accept:".pdf,.docx,.txt",onChange:u}),o?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-2 shadow-sm",children:e.jsx(A,{name:"CheckThick",size:20})}),e.jsx("p",{className:"text-sm font-bold text-emerald-700 dark:text-emerald-400 truncate max-w-[250px]",children:o.name}),e.jsx("p",{className:"text-[10px] text-emerald-600/70",children:"Click to change"})]}):e.jsxs("div",{className:"text-center text-slate-400 group-hover:text-indigo-500 transition-colors",children:[e.jsx(A,{name:"UploadCloud",size:28,className:"mx-auto mb-2"}),e.jsx("p",{className:"text-xs font-bold",children:"Click to Upload PDF / DOCX"}),e.jsx("p",{className:"text-[10px] opacity-70",children:"Max 10MB"})]})]})]})]}),e.jsxs("button",{onClick:l,disabled:!r.trim(),className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-sm shadow-lg shadow-indigo-500/30 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(A,{name:"Plus",size:18}),"Create Standard"]})]})})},Vs=({exportState:t,setExportState:s,rescueKey:n,setRescueKey:r,handleResumeExport:i,isRescuing:o,onClose:a,onSkip:c})=>t.isOpen?e.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-800 p-6 animate-zoom-in-spring",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[t.isFinished?e.jsx(A,{name:"CheckCircle2",className:"text-emerald-500",size:24}):e.jsx(A,{name:"Loader",className:"animate-spin text-indigo-500",size:24}),t.isFinished?"Export Complete":"Processing Export..."]}),t.error?e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-xl border border-red-100 dark:border-red-800 mb-4 animate-shake",children:[e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[e.jsx(A,{name:"AlertCircle",size:16})," Process Paused"]}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300 mb-3 leading-relaxed font-mono bg-white/50 dark:bg-black/20 p-2 rounded border border-red-100 dark:border-red-800/50 break-words max-h-24 overflow-y-auto",children:t.error}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"password",placeholder:"Paste Emergency Google AI Key...",className:"w-full p-2 text-xs rounded-lg border border-red-200 dark:border-red-800 bg-white dark:bg-slate-950 outline-none focus:border-red-500",value:n,onChange:l=>r(l.target.value)})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{onClick:i,disabled:o||!n.trim(),className:"w-full py-2 text-xs font-bold bg-red-500 text-white rounded-lg hover:bg-red-600 flex items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:active:scale-100",children:[o?e.jsx(A,{name:"Loader",className:"animate-spin",size:12}):e.jsx(A,{name:"Zap",size:12}),"Use Rescue Key"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:c,className:"flex-1 py-2 text-xs font-bold bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors flex items-center justify-center gap-1",title:"Skip translation for this chunk and use original text",children:[e.jsx(A,{name:"Minus",size:12})," Skip / Use Original"]}),e.jsx("button",{onClick:()=>s(l=>({...l,isOpen:!1})),className:"px-4 py-2 text-xs font-bold text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:"Cancel"})]})]})]}):e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"relative pt-1",children:[e.jsxs("div",{className:"flex mb-2 items-center justify-between",children:[e.jsx("div",{children:e.jsx("span",{className:"text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-indigo-600 bg-indigo-200 dark:text-indigo-200 dark:bg-indigo-900/50",children:t.isFinished?"Done":"Translating"})}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"text-xs font-semibold inline-block text-indigo-600 dark:text-indigo-400",children:[Math.round(t.processedChunksCount/Math.max(t.totalChunks,1)*100),"%"]})})]}),e.jsx("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-indigo-100 dark:bg-slate-800",children:e.jsx("div",{style:{width:`${Math.round(t.processedChunksCount/Math.max(t.totalChunks,1)*100)}%`},className:`shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center transition-all duration-500 ease-out ${t.isFinished?"bg-emerald-500":"bg-indigo-500"}`})})]}),e.jsx("div",{className:"text-center space-y-1",children:t.isFinished?e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-bold",children:"File has been downloaded successfully."}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-mono",children:["Processing Chunk ",Math.min(t.processedChunksCount+1,t.totalChunks)," of ",t.totalChunks]}),e.jsxs("p",{className:"text-[10px] text-slate-400 italic",children:["Target Language: ",t.targetLang==="vi"?"Vietnamese":"English"]})]})}),t.isFinished&&e.jsx("div",{className:"flex justify-center pt-2",children:e.jsxs("button",{onClick:a,className:"px-6 py-3 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-xl font-bold text-sm transition-all active:scale-95 flex items-center gap-2",children:[e.jsx(A,{name:"X",size:16}),"Close Window"]})})]})]})}):null,Gs=()=>{const{standardKey:t,auditInfo:s,selectedClauses:n,activeProcessId:r,processes:i,analysisResult:o,selectedFindings:a,finalReportText:c,restoreSession:l,customStandards:u}=fe(),[h,p]=d.useState(null),[m,x]=d.useState(!1),f=d.useRef(!1);return d.useEffect(()=>{try{const b=localStorage.getItem("iso_session_data"),j=localStorage.getItem("iso_custom_standards");if(b){f.current=!0;const y=JSON.parse(b);l(y),p(new Date().toLocaleTimeString()),setTimeout(()=>f.current=!1,1e3)}}catch(b){console.error("Load failed",b)}},[]),d.useEffect(()=>{if(f.current)return;const b=setTimeout(()=>{x(!0);const j={standardKey:t,auditInfo:s,selectedClauses:n,activeProcessId:r,processes:i,analysisResult:o,selectedFindings:a,finalReportText:c};localStorage.setItem("iso_session_data",JSON.stringify(j)),localStorage.setItem("iso_custom_standards",JSON.stringify(u)),p(new Date().toLocaleTimeString()),setTimeout(()=>x(!1),500)},1e3);return()=>clearTimeout(b)},[t,s,n,r,i,o,a,c,u]),{lastSavedTime:h,isSaving:m,createManualBackup:()=>{try{const b={standardKey:t,auditInfo:s,selectedClauses:n,activeProcessId:r,processes:i,analysisResult:o,selectedFindings:a,finalReportText:c},j={id:`backup_${Date.now()}`,timestamp:Date.now(),label:"Manual Backup",triggerType:"MANUAL_BACKUP",data:b},y=localStorage.getItem("iso_session_history"),E=y?JSON.parse(y):[],I=[j,...E].slice(0,5);return localStorage.setItem("iso_session_history",JSON.stringify(I)),!0}catch{return!1}}}},nt=new Map,Hs=()=>{const{standards:t,standardKey:s,setAnalysisResult:n,processes:r,privacySettings:i}=fe(),{apiKeys:o,activeKeyId:a}=Oe(),{showToast:c}=ke(),[l,u]=d.useState(!1),[h,p]=d.useState(""),[m,x]=d.useState(0),[f,g]=d.useState([]),b=d.useRef(0);return{handleAnalyze:d.useCallback(async()=>{if(!s||r.length===0){c("No processes or standard found to analyze.");return}u(!0),b.current=0,x(0),g(["Initializing AI Audit Engine...","Scanning process matrices..."]),await new Promise(y=>setTimeout(y,500));try{const y=t[s],E=o.find(O=>O.id===a),I=[],P=O=>{const D=T=>{for(const C of T){if(C.id===O)return C;if(C.subClauses){const _=D(C.subClauses);if(_)return _}}return null};for(const T of y.groups){const C=D(T.clauses);if(C)return C}return null};r.forEach(O=>{const D=O.matrixData||{};Object.keys(D).forEach(T=>{const C=P(T);C&&I.push({process:O,cid:T,clause:C})})});const q=I.length;if(q===0)throw new Error("No clauses mapped in any process. Please go to Planning tab to select clauses.");g(O=>[...O,`Found ${q} compliance checkpoints across ${r.length} processes.`]);const U=(await fs(I,async({process:O,cid:D,clause:T})=>{if(!T)return null;const C=O.name||"Unnamed Process";p(`[${C}] ${T.code}`),(b.current%2===0||q<10)&&g(k=>{const M=[...k,`> Processing ${C} / Clause ${T.code}...`];return M.length>8?M.slice(M.length-8):M});const _=O.matrixData[D]||[],V=_.some(k=>k.status==="supplied");let z="",K="";V&&(z=_.filter(k=>k.status==="supplied").map(k=>`[Requirement]: ${k.requirement}
[Evidence]: ${k.evidenceInput}`).join(`

`),K=_.filter(k=>k.status==="supplied").map(k=>k.evidenceInput).join(`

`));let F="",H="";const B=y.groups.find(k=>{const M=W=>W.flatMap(se=>[se.id,...se.subClauses?M(se.subClauses):[]]);return M(k.clauses).includes(D)});if(B){H=B.title;const k=[],M=W=>W.flatMap(se=>[se.id,...se.subClauses?M(se.subClauses):[]]);M(B.clauses).forEach(W=>{if(W===D)return;const se=O.matrixData[W];if(se&&se.some(oe=>oe.status==="supplied")){const oe=se.filter(le=>le.status==="supplied").map(le=>le.evidenceInput).join(" ");oe.trim().length>5&&k.push(`[Related Clause ${W} Evidence]: ${oe.substring(0,600)}...`)}}),k.length>0&&(F=k.join(`
`))}const N=O.evidence||"",L=N.length>8e3?N.substring(0,8e3)+"...(truncated)":N,J=`
                ${z?`### DIRECT EVIDENCE (Clause ${T.code}):
${z}`:"### DIRECT EVIDENCE: None specifically recorded for this exact clause number."}
                
                ${F?`### BROADER CONTEXT (PDCA Group - ${H}):
(The following evidence comes from related sub-clauses or sibling clauses within the same PDCA phase. Use this to verify high-level compliance, e.g., evidence in 6.1 proves compliance for 6).
${F}`:""}

                ${L?`### GENERAL PROCESS EVIDENCE (${C}):
${L}`:""}
                
                CRITICAL INSTRUCTION: 
                1. If Direct Evidence is missing, YOU MUST look at 'BROADER CONTEXT' and 'GENERAL PROCESS EVIDENCE'.
                2. Evidence found in sub-clauses (e.g., 6.1, 6.2) IS VALID evidence for the parent clause (e.g., 6). Do not mark as NC if the requirement is met in the sub-clauses.
                3. If the intent of the clause is met anywhere in this context, mark as COMPLIANT.
                `.trim(),ee=(O.evidenceTags||[]).filter(k=>k.clauseId===D).map(k=>`Tagged Excerpt: "${k.text}"`).join(`
`),Z=J+ee,te=gs(`${D}_${O.id}_${Z}_${E==null?void 0:E.activeModel}`);if(nt.has(te))return console.log(`[Cache Hit] ${C} - Clause ${D}`),b.current++,x(Math.round(b.current/q*100)),nt.get(te);try{const k=await wt({code:T.code,title:T.title,description:T.description},y.name,J,ee,E==null?void 0:E.key,E==null?void 0:E.activeModel,i.maskCompany),M=JSON.parse(k),G=K.trim().length>0?K:M.evidence||"Analyzed based on broader context/sub-clauses.",W={clauseId:M.clauseId||T.code,status:M.status||"N_A",reason:M.reason||"Analysis completed.",reason_en:M.reason_en||M.reason,reason_vi:M.reason_vi,suggestion:M.suggestion||"",evidence:G,conclusion_report:M.conclusion_report||M.reason,crossRefs:M.crossRefs||[],processId:O.id,processName:C};return nt.set(te,W),b.current++,x(Math.round(b.current/q*100)),W}catch(k){return console.error(`Error analyzing ${D} in ${C}`,k),g(M=>[...M,`x Error on ${D}: ${k.message}`]),b.current++,x(Math.round(b.current/q*100)),null}},3)).filter(O=>O!==null);U.length>0?(n(O=>{const D=O?[...O]:[];return U.forEach(T=>{const C=D.findIndex(_=>_.clauseId===T.clauseId&&_.processId===T.processId);C>=0?D[C]=T:D.push(T)}),D.sort((T,C)=>{const _=T.clauseId.localeCompare(C.clauseId,void 0,{numeric:!0});return _!==0?_:(T.processName||"").localeCompare(C.processName||"")})}),g(O=>[...O,"Synthesis Complete. Rendering Results..."]),await new Promise(O=>setTimeout(O,600)),c(`Success! Updated ${U.length} findings.`)):c("Analysis finished but returned no valid results.")}catch(y){console.error("Analysis Workflow Error",y),g(E=>[...E,`CRITICAL ERROR: ${y.message}`]),c("Failed: "+y.message),await new Promise(E=>setTimeout(E,2e3))}finally{u(!1),p("")}},[s,r,o,a,i,t]),isAnalyzeLoading:l,currentAnalyzingClause:h,progressPercent:m,analysisLogs:f}},qs=t=>{const{analysisResult:s,auditInfo:n,standards:r,standardKey:i,setFinalReportText:o,selectedFindings:a,processes:c}=fe(),{apiKeys:l,activeKeyId:u}=Oe(),{showToast:h}=ke(),[p,m]=d.useState(!1),[x,f]=d.useState(""),[g,b]=d.useState([]),[j,y]=d.useState(0),[E,I]=d.useState(""),[P,q]=d.useState(""),[re,ne]=d.useState(!1);return{isReportLoading:p,reportLoadingMessage:x,reportTemplateName:P,isTemplateProcessing:re,handleTemplateUpload:async D=>{var C;const T=(C=D.target.files)==null?void 0:C[0];if(T){ne(!0),f("Processing Template...");try{const _=Date.now(),V=await at(T);Date.now()-_<500&&await new Promise(z=>setTimeout(z,500)),I(V),q(T.name),h(`Template "${T.name}" loaded.`)}catch(_){h(`Template Error: ${_.message}`)}finally{ne(!1),f("")}}},handleGenerateReport:async()=>{var T,C;if(!s||s.length===0){h("No findings to report.");return}const D=s.filter(_=>a[_.clauseId]).map(_=>({..._,evidence:Ge(_.evidence)}));if(D.length===0){h("No findings selected. Please select at least one finding.");return}m(!0),b([]),y(0),f("Initializing Report Engine...");try{const _=l.find(k=>k.id===u),V=((T=r[i])==null?void 0:T.name)||"ISO Standard",z=_==null?void 0:_.key,K=_==null?void 0:_.activeModel,F=[];f("Drafting Executive Summary..."),b(k=>[...k,`Analysing ${D.length} selected findings...`]);const H=Array.from(new Set(c.flatMap(k=>k.interviewees||[]))).filter(Boolean),N=(await Ct({company:n.company||"N/A",address:n.address||"N/A",scope:n.scope||"N/A",soa:n.soa||"N/A",type:n.type||"Internal Audit",auditor:n.auditor||"N/A",standard:V,findings:D,interviewees:H,lang:t},z,K)).replace(/[#*`]/g,"");F.push(`AUDIT REPORT: ${n.company}

EXECUTIVE SUMMARY
${N}
`),N.toLowerCase().includes("auditee")||F.push(`Auditee list: ${H.join(", ")}
`),b(k=>[...k,"Executive Summary: Completed"]),y(20),F.push("DETAILED FINDINGS");const L={};D.forEach(k=>{const M=k.processName||"General / Unassigned";L[M]||(L[M]=[]),L[M].push(k)});const J=Object.keys(L).sort();let ee=0;const Z=J.length;for(const k of J){const M=L[k],G=M[0],W=c.find(xe=>xe.id===G.processId),se=((C=W==null?void 0:W.interviewees)==null?void 0:C.join(", "))||"N/A",oe=n.auditor||"[Auditor Name]";f(`Processing Section: ${k}...`),b(xe=>[...xe,`Batch Processing ${k} (${M.length} findings)...`]);const Q=(await St({processName:k,auditor:oe,interviewees:se,company:n.company,standardName:V,language:t,findings:M},z,K)).replace(/[#*`]/g,"");F.push(Q),F.push("----------------------------------------"),ee++;const he=20+Math.round(ee/Z*80);y(he),await new Promise(xe=>setTimeout(xe,500))}f("Finalizing document...");const te=F.join(`

`);o(E?`TEMPLATE APPLIED:
${E}

GENERATED CONTENT:
${te}`:te),b(k=>[...k,"Done."]),y(100),h("Report Generated Successfully.")}catch(_){console.error(_),b(V=>[...V,`ERROR: ${_.message}`]),h("Report Generation Failed.")}finally{setTimeout(()=>{m(!1),f("")},1e3)}},generationLogs:g,progressPercent:j}},Js=()=>{const{evidence:t,matrixData:s,analysisResult:n,finalReportText:r,standards:i,standardKey:o,auditInfo:a,processes:c,activeProcessId:l,auditSchedule:u}=fe(),{apiKeys:h,activeKeyId:p,addKey:m}=Oe(),{showToast:x}=ke(),[f,g]=d.useState({isOpen:!1,isPaused:!1,isFinished:!1,totalChunks:0,processedChunksCount:0,chunks:[],results:[],error:null,currentType:"report",targetLang:"en"}),[b,j]=d.useState(""),[y,E]=d.useState(!1),[I,P]=d.useState("txt"),q=(U,O,D="txt",T)=>{var V,z;let C="";if(U==="evidence")C=`EVIDENCE DUMP
Date: ${new Date().toLocaleString()}

`,C+=`--- GENERAL EVIDENCE ---
${Ge(t)}

`,C+=`--- MATRIX EVIDENCE ---
`,Object.keys(s).forEach(K=>{s[K].forEach(H=>{H.status==="supplied"&&(C+=`[Clause ${K}] ${H.requirement}
EVIDENCE: ${Ge(H.evidenceInput)}
---
`)})});else if(U==="notes"){if(!n)return x("No findings.");C=n.map(K=>`[${K.clauseId}] ${K.status}
Observation: ${K.reason}
Evidence: ${Ge(K.evidence)}
`).join(`
----------------------------------------

`)}else if(U==="report"){if(!r)return x("No report text.");C=r}else if(U==="schedule"){if(!u||u.length===0)return x("No schedule generated.");if(D==="docx"){const K=(T==null?void 0:T.columns)||["timeSlot","siteName","processName","activity","auditorName","clauseRefs"],F=(T==null?void 0:T.customHeader)||"",H={timeSlot:"Time",siteName:"Site",auditorName:"Auditor",clauseRefs:"Clauses",activity:"Activity",processName:"Process / Auditee"};C=`
                    <h2 style="color:#2e74b5; font-family:Arial;">${F||"AUDIT PLAN / SCHEDULE"}</h2>
                    <p><strong>Company:</strong> ${a.company}<br/>
                    <strong>Standard:</strong> ${(V=i[o])==null?void 0:V.name}<br/>
                    <strong>Date Exported:</strong> ${new Date().toLocaleDateString()}</p>
                `;const B=(L,J)=>{const ee={};for(let Z=0;Z<L.length;Z++)for(let te=0;te<J.length;te++){const k=`${Z}_${te}`;ee[k]!==0&&(ee[k]=1)}for(let Z=0;Z<J.length;Z++){const te=J[Z];for(let k=0;k<L.length;k++){const M=`${k}_${Z}`;if(ee[M]===0)continue;const G=L[k][te];for(let W=k+1;W<L.length;W++){const se=L[W][te],oe=`${W}_${Z}`;let le=!0;if(Z>0){for(let Q=0;Q<Z;Q++)if(L[k][J[Q]]!==L[W][J[Q]]){le=!1;break}}if(G===se&&le)ee[M]++,ee[oe]=0;else break}}}return ee};Array.from(new Set(u.map(L=>L.day))).sort().forEach(L=>{var k;const J=u.filter(M=>M.day===L),ee=((k=J[0])==null?void 0:k.date)||`Day ${L}`,Z=[...J].sort((M,G)=>{for(const W of K){const se=M[W]??"",oe=G[W]??"";if(se!==oe)return String(se).localeCompare(String(oe),void 0,{numeric:!0,sensitivity:"base"})}return 0}),te=B(Z,K);C+=`<h3>--- DAY ${L}: ${ee} ---</h3>`,C+='<table border="1" style="border-collapse: collapse; width: 100%; border: 1px solid #ddd; font-family: Arial; font-size: 10pt;">',C+='<tr style="background-color:#f3f4f6;">',K.forEach(M=>{C+=`<th style="padding: 8px; border: 1px solid #ccc; text-align: left;">${H[M]||M}</th>`}),C+="</tr>",Z.forEach((M,G)=>{C+="<tr>",K.forEach((W,se)=>{const oe=`${G}_${se}`,le=te[oe];if(le===0)return;let Q=M[W];W==="clauseRefs"&&Array.isArray(Q)&&(Q=Q.join(", ")),W==="auditorName"&&M.isRemote&&(Q+=" (Remote)"),W==="processName"&&!Q&&(Q="General"),Q||(Q="-");const he=le>1?` rowspan="${le}"`:"";C+=`<td style="padding: 8px; border: 1px solid #ccc;"${he}>${Q}</td>`}),C+="</tr>"}),C+="</table><br/>"})}else C=`AUDIT PLAN / SCHEDULE
`,C+=`Company: ${a.company}
Standard: ${(z=i[o])==null?void 0:z.name}

`,Array.from(new Set(u.map(F=>F.day))).sort().forEach(F=>{var N;const H=u.filter(L=>L.day===F).sort((L,J)=>L.timeSlot.localeCompare(J.timeSlot)),B=((N=H[0])==null?void 0:N.date)||`Day ${F}`;C+=`--- DAY ${F}: ${B} ---
`,H.forEach(L=>{var te;const J=L.processName?`[${L.processName}] ${L.activity}`:L.activity,ee=((te=L.clauseRefs)==null?void 0:te.join(", "))||"-",Z=L.auditorName+(L.isRemote?" (Remote)":"");C+=`[${L.timeSlot}] ${J}
   Site: ${L.siteName} | Auditor: ${Z}
   Ref: ${ee}

`})})}if(!C.trim())return x("Nothing to export.");const _=C.match(/[\s\S]{1,3000}/g)||[];P(D),g({isOpen:!0,isPaused:!1,isFinished:!1,totalChunks:_.length,processedChunksCount:0,chunks:_,results:[],error:null,currentType:U,targetLang:O})};return d.useEffect(()=>{(async()=>{var O;if(f.isOpen&&!f.isPaused&&!f.isFinished){const D=f.processedChunksCount;if(D>=f.totalChunks){let z=f.results.join("");I==="txt"&&(z=bs(z));const K=((O=i[o])==null?void 0:O.name)||"ISO";let F="ISO";K.includes("27001")?F="27k":K.includes("9001")?F="9k":K.includes("14001")&&(F="14k");const H=c.find(G=>G.id===l),B=H?H.name:"General";let N="Document";f.currentType==="notes"?N="Audit_Note":f.currentType==="evidence"?N="Evidence":f.currentType==="report"?N="Report":f.currentType==="schedule"&&(N="Schedule");const L=new Date,J=`${L.getFullYear()}${String(L.getMonth()+1).padStart(2,"0")}${String(L.getDate()).padStart(2,"0")}`,ee=[F,qe(a.company||"Company"),qe(B),N,J],Z=I==="docx"?"doc":"txt",te=`${ee.filter(G=>G&&G!=="N_A").join("_")}_${f.targetLang}.${Z}`;let k;if(I==="docx"){let G="";f.currentType==="schedule"?G=z:(G=z.replace(/\n/g,"<br/>").replace(/\[(.*?)\]/g,"<strong>[$1]</strong>"),G=G.replace(/\[TABLE_START\]<br\/>(.*?)\[TABLE_END\]/gs,(se,oe)=>{const le=oe.split("<br/>").filter(he=>he.trim());let Q='<table border="1" style="border-collapse: collapse; width: 100%; border: 1px solid #ddd;">';return le.forEach((he,xe)=>{const ye=he.split("|");Q+="<tr>",ye.forEach(be=>{Q+=`<td style="padding: 8px; ${xe===0?"background-color:#f3f4f6; font-weight:bold;":""}">${be.trim()}</td>`}),Q+="</tr>"}),Q+="</table>",Q}));const W=`
                            <html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
                            <head><meta charset='utf-8'><title>Export</title>
                            <style>
                                body { font-family: 'Calibri', 'Arial', sans-serif; font-size: 11pt; line-height: 1.5; }
                                h1 { font-size: 16pt; color: #2e74b5; }
                                h2 { font-size: 14pt; color: #2e74b5; }
                                h3 { font-size: 12pt; color: #e36a00; background-color: #fff3e0; padding: 5px; }
                                strong { color: #333; }
                                table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
                                td, th { border: 1px solid #ccc; padding: 5px; font-size: 10pt; vertical-align: top; }
                            </style>
                            </head><body>
                            ${G}
                            </body></html>
                        `;k=new Blob(["\uFEFF",W],{type:"application/msword"})}else k=new Blob([z],{type:"text/plain"});const M=document.createElement("a");M.href=URL.createObjectURL(k),M.download=te,document.body.appendChild(M),M.click(),document.body.removeChild(M),g(G=>({...G,isFinished:!0}));return}const T=f.chunks[D],C=f.currentType==="schedule",_=vs(T);let V=!C;if(f.targetLang==="en"&&!_&&(V=!1),!V)g(z=>({...z,results:[...z.results,T],processedChunksCount:z.processedChunksCount+1}));else try{const z=h.find(B=>B.id===p);await new Promise(B=>setTimeout(B,200));const K=b||(z==null?void 0:z.key),{translateChunk:F}=await _e(async()=>{const{translateChunk:B}=await Promise.resolve().then(()=>gt);return{translateChunk:B}},void 0,import.meta.url),H=await F(T,f.targetLang,K);g(B=>({...B,results:[...B.results,H],processedChunksCount:B.processedChunksCount+1}))}catch(z){g(K=>({...K,isPaused:!0,error:z.message||"Translation failed."}))}}})()},[f,p,b,h]),{handleExport:q,exportState:f,setExportState:g,rescueKey:b,setRescueKey:j,handleResumeExport:async()=>{E(!0);const{validateApiKey:U}=await _e(async()=>{const{validateApiKey:D}=await Promise.resolve().then(()=>gt);return{validateApiKey:D}},void 0,import.meta.url);(await U(b)).isValid?(await m(b,"Rescue Key"),g(D=>({...D,isPaused:!1,error:null})),j("")):x("Rescue Key Invalid."),E(!1)},isRescuing:y,handleSkipExportChunk:()=>{g(U=>({...U,results:[...U.results,U.chunks[U.processedChunksCount]],processedChunksCount:U.processedChunksCount+1,isPaused:!1,error:null}))}}},Ys=()=>{d.useEffect(()=>{const t=s=>{if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"].includes(s.key))return;const r=document.activeElement;if(!r)return;const i=r.tagName.toLowerCase(),o=i==="input",a=i==="textarea",c=i==="select";if(!o&&!a&&!c||a&&!s.ctrlKey||c&&(s.key==="ArrowUp"||s.key==="ArrowDown")&&!s.ctrlKey||o&&(s.key==="ArrowLeft"||s.key==="ArrowRight")&&!s.ctrlKey)return;let l=0;if((s.key==="ArrowDown"||s.key==="ArrowRight"&&s.ctrlKey)&&(l=1),(s.key==="ArrowUp"||s.key==="ArrowLeft"&&s.ctrlKey)&&(l=-1),s.key==="Enter"){if(a)return;l=s.shiftKey?-1:1}if(l!==0){s.preventDefault();const h=document.querySelectorAll('input:not([type="hidden"]):not([type="file"]):not([disabled]):not([readonly]), textarea:not([disabled]):not([readonly]), select:not([disabled])'),m=Array.from(h).filter(g=>g.offsetParent!==null),x=m.indexOf(r);if(x===-1)return;const f=x+l;if(f>=0&&f<m.length){const g=m[f];if(g.focus(),g.tagName.toLowerCase()==="input"){const b=g.type;if(["text","search","url","tel","password"].includes(b))try{g.select()}catch{}}g.scrollIntoView({behavior:"smooth",block:"center"})}}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[])},Xs=({setReferenceState:t,setLayoutMode:s})=>{d.useEffect(()=>{const n=o=>{t({isOpen:!0,clause:o.detail,fullText:{en:"",vi:""},isLoading:!0})},r=o=>{t(a=>({...a,fullText:o.detail,isLoading:!1}))},i=o=>{o.detail&&s(o.detail)};return window.addEventListener("OPEN_REFERENCE",n),window.addEventListener("UPDATE_REFERENCE_CONTENT",r),window.addEventListener("SWITCH_LAYOUT",i),()=>{window.removeEventListener("OPEN_REFERENCE",n),window.removeEventListener("UPDATE_REFERENCE_CONTENT",r),window.removeEventListener("SWITCH_LAYOUT",i)}},[t,s])},Zs=je.lazy(()=>_e(()=>import("./EvidenceView-B73Vlh2i.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(t=>({default:t.EvidenceView}))),Qs=je.lazy(()=>_e(()=>import("./FindingsView-Be-As1ey.js"),__vite__mapDeps([4,1,2,3]),import.meta.url).then(t=>({default:t.FindingsView}))),ei=je.lazy(()=>_e(()=>import("./ReportView-C2lFpEiR.js"),__vite__mapDeps([5,1,2,3]),import.meta.url).then(t=>({default:t.ReportView}))),ti=je.lazy(()=>_e(()=>import("./PlanningView-BQTpkZ9M.js"),__vite__mapDeps([6,1,2,3]),import.meta.url).then(t=>({default:t.PlanningView}))),si=()=>{var lt;const[t,s]=d.useState("planning");Ys();const{isSidebarOpen:n,sidebarWidth:r,showToast:i,modals:o,toggleModal:a}=ke(),{evidence:c,setEvidence:l,matrixData:u,setMatrixData:h,evidenceTags:p,addEvidenceTag:m,selectedClauses:x,standards:f,standardKey:g,auditInfo:b,setKnowledgeData:j,analysisResult:y,setAnalysisResult:E,selectedFindings:I,setSelectedFindings:P,finalReportText:q,setFinalReportText:re,resetSession:ne,restoreSession:U,addCustomStandard:O,setStandardKey:D,activeProcessId:T,processes:C}=fe(),{apiKeys:_,addKey:V,deleteKey:z,refreshKeyStatus:K,activeKeyId:F,isCheckingKey:H,isAutoCheckEnabled:B,toggleAutoCheck:N}=Oe(),{lastSavedTime:L,isSaving:J,createManualBackup:ee}=Gs(),[Z,te]=d.useState([]),[k,M]=d.useState({isOpen:!1,clause:null,fullText:{en:"",vi:""},isLoading:!1}),[G,W]=d.useState(""),[se,oe]=d.useState("list"),[le,Q]=d.useState(0),[he,xe]=d.useState("en"),[ye,be]=d.useState("en"),[Ie,Te]=d.useState("en");Xs({setReferenceState:M,setLayoutMode:s});const{handleAnalyze:S,isAnalyzeLoading:ie,currentAnalyzingClause:de,progressPercent:X,analysisLogs:me}=Hs(),{isReportLoading:Re,reportLoadingMessage:Ce,reportTemplateName:Pe,isTemplateProcessing:Le,handleTemplateUpload:Be,handleGenerateReport:ze,generationLogs:Xe,progressPercent:v}=qs(Ie),{handleExport:w,exportState:R,setExportState:$,rescueKey:ae,setRescueKey:ce,handleResumeExport:ue,isRescuing:ge,handleSkipExportChunk:$e}=Js(),Ze=d.useMemo(()=>{const pe=De.find(Me=>Me.id===t);return pe?`${pe.colorClass} ${pe.borderClass}`:"bg-slate-500 border-slate-600"},[t]),It=d.useMemo(()=>{switch(t){case"planning":return"selection:bg-orange-200 selection:text-orange-900 dark:selection:bg-orange-900 dark:selection:text-orange-100 bg-orange-50/80 dark:bg-orange-950/20";case"evidence":return"selection:bg-blue-200 selection:text-blue-900 dark:selection:bg-blue-900 dark:selection:text-blue-100 bg-blue-50/80 dark:bg-blue-950/20";case"findings":return"selection:bg-purple-200 selection:text-purple-900 dark:selection:bg-purple-900 dark:selection:text-purple-100 bg-purple-50/80 dark:bg-purple-950/20";case"report":return"selection:bg-emerald-200 selection:text-emerald-900 dark:selection:bg-emerald-900 dark:selection:text-emerald-100 bg-emerald-50/80 dark:bg-emerald-950/20";default:return"selection:bg-indigo-200 selection:text-indigo-900"}},[t]),Tt=De.find(pe=>pe.id===t)||De[0],Lt=(!T||C.length===0)&&t!=="planning",Mt=async()=>{const pe=await V(G);pe==="valid"?(W(""),i("Success: API Key is Active")):pe==="quota_exceeded"?(W(""),i("Added: Key Quota Exhausted")):i(pe==="duplicate"?"Info: Key already exists":"Failed: Invalid API Key or Network Error")},Rt=d.useMemo(()=>{if(!g||!T||ie)return!1;const pe=Object.values(u).some(Fe=>Fe.some(Qe=>Qe.status==="supplied")),Me=c&&c.trim().length>10;return pe||Me},[g,T,u,c,ie]);return e.jsxs(zs,{commandActions:[],onRestoreSnapshot:U,children:[e.jsxs("div",{className:`flex-shrink-0 px-4 md:px-6 py-3 border-b border-gray-200 dark:border-slate-800 transition-colors duration-500 ease-fluid flex justify-between items-center gap-3 border-t-4 ${Tt.borderClass} ${Ze.split(" ")[0].replace("bg-","bg-opacity-10 ")}`,children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(Fs,{layoutMode:t,setLayoutMode:s,isSidebarOpen:n,sidebarWidth:r})}),e.jsxs("div",{className:"flex gap-2 items-center flex-shrink-0 pl-2 border-l border-gray-200 dark:border-slate-800",children:[e.jsxs("button",{onClick:()=>a("recall",!0),className:`group relative h-9 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 border border-transparent 
                        text-emerald-600 dark:text-emerald-400 
                        hover:bg-emerald-50 hover:text-emerald-700 
                        dark:hover:bg-emerald-900/30 dark:hover:text-emerald-300 
                        dark:hover:border-emerald-500/50 dark:hover:shadow-[0_0_15px_rgba(16,185,129,0.5)]`,title:"Recall Session",children:[e.jsxs("div",{className:"relative transition-transform group-hover:scale-110",children:[e.jsx(A,{name:"History",size:16,className:"dark:group-hover:drop-shadow-[0_0_8px_rgba(52,211,153,0.8)]"}),L&&e.jsxs("span",{className:"absolute -top-1 -right-1 flex h-2 w-2",children:[e.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${J?"bg-red-500":"bg-emerald-500"} group-hover:animate-ping`}),e.jsx("span",{className:`absolute inline-flex rounded-full h-2 w-2 ${J?"bg-red-500":"bg-emerald-500"} opacity-75`})]})]}),e.jsx("span",{className:"hidden xl:inline text-xs font-bold dark:group-hover:drop-shadow-[0_0_8px_rgba(52,211,153,0.8)]",children:"Recall"})]}),e.jsxs("button",{onClick:()=>{confirm("Start New Session?")&&(ee(),ne(),i("Session Reset."))},className:`group h-9 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 border border-transparent 
                        text-amber-600 dark:text-amber-400 
                        hover:bg-amber-50 hover:text-amber-700 
                        dark:hover:bg-amber-950/30 dark:hover:text-amber-300 
                        dark:hover:border-amber-500/50 dark:hover:shadow-[0_0_15px_rgba(245,158,11,0.5)]`,title:"Start New Session",children:[e.jsx(A,{name:"Session4_FilePlus",size:16,className:"transition-transform group-hover:scale-110 dark:group-hover:drop-shadow-[0_0_8px_rgba(251,191,36,0.8)]"}),e.jsx("span",{className:"hidden md:inline text-xs font-bold dark:group-hover:drop-shadow-[0_0_8px_rgba(251,191,36,0.8)]",children:"New"})]})]})]}),e.jsxs("div",{className:`flex-1 overflow-hidden relative p-2 md:p-4 transition-colors duration-500 ease-fluid ${It}`,children:[Lt&&e.jsx("div",{className:"absolute inset-0 z-50 bg-white/80 dark:bg-slate-950/80 backdrop-blur-sm flex flex-col items-center justify-center animate-in fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-3xl shadow-floating border border-indigo-100 dark:border-indigo-900 max-w-md text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/50 rounded-full flex items-center justify-center mx-auto mb-4 text-indigo-600",children:e.jsx(A,{name:"Session11_GridAdd",size:32})}),e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white mb-2",children:"Process Required"}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6 leading-relaxed",children:["Define at least one ",e.jsx("strong",{children:"Process"})," to begin evidence collection."]}),e.jsx("div",{className:"flex gap-3 justify-center",children:e.jsx("button",{onClick:()=>s("planning"),className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg transition-transform active:scale-95",children:"Go to Planning"})})]})}),e.jsxs(d.Suspense,{fallback:e.jsx(os,{message:"Loading View..."}),children:[t==="planning"&&e.jsx(ti,{onExport:w}),t==="evidence"&&e.jsx(Zs,{evidence:c,setEvidence:l,uploadedFiles:Z,setUploadedFiles:te,onOcrProcess:()=>{},isOcrLoading:!1,onAnalyze:async()=>{s("findings"),await S()},isReadyForAnalysis:Rt,isAnalyzeLoading:ie,analyzeTooltip:"Run AI Analysis",onExport:w,evidenceLanguage:he,setEvidenceLanguage:xe,textareaRef:{current:null},tags:p,onAddTag:m,selectedClauses:x,standards:f,standardKey:g,matrixData:u,setMatrixData:h},T),t==="findings"&&e.jsx(Qs,{analysisResult:y,setAnalysisResult:E,selectedFindings:I,setSelectedFindings:P,isAnalyzeLoading:ie,loadingMessage:"Scanning Matrix Evidence...",currentAnalyzingClause:de,viewMode:se,setViewMode:oe,focusedFindingIndex:le,setFocusedFindingIndex:Q,onExport:w,notesLanguage:ye,setNotesLanguage:be,progressPercent:X,analysisLogs:me}),t==="report"&&e.jsx(ei,{finalReportText:q,setFinalReportText:re,isReportLoading:Re,loadingMessage:Ce,templateFileName:Pe,isTemplateProcessing:Le,handleTemplateUpload:Be,handleGenerateReport:ze,isReadyToSynthesize:!!y&&y.length>0,onExport:w,exportLanguage:Ie,setExportLanguage:Te,analysisResult:y,generationLogs:Xe,progressPercent:v,selectedFindings:I,setSelectedFindings:P})]})]}),e.jsx(Ws,{isOpen:o.settings,onClose:()=>a("settings",!1),apiKeys:_,newKeyInput:G,setNewKeyInput:W,isCheckingKey:H,handleAddKey:Mt,activeKeyId:F,editingKeyId:null,editLabelInput:"",setEditLabelInput:()=>{},handleSaveLabel:()=>{},handleStartEdit:()=>{},handleRefreshStatus:K,handleDeleteKey:z,isAutoCheckEnabled:B,toggleAutoCheck:N}),e.jsx(Ks,{isOpen:o.addStandard,onClose:()=>a("addStandard",!1),onAdd:async(pe,Me)=>{a("addStandard",!1);const Fe=`CUSTOM_${Date.now()}`;if(Me){const Qe=await at(Me);j(Qe,Me.name)}O(Fe,{name:pe,description:"Custom",groups:[]}),D(Fe)}}),e.jsx(Us,{isOpen:k.isOpen,onClose:()=>M(pe=>({...pe,isOpen:!1})),clause:k.clause,standardName:((lt=f[g])==null?void 0:lt.name)||"",fullText:k.fullText,isLoading:k.isLoading}),e.jsx(Vs,{exportState:R,setExportState:$,rescueKey:ae,setRescueKey:ce,handleResumeExport:ue,isRescuing:ge,onClose:()=>$(pe=>({...pe,isOpen:!1})),onSkip:$e})]})};function ii(){return e.jsx(is,{children:e.jsx(rs,{children:e.jsx(ss,{children:e.jsx(si,{})})})})}const Et=document.getElementById("root");if(!Et)throw new Error("Could not find root element to mount to");const ri=_t.createRoot(Et);ri.render(e.jsx(je.StrictMode,{children:e.jsx(ii,{})}));export{A as I,He as K,Je as L,Ye as M,ve as P,di as S,De as T,Oe as a,ke as b,hs as c,wt as d,Ms as e,ci as f,Rs as g,ms as h,Ls as p,Ps as t,fe as u};
