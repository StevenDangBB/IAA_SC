var Je=Object.defineProperty;var Xe=(s,t,r)=>t in s?Je(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var ke=(s,t,r)=>Xe(s,typeof t!="symbol"?t+"":t,r);import{r as c,j as e,R as oe,c as Qe}from"./vendor-react--UE8qFvL.js";import{G as Pe}from"./vendor-genai-DDZkw1qX.js";import"./vendor-BhE6lIor.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();const Ye={name:"ISO 9001:2015 (QMS)",description:"Quality Management System",groups:[{id:"PLAN_9001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context of organization",description:"Internal and external issues that affect its ability to achieve intended results.",subClauses:[{id:"4.1",code:"4.1",title:"Understanding the organization",description:"Determining internal and external issues relevant to its purpose."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Understanding the needs and expectations of stakeholders."},{id:"4.3",code:"4.3",title:"Scope of QMS",description:"Determining the boundaries and applicability of the quality system."},{id:"4.4",code:"4.4",title:"QMS processes",description:"Establishing, implementing, and maintaining processes."}]},{id:"5",code:"5",title:"Leadership",description:"Top management commitment, policy and roles.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership commitment",description:"Demonstrating leadership and commitment to customer focus."},{id:"5.2",code:"5.2",title:"Policy",description:"Establishing and communicating the quality policy."},{id:"5.3",code:"5.3",title:"Roles & Authorities",description:"Ensuring responsibilities and authorities are assigned."}]},{id:"6",code:"6",title:"Planning",description:"Risks, opportunities and quality objectives.",subClauses:[{id:"6.1",code:"6.1",title:"Risks & Opportunities",description:"Actions to address risks and opportunities."},{id:"6.2",code:"6.2",title:"Quality objectives",description:"Establishing objectives and planning to achieve them."},{id:"6.3",code:"6.3",title:"Planning of changes",description:"Carrying out changes in a planned manner."}]}]},{id:"SUPPORT_9001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Providing necessary resources for the QMS.",subClauses:[{id:"7.1.1",code:"7.1.1",title:"General",description:"Determining and providing resources for QMS."},{id:"7.1.2",code:"7.1.2",title:"People",description:"Providing persons necessary for effective implementation."},{id:"7.1.3",code:"7.1.3",title:"Infrastructure",description:"Maintenance of buildings, equipment, and transport."},{id:"7.1.4",code:"7.1.4",title:"Process Environment",description:"Managing social (non-discriminatory), psychological (stress-reducing), and physical (temperature, hygiene) factors."},{id:"7.1.5",code:"7.1.5",title:"Monitoring resources",description:"Calibration and measurement traceability."},{id:"7.1.6",code:"7.1.6",title:"Knowledge",description:"Maintaining organizational knowledge and lessons learned."}]},{id:"7.2",code:"7.2",title:"Competence",description:"Ensuring workers are competent based on education/training."},{id:"7.3",code:"7.3",title:"Awareness",description:"Ensuring persons are aware of quality policy and objectives."},{id:"7.4",code:"7.4",title:"Communication",description:"Determining internal and external communications."},{id:"7.5",code:"7.5",title:"Documented info",description:"Control of information required by the standard.",subClauses:[{id:"7.5.1",code:"7.5.1",title:"General",description:"Determining necessary documented information for QMS."},{id:"7.5.2",code:"7.5.2",title:"Creating & Updating",description:"Ensuring proper identification, format, and review."},{id:"7.5.3",code:"7.5.3",title:"Control of info",description:"Ensuring availability, protection, and storage control.",subClauses:[{id:"7.5.3.1",code:"7.5.3.1",title:"Availability",description:"Ensuring info is available where needed."},{id:"7.5.3.2",code:"7.5.3.2",title:"Control",description:"Distribution, access, retrieval and use."}]}]}]},{id:"DO_9001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational planning",description:"Control of processes to meet P/S requirements."},{id:"8.2",code:"8.2",title:"Requirements for P/S",description:"Determining requirements and communicating with customers."},{id:"8.3",code:"8.3",title:"Design and development",description:"D&D of products and services.",subClauses:[{id:"8.3.1",code:"8.3.1",title:"General",description:"Establishing a D&D process."},{id:"8.3.2",code:"8.3.2",title:"Planning",description:"Determining D&D stages and controls."},{id:"8.3.3",code:"8.3.3",title:"Inputs",description:"Requirements essential for D&D."},{id:"8.3.4",code:"8.3.4",title:"Controls",description:"Ensuring reviews, verification, and validation."},{id:"8.3.5",code:"8.3.5",title:"Outputs",description:"Meeting input requirements."},{id:"8.3.6",code:"8.3.6",title:"Changes",description:"Controlling modifications to D&D."}]},{id:"8.4",code:"8.4",title:"External Providers",description:"Control of externally provided P/S.",subClauses:[{id:"8.4.1",code:"8.4.1",title:"General",description:"Evaluating and selecting external providers."},{id:"8.4.2",code:"8.4.2",title:"Type & Extent",description:"Controlling the impact of providers on results."},{id:"8.4.3",code:"8.4.3",title:"Information",description:"Communicating requirements to providers clearly."}]},{id:"8.5",code:"8.5",title:"Production & Delivery",description:"Control of production and service provision.",subClauses:[{id:"8.5.1",code:"8.5.1",title:"Control",description:"Availability of info, equipment and monitoring."},{id:"8.5.2",code:"8.5.2",title:"Identification",description:"Ensuring traceability throughout provision."},{id:"8.5.3",code:"8.5.3",title:"Property",description:"Safeguarding customer or provider assets."},{id:"8.5.4",code:"8.5.4",title:"Preservation",description:"Ensuring conformity during processing."},{id:"8.5.5",code:"8.5.5",title:"Post-delivery",description:"Statutory, regulatory, and warranty duties."},{id:"8.5.6",code:"8.5.6",title:"Control of changes",description:"Reviewing and controlling changes for production."}]},{id:"8.6",code:"8.6",title:"Release of P/S",description:"Verification that requirements have been met."},{id:"8.7",code:"8.7",title:"Nonconforming outputs",description:"Ensuring unintended use is prevented."}]},{id:"CHECK_ACT_9001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1",code:"9.1",title:"Monitoring & Evaluation",description:"Determining what needs to be monitored."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Scheduled review of QMS performance."},{id:"9.3",code:"9.3",title:"Management review",description:"Top management review of system suitability."},{id:"10.1",code:"10.1",title:"Improvement",description:"Determining opportunities for improvement."},{id:"10.2",code:"10.2",title:"NC & Corrective action",description:"Managing nonconformities and root causes."},{id:"10.3",code:"10.3",title:"Continual improvement",description:"Continually improving QMS effectiveness."}]}]},Ze={name:"ISO/IEC 27001:2022 (ISMS)",description:"Information Security Management System",groups:[{id:"PLAN_27001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context of organization",description:"Internal/external issues and scope.",subClauses:[{id:"4.1",code:"4.1",title:"Context",description:"Identifying security issues."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Needs and expectations."},{id:"4.3",code:"4.3",title:"Scope",description:"Determining ISMS boundaries."},{id:"4.4",code:"4.4",title:"ISMS System",description:"Establishing processes."}]},{id:"5",code:"5",title:"Leadership",description:"Commitment and Policy.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership & Commitment",description:"Accountability."},{id:"5.2",code:"5.2",title:"Policy",description:"InfoSec policy."},{id:"5.3",code:"5.3",title:"Roles & Authorities",description:"Assigning responsibilities."}]},{id:"6",code:"6",title:"Planning",description:"Risk treatment.",subClauses:[{id:"6.1.1",code:"6.1.1",title:"General",description:"Risk actions."},{id:"6.1.2",code:"6.1.2",title:"Risk assessment",description:"Information security risk process."},{id:"6.1.3",code:"6.1.3",title:"Risk treatment",description:"SoA and planning."},{id:"6.2",code:"6.2",title:"Security objectives",description:"Achievement planning."}]}]},{id:"SUPPORT_27001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Availability."},{id:"7.2",code:"7.2",title:"Competence",description:"Training requirements."},{id:"7.3",code:"7.3",title:"Awareness",description:"Understanding policy."},{id:"7.4",code:"7.4",title:"Communication",description:"Info flow rules."},{id:"7.5",code:"7.5",title:"Documented info",description:"Control of records."}]},{id:"DO_27001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational planning",description:"Securing processes."},{id:"8.2",code:"8.2",title:"Risk assessment",description:"Execution at intervals."},{id:"8.3",code:"8.3",title:"Risk treatment",description:"Implementing treatments."}]},{id:"CHECK_ACT_27001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1",code:"9.1",title:"Monitoring",description:"Measuring effectiveness."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Periodic checks."},{id:"9.3",code:"9.3",title:"Management review",description:"Strategic eval."},{id:"10.1",code:"10.1",title:"Continual improvement",description:"Growth."},{id:"10.2",code:"10.2",title:"Nonconformity",description:"Corrective actions."}]},{id:"ANNEX_A_5",title:"Annex A.5 Organizational (37 Controls)",icon:"Lock",clauses:[{id:"A.5.1",code:"A.5.1",title:"Policies for information security",description:"Reviewed for suitability."},{id:"A.5.2",code:"A.5.2",title:"InfoSec roles",description:"Defined responsibilities."},{id:"A.5.3",code:"A.5.3",title:"Segregation of duties",description:"Conflict reduction."},{id:"A.5.4",code:"A.5.4",title:"Management responsibilities",description:"Committing to security."},{id:"A.5.5",code:"A.5.5",title:"Contact with authorities",description:"Regulation flow."},{id:"A.5.6",code:"A.5.6",title:"Special interest groups",description:"Trend tracking."},{id:"A.5.7",code:"A.5.7",title:"Threat intelligence",description:"Info collection."},{id:"A.5.8",code:"A.5.8",title:"IS in project mgmt",description:"Lifecycle inclusion."},{id:"A.5.9",code:"A.5.9",title:"Inventory of assets",description:"Critical asset list."},{id:"A.5.10",code:"A.5.10",title:"Acceptable use of assets",description:"Usage rules."},{id:"A.5.11",code:"A.5.11",title:"Return of assets",description:"Termination retrieval."},{id:"A.5.12",code:"A.5.12",title:"Classification of info",description:"Labeling based on value."},{id:"A.5.13",code:"A.5.13",title:"Labeling of info",description:"Visual markers."},{id:"A.5.14",code:"A.5.14",title:"Information transfer",description:"Securing transit."},{id:"A.5.15",code:"A.5.15",title:"Access control",description:"Authorization rules."},{id:"A.5.16",code:"A.5.16",title:"Identity management",description:"User ID lifecycle."},{id:"A.5.17",code:"A.5.17",title:"Authentication info",description:"Secrets management."},{id:"A.5.18",code:"A.5.18",title:"Access rights",description:"Provisioning/revoking."},{id:"A.5.19",code:"A.5.19",title:"IS in supplier relationships",description:"Agreements."},{id:"A.5.20",code:"A.5.20",title:"Supplier agreements",description:"Addressing security."},{id:"A.5.21",code:"A.5.21",title:"ICT supply chain",description:"Sourcing risks."},{id:"A.5.22",code:"A.5.22",title:"Monitoring suppliers",description:"Auditing delivery."},{id:"A.5.23",code:"A.5.23",title:"Cloud services",description:"SaaS security."},{id:"A.5.24",code:"A.5.24",title:"Incident management",description:"Planning response."},{id:"A.5.25",code:"A.5.25",title:"Incident assessment",description:"Severity eval."},{id:"A.5.26",code:"A.5.26",title:"Incident response",description:"Action taken."},{id:"A.5.27",code:"A.5.27",title:"Incident learning",description:"Root cause."},{id:"A.5.28",code:"A.5.28",title:"Evidence collection",description:"Forensics."},{id:"A.5.29",code:"A.5.29",title:"IS during disruption",description:"BCP security."},{id:"A.5.30",code:"A.5.30",title:"ICT readiness",description:"DR planning."},{id:"A.5.31",code:"A.5.31",title:"Legal compliance",description:"Regulatory requirements."},{id:"A.5.32",code:"A.5.32",title:"IP Rights",description:"Copyright protection."},{id:"A.5.33",code:"A.5.33",title:"Protection of records",description:"Integrity."},{id:"A.5.34",code:"A.5.34",title:"Privacy of PII",description:"GDPR/Data protection."},{id:"A.5.35",code:"A.5.35",title:"Independent review",description:"External auditing."},{id:"A.5.36",code:"A.5.36",title:"Policy compliance",description:"Adherence."},{id:"A.5.37",code:"A.5.37",title:"Operating procedures",description:"Standard documentation."}]},{id:"ANNEX_A_6",title:"Annex A.6 People (8 Controls)",icon:"Users",clauses:[{id:"A.6.1",code:"A.6.1",title:"Screening",description:"Background checks."},{id:"A.6.2",code:"A.6.2",title:"Terms of employment",description:"HR contracts."},{id:"A.6.3",code:"A.6.3",title:"Awareness",description:"InfoSec education."},{id:"A.6.4",code:"A.6.4",title:"Disciplinary process",description:"Breach handling."},{id:"A.6.5",code:"A.6.5",title:"Termination responsibilities",description:"Post-exit."},{id:"A.6.6",code:"A.6.6",title:"Confidentiality",description:"NDAs."},{id:"A.6.7",code:"A.6.7",title:"Remote working",description:"Teleworking rules."},{id:"A.6.8",code:"A.6.8",title:"Event reporting",description:"Anomaly reporting."}]},{id:"ANNEX_A_7",title:"Annex A.7 Physical (14 Controls)",icon:"Building",clauses:[{id:"A.7.1",code:"A.7.1",title:"Physical perimeters",description:"Barriers."},{id:"A.7.2",code:"A.7.2",title:"Physical entry",description:"Access systems."},{id:"A.7.3",code:"A.7.3",title:"Securing offices",description:"Locks."},{id:"A.7.4",code:"A.7.4",title:"Security monitoring",description:"CCTV."},{id:"A.7.5",code:"A.7.5",title:"Physical protection",description:"Disaster proofing."},{id:"A.7.6",code:"A.7.6",title:"Secure areas",description:"Restricted protocols."},{id:"A.7.7",code:"A.7.7",title:"Clear desk/screen",description:"Clean policy."},{id:"A.7.8",code:"A.7.8",title:"Equipment siting",description:"Safe placement."},{id:"A.7.9",code:"A.7.9",title:"Assets off-premises",description:"Mobile security."},{id:"A.7.10",code:"A.7.10",title:"Storage media",description:"Drive handling."},{id:"A.7.11",code:"A.7.11",title:"Utilities",description:"Power/Water safety."},{id:"A.7.12",code:"A.7.12",title:"Cabling security",description:"Line protection."},{id:"A.7.13",code:"A.7.13",title:"Equipment maintenance",description:"Care logs."},{id:"A.7.14",code:"A.7.14",title:"Secure disposal",description:"Data wiping."}]},{id:"ANNEX_A_8",title:"Annex A.8 Technological (34 Controls)",icon:"Cpu",clauses:[{id:"A.8.1",code:"A.8.1",title:"Endpoint devices",description:"Device agents."},{id:"A.8.2",code:"A.8.2",title:"Privileged access",description:"Admin rights."},{id:"A.8.3",code:"A.8.3",title:"Information access",description:"Need-to-know."},{id:"A.8.4",code:"A.8.4",title:"Source code access",description:"IP security."},{id:"A.8.5",code:"A.8.5",title:"Authentication",description:"MFA usage."},{id:"A.8.6",code:"A.8.6",title:"Capacity mgmt",description:"Resources."},{id:"A.8.7",code:"A.8.7",title:"Malware protection",description:"AV/EDR."},{id:"A.8.8",code:"A.8.8",title:"Vulnerabilities",description:"Patching."},{id:"A.8.9",code:"A.8.9",title:"Configuration",description:"Hardening."},{id:"A.8.10",code:"A.8.10",title:"Deletion",description:"Erasure."},{id:"A.8.11",code:"A.8.11",title:"Data masking",description:"Privacy."},{id:"A.8.12",code:"A.8.12",title:"DLP",description:"Leakage prevention."},{id:"A.8.13",code:"A.8.13",title:"Backup",description:"Redundancy."},{id:"A.8.14",code:"A.8.14",title:"Redundancy ICT",description:"HA systems."},{id:"A.8.15",code:"A.8.15",title:"Logging",description:"Audit trails."},{id:"A.8.16",code:"A.8.16",title:"Monitoring",description:"Health alerts."},{id:"A.8.17",code:"A.8.17",title:"Clock sync",description:"NTP."},{id:"A.8.18",code:"A.8.18",title:"Privileged utilities",description:"Restrict tools."},{id:"A.8.19",code:"A.8.19",title:"Software install",description:"Whitelisting."},{id:"A.8.20",code:"A.8.20",title:"Network security",description:"Firewalls."},{id:"A.8.21",code:"A.8.21",title:"Network services",description:"VPN/Gateways."},{id:"A.8.22",code:"A.8.22",title:"Segregation",description:"VLANs."},{id:"A.8.23",code:"A.8.23",title:"Web filtering",description:"Proxy."},{id:"A.8.24",code:"A.8.24",title:"Cryptography",description:"Encryption."},{id:"A.8.25",code:"A.8.25",title:"Secure SDLC",description:"Dev security."},{id:"A.8.26",code:"A.8.26",title:"Application security",description:"Design."},{id:"A.8.27",code:"A.8.27",title:"Architecture",description:"Engineering."},{id:"A.8.28",code:"A.8.28",title:"Secure coding",description:"OWASP."},{id:"A.8.29",code:"A.8.29",title:"Security testing",description:"VAPT."},{id:"A.8.30",code:"A.8.30",title:"Outsourced dev",description:"Contractor code."},{id:"A.8.31",code:"A.8.31",title:"Separation envs",description:"Dev/Prod."},{id:"A.8.32",code:"A.8.32",title:"Change mgmt",description:"RFCs."},{id:"A.8.33",code:"A.8.33",title:"Test info",description:"Protect data."},{id:"A.8.34",code:"A.8.34",title:"IS during audit",description:"Auditor access."}]}]},et={name:"ISO 14001:2015 (EMS)",description:"Environmental Management System",groups:[{id:"PLAN_14001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context",description:"Org Context.",subClauses:[{id:"4.1",code:"4.1",title:"Org Context",description:"Env issues."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Expectations."},{id:"4.3",code:"4.3",title:"Scope",description:"Boundaries."},{id:"4.4",code:"4.4",title:"EMS System",description:"Processes."}]},{id:"5",code:"5",title:"Leadership",description:"Commitment.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership & Commitment",description:"Duty."},{id:"5.2",code:"5.2",title:"Environmental Policy",description:"Goals."},{id:"5.3",code:"5.3",title:"Org Roles & Responsibilities",description:"Authorities."}]},{id:"6",code:"6",title:"Planning",description:"Aspects.",subClauses:[{id:"6.1.1",code:"6.1.1",title:"General",description:"Actions."},{id:"6.1.2",code:"6.1.2",title:"Environmental aspects",description:"Impacts."},{id:"6.1.3",code:"6.1.3",title:"Compliance obligations",description:"Legal."},{id:"6.1.4",code:"6.1.4",title:"Planning action",description:"Achievement."},{id:"6.2",code:"6.2",title:"Environmental objectives",description:"Plans."}]}]},{id:"SUPPORT_14001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Supply."},{id:"7.2",code:"7.2",title:"Competence",description:"Training."},{id:"7.3",code:"7.3",title:"Awareness",description:"EMS awareness."},{id:"7.4",code:"7.4",title:"Communication",description:"Internal/External.",subClauses:[{id:"7.4.1",code:"7.4.1",title:"General",description:"Criteria."},{id:"7.4.2",code:"7.4.2",title:"Internal",description:"Staff."},{id:"7.4.3",code:"7.4.3",title:"External",description:"Parties."}]},{id:"7.5",code:"7.5",title:"Documented info",description:"Control."}]},{id:"DO_14001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational control",description:"Lifecycle."},{id:"8.2",code:"8.2",title:"Emergency preparedness",description:"Response."}]},{id:"CHECK_ACT_14001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1.1",code:"9.1.1",title:"General",description:"Measurement."},{id:"9.1.2",code:"9.1.2",title:"Compliance evaluation",description:"Audit."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Scheduled review."},{id:"9.3",code:"9.3",title:"Management review",description:"Review outputs."},{id:"10.1",code:"10.1",title:"General",description:"Performance."},{id:"10.2",code:"10.2",title:"Nonconformity",description:"Corrective action."},{id:"10.3",code:"10.3",title:"Continual improvement",description:"Suitability."}]}]},tt={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var st={};const rt="5.0.0-QUANTUM",it="2026-03-01 09:00:00 (GMT+7)",_e="gemini-3-pro-preview",at="gemini-3-flash-preview",je={company:"",smo:"",auditor:"",type:""},nt=()=>{try{if(typeof import.meta<"u"&&tt)return}catch{}try{if(typeof process<"u"&&st)return""}catch{}return""},ot=nt(),Ne=[ot].filter(s=>s&&s.trim()!==""),lt=["gemini-3-pro-preview","gemini-3-flash-preview","gemini-2.0-flash-exp","gemini-1.5-pro","gemini-1.5-flash"],Ae={"gemini-3-pro-preview":{label:"PRO 3.0",color:"bg-purple-600 text-white shadow-purple-500/30",tier:3,desc:"Max Reasoning"},"gemini-3-flash-preview":{label:"FLASH 3.0",color:"bg-cyan-600 text-white shadow-cyan-500/30",tier:2,desc:"High Speed"},"gemini-2.0-flash-exp":{label:"FLASH 2.0",color:"bg-amber-600 text-white shadow-amber-500/30",tier:2,desc:"Experimental"},"gemini-1.5-pro":{label:"PRO 1.5",color:"bg-indigo-600 text-white shadow-indigo-500/30",tier:2,desc:"Stable Pro"},"gemini-1.5-flash":{label:"FLASH 1.5",color:"bg-emerald-600 text-white shadow-emerald-500/30",tier:1,desc:"Legacy Fast"}},de=[{id:"planning",label:"1. Planning",icon:"LayoutList",colorClass:"bg-orange-500",textClass:"text-orange-600",borderClass:"border-orange-500",bgSoft:"bg-orange-50 dark:bg-orange-950/30"},{id:"evidence",label:"2. Audit",icon:"ScanText",colorClass:"bg-blue-500",textClass:"text-blue-600",borderClass:"border-blue-500",bgSoft:"bg-blue-50 dark:bg-blue-950/30"},{id:"findings",label:"3. Findings",icon:"Wand2",colorClass:"bg-purple-500",textClass:"text-purple-600",borderClass:"border-purple-500",bgSoft:"bg-purple-50 dark:bg-purple-950/30"},{id:"report",label:"4. Report",icon:"FileText",colorClass:"bg-emerald-500",textClass:"text-emerald-600",borderClass:"border-emerald-500",bgSoft:"bg-emerald-50 dark:bg-emerald-950/30"}],dt={"Stage 1":"Initial review of documentation and readiness.","Stage 2":"Evaluation of implementation and effectiveness.",Internal:"First-party audit to check own system.","PRE ASSESSMENT":"Gap analysis assessment.","PRE TRANSFER REVIEW":"Check valid certification for transfer.","TRANSITION AUDIT":"Ensure transition to new standard version.",CAV:"Surveillance assessment.",RAV:"Re-assessment of existing certification."},Te={"ISO 9001:2015":Ye,"ISO 27001:2022":Ze,"ISO 14001:2015":et},ct=[{version:"5.0.0-QUANTUM",date:"2026-03-01",features:["ARCH: Massive Code Refactoring & Component Decoupling for superior stability.","CORE: Implemented 'ModalManager' centralized architecture.","UI: New 'Planning Toolbar' and optimized Planning View for large datasets.","PERF: Enhanced React Memoization on Matrix and Planning tables.","VISUAL: Brand new Holographic/Futuristic Identity.","FIX: Solved default clause text loading issues in Context."]},{version:"4.5.0-INSIGHT",date:"2026-02-15",features:["CORE: Enhanced Reference Lookup with Local Intelligence preference.","UI: Renamed 'Evidence' tab to 'Audit' for clarity and standard alignment.","UX: Improved file drag-and-drop zones in Audit view.","PERF: Reduced bundle size with optimized imports."]},{version:"4.4.0-BASELINE",date:"2026-02-01",features:["CORE: System Baseline Established. Major refactoring of rendering engine.","PERF: Optimized Matrix and Planning views using React Memoization for high FPS.","UX: Smoother transitions and reduced layout thrashing.","CLEANUP: Removed legacy code paths and consolidated types.","STABILITY: Production-ready checkpoint."]}],xt=[{icon:"ScanText",title:"Smart OCR",desc:"Extracts text from Images, PDFs & TXT."},{icon:"Wand2",title:"AI Analysis",desc:"Expert compliance evaluation."},{icon:"FileText",title:"Auto Report",desc:"Synthesizes final audit findings."},{icon:"LayoutList",title:"Matrix View",desc:"Structured Evidence Mapping."}],ut="",pt="ISO_AUDIT_DB",ae="knowledge_files",ht=1;class gt{constructor(){ke(this,"dbPromise",null)}openDB(){return this.dbPromise?this.dbPromise:(this.dbPromise=new Promise((t,r)=>{const a=indexedDB.open(pt,ht);a.onupgradeneeded=i=>{const o=i.target.result;o.objectStoreNames.contains(ae)||o.createObjectStore(ae,{keyPath:"standardKey"})},a.onsuccess=i=>{t(i.target.result)},a.onerror=i=>{console.error("KnowledgeStore: DB Open Error",i),r(i.target.error)}}),this.dbPromise)}async saveDocument(t,r,a){try{const i=await this.openDB();return new Promise((o,d)=>{const n=i.transaction([ae],"readwrite").objectStore(ae),l={standardKey:t,fileName:r,content:a,timestamp:Date.now()},x=n.put(l);x.onsuccess=()=>o(),x.onerror=()=>d(x.error)})}catch(i){throw console.error("KnowledgeStore: Save Error",i),i}}async getDocument(t){try{const r=await this.openDB();return new Promise((a,i)=>{const u=r.transaction([ae],"readonly").objectStore(ae).get(t);u.onsuccess=()=>{a(u.result?u.result:null)},u.onerror=()=>i(u.error)})}catch(r){return console.error("KnowledgeStore: Get Error",r),null}}async deleteDocument(t){try{const r=await this.openDB();return new Promise((a,i)=>{const u=r.transaction([ae],"readwrite").objectStore(ae).delete(t);u.onsuccess=()=>a(),u.onerror=()=>i(u.error)})}catch(r){throw console.error("KnowledgeStore: Delete Error",r),r}}async migrateFromLocalStorage(t){const r=`iso_kb_content_${t}`,a=`iso_kb_name_${t}`,i=localStorage.getItem(r),o=localStorage.getItem(a);return i&&o?(console.log(`KnowledgeStore: Migrating ${t} from LocalStorage to IndexedDB...`),await this.saveDocument(t,o,i),localStorage.removeItem(r),localStorage.removeItem(a),!0):!1}}const Ce=new gt,Re=c.createContext(void 0),Ee={maskCompany:!0,maskSmo:!0,maskPeople:!0,maskEmail:!0,maskPhone:!0,maskAddress:!0,maskIP:!0},mt=({children:s})=>{const[t,r]=c.useState({}),[a,i]=c.useState(""),[o,d]=c.useState(je),[u,n]=c.useState(Ee),[l,x]=c.useState([]),[g,k]=c.useState(null),[S,N]=c.useState(ut),[E,v]=c.useState({}),[b,p]=c.useState([]),[m,h]=c.useState([]),[j,I]=c.useState(null),[y,T]=c.useState(null),[A,B]=c.useState(null),[w,R]=c.useState({}),[_,D]=c.useState(null),O={...Te,...t},z=l.find(C=>C.id===g);c.useEffect(()=>{g&&x(C=>C.map(M=>M.id===g&&(M.evidence!==S||M.matrixData!==E||M.evidenceTags!==b)?{...M,evidence:S,matrixData:E,evidenceTags:b}:M))},[S,E,b,g]),c.useEffect(()=>{if(!g){N(""),v({}),p([]);return}const C=l.find(M=>M.id===g);C&&(N(C.evidence||""),v(C.matrixData||{}),p(C.evidenceTags||[]))},[g]);const K=(C,M)=>{r(L=>({...L,[C]:M}))},$=C=>{r(M=>({...M,[a]:C}))},V=C=>{r(M=>{const L={...M};return delete L[C],L}),a===C&&i("")},Y=C=>{const M=`proc_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,L={id:M,name:C,evidence:"",interviewees:[],matrixData:{},evidenceTags:[],uploadedFiles:[]};x(W=>[...W,L]),k(M)},te=(C,M)=>{x(L=>L.map(W=>W.id===C?{...W,name:M}:W))},ie=C=>{if(g===C){const M=l.filter(W=>W.id!==C),L=M.length>0?M[0].id:null;k(L)}x(M=>M.filter(L=>L.id!==C))},F=(C,M)=>{if(!M)return null;const L=M.groups.flatMap(X=>X.clauses),W=(X,q)=>{for(const Q of q){if(Q.id===X)return Q;if(Q.subClauses){const ee=W(X,Q.subClauses);if(ee)return ee}}return null};return W(C,L)},G=C=>{x(L=>L.map(W=>{const X=C.find(q=>q.processId===W.id);if(X){const q={...W.matrixData},Q=O[a];return X.clauses.forEach(ee=>{if(!q[ee]){const ve=F(ee,Q),qe=(ve==null?void 0:ve.description)||"Requirement";q[ee]=[{id:`${ee}_req_0`,requirement:qe,evidenceInput:"",status:"pending"}]}}),{...W,matrixData:q}}return W}));const M=C.find(L=>L.processId===g);M&&v(L=>{const W={...L},X=O[a];return M.clauses.forEach(q=>{if(!W[q]){const Q=F(q,X),ee=(Q==null?void 0:Q.description)||"Requirement";W[q]=[{id:`${q}_req_0`,requirement:ee,evidenceInput:"",status:"pending"}]}}),W})},U=(C,M)=>{x(L=>L.map(W=>{if(W.id!==C)return W;const X={...W.matrixData};if(X[M])delete X[M];else{const q=O[a],Q=F(M,q),ee=(Q==null?void 0:Q.description)||"Requirement";X[M]=[{id:`${M}_req_0`,requirement:ee,evidenceInput:"",status:"pending"}]}return{...W,matrixData:X}})),g===C&&v(L=>{const W={...L};if(W[M])delete W[M];else{const X=O[a],q=F(M,X),Q=(q==null?void 0:q.description)||"Requirement";W[M]=[{id:`${M}_req_0`,requirement:Q,evidenceInput:"",status:"pending"}]}return W})},H=C=>{x(M=>M.map(L=>L.id===g&&!L.interviewees.includes(C)?{...L,interviewees:[...L.interviewees,C]}:L))},J=C=>{x(M=>M.map(L=>L.id===g?{...L,interviewees:L.interviewees.filter(W=>W!==C)}:L))},Z=C=>{p(M=>[...M,C])},se=async C=>{try{const M=await Ce.getDocument(C);M?(I(M.content),T(M.fileName)):(I(null),T(null))}catch(M){console.error(M)}},le=async()=>{I(null),T(null),a&&await Ce.deleteDocument(a)},be=(C,M)=>{I(C),T(M)},xe=()=>{i(""),d(je),x([]),k(null),N(""),v({}),p([]),h([]),B(null),R({}),D(null),I(null),T(null),n(Ee)},P=C=>{if(C.standardKey&&i(C.standardKey),C.auditInfo&&d({...je,...C.auditInfo}),C.selectedClauses&&h(C.selectedClauses),C.privacySettings&&n(C.privacySettings),C.processes&&C.processes.length>0)x(C.processes),C.activeProcessId&&k(C.activeProcessId);else if(C.scopes&&C.scopes.length>0){const M=C.scopes.map(L=>({...L,interviewees:[]}));x(M),C.activeScopeId&&k(C.activeScopeId)}C.analysisResult&&B(C.analysisResult),C.selectedFindings&&R(C.selectedFindings),C.finalReportText&&D(C.finalReportText),C.standardKey&&se(C.standardKey)};return e.jsx(Re.Provider,{value:{standards:O,standardKey:a,setStandardKey:i,customStandards:t,addCustomStandard:K,updateStandard:$,resetStandard:V,auditInfo:o,setAuditInfo:d,privacySettings:u,setPrivacySettings:n,processes:l,activeProcessId:g,activeProcess:z,setActiveProcessId:k,addProcess:Y,renameProcess:te,deleteProcess:ie,batchUpdateProcessClauses:G,toggleProcessClause:U,addInterviewee:H,removeInterviewee:J,evidence:S,setEvidence:N,matrixData:E,setMatrixData:v,evidenceTags:b,addEvidenceTag:Z,selectedClauses:m,setSelectedClauses:h,knowledgeBase:j,knowledgeFileName:y,loadKnowledgeForStandard:se,clearKnowledge:le,setKnowledgeData:be,analysisResult:A,setAnalysisResult:B,selectedFindings:w,setSelectedFindings:R,finalReportText:_,setFinalReportText:D,resetSession:xe,restoreSession:P},children:s})},re=()=>{const s=c.useContext(Re);if(!s)throw new Error("useAudit must be used within AuditProvider");return s},De=c.createContext(void 0),ft=({children:s})=>{const[t,r]=c.useState(!0);c.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const[a,i]=c.useState(1);c.useEffect(()=>{document.documentElement.style.setProperty("--font-scale",a.toString())},[a]);const[o,d]=c.useState(!0),[u,n]=c.useState(420),[l,x]=c.useState({settings:!1,about:!1,integrity:!1,recall:!1,addStandard:!1,privacy:!1}),g=(E,v)=>{x(b=>({...b,[E]:v??!b[E]}))},[k,S]=c.useState(null),N=E=>S(E);return e.jsx(De.Provider,{value:{isDarkMode:t,toggleDarkMode:()=>r(E=>!E),fontSizeScale:a,setFontSizeScale:i,isSidebarOpen:o,setSidebarOpen:d,sidebarWidth:u,setSidebarWidth:n,modals:l,toggleModal:g,toastMsg:k,showToast:N},children:s})},ne=()=>{const s=c.useContext(De);if(!s)throw new Error("useUI must be used within UIProvider");return s},Se=s=>{s&&(navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(s).catch(()=>Ie(s)):Ie(s))},Ie=s=>{const t=document.createElement("textarea");t.value=s,t.style.position="fixed",t.style.left="-9999px",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(r){console.error(r)}document.body.removeChild(t)},bt=s=>new Promise((t,r)=>{const a=new FileReader;a.readAsDataURL(s),a.onload=()=>t(a.result.split(",")[1]),a.onerror=i=>r(i)}),vt=async s=>{if(!window.pdfjsLib)throw new Error("PDF.js library not loaded");const t=await s.arrayBuffer(),r=await window.pdfjsLib.getDocument({data:t}).promise;let a="";for(let i=1;i<=r.numPages;i++){const u=(await(await r.getPage(i)).getTextContent()).items.map(n=>n.str).join(" ");a+=u+`

`}return a},Oe=async s=>{let t="";try{if(s.name.toLowerCase().endsWith(".pdf"))t=await vt(s);else if(s.name.toLowerCase().endsWith(".docx")){if(typeof mammoth>"u")throw new Error("Mammoth library missing");const r=await s.arrayBuffer();t=(await mammoth.extractRawText({arrayBuffer:r})).value}else{if(s.name.toLowerCase().endsWith(".doc"))throw new Error("Legacy Word (.doc) files are not supported due to browser limitations. Please save your file as .docx and try again.");t=await s.text()}if(!t||t.length<50)throw new Error("File content is too short or empty.");return t}catch(r){throw console.error("File processing error:",r),new Error(`Failed to parse ${s.name}: ${r.message}`)}},he=s=>{if(!s)return null;let t=s.trim();t.startsWith("```")&&(t=t.replace(/^```(json)?/,"").replace(/```$/,""));const r=t.indexOf("["),a=t.indexOf("{"),i=t.lastIndexOf("]"),o=t.lastIndexOf("}");r!==-1&&i!==-1&&(a===-1||r<a)?t=t.substring(r,i+1):a!==-1&&o!==-1&&(t=t.substring(a,o+1));try{return JSON.parse(t)}catch{return console.error("JSON Parse Error on text:",t),null}},ge=s=>s?s.replace(/[^a-zA-Z0-9\s]/g,"").trim().replace(/\s+/g,"_").substring(0,30):"N_A",kt=(s,t)=>{let r="",a=!1;return t.forEach(i=>{const o=s[i];o&&o.some(d=>d.status==="supplied")&&(a=!0,r+=`
### EVIDENCE MATRIX FOR CLAUSE ${i}
`,r+=`| Requirement | Verified Evidence |
`,r+=`| :--- | :--- |
`,o.forEach(d=>{d.evidenceInput.trim()&&(r+=`| ${d.requirement.replace(/\|/g,"-")} | ${d.evidenceInput.replace(/\|/g,"-").replace(/\n/g," ")} |
`)}),r+=`
`)}),a?r:""},ye={ANALYSIS:{id:"default_analysis",label:"Standard Analysis",description:"Strict ISO compliance check based on evidence.",isSystemDefault:!0,template:`
        Analyze the provided EVIDENCE against ISO Standard "{{STANDARD_NAME}}", Clause "{{CLAUSE_CODE}}: {{CLAUSE_TITLE}}".
        Clause Requirement: {{CLAUSE_DESC}}
        
        CONTEXT (Retrieved from Knowledge Base):
        """
        {{RAG_CONTEXT}}
        """

        EVIDENCE (User Input & Tags):
        """
        {{EVIDENCE}}
        """
        
        CROSS-REFERENCE CHECK:
        Check if this evidence also relates to other common ISO standards (like ISO 9001 if auditing 27001, or vice versa).

        DETERMINE:
        1. Status (COMPLIANT, NC_MINOR, NC_MAJOR, OFI, or N_A).
        2. Reason (Why? Be specific based on evidence).
        3. Evidence Quote (Verbatim support).
        4. Suggestion (If NC or OFI).
        5. CrossRefs (Array of strings, e.g. ["ISO 9001: 7.5.3"]).
        
        Output a SINGLE JSON Object.
        `},REPORT:{id:"system_integration_report_v2",label:"Process-Based Integration Format",description:"Plain Text format aggregated by Process.",isSystemDefault:!0,template:`
        ROLE: ISO Audit Data Processor.
        TASK: Convert audit findings into a STRICT PLAIN TEXT format for legacy system integration, GROUPED BY PROCESS.

        CRITICAL FORMATTING RULES:
        1. OUTPUT MUST BE PLAIN TEXT ONLY.
        2. NO Markdown characters allowed (Do NOT use **, ##, __, or tables with |).
        3. Group findings by PROCESS Name.
        4. List Interviewees for each process.
        5. Use exactly "====================" (20 dashes) as a separator between clauses.

        REQUIRED STRUCTURE:

        PROCESS: [Process Name]
        INTERVIEWEES: [List of names]

        [Repeat for each finding in this process]
        CLAUSE_ID: [Code]
        CLAUSE_TITLE: [Title]
        STATUS: [Status]
        FINDING_DETAIL: [Reasoning]
        VERIFIED_EVIDENCE: [Specific evidence]
        ====================

        INPUT CONTEXT:
        Entity: {{COMPANY}}
        Standard: {{STANDARD_NAME}}
        Auditor: {{AUDITOR}}
        Target Language: {{LANGUAGE}}

        FINDINGS DATA (Aggregated by Process):
        {{FINDINGS_JSON}}

        FULL EVIDENCE CONTEXT:
        """
        {{FULL_EVIDENCE_CONTEXT}}
        """
        `}};class jt{constructor(){ke(this,"prompts");this.prompts={...ye},this.loadUserOverrides()}loadUserOverrides(){try{const t=localStorage.getItem("iso_prompt_overrides");if(t){const r=JSON.parse(t);this.prompts={...this.prompts,...r}}}catch(t){console.error("Failed to load prompt overrides",t)}}getPrompt(t){return this.prompts[t]||ye[t]}updatePrompt(t,r){this.prompts[t]={...this.prompts[t],template:r,isSystemDefault:!1},localStorage.setItem("iso_prompt_overrides",JSON.stringify(this.prompts))}resetToDefault(t){this.prompts[t]={...ye[t]},localStorage.setItem("iso_prompt_overrides",JSON.stringify(this.prompts))}hydrate(t,r){let a=t;for(const[i,o]of Object.entries(r)){const d=new RegExp(`{{${i}}}`,"g");a=a.replace(d,o||"")}return a}}const ue=new jt,pe={NC_MAJOR:["systemic failure","total breakdown","missing process","không có quy trình","chưa thiết lập","critical","nghiêm trọng"],NC_MINOR:["isolated","single instance","partial","not fully","chưa đầy đủ","một số","incomplete","lỗi nhỏ"],OFI:["improve","better","consider","cân nhắc","cải tiến","optimize","efficiency"],COMPLIANT:["conforms","available","maintained","phù hợp","đầy đủ","tuân thủ","verified","đạt"]},yt={analyze(s,t,r){const a=r.toLowerCase();let i="N_A",o="Offline Analysis: Insufficient data to determine compliance.",d="",u={MAJOR:0,MINOR:0,OFI:0,COMPLIANT:0};pe.NC_MAJOR.forEach(l=>{a.includes(l)&&(u.MAJOR+=2)}),pe.NC_MINOR.forEach(l=>{a.includes(l)&&(u.MINOR+=1)}),pe.OFI.forEach(l=>{a.includes(l)&&(u.OFI+=1)}),pe.COMPLIANT.forEach(l=>{a.includes(l)&&(u.COMPLIANT+=1)}),u.MAJOR>0?(i="NC_MAJOR",o="Offline Analysis detected critical keywords indicating a systemic issue.",d="Review the entire process and establish missing controls immediately."):u.MINOR>u.COMPLIANT?(i="NC_MINOR",o="Offline Analysis detected potential gaps in implementation.",d="Investigate specific instances and correct them."):u.OFI>0?(i="OFI",o="Opportunities for improvement found in text.",d="Consider optimizing based on best practices."):u.COMPLIANT>0?(i="COMPLIANT",o="Evidence suggests requirements are met."):r.length>50&&(i="COMPLIANT",o="Offline Analysis: No obvious non-conformity keywords detected.");const n={clauseId:s,status:i,reason:o,evidence:r.substring(0,100)+"...",suggestion:d,conclusion_report:`[OFFLINE] ${o}`,crossRefs:[]};return JSON.stringify(n)},extractClauseContent(s,t,r){if(!s)return null;const a=s.replace(/\r\n/g,`
`).replace(/[ \t]+/g," "),i=t.replace(/\./g,"\\."),o=r.split(" ")[0].replace(/[^a-zA-Z0-9]/g,""),d=new RegExp(`(?:^|\\n)\\s*${i}\\.?\\s+.*${o}`,"i"),u=new RegExp(`(?:^|\\n)\\s*${i}\\.?\\s+`,"i");let n=a.match(d);if(n||(n=a.match(u)),n&&n.index!==void 0){const l=n.index,x=t.split(".").map(Number),g=x[x.length-1],k=[...x];k[k.length-1]=g+1;const S=k.join("\\."),N=(x[0]+1).toString(),E=a.substring(l+n[0].length),v=new RegExp(`(?:^|\\n)\\s*(${S}|${N}\\.|${N}\\s|Annex|Bibliography)`,"i"),b=E.match(v);let p="";if(b&&b.index!==void 0)p=n[0]+E.substring(0,b.index);else{const m=/(?:^|\n)\s*\d{1,2}\.\d{1,2}(\.\d{1,2})?\s+[A-Z]/,h=E.match(m);h&&h.index!==void 0&&h.index>50?p=n[0]+E.substring(0,h.index):p=n[0]+E.substring(0,3e3)}return p.trim()}return null}},wt={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Nt={};const me=s=>{let t=s;if(!t&&Ne.length>0&&(t=Ne[0]),!t)try{typeof import.meta<"u"}catch{}if(!t&&typeof process<"u"&&Nt&&(t=""),t||(t=localStorage.getItem("iso_api_key")||""),!t)try{const a=localStorage.getItem("iso_api_keys"),i=localStorage.getItem("iso_active_key_id");if(a){const o=JSON.parse(a);if(Array.isArray(o)&&o.length>0){const d=o.find(u=>u.id===i);t=d?d.key:o[0].key}}}catch(a){console.warn("Failed to retrieve key from pool storage",a)}const r=(t||"").trim();return r?new Pe({apiKey:r}):null},Ct=async s=>{const t=s?s.trim().replace(/^["']|["']$/g,""):"";if(!t)return{isValid:!1,latency:0,errorType:"invalid",errorMessage:"Key is empty"};const r=new Pe({apiKey:t}),a=[...lt];let i=null,o=!1;for(const d of a){const u=performance.now();try{console.log(`Probing model: ${d}...`),await r.models.generateContent({model:d,contents:{parts:[{text:"Hi"}]}});const n=performance.now();return{isValid:!0,latency:Math.round(n-u),activeModel:d}}catch(n){i=n;const l=(n.message||"").toLowerCase(),x=n.status||0;if(l.includes("key not valid")||l.includes("api_key_invalid")||l.includes("unauthenticated")||x===403||l.includes("permission denied"))return{isValid:!1,latency:0,errorType:"invalid",errorMessage:"Invalid API Key or Permissions."};if(x===429||l.includes("quota")||l.includes("exhausted")){console.warn(`Model ${d} quota exhausted. Falling back...`),o=!0;continue}if(l.includes("fetch")||l.includes("network")||l.includes("failed to fetch"))return{isValid:!1,latency:0,errorType:"network_error",errorMessage:"Network Connection Failed."};console.warn(`Model ${d} check failed:`,l)}}return o?{isValid:!1,latency:0,errorType:"quota_exceeded",errorMessage:"All models exhausted quota."}:{isValid:!1,latency:0,errorType:"unknown",errorMessage:(i==null?void 0:i.message)||"Validation failed."}},St=async(s,t,r,a,i)=>{const o=me(a);if(!o)throw new Error("API Key missing");const d=_e;let u="";r?u=`You are a precision extraction engine. Extract VERBATIM text for [${s.code}] ${s.title} from SOURCE.
SOURCE:
"""${r.substring(0,5e5)}"""
Output JSON: {"en": "...", "vi": "..."}`:u=`Provide verbatim text for ${t} Clause [${s.code}] ${s.title}. Output JSON: {"en": "...", "vi": "..."}`;try{const n=await o.models.generateContent({model:d,contents:u,config:{responseMimeType:"application/json"}}),l=he(n.text||"{}");return{en:(l==null?void 0:l.en)||"N/A",vi:(l==null?void 0:l.vi)||"N/A"}}catch(n){console.warn("Primary fetch failed, trying fallback model...");try{const l=await o.models.generateContent({model:"gemini-3-flash-preview",contents:u,config:{responseMimeType:"application/json"}}),x=he(l.text||"{}");return{en:(x==null?void 0:x.en)||"N/A",vi:(x==null?void 0:x.vi)||"N/A"}}catch{throw n}}},At=async(s,t,r,a,i)=>{const o=me(a);if(!o)throw new Error("API Key missing");const d=["gemini-3-pro-preview","gemini-3-flash-preview","gemini-2.0-flash-exp"],u=`
    Role: ISO Standard Analyst.
    Task: Extract the EXACT, VERBATIM content for the requested clauses from the provided Standard Document Source.
    
    Instructions:
    1. Look for the specific clause numbers provided in the list.
    2. Extract the full text (requirements) associated with that clause.
    3. PRESERVE formatting, newlines, and bullet points.
    4. If a clause code is not found in the text, return "Content not found in source document."
    
    Clauses to Extract: ${JSON.stringify(t)}
    
    Source Text:
    """
    ${r.substring(0,8e5)} 
    """
    
    Output Format: JSON Object where Key = Clause Code (e.g. "4.1"), Value = Verbatim Text.
    {
      "4.1": "The organization shall determine external and internal issues...",
      "4.2": "..."
    }
    `;for(const n of d)try{console.log(`Mapping Standard with model: ${n}`);const l=await o.models.generateContent({model:n,contents:u,config:{responseMimeType:"application/json"}}),x=he(l.text||"{}");if(x&&Object.keys(x).length>0)return x}catch(l){console.warn(`Mapping failed on ${n}:`,l.message)}return console.error("All models failed to map standard requirements."),{}},Et=async(s,t,r,a,i)=>{const o=me(a);if(!o)throw new Error("API Key missing");const d=at;return(await o.models.generateContent({model:d,contents:{parts:[{text:s},{inlineData:{mimeType:r,data:t}}]}})).text||""},It=async(s,t,r)=>{const a=me(t);if(!a)return"[]";const i=_e,o=`Provide concise descriptions (15-20 words) for these ISO clauses. JSON Array: [{"code": "...", "description": "..."}]. Clauses: ${JSON.stringify(s)}`;try{return(await a.models.generateContent({model:i,contents:o,config:{responseMimeType:"application/json"}})).text||"[]"}catch{try{return(await a.models.generateContent({model:"gemini-3-flash-preview",contents:o,config:{responseMimeType:"application/json"}})).text||"[]"}catch{return"[]"}}},ze=c.createContext(void 0),Mt=({children:s})=>{const[t,r]=c.useState([]),[a,i]=c.useState(""),[o,d]=c.useState(!1),[u,n]=c.useState(!0),l=c.useRef([]),x=c.useRef(""),g=c.useRef(!1);c.useEffect(()=>{l.current=t},[t]),c.useEffect(()=>{x.current=a},[a]),c.useEffect(()=>{try{const h=localStorage.getItem("iso_api_keys");let j=h?JSON.parse(h):[];const I=new Set(j.map(A=>A.key));let y=!1;if(Ne.forEach((A,B)=>{A&&!I.has(A)&&(j.push({id:`env_key_${B}_${Math.random().toString(36).substr(2,5)}`,label:`Env Key ${B+1}`,key:A,status:"checking",latency:0,lastChecked:new Date().toISOString()}),y=!0)}),j=j.map(A=>({...A,status:A.status==="checking"?"unknown":A.status})),j.length>0&&!j.some(A=>A.id===a)){const A=localStorage.getItem("iso_active_key_id"),B=A&&j.some(w=>w.id===A)?A:j[0].id;i(B),j=j.map(w=>w.id===B?{...w,status:"checking"}:w)}r(j),y&&localStorage.setItem("iso_api_keys",JSON.stringify(j));const T=localStorage.getItem("iso_auto_check");T!==null&&n(T==="true"),g.current=!0}catch(h){console.error("Key Load Error",h)}},[]),c.useEffect(()=>{if(!g.current||!a)return;const h=setTimeout(()=>{v(a)},100);return()=>clearTimeout(h)},[a,g.current]),c.useEffect(()=>{if(!u)return;const h=setInterval(()=>{!o&&l.current.length>0&&k()},45e3);return()=>clearInterval(h)},[u]);const k=async()=>{const h=l.current;if(h.length===0)return;const j=h.find(B=>B.id===x.current);if(j&&j.status!=="valid"&&j.status!=="checking"){console.log(`[KeyPool] Auto-repairing active key: ${j.label}`),await v(j.id);return}const y=[...h].sort((B,w)=>{const R=B.lastChecked?new Date(B.lastChecked).getTime():0,_=w.lastChecked?new Date(w.lastChecked).getTime():0;return R-_})[0],T=Date.now()-5*60*1e3;(y.lastChecked?new Date(y.lastChecked).getTime():0)<T&&(console.log(`[KeyPool] Background refreshing stale key: ${y.label}`),await v(y.id))},S=async h=>{const j=await Ct(h);return{status:j.isValid?"valid":j.errorType||"unknown",activeModel:j.activeModel,latency:j.latency,errorMessage:j.errorMessage}},N=async(h,j)=>{if(!h.trim())return"empty";if(t.some(T=>T.key===h.trim()))return"duplicate";d(!0);const I=await S(h),y={id:Date.now().toString(),label:j||`Key ${t.length+1}`,key:h.trim(),status:I.status,activeModel:I.activeModel,latency:I.latency,lastChecked:new Date().toISOString()};if(I.status==="valid"||I.status==="quota_exceeded"){const T=[...t,y];r(T),localStorage.setItem("iso_api_keys",JSON.stringify(T)),(t.length===0||I.status==="valid")&&(i(y.id),localStorage.setItem("iso_active_key_id",y.id))}return d(!1),I.status},E=h=>{const j=t.filter(I=>I.id!==h);if(r(j),localStorage.setItem("iso_api_keys",JSON.stringify(j)),a===h){const I=j.find(T=>T.status==="valid")||j[0],y=I?I.id:"";i(y),y?localStorage.setItem("iso_active_key_id",y):localStorage.removeItem("iso_active_key_id")}},v=c.useCallback(async h=>{const I=l.current.find(y=>y.id===h);if(I){r(y=>y.map(T=>T.id===h?{...T,status:"checking"}:T));try{const y=await S(I.key);r(T=>{const A=T.map(B=>B.id===h?{...B,status:y.status,activeModel:y.activeModel||B.activeModel,latency:y.latency,lastChecked:new Date().toISOString()}:B);return localStorage.setItem("iso_api_keys",JSON.stringify(A)),A})}catch(y){console.error("Critical error during key refresh",y),r(T=>T.map(A=>A.id===h?{...A,status:"unknown"}:A))}}},[]),b=async()=>{d(!0),a&&await v(a);for(const h of t)h.id!==a&&(await v(h.id),await new Promise(j=>setTimeout(j,200)));d(!1)},p=h=>{n(h),localStorage.setItem("iso_auto_check",String(h))},m=c.useCallback(()=>t.find(h=>h.id===a),[t,a]);return e.jsx(ze.Provider,{value:{apiKeys:t,activeKeyId:a,isCheckingKey:o,addKey:N,deleteKey:E,refreshKeyStatus:v,checkAllKeys:b,getActiveKey:m,isAutoCheckEnabled:u,toggleAutoCheck:p,setActiveKeyId:i},children:s})},fe=()=>{const s=c.useContext(ze);if(!s)throw new Error("useKeyPool must be used within KeyPoolProvider");return s},Me={BookOpen:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),e.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Quote:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2H4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8Z"}),e.jsx("path",{d:"M14 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2h-4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8Z"})]}),TDLogo:e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"quantumGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#22d3ee"})," ",e.jsx("stop",{offset:"50%",stopColor:"#a855f7"})," ",e.jsx("stop",{offset:"100%",stopColor:"#f472b6"})," "]}),e.jsxs("radialGradient",{id:"coreGlow",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffffff",stopOpacity:"0.9"}),e.jsx("stop",{offset:"40%",stopColor:"#6366f1",stopOpacity:"0.6"}),e.jsx("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:"0"})]}),e.jsxs("filter",{id:"neonBlur",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("circle",{cx:"50",cy:"50",r:"35",stroke:"url(#quantumGrad)",strokeWidth:"2",strokeOpacity:"0.3",transform:"rotate(45 50 50)"}),e.jsx("ellipse",{cx:"50",cy:"50",rx:"40",ry:"15",stroke:"#22d3ee",strokeWidth:"1",strokeOpacity:"0.5",transform:"rotate(-30 50 50)"}),e.jsx("ellipse",{cx:"50",cy:"50",rx:"40",ry:"15",stroke:"#a855f7",strokeWidth:"1",strokeOpacity:"0.5",transform:"rotate(30 50 50)"}),e.jsx("path",{d:"M50 25 L71.65 37.5 V62.5 L50 75 L28.35 62.5 V37.5 Z",fill:"none",stroke:"url(#quantumGrad)",strokeWidth:"3",filter:"url(#neonBlur)"}),e.jsx("circle",{cx:"50",cy:"50",r:"10",fill:"url(#coreGlow)"}),e.jsx("circle",{cx:"50",cy:"50",r:"4",fill:"#ffffff"}),e.jsx("circle",{cx:"50",cy:"25",r:"2",fill:"#22d3ee"}),e.jsx("circle",{cx:"71.65",cy:"62.5",r:"2",fill:"#a855f7"}),e.jsx("circle",{cx:"28.35",cy:"62.5",r:"2",fill:"#f472b6"})]}),TDSolidLink:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"future_td_grad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#06b6d4"})," ",e.jsx("stop",{offset:"50%",stopColor:"#6366f1"})," ",e.jsx("stop",{offset:"100%",stopColor:"#f59e0b"})," "]}),e.jsxs("filter",{id:"glow_td",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"0.6",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("path",{d:"M5 6H11V18H14C17.866 18 21 15.3137 21 12C21 8.68629 17.866 6 14 6H11",stroke:"url(#future_td_grad)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#glow_td)"})]}),Grid:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]}),Session1_SparklePlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 3v18"}),e.jsx("path",{d:"M3 12h18"}),e.jsx("path",{d:"m15 9-6 6"}),e.jsx("path",{d:"m9 9 6 6"}),e.jsx("path",{d:"M12 2v4"}),e.jsx("path",{d:"m4.93 4.93 2.83 2.83"}),e.jsx("path",{d:"M2 12h4"}),e.jsx("path",{d:"m4.93 19.07 2.83-2.83"}),e.jsx("path",{d:"M12 22v-4"}),e.jsx("path",{d:"m19.07 19.07-2.83-2.83"}),e.jsx("path",{d:"M22 12h-4"}),e.jsx("path",{d:"m19.07 4.93-2.83 2.83"})]}),Session2_PlayCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polygon",{points:"10 8 16 12 10 16 10 8"})]}),Session3_Rocket:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"}),e.jsx("path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),e.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.1 4-1 4-1"}),e.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.1-1.62 1-4 1-4"})]}),Session4_FilePlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),e.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),Session5_RefreshCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e.jsx("path",{d:"M3 3v5h5"}),e.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),e.jsx("path",{d:"M16 21h5v-5"})]}),Session6_Zap:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Session7_Compass:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"})]}),Session8_Flag:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),e.jsx("line",{x1:"4",y1:"22",x2:"4",y2:"15"})]}),Session9_DoorOpen:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),e.jsx("path",{d:"M2 20h3"}),e.jsx("path",{d:"M13 20h9"}),e.jsx("path",{d:"M10 12v.01"}),e.jsx("path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z"})]}),Session10_Pulse:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),Session11_GridAdd:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),e.jsx("path",{d:"M3 17.5h7"}),e.jsx("path",{d:"M6.5 14v7"})]}),Session12_CleanSheet:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),e.jsx("path",{d:"M3 9h18"})]}),Session13_PowerBtn:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),e.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]}),Demo1_MultiFiles:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M3 15h6"}),e.jsx("path",{d:"M6 12v6"}),e.jsx("path",{d:"M16 18l2-2 2 2"}),e.jsx("path",{d:"M18 16v6"})]}),Demo2_CloudAdd:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 13v8"}),e.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),e.jsx("path",{d:"M16 17l-4-4-4 4"})]}),Demo3_FolderUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"}),e.jsx("path",{d:"M12 10v6"}),e.jsx("path",{d:"m9 13 3-3 3 3"})]}),Demo4_ImgStack:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"}),e.jsx("line",{x1:"16",y1:"5",x2:"22",y2:"5"}),e.jsx("line",{x1:"19",y1:"2",x2:"19",y2:"8"}),e.jsx("circle",{cx:"9",cy:"9",r:"2"}),e.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Demo5_Clip:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"}),e.jsx("path",{d:"M12 12h.01"})]}),Demo6_BoxUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),e.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),e.jsx("line",{x1:"12",y1:"12.01",x2:"12",y2:"22.08"}),e.jsx("polyline",{points:"16 12 12 8 8 12"})]}),Demo7_PlusCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M8 12h8"}),e.jsx("path",{d:"M12 8v8"})]}),Demo8_GridPlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}),e.jsx("path",{d:"M14 17h7"}),e.jsx("path",{d:"M17.5 13.5v7"})]}),Demo9_DocUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M12 18v-6"}),e.jsx("path",{d:"m9 15 3-3 3 3"})]}),Demo10_Layers:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}),e.jsx("path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}),e.jsx("path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"}),e.jsx("path",{d:"M12 8v4"})]}),Demo11_Scan:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),e.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),e.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),e.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),e.jsx("path",{d:"M7 12h10"}),e.jsx("path",{d:"M12 8v8"})]}),Demo12_Attach:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m4.5 16.5 7-7"}),e.jsx("path",{d:"m2 2 20 20"}),e.jsx("path",{d:"m12 12 7-7"}),e.jsx("path",{d:"M17 17v5"}),e.jsx("path",{d:"M22 12h-5"})]}),Demo13_Meteor:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m13 4 8.2 2.5a2 2 0 0 1 1.3 2.5L20 17.5"}),e.jsx("path",{d:"m8.5 7.5 10 10"}),e.jsx("path",{d:"M2 13.5V19a2 2 0 0 0 2 2h5.5"}),e.jsx("path",{d:"m13.5 8.5-5 5"}),e.jsx("path",{d:"M7 15c-1.5 1-2 2.5-2 2.5s1.5.5 2.5-2"}),e.jsx("path",{d:"M12 4V2"}),e.jsx("path",{d:"m16 6 2-2"}),e.jsx("path",{d:"M8 6 6 4"})]}),Sparkle:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:"text-amber-400 drop-shadow-[0_0_4px_rgba(252,211,77,0.7)] animate-pulse-slow",children:e.jsx("path",{d:"M12 2L14.4 9.6L22 12L14.4 14.4L12 22L9.6 14.4L2 12L9.6 9.6L12 2Z"})}),FilePlus2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M3 15h6"}),e.jsx("path",{d:"M6 12v6"})]}),History:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e.jsx("path",{d:"M3 3v5h5"}),e.jsx("path",{d:"M12 7v5l4 2"})]}),LayoutList:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}),e.jsx("path",{d:"M14 4h7"}),e.jsx("path",{d:"M14 9h7"}),e.jsx("path",{d:"M14 15h7"}),e.jsx("path",{d:"M14 20h7"})]}),Tag:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),FileEdit:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l1-3.95 5.42-5.44Z"})]}),Book:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),FileShield:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M12 13v7"}),e.jsx("path",{d:"M8.5 16.5c2 1 5 1 7 0"})]}),Users:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Lock:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),Cpu:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),e.jsx("rect",{x:"9",y:"9",width:"6",height:"6"}),e.jsx("path",{d:"M15 2v2"}),e.jsx("path",{d:"M15 20v2"}),e.jsx("path",{d:"M2 15h2"}),e.jsx("path",{d:"M2 9h2"}),e.jsx("path",{d:"M20 15h2"}),e.jsx("path",{d:"M20 9h2"}),e.jsx("path",{d:"M9 2v2"}),e.jsx("path",{d:"M9 20v2"})]}),CheckThick:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),CheckSquare:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"9 11 12 14 22 4"}),e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-3-2V5a2 2 0 0 1 2-2h11"})]}),Square:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})}),FileText:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"})]}),Search:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Trash2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("path",{d:"M14 11v6"})]}),ChevronDown:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})}),ChevronUp:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"18 15 12 9 6 15"})}),ChevronLeft:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"15 18 9 12 15 6"})}),ChevronRight:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"9 18 15 12 9 6"})}),Wand2:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z"}),e.jsx("path",{d:"m14 7 3 3"}),e.jsx("path",{d:"M5 6v4"}),e.jsx("path",{d:"M19 14v4"}),e.jsx("path",{d:"M10 2v2"}),e.jsx("path",{d:"M7 8H3"}),e.jsx("path",{d:"M21 16h-4"}),e.jsx("path",{d:"M11 3H9"})]}),AlertCircle:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),CheckCircle2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{d:"m9 12 2 2 4-4"})]}),Save:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),e.jsx("polyline",{points:"7 3 7 8 15 8"})]}),ExpandPanel:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"15 3 21 3 21 9"}),e.jsx("polyline",{points:"9 21 3 21 3 15"}),e.jsx("line",{x1:"21",y1:"3",x2:"14",y2:"10"}),e.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}),CollapsePanel:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"4 14 10 14 10 20"}),e.jsx("polyline",{points:"20 10 14 10 14 4"}),e.jsx("line",{x1:"14",y1:"10",x2:"21",y2:"3"}),e.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}),X:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Copy:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),e.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),Download:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-3-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Sun:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),RefreshCw:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 2v6h-6"}),e.jsx("path",{d:"M3 12a9 9 0 0 1 15-6.7L21 8"}),e.jsx("path",{d:"M3 22v-6h6"}),e.jsx("path",{d:"M21 12a9 9 0 0 1-15 6.7L3 16"})]}),Lightbulb:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 18h6"}),e.jsx("path",{d:"M10 22h4"}),e.jsx("path",{d:"M12 2v2"}),e.jsx("path",{d:"M12 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),e.jsx("path",{d:"M9 10a3 3 0 0 1 3-3 3 3 0 0 1 3 3v2H9z"})]}),AIIndicator:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:e.jsx("path",{d:"M12 2L14.4 9.6L22 12L14.4 14.4L12 22L9.6 14.4L2 12L9.6 9.6L12 2Z"})}),UploadCloud:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),e.jsx("path",{d:"M12 12v9"}),e.jsx("path",{d:"m16 16-4-4-4 4"})]}),Image:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),e.jsx("circle",{cx:"9",cy:"9",r:"2"}),e.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Info:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Settings:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Plus:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Minus:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})}),Key:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"m21 2-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0 3 3L22 7l-3-3m-3.5 3.5L19 4"})}),Loader:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-spin",children:e.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Keyboard:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2"}),e.jsx("path",{d:"M6 8h.01"}),e.jsx("path",{d:"M10 8h.01"}),e.jsx("path",{d:"M14 8h.01"}),e.jsx("path",{d:"M18 8h.01"}),e.jsx("path",{d:"M6 12h.01"}),e.jsx("path",{d:"M10 12h.01"}),e.jsx("path",{d:"M14 12h.01"}),e.jsx("path",{d:"M18 12h.01"}),e.jsx("path",{d:"M7 16h10"})]}),TextSize:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5h7v2"}),e.jsx("path",{d:"M6.5 5v14"}),e.jsx("path",{d:"M14 13v-2h7v2"}),e.jsx("path",{d:"M17.5 11v8"})]}),AuditUser:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"}),e.jsx("path",{d:"M22 22 18 18 16 20 20 24 24 20Z"})]}),ScanText:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5c0-1.1.9-2 2-2h2"}),e.jsx("path",{d:"M17 3h2c1.1 0 2 .9 2 2v2"}),e.jsx("path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2"}),e.jsx("path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2"}),e.jsx("path",{d:"M7 12h.01"}),e.jsx("path",{d:"M10 12h4"}),e.jsx("path",{d:"M17 12h.01"}),e.jsx("path",{d:"M12 7v10"})]}),Building:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2"}),e.jsx("path",{d:"M9 22v-4c0-1.1.9-2 2-2h2c1.1 0 2 .9 2 2v4"}),e.jsx("path",{d:"M8 6h.01"}),e.jsx("path",{d:"M16 6h.01"}),e.jsx("path",{d:"M12 6h.01"}),e.jsx("path",{d:"M12 10h.01"}),e.jsx("path",{d:"M12 14h.01"}),e.jsx("path",{d:"M12 18h.01"})]}),User:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Snowflake:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),e.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),e.jsx("path",{d:"m20 16-4-4 4-4"}),e.jsx("path",{d:"m4 8 4 4-4 4"}),e.jsx("path",{d:"m16 4-4 4-4-4"}),e.jsx("path",{d:"m8 20 4-4 4 4"})]}),CheckLineart:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Mic:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),e.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),e.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),e.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}),ShieldEye:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),e.jsx("path",{d:"M12 8c-2.5 0-4.5 1.5-6 4 1.5 2.5 3.5 4 6 4s4.5-1.5 6-4c-1.5-2.5-3.5-4-6-4z"}),e.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})},f=({name:s,size:t=18,className:r="",onClick:a})=>{const i=Me[s]||Me.AlertCircle;if(oe.isValidElement(i)){const o=i;return oe.cloneElement(o,{width:t,height:t,className:`${r} ${o.props.className||""}`,onClick:a})}return e.jsx("span",{className:r,onClick:a,children:i})},Le=({icon:s,iconColor:t,value:r,onChange:a,options:i,defaultText:o,onIconClick:d,iconTitle:u})=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:`absolute left-3 top-1/2 -translate-y-1/2 transition-all duration-300 z-10 flex items-center justify-center ${d?"cursor-pointer pointer-events-auto hover:scale-110 active:scale-95":"pointer-events-none"}`,onClick:n=>{d&&(n.stopPropagation(),d(n))},title:u,children:e.jsx("div",{className:t,children:e.jsx(f,{name:s,size:16})})}),e.jsxs("select",{value:r,onChange:a,className:`w-full appearance-none pl-10 pr-8 py-3 bg-gray-50 dark:bg-slate-950 border border-gray-100 dark:border-slate-800 rounded-xl text-xs font-normal outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all cursor-pointer shadow-sm hover:border-indigo-200 dark:hover:border-slate-600 hover:shadow-md dark:shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)] ${r?"text-slate-700 dark:text-slate-300":"text-gray-400"}`,children:[e.jsx("option",{value:"",disabled:!0,children:o}),i.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400 group-hover:text-indigo-500 transition-colors duration-300",children:e.jsx(f,{name:"ChevronDown",size:14})})]}),we=({icon:s,iconColor:t,placeholder:r,value:a,onChange:i,className:o=""})=>e.jsxs("div",{className:`relative group ${o}`,children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none transition-colors duration-300",children:e.jsx("div",{className:t,children:e.jsx(f,{name:s,size:16})})}),e.jsx("input",{type:"text",placeholder:r,value:a,onChange:i,className:"w-full pl-10 pr-3 py-3 bg-gray-50 dark:bg-slate-950 border border-gray-100 dark:border-slate-800 rounded-xl text-xs font-normal text-slate-700 dark:text-slate-300 placeholder-gray-400 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all shadow-sm hover:border-indigo-200 dark:hover:border-slate-600 hover:shadow-md dark:shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)]"})]}),ce=({isOpen:s,title:t,onClose:r,children:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-[300] flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:r,children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-3xl shadow-2xl border border-gray-100 dark:border-slate-800 transform transition-all animate-zoom-in-spring duration-300 overflow-hidden dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_10px_15px_-3px_rgba(0,0,0,0.5)]",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-lg font-black text-slate-800 dark:text-white tracking-tight",children:t}),e.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/20 transition-all duration-300 text-slate-400 hover:rotate-90",children:e.jsx(f,{name:"X",size:20})})]}),e.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto custom-scrollbar",children:a})]})}):null,Lt=({message:s,onClose:t})=>{const[r,a]=c.useState(!1),[i,o]=c.useState(!1),d=()=>{a(!0),setTimeout(()=>t(),400)};return c.useEffect(()=>{o(!0);const g=setTimeout(d,4e3);return()=>clearTimeout(g)},[t]),e.jsx("div",{className:`fixed z-[9999] w-[90vw] max-w-sm md:w-auto md:max-w-md top-20 left-1/2 -translate-x-1/2 md:top-auto md:left-auto md:bottom-10 md:right-10 md:translate-x-0 transition-all duration-500 ease-spring ${i?r?"opacity-0 scale-95 md:translate-x-4 -translate-y-4 md:translate-y-0":"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-4 md:translate-y-0 md:translate-x-4"}`,children:e.jsxs("div",{className:"bg-slate-900/95 dark:bg-white/95 backdrop-blur-md text-white dark:text-slate-900 px-4 py-3 md:px-5 md:py-4 rounded-2xl shadow-2xl flex items-start gap-3 md:gap-4 border border-slate-700/50 dark:border-slate-200/50",children:[e.jsx("div",{className:"flex-shrink-0 p-1.5 bg-emerald-500 rounded-full text-white shadow-lg shadow-emerald-500/30 mt-0.5",children:e.jsx(f,{name:"CheckLineart",size:14})}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-60 leading-none mb-1",children:"System Notification"}),e.jsx("span",{className:"text-xs md:text-sm font-bold leading-snug break-words",children:s})]}),e.jsx("button",{onClick:d,className:"flex-shrink-0 -mr-2 -mt-2 p-2 text-slate-500 hover:text-white dark:hover:text-slate-900 transition-colors rounded-full hover:bg-white/10 dark:hover:bg-black/5",children:e.jsx(f,{name:"X",size:16})})]})})},Pt=({className:s})=>e.jsxs("div",{className:`flex items-center justify-center gap-1 ${s}`,children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-3 w-3 rounded-full bg-indigo-400 opacity-75"}),e.jsx(f,{name:"Sparkle",size:16,className:"animate-spin-slow text-yellow-300"})]}),_t=({message:s})=>e.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-slate-900/95 backdrop-blur-md z-50 flex flex-col items-center justify-center animate-in fade-in duration-500",children:[e.jsxs("div",{className:"relative w-28 h-28 mb-8",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-indigo-100 dark:border-indigo-900 rounded-full opacity-50"}),e.jsx("div",{className:"absolute inset-0 border-t-4 border-indigo-600 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-4 border-4 border-purple-100 dark:border-purple-900 rounded-full opacity-50"}),e.jsx("div",{className:"absolute inset-4 border-r-4 border-purple-500 rounded-full animate-spin-reverse"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"bg-gradient-to-tr from-indigo-500 to-purple-500 p-4 rounded-full shadow-lg shadow-indigo-500/50 animate-pulse",children:e.jsx(f,{name:"Wand2",className:"text-white",size:28})})}),e.jsx("div",{className:"absolute top-0 left-1/2 w-2 h-2 bg-cyan-400 rounded-full shadow-[0_0_10px_#22d3ee] animate-ping"})]}),e.jsx("h3",{className:"text-lg font-black text-slate-800 dark:text-white mb-2 animate-pulse px-4 text-center max-w-[80%]",children:s}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-mono flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Gemini AI Processing..."]})]}),Tt=({fontSizeScale:s,adjustFontSize:t})=>{const[r,a]=c.useState(!1),[i,o]=c.useState(null),d=c.useRef(null),u=n=>{if(n.stopPropagation(),!r&&d.current){const l=d.current.getBoundingClientRect(),x=window.innerWidth-l.right;o({top:l.bottom+8,right:x}),a(!0)}else a(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("button",{ref:d,onClick:u,className:`p-2 rounded-xl transition-all duration-300 shadow-sm ${r?"bg-indigo-100 text-indigo-700 dark:bg-slate-700 dark:text-indigo-400 scale-105":"bg-gray-50 dark:bg-slate-800 text-slate-700 dark:text-slate-200 hover:bg-indigo-50 hover:text-indigo-600"}`,title:"Adjust Font Size",children:e.jsx(f,{name:"TextSize",size:18})}),r&&i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[99] cursor-default",onClick:()=>a(!1)}),e.jsxs("div",{className:"fixed z-[100] flex items-center bg-white dark:bg-slate-900 rounded-full p-1.5 shadow-2xl border border-gray-200 dark:border-slate-700 animate-zoom-in-spring min-w-[140px] justify-between",style:{top:`${i.top}px`,right:`${i.right}px`},onClick:n=>n.stopPropagation(),children:[e.jsx("button",{onClick:()=>t("decrease"),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full text-slate-500 hover:text-indigo-600 transition-all duration-200 flex-shrink-0 active:scale-90",children:e.jsx(f,{name:"Minus",size:16})}),e.jsxs("span",{className:"text-sm font-black text-slate-800 dark:text-white select-none px-2 w-12 text-center",children:[(s*100).toFixed(0),"%"]}),e.jsx("button",{onClick:()=>t("increase"),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full text-slate-500 hover:text-indigo-600 transition-all duration-200 flex-shrink-0 active:scale-90",children:e.jsx(f,{name:"Plus",size:16})})]})]})]})},Rt=()=>{const{isSidebarOpen:s,setSidebarOpen:t,toggleModal:r,fontSizeScale:a,setFontSizeScale:i,isDarkMode:o,toggleDarkMode:d}=ne(),{standards:u,standardKey:n,privacySettings:l}=re(),{apiKeys:x,activeKeyId:g}=fe(),k=x.find(p=>p.id===g),S=c.useMemo(()=>{if(!k)return{label:"NO KEY",style:"bg-slate-100 text-slate-400 border-slate-200 dark:bg-slate-800 dark:text-slate-500 dark:border-slate-700",dot:"bg-slate-400"};if(k.status==="checking")return{label:"SYNCING...",style:"bg-yellow-50 text-yellow-600 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-400 dark:border-yellow-800",dot:"bg-yellow-400 animate-ping"};if(k.status==="quota_exceeded")return{label:"QUOTA LIMIT",style:"bg-orange-50 text-orange-600 border-orange-200 dark:bg-orange-900/20 dark:text-orange-400 dark:border-orange-800",dot:"bg-orange-500"};if(k.status==="invalid")return{label:"KEY ERROR",style:"bg-red-50 text-red-600 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800",dot:"bg-red-500"};if(k.activeModel&&Ae[k.activeModel]){const p=Ae[k.activeModel];return p.tier>=3?{label:p.label,style:"bg-purple-50 text-purple-700 border-purple-200 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-800 shadow-[0_0_10px_rgba(168,85,247,0.3)]",dot:"bg-purple-500 shadow-[0_0_5px_rgba(168,85,247,0.8)]"}:{label:p.label,style:"bg-cyan-50 text-cyan-700 border-cyan-200 dark:bg-cyan-900/20 dark:text-cyan-300 dark:border-cyan-800 shadow-[0_0_10px_rgba(34,211,238,0.3)]",dot:"bg-cyan-500 shadow-[0_0_5px_rgba(34,211,238,0.8)]"}}return{label:"ONLINE",style:"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-300 dark:border-emerald-800 shadow-[0_0_10px_rgba(16,185,129,0.3)]",dot:"bg-emerald-500 shadow-[0_0_5px_rgba(16,185,129,0.8)]"}},[k]),N=(k==null?void 0:k.status)==="checking",E=c.useMemo(()=>Object.values(l).some(p=>p===!0),[l]),v=c.useMemo(()=>{var h;const p=((h=u[n])==null?void 0:h.name)||"",m=p.match(/\((.*?)\)/);return m?m[1]:p.split(" ")[0]||"ISO"},[n,u]),b=c.useMemo(()=>{const p=v.toUpperCase();return p.includes("EMS")||p.includes("14001")?"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-700/50":p.includes("QMS")||p.includes("9001")?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-700/50":p.includes("ISMS")||p.includes("27001")?"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-700/50":"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300 border-indigo-100 dark:border-indigo-800/50"},[v]);return e.jsxs("header",{className:"flex-shrink-0 px-4 md:px-6 py-0 border-b border-gray-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm z-[70] relative flex justify-between items-center h-16 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center h-full gap-3 md:gap-5",children:[e.jsx("div",{className:"relative group cursor-pointer flex items-center justify-center transition-all duration-500 hover:opacity-100 active:scale-95",onClick:()=>t(!s),title:"Toggle Sidebar",children:e.jsx("div",{className:"relative w-10 h-10 md:w-14 md:h-14 flex items-center justify-center",children:e.jsx("div",{className:"relative z-10",children:s?e.jsxs("div",{className:"relative w-8 h-8",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-transparent border-t-indigo-500 border-b-cyan-500 rounded-full animate-infinity-spin drop-shadow-[0_0_8px_rgba(6,182,212,0.8)]"}),e.jsx("div",{className:"absolute inset-2 border-2 border-transparent border-l-purple-500 border-r-pink-500 rounded-full animate-spin-reverse drop-shadow-[0_0_6px_rgba(236,72,153,0.8)]"})]}):e.jsx("div",{className:"hover:scale-110 transition-transform duration-300 drop-shadow-[0_0_15px_rgba(0,242,195,0.6)]",children:e.jsx(f,{name:"TDLogo",size:32})})})})}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsxs("h1",{className:"hidden md:block text-lg font-bold tracking-tight text-slate-900 dark:text-white leading-none",children:["ISO Audit ",e.jsx("span",{className:"font-light text-slate-400",children:"Pro"})]}),e.jsxs("button",{onClick:()=>r("settings",!0),className:`flex items-center gap-2 pl-2 pr-3 py-1.5 rounded-full border transition-all active:scale-95 group ${S.style}`,title:N?"Verifying API Connection...":"Click to Manage API Keys",children:[e.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${S.dot}`}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider leading-none mt-[1px]",children:S.label})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:`text-[11px] font-bold px-3 py-1 rounded-full border shadow-sm uppercase tracking-wider backdrop-blur-sm transition-colors duration-300 ${b}`,children:v})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("button",{onClick:()=>r("privacy",!0),className:`p-2 rounded-xl transition-all active:scale-95 border ${E?"text-emerald-600 bg-emerald-50 border-emerald-200 dark:bg-emerald-900/20 dark:border-emerald-800 dark:text-emerald-400":"text-slate-400 hover:text-slate-600 hover:bg-gray-100 border-transparent dark:hover:bg-slate-800"}`,title:E?"Privacy Shield Active":"Configure Privacy Shield",children:e.jsx(f,{name:"ShieldEye",size:20})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(Tt,{fontSizeScale:a,adjustFontSize:p=>i(m=>p==="increase"?Math.min(m+.1,1.3):Math.max(m-.1,.8))})}),e.jsx("button",{onClick:d,className:"p-2 rounded-xl text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-slate-800 transition-all",children:e.jsx(f,{name:o?"Sun":"Moon",size:18})}),e.jsx("button",{onClick:()=>r("about",!0),className:"p-2 rounded-xl text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all",title:"About & Release Notes",children:e.jsx(f,{name:"Info",size:18})})]})]})},Dt=({onAddNewStandard:s,onOpenIntegrity:t,onKnowledgeUpload:r,health:a,auditFieldIconColor:i,standardOptions:o})=>{var xe;const{standardKey:d,setStandardKey:u,auditInfo:n,setAuditInfo:l,knowledgeFileName:x,clearKnowledge:g,processes:k,activeProcessId:S,setActiveProcessId:N,addProcess:E,renameProcess:v,deleteProcess:b}=re(),{showToast:p}=ne(),m=c.useRef(null),h=c.useRef(null),j=c.useRef(null),I=c.useRef(!1),[y,T]=c.useState(""),[A,B]=c.useState(null),[w,R]=c.useState(""),[_,D]=c.useState(!1),[O,z]=c.useState(!1),K=!!x,$=!!d&&d!=="ADD_NEW",V=K?"BookOpen":"Book";let Y="text-gray-300 dark:text-slate-600",te="Please select an ISO Standard first to enable document upload.",ie="cursor-not-allowed";K?(Y="text-emerald-500 drop-shadow-sm",te=`Source Attached: ${x}. Click to Replace.`,ie="cursor-pointer"):$&&(Y=`${i} hover:text-indigo-600 dark:hover:text-indigo-300`,te="Click to upload Source PDF or Word (DOCX) for better accuracy",ie="cursor-pointer hover:scale-110 active:scale-95");const F=()=>{$&&m.current&&m.current.click()},G=P=>{P.target.files&&P.target.files.length>0&&(r(P),P.target.value="")},U=P=>{if(P.key==="Enter"){P.preventDefault();const C=y.trim();if(C){const M=k.find(L=>L.name.toLowerCase()===C.toLowerCase());M?(N(M.id),p(`Switched to: ${M.name}`),z(!1),T(""),D(!1)):(I.current=!0,E(C),T(""),z(!0),D(!0),setTimeout(()=>{j.current&&(j.current.scrollTop=j.current.scrollHeight),h.current&&h.current.focus(),I.current=!1},50))}else z(!1)}else P.key==="Escape"&&(z(!1),T(""))},H=()=>{I.current||y.trim()||z(!1)},J=(P,C,M)=>{P.stopPropagation(),P.preventDefault();const L=k.find(W=>W.id===C);if(L){const W=L.evidence&&L.evidence.trim().length>0,X=Object.keys(L.matrixData).some(Q=>L.matrixData[Q].some(ee=>ee.evidenceInput&&ee.evidenceInput.trim().length>0)),q=L.uploadedFiles&&L.uploadedFiles.length>0;W||X||q?window.confirm(`Delete process "${M}"? 

⚠️ WARNING: This process contains evidence/files that will be permanently lost.`)&&(b(C),p(`Deleted: ${M}`)):(b(C),p(`Deleted: ${M}`))}},Z=P=>{B(P.id),R(P.name)},se=()=>{A&&w.trim()&&(v(A,w.trim()),p("Renamed successfully")),B(null)},le=c.useMemo(()=>k.filter(P=>P.name&&P.name.trim()!==""),[k]),be=((xe=le.find(P=>P.id===S))==null?void 0:xe.name)||"Select Process";return e.jsxs("div",{className:"bg-gray-50/80 dark:bg-slate-900/50 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm p-3 space-y-4 w-full",children:[e.jsx("input",{type:"file",ref:m,accept:".pdf,.docx,.doc,.txt",className:"hidden",onChange:G}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:"Audit Standard"}),e.jsxs("div",{className:"relative group/source",children:[e.jsx(Le,{icon:V,iconColor:`${Y} transition-all duration-300 ${ie}`,value:d,onChange:P=>{P.target.value==="ADD_NEW"?s():u(P.target.value)},options:o,defaultText:"Select ISO Standard",onIconClick:F,iconTitle:te}),K&&e.jsx("button",{onClick:P=>{P.stopPropagation(),g()},className:"absolute right-9 top-1/2 -translate-y-1/2 p-1.5 text-slate-400 hover:text-red-500 bg-transparent hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full transition-all z-20 active:scale-95",title:"Remove Source File",children:e.jsx(f,{name:"Trash2",size:14})}),d&&e.jsx("button",{onClick:t,className:`absolute -top-1.5 -right-1.5 p-1 rounded-full shadow-lg transition-all hover:scale-110 active:scale-95 text-white ring-2 ring-white dark:ring-slate-900 ${a.isHealthy?"bg-emerald-500":"bg-orange-500"}`,title:"Integrity Check",children:e.jsx(f,{name:a.isHealthy?"CheckCircle2":"AlertCircle",size:10})})]}),e.jsx(Le,{icon:"FileEdit",iconColor:i,value:n.type,onChange:P=>l({...n,type:P.target.value}),options:Object.keys(dt).map(P=>({value:P,label:P})),defaultText:"Select Audit Type"})]}),e.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700/50"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:"Organization Context"}),e.jsxs("div",{className:"grid grid-cols-[1.5fr_1fr] gap-2",children:[e.jsx(we,{icon:"Building",iconColor:i,placeholder:"Company Name",value:n.company,onChange:P=>l({...n,company:P.target.value})}),e.jsx(we,{icon:"Tag",iconColor:i,placeholder:"SMO/ID",value:n.smo,onChange:P=>l({...n,smo:P.target.value})})]}),e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsx("label",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 uppercase",children:"Process Management"}),e.jsxs("span",{className:"text-[9px] text-slate-400 dark:text-slate-500 font-mono",children:[le.length," Items"]})]}),le.length===0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative group w-full",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none text-indigo-600 dark:text-indigo-400 group-focus-within:text-indigo-500",children:e.jsx(f,{name:"Plus",size:16})}),e.jsx("input",{ref:h,type:"text",value:y,placeholder:"Enter Process/Department...",onChange:P=>T(P.target.value),onKeyDown:U,className:"w-full pl-10 pr-3 py-2.5 bg-white dark:bg-slate-950 border border-indigo-100 dark:border-slate-700 rounded-xl text-xs font-bold text-slate-700 dark:text-slate-300 placeholder-indigo-300 dark:placeholder-slate-600 outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/10 transition-all shadow-sm",autoComplete:"off"})]}),e.jsxs("div",{className:"text-center py-4 text-[10px] text-red-400 font-bold bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800 animate-pulse",children:["! ACTION REQUIRED ",e.jsx("br",{})," ",e.jsx("span",{className:"font-normal text-slate-500",children:"Create a Process to Start"})]})]}):e.jsxs("div",{className:"relative",children:[e.jsxs("div",{onClick:()=>{O||D(!_)},className:`w-full flex items-center justify-between p-3 rounded-xl border cursor-pointer transition-all duration-200 ${_||O?"border-indigo-500 ring-1 ring-indigo-500 bg-white dark:bg-slate-900 shadow-md z-20":"bg-white dark:bg-slate-950 border-gray-100 dark:border-slate-800 hover:border-indigo-300 dark:hover:border-slate-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden flex-1",children:[e.jsx(f,{name:"Session11_GridAdd",size:16,className:"text-indigo-600 dark:text-indigo-400"}),O?e.jsx("input",{ref:h,autoFocus:!0,value:y,onChange:P=>T(P.target.value),onKeyDown:U,onBlur:H,placeholder:"Type Name & Enter to Add...",className:"bg-transparent border-none outline-none text-xs font-bold text-slate-800 dark:text-white placeholder-slate-400 w-full",onClick:P=>P.stopPropagation(),autoComplete:"off"}):e.jsx("span",{className:"text-xs font-bold truncate text-slate-700 dark:text-slate-300",children:be})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!O&&e.jsx("div",{className:`p-1 rounded-full ${_?"bg-indigo-100 text-indigo-600 dark:bg-slate-800 dark:text-indigo-400":"hover:bg-gray-100 dark:hover:bg-slate-800 text-slate-400"}`,title:"Add New Process",onClick:P=>{P.stopPropagation(),D(!0),z(!0),T(""),setTimeout(()=>{var C;return(C=h.current)==null?void 0:C.focus()},50)},children:e.jsx(f,{name:"Plus",size:14})}),O&&e.jsx("div",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400 hover:text-red-500",title:"Cancel / Close",onClick:P=>{P.stopPropagation(),z(!1),T("")},children:e.jsx(f,{name:"X",size:14})}),e.jsx(f,{name:"ChevronDown",size:14,className:`transition-transform duration-300 text-slate-400 ${_?"rotate-180":""} ${O?"hidden":""}`})]})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${_?"max-h-[300px] opacity-100 mt-2":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"p-1 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-800 rounded-xl shadow-xl space-y-1",children:e.jsx("div",{ref:j,className:"max-h-[200px] overflow-y-auto custom-scrollbar px-1 space-y-1 pb-1 pt-1 scroll-smooth",children:le.map(P=>{const C=S===P.id,M=A===P.id;return e.jsxs("div",{className:`group flex items-center justify-between p-2 rounded-lg cursor-pointer transition-all ${C?"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-900/30":"hover:bg-gray-50 dark:hover:bg-slate-800 border border-transparent"}`,onClick:()=>{M||(N(P.id),O||D(!1))},children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden flex-1",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full flex-shrink-0 ${C?"bg-indigo-500":"bg-slate-300 dark:bg-slate-700"}`}),M?e.jsx("input",{autoFocus:!0,className:"w-full min-w-0 bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-xs font-bold px-1 py-0.5 rounded outline-none border border-indigo-300",value:w,onChange:L=>R(L.target.value),onKeyDown:L=>L.key==="Enter"&&se(),onBlur:se,onClick:L=>L.stopPropagation()}):e.jsx("span",{className:`text-xs truncate font-bold ${C?"text-indigo-700 dark:text-indigo-300":"text-slate-600 dark:text-slate-400"}`,children:P.name})]}),!M&&e.jsxs("div",{className:"flex items-center gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{type:"button",onClick:L=>{L.preventDefault(),L.stopPropagation(),Z(P)},className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-md",title:"Rename",children:e.jsx(f,{name:"FileEdit",size:12})}),e.jsx("button",{type:"button",onClick:L=>J(L,P.id,P.name),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md",title:"Delete",children:e.jsx(f,{name:"Trash2",size:12})})]})]},P.id)})})})})]})]})]}),e.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700/50"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:"Auditor"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.jsx(we,{icon:"AuditUser",iconColor:i,placeholder:"Lead Auditor Name",value:n.auditor,onChange:P=>l({...n,auditor:P.target.value})})})]})]})},Be=({isOpen:s,onClose:t,health:r,isCustomStandard:a,onResetStandard:i,onAutoRepair:o,isRepairing:d,repairStats:u})=>e.jsx(ce,{isOpen:s,title:"Standard Health Index",onClose:t,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-5 p-5 rounded-3xl bg-gray-50 dark:bg-slate-800 border border-gray-100 dark:border-slate-700 shadow-inner dark:shadow-[inset_0_2px_6px_rgba(0,0,0,0.4)]",children:[e.jsxs("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white text-2xl font-black shadow-xl ring-4 ring-white dark:ring-slate-700 ${r.score>90?"bg-gradient-to-br from-emerald-400 to-emerald-600":"bg-gradient-to-br from-orange-400 to-orange-600"}`,children:[r.score,"%"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-black text-slate-900 dark:text-slate-100 uppercase tracking-tight",children:"Data Health"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-snug mt-1",children:r.isHealthy?"Excellent! Data is accurate, clean, and complete for professional use.":"Standard data is incomplete or missing Source verification."})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Integrity Checklist"}),[...r.integrity,...r.completeness].map((n,l)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 rounded-2xl shadow-sm dark:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-1.5 rounded-full shadow-sm ${n.status==="pass"?"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20":"text-red-500 bg-red-50 dark:bg-red-900/20"}`,children:e.jsx(f,{name:n.status==="pass"?"CheckCircle2":"AlertCircle",size:18})}),e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:n.label})]}),e.jsx("span",{className:`text-[10px] font-black px-3 py-1 rounded-full shadow-sm uppercase ${n.status==="pass"?"text-emerald-700 bg-emerald-100":"text-red-700 bg-red-100"}`,children:n.detail})]},l))]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-slate-700 flex flex-col md:flex-row items-center justify-center gap-3",children:[a&&e.jsxs("button",{onClick:i,className:"px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 dark:bg-red-900/20 dark:hover:bg-red-900/40 dark:text-red-400 rounded-xl font-bold text-xs flex items-center gap-2 transition-all active:scale-95 border border-red-200 dark:border-red-800",children:[e.jsx(f,{name:"Trash2",size:14}),"Reset to Default"]}),u?e.jsxs("div",{className:"flex items-center gap-3 animate-in fade-in slide-in-from-right-5",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-bold text-emerald-600 uppercase",children:"Repair Complete"}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Added ",u.fixed," items, Cleaned ",u.cleaned," dupes."]})]}),e.jsx("button",{onClick:t,className:"px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl font-bold text-xs shadow-lg shadow-emerald-500/30",children:"Close & Continue"})]}):!r.isHealthy&&e.jsxs("button",{onClick:o,disabled:d,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-xs flex items-center gap-2 shadow-lg shadow-indigo-500/30 transition-all active:scale-95 disabled:opacity-70 disabled:active:scale-100",children:[d?e.jsx(f,{name:"Loader",className:"animate-spin"}):e.jsx(f,{name:"Wand2"}),d?"AI is Fixing...":"Auto-Repair Issues with AI"]})]})]})}),Ot=(s,t,r,a)=>{const[i,o]=c.useState(s),[d,u]=c.useState(!1),n=c.useRef(null),l=c.useRef(s),x=c.useCallback(()=>u(!0),[]),g=c.useCallback(()=>u(!1),[]);return c.useEffect(()=>{d||(o(s),l.current=s)},[s,d]),c.useEffect(()=>{const k=N=>{if(d&&n.current){const E=Math.max(t,Math.min(N.clientX,r));l.current=E,n.current.style.width=`${E}px`}},S=()=>{d&&(g(),document.body.style.cursor="",document.body.style.userSelect="",o(l.current),a&&a(l.current))};return d&&(window.addEventListener("mousemove",k),window.addEventListener("mouseup",S),document.body.style.cursor="col-resize",document.body.style.userSelect="none"),()=>{window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",S),document.body.style.cursor="",document.body.style.userSelect=""}},[d,t,r,g,a]),{width:i,isResizing:d,sidebarRef:n,startResizing:x}},$e=(s,t,r)=>c.useMemo(()=>{if(!t||!s[t])return{isHealthy:!1,score:0,integrity:[],completeness:[]};const a=s[t],i=[],o=[],d=a.groups.flatMap(p=>p.clauses),u=p=>p.reduce((m,h)=>(m.push(h),h.subClauses&&m.push(...u(h.subClauses)),m),[]),n=u(d),l=n.filter(p=>!p.description||p.description.trim().length<2).length;i.push({label:"Content Quality",status:l===0?"pass":"fail",detail:l===0?"Descriptions OK":`${l} incomplete`});const x=new Set(n.map(p=>p.code)),g=n.length-x.size;if(i.push({label:"Data Cleanliness",status:g===0?"pass":"fail",detail:g===0?"Clean":`${g} Duplicates`}),r&&r.length>1e3){let p=0;const m=n.slice(0,20);m.forEach(I=>{r.includes(I.code)||p++});const h=p/m.length,j=h<.2;o.push({label:"Source Verification",status:j?"pass":"fail",detail:j?"Matches Document":`${(h*100).toFixed(0)}% Clauses Missing in Source`})}else o.push({label:"Source Verification",status:"fail",detail:"No Source Document Linked"});if(t.includes("9001")&&["8.4","8.6","8.7","7.1.4"].forEach(m=>{const h=n.some(j=>j.code===m);o.push({label:`Clause ${m}`,status:h?"pass":"fail",detail:h?"Present":"Missing (Required)"})}),t.includes("27001")){const p=n.filter(h=>h.code.startsWith("A.")),m=p.length>=90;o.push({label:"Annex A Controls",status:m?"pass":"fail",detail:m?`${p.length} Controls (OK)`:`${p.length}/93 (Incomplete)`})}const k=i.every(p=>p.status==="pass"),S=o.every(p=>p.status==="pass"),N=k&&S,E=i.length+o.length,v=i.filter(p=>p.status==="pass").length+o.filter(p=>p.status==="pass").length,b=Math.round(v/(E||1)*100);return{isHealthy:N,score:b,integrity:i,completeness:o}},[s,t,r]),zt=()=>{const{standards:s,standardKey:t,addCustomStandard:r,setKnowledgeData:a}=re(),{showToast:i}=ne(),[o,d]=c.useState(!1);return{handleKnowledgeUpload:async n=>{if(!n.target.files||n.target.files.length===0)return;const l=n.target.files[0];d(!0);try{i("Processing document...");const x=await Oe(l);if(x.length<100&&i("Warning: Document text is very short."),t){await Ce.saveDocument(t,l.name,x);const g=s[t];if(g){i("Analyzing document structure (this may take 30s)...");const k=[],S=b=>b.forEach(p=>{k.push(p),p.subClauses&&S(p.subClauses)});g.groups.forEach(b=>S(b.clauses));const N=k.map(b=>b.code),E=10;let v={};for(let b=0;b<N.length;b+=E){const p=N.slice(b,b+E),m=Math.round(b/N.length*100);m>0&&i(`Mapping content: ${m}%`);try{const h=await At(g.name,p,x);v={...v,...h}}catch(h){console.warn("Batch mapping failed",h)}}if(Object.keys(v).length>0){const b=JSON.parse(JSON.stringify(g)),p=m=>{m.forEach(h=>{v[h.code]&&(h.description=v[h.code]),h.subClauses&&p(h.subClauses)})};b.groups.forEach(m=>p(m.clauses)),r(t,b),i(`Success! Enriched ${Object.keys(v).length} clauses.`)}else i("Analysis complete, but no matching clauses found.")}}a(x,l.name),n.target.value=""}catch(x){console.error("Knowledge Upload Error",x),i(`Upload Failed: ${x.message}`)}finally{d(!1)}},isProcessing:o}},Fe=()=>{const{standards:s,standardKey:t,updateStandard:r}=re(),[a,i]=c.useState(!1),[o,d]=c.useState(null),[u,n]=c.useState([]);return{handleAutoRepair:async()=>{if(!(!t||!s[t])){i(!0),d(null);try{const x=JSON.parse(JSON.stringify(s[t])),g=[],k=[];let S=0;const N=E=>{E.forEach(v=>{(!v.description||v.description.trim().length<5)&&g.push({ref:v,code:v.code,title:v.title}),v.subClauses&&N(v.subClauses)})};if(x.groups.forEach(E=>N(E.clauses)),g.length>0){const E=g.map(p=>({code:p.code,title:p.title})),v=await It(E),b=he(v);if(Array.isArray(b)){const p=b.reduce((m,h)=>(h.code&&h.description&&(m[h.code]=h.description),m),{});g.forEach(m=>{p[m.code]&&(m.ref.description=p[m.code],k.push(m.ref.id))})}}r(x),n(k),d({fixed:k.length,cleaned:S})}catch(x){console.error("Repair failed",x),alert("Failed to repair automatically. Check API Key.")}finally{i(!1)}}},isRepairing:a,repairStats:o,repairedIds:u}},Bt=oe.memo(({isOpen:s,width:t,setWidth:r})=>{const[a,i]=c.useState(!0),{isResizing:o,sidebarRef:d,startResizing:u}=Ot(t,300,800,r),{handleKnowledgeUpload:n}=zt(),{handleAutoRepair:l,isRepairing:x,repairStats:g}=Fe(),{standards:k,standardKey:S,setStandardKey:N,resetStandard:E,auditInfo:v,knowledgeBase:b}=re(),{modals:p,toggleModal:m}=ne(),h=$e(k,S,b),j=[...Object.keys(k).map(T=>({value:T,label:k[T].name})),{value:"ADD_NEW",label:"+ Add New Standard..."}],I=(()=>{let y=0;return S&&y++,v.type&&y++,v.company&&y++,v.auditor&&y++,Math.min(4,y)})();return e.jsxs("div",{ref:d,className:`${s?"border-r":"w-0 border-0 overflow-hidden"} flex flex-col bg-white dark:bg-slate-900 border-gray-200 dark:border-slate-800 shadow-2xl z-50 relative shrink-0 ${o?"transition-none":"transition-[width] duration-300 ease-soft"} h-full`,style:{width:s?window.innerWidth<768?"100%":t:0},children:[s&&e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1.5 cursor-col-resize hover:bg-indigo-500 transition-colors z-50 group resize-handle hidden md:block",onMouseDown:y=>{y.preventDefault(),u()}}),e.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 w-full md:min-w-[390px] flex flex-col transition-all duration-400 ease-soft overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between p-6 cursor-pointer group select-none hover:bg-gray-50 dark:hover:bg-slate-800/50 border-b border-gray-200 dark:border-slate-800",onClick:()=>i(!a),children:[e.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-500 transition-colors",children:[e.jsx(f,{name:"Session8_Flag",size:14,className:"text-indigo-500"}),"Audit Mission Charter"]}),e.jsxs("div",{className:"flex gap-4 items-center",onClick:y=>y.stopPropagation(),children:[e.jsx("div",{className:"flex gap-1 items-center",children:[1,2,3,4].map(y=>e.jsx("div",{className:`w-3 h-1 rounded-full ${y<=I?"bg-indigo-500":"bg-gray-200 dark:bg-slate-700"}`},y))}),e.jsx(f,{name:"ChevronDown",size:14,className:`text-slate-400 transition-transform duration-300 ${a?"rotate-180":""}`})]})]}),e.jsx("div",{className:`flex-1 min-h-0 grid transition-all duration-300 ease-in-out ${a?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:e.jsx("div",{className:"overflow-hidden flex flex-col",children:e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 pt-2 pb-6",children:e.jsx(Dt,{onAddNewStandard:()=>m("addStandard",!0),onOpenIntegrity:()=>m("integrity",!0),onKnowledgeUpload:n,health:h,auditFieldIconColor:"text-indigo-700 dark:text-indigo-400",standardOptions:j})})})})]}),e.jsx(Be,{isOpen:p.integrity,onClose:()=>m("integrity",!1),health:h,isCustomStandard:!!S&&!Te[S],onResetStandard:()=>{E(S),m("integrity",!1)},onAutoRepair:l,isRepairing:x,repairStats:g})]})}),Ue=({isOpen:s,onClose:t,settings:r,setSettings:a})=>{const i=u=>{a({...r,[u]:!r[u]})},o=u=>{a({maskCompany:u,maskSmo:u,maskPeople:u,maskEmail:u,maskPhone:u,maskAddress:u,maskIP:u})},d=(u,n,l,x)=>e.jsxs("div",{onClick:()=>i(n),className:`flex items-center justify-between p-3 rounded-xl border cursor-pointer transition-all ${r[n]?"bg-indigo-50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-800":"bg-white border-gray-100 dark:bg-slate-900 dark:border-slate-800 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${r[n]?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/40 dark:text-indigo-300":"bg-gray-100 text-slate-400 dark:bg-slate-800"}`,children:e.jsx(f,{name:l,size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-bold ${r[n]?"text-indigo-900 dark:text-indigo-100":"text-slate-600 dark:text-slate-400"}`,children:u}),e.jsx("p",{className:"text-[10px] text-slate-400",children:x})]})]}),e.jsx("div",{className:`w-10 h-5 rounded-full relative transition-colors ${r[n]?"bg-emerald-500":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white shadow-sm transition-all ${r[n]?"left-6":"left-1"}`})})]});return e.jsx(ce,{isOpen:s,title:"Privacy Shield Configuration",onClose:t,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-2xl border border-indigo-100 dark:border-indigo-800 flex items-start gap-3",children:[e.jsx(f,{name:"ShieldEye",className:"text-indigo-600 dark:text-indigo-400 mt-1",size:24}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-indigo-900 dark:text-indigo-100",children:"Data Redaction Active"}),e.jsxs("p",{className:"text-xs text-indigo-700 dark:text-indigo-300 mt-1 leading-relaxed",children:["Selected information types will be replaced with placeholders (e.g., [EMAIL_REDACTED]) ",e.jsx("strong",{children:"before"})," sending data to the AI API. This processing happens entirely in your browser."]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pb-2",children:[e.jsx("button",{onClick:()=>o(!0),className:"text-[10px] font-bold text-indigo-600 hover:underline",children:"Select All"}),e.jsx("span",{className:"text-slate-300",children:"|"}),e.jsx("button",{onClick:()=>o(!1),className:"text-[10px] font-bold text-slate-500 hover:text-slate-700 hover:underline",children:"Clear All"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 max-h-[40vh] overflow-y-auto custom-scrollbar pr-1",children:[d("Company Name","maskCompany","Building","Matches exact name from Audit Charter"),d("SMO / ID","maskSmo","Tag","Matches SMO code from Audit Charter"),d("Person Names","maskPeople","Users","Matches Auditor & Interviewee names"),d("Emails","maskEmail","Demo12_Attach","Standard email patterns"),d("Phone Numbers","maskPhone","Demo6_BoxUp","Vietnamese & Intl phone patterns"),d("Addresses","maskAddress","Demo13_Meteor","Street/District patterns"),d("IP Addresses","maskIP","Demo11_Scan","IPv4 server addresses")]}),e.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-slate-800",children:e.jsx("button",{onClick:t,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/30 transition-all active:scale-95",children:"Save & Apply Shield"})})]})})},We=({isOpen:s,onClose:t,onRestore:r})=>{const[a,i]=c.useState([]),[o,d]=c.useState(null);c.useEffect(()=>{s&&u()},[s]);const u=()=>{var g,k,S;try{const N=localStorage.getItem("iso_session_data");if(N){const v=JSON.parse(N),b=((g=v.evidence)==null?void 0:g.trim())||((k=v.selectedClauses)==null?void 0:k.length)>0||((S=v.auditInfo)==null?void 0:S.company);d(b?{id:"current_autosave",timestamp:Date.now(),label:"Latest Auto-Save",triggerType:"AUTO_SAVE",data:v}:null)}else d(null);const E=localStorage.getItem("iso_session_history");if(E){const v=JSON.parse(E);i(v.sort((b,p)=>p.timestamp-b.timestamp))}else i([])}catch(N){console.error("Failed to load session history",N)}},n=g=>new Date(g).toLocaleString(),l=g=>{let k=0;g.data.processes&&g.data.processes.length>0?k=g.data.processes.reduce((E,v)=>E+(v.evidence?v.evidence.length:0),0):g.data.scopes&&g.data.scopes.length>0?k=g.data.scopes.reduce((E,v)=>E+(v.evidence?v.evidence.length:0),0):g.data.evidence&&(k=g.data.evidence.length);const S=g.data.selectedClauses?g.data.selectedClauses.length:0,N=g.data.analysisResult?g.data.analysisResult.length:0;return e.jsxs("div",{className:"flex gap-3 mt-2 text-[10px] text-slate-500 font-mono",children:[e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(f,{name:"FileText",size:10})," ",k>0?`${(k/1024).toFixed(1)}KB Evid`:"No Evid"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(f,{name:"CheckSquare",size:10})," ",S," Clauses"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(f,{name:"Wand2",size:10})," ",N," Findings"]})]})},x=(g,k)=>e.jsxs("div",{onClick:()=>r(g),className:`group relative p-4 rounded-2xl border cursor-pointer transition-all duration-300 hover:scale-[1.02] active:scale-95 ${k?"bg-indigo-50/50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 ring-1 ring-indigo-500/20":"bg-white dark:bg-slate-900 border-gray-100 dark:border-slate-800 hover:border-indigo-300 dark:hover:border-indigo-700 hover:shadow-lg"}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[9px] font-black uppercase tracking-wider px-2 py-0.5 rounded-full ${k?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/30":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,children:k?"ACTIVE STATE":"BACKUP ARCHIVE"}),e.jsx("span",{className:"text-xs text-slate-400 font-mono",children:n(g.timestamp)})]})}),e.jsxs("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 truncate",children:[g.data.auditInfo.company||"Untitled Company",e.jsx("span",{className:"font-normal text-slate-400 mx-1",children:"|"}),g.data.auditInfo.type||"Untitled Audit"]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate mb-1",children:["Standard: ",ge(g.data.standardKey).replace(/_/g," ")]}),l(g),e.jsx("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"bg-indigo-600 text-white p-2 rounded-full shadow-xl",children:e.jsx(f,{name:"History",size:20})})})]},g.id);return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:t,children:e.jsxs("div",{className:"bg-white dark:bg-slate-950 w-full max-w-2xl rounded-3xl shadow-2xl border border-gray-200 dark:border-slate-800 overflow-hidden flex flex-col max-h-[85vh] animate-zoom-in-spring",onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-900/50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(f,{name:"History",className:"text-indigo-500"}),"Session Time Machine"]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Select a restoration point. This will overwrite your current workspace."})]}),e.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-slate-800 text-slate-400 transition-colors",children:e.jsx(f,{name:"X",size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6 bg-gray-50/30 dark:bg-slate-950",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"Available Auto-Save"]}),o?x(o,!0):e.jsx("div",{className:"p-4 border border-dashed border-gray-300 dark:border-slate-700 rounded-xl text-center text-slate-400 text-xs italic",children:"No active auto-save data found."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(f,{name:"Lock",size:12}),"Backup Vault (Last 5 Resets)"]}),e.jsx("div",{className:"space-y-3",children:a.length>0?a.map(g=>x(g,!1)):e.jsxs("div",{className:"p-8 border border-dashed border-gray-300 dark:border-slate-700 rounded-xl text-center",children:[e.jsx(f,{name:"Archive",className:"mx-auto mb-2 text-slate-300",size:24}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Vault is empty."}),e.jsx("p",{className:"text-slate-400 text-xs",children:"Backups are created automatically when you start a New Session."})]})})]})]}),e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-slate-900 border-t border-gray-100 dark:border-slate-800 text-center",children:e.jsxs("p",{className:"text-[10px] text-slate-400",children:[e.jsx("span",{className:"font-bold text-indigo-500",children:"Pro Tip:"})," Backups are stored locally in your browser. Clearing cache will delete them."]})})]})}):null},Ke=({isOpen:s,onClose:t})=>{const[r,a]=c.useState(!1),[i,o]=c.useState("overview");if(c.useEffect(()=>{s&&(a(!1),o("overview"))},[s]),!s)return null;const d=[{id:"overview",label:"Overview",icon:"Session1_SparklePlus"},{id:"guide",label:"User Guide",icon:"BookOpen"},{id:"tech",label:"System Blueprint",icon:"Cpu"},{id:"changelog",label:"Releases",icon:"History"}],u=[{layer:"Architecture",tech:"React + Vite + Modal Manager",role:"Modular Component System",color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-900/20"},{layer:"Styling",tech:"Tailwind CSS",role:"Utility-first styling, Dark mode adaptive",color:"text-cyan-600 dark:text-cyan-400",bg:"bg-cyan-50 dark:bg-cyan-900/20"},{layer:"AI Engine",tech:"Google Gemini 3.0 Pro",role:"Reasoning, Analysis, Vision OCR",color:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-900/20"},{layer:"State",tech:"Context API + Refs",role:"High-Performance Reactive State",color:"text-purple-600 dark:text-purple-400",bg:"bg-purple-50 dark:bg-purple-900/20"},{layer:"Processing",tech:"Dual-Stream Synthesis",role:"Matrix + Unstructured Data Merging",color:"text-rose-600 dark:text-rose-400",bg:"bg-rose-50 dark:bg-rose-900/20"}];return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999] p-4 fade-in backdrop-blur-md",onClick:t,children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-2xl w-full max-w-5xl flex flex-col h-[90vh] md:h-[85vh] border border-gray-100 dark:border-slate-800 transform transition-all scale-100 overflow-hidden relative",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"flex-shrink-0 relative overflow-hidden group border-b border-gray-100 dark:border-slate-800",children:[e.jsxs("div",{className:"absolute inset-0 bg-slate-950",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f46e51a_1px,transparent_1px),linear-gradient(to_bottom,#4f46e51a_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-indigo-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 animate-pulse-slow"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-cyan-500/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2 animate-pulse-slow",style:{animationDelay:"1s"}})]}),e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-slate-400 hover:text-white z-50 p-2 bg-slate-800/50 rounded-full hover:bg-red-500/20 transition-all border border-transparent hover:border-red-500/30",children:e.jsx(f,{name:"X",size:20})}),e.jsxs("div",{className:"relative px-6 py-6 md:px-8 md:py-8 flex flex-col md:flex-row items-center md:items-start gap-6 z-10",children:[e.jsx("div",{className:"relative flex-shrink-0 mb-4 md:mb-0 group/logo",children:e.jsxs("div",{className:"relative w-24 h-24 rounded-2xl p-1 bg-gradient-to-br from-slate-800 to-slate-950 ring-1 ring-white/10 z-10 overflow-hidden shadow-2xl mx-auto md:mx-0 flex items-center justify-center backdrop-blur-xl",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-indigo-500/20 to-cyan-500/20 opacity-0 group-hover/logo:opacity-100 transition-opacity duration-700"}),e.jsx("div",{className:"transform scale-150 drop-shadow-[0_0_15px_rgba(99,102,241,0.5)]",children:e.jsx(f,{name:"TDLogo",size:64})})]})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-indigo-200 to-cyan-200 tracking-tight leading-none mb-2 drop-shadow-sm",children:"ISO Audit Pro"}),e.jsx("p",{className:"text-indigo-200/70 text-sm font-medium mb-6 tracking-wide uppercase",children:"Next-Gen Compliance Intelligence"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center md:justify-start",children:d.map(n=>e.jsxs("button",{onClick:()=>o(n.id),className:`px-4 py-2 rounded-xl text-xs font-bold flex items-center gap-2 transition-all duration-300 ${i===n.id?"bg-white text-indigo-900 shadow-[0_0_20px_rgba(255,255,255,0.3)] scale-105":"bg-slate-800/50 text-slate-400 hover:bg-slate-700 hover:text-white border border-white/5"}`,children:[e.jsx(f,{name:n.icon,size:16})," ",n.label]},n.id))})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 md:p-8 bg-gray-50 dark:bg-slate-950 text-slate-800 dark:text-slate-200",children:[i==="overview"&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-300 space-y-6",children:[e.jsxs("div",{className:"p-5 rounded-2xl bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/5 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2"}),e.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 border-b border-gray-100 dark:border-slate-800 pb-2",children:"System Status"}),e.jsxs("div",{className:"grid grid-cols-[100px_1fr] md:grid-cols-[120px_1fr] gap-y-3 gap-x-4 items-center",children:[e.jsx("span",{className:"text-sm font-medium text-slate-500 text-right",children:"Version"}),e.jsxs("span",{className:"font-mono font-bold text-indigo-600 dark:text-indigo-400 text-sm",children:["v",rt]}),e.jsx("span",{className:"text-sm font-medium text-slate-500 text-right",children:"Build"}),e.jsx("span",{className:"font-mono text-[10px] text-slate-500 break-words",children:it}),e.jsx("span",{className:"text-sm font-medium text-slate-500 text-right",children:"Engine"}),e.jsx("span",{className:"font-mono text-[10px] font-bold text-amber-600 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded w-fit border border-amber-100 dark:border-amber-800",children:"Gemini 3.0 Pro"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:xt.map((n,l)=>e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-900 rounded-xl border border-gray-100 dark:border-slate-800 flex items-start gap-3 hover:border-indigo-200 dark:hover:border-indigo-900 transition-colors",children:[e.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg text-indigo-600 dark:text-indigo-400",children:e.jsx(f,{name:n.icon,size:20})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:n.title}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:n.desc})]})]},l))})]}),i==="guide"&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-300 space-y-8",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-3",children:"Audit Workflow"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-4 text-sm text-slate-600 dark:text-slate-300 marker:text-indigo-500 marker:font-bold",children:[e.jsxs("li",{className:"pl-2",children:[e.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:"Planning Phase:"}),e.jsxs("p",{className:"mt-1 ml-1 text-slate-500 text-xs leading-relaxed",children:["Define processes in the Sidebar. Use the ",e.jsx("strong",{children:"Planning View"})," (Matrix) to map which ISO clauses apply to which process. This creates the scope for your audit."]})]}),e.jsxs("li",{className:"pl-2",children:[e.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:"Execution Phase:"}),e.jsxs("p",{className:"mt-1 ml-1 text-slate-500 text-xs leading-relaxed",children:["Switch to ",e.jsx("strong",{children:"Audit View"}),". Select a process and input evidence. You can type, dictate voice notes, or drag-and-drop files directly into specific clause rows."]})]}),e.jsxs("li",{className:"pl-2",children:[e.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:"Analysis & Findings:"}),e.jsxs("p",{className:"mt-1 ml-1 text-slate-500 text-xs leading-relaxed",children:['Click "Analyze". The AI synthesizes your matrix data and uploaded files to determine compliance. Review findings in the ',e.jsx("strong",{children:"Findings View"}),"."]})]}),e.jsxs("li",{className:"pl-2",children:[e.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:"Reporting:"}),e.jsx("p",{className:"mt-1 ml-1 text-slate-500 text-xs leading-relaxed",children:"Generate a final executive summary. Export structured data for your ERP or QMS software."})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-3",children:"Pro Tips"}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/10 border border-amber-100 dark:border-amber-800 rounded-lg text-xs text-amber-800 dark:text-amber-200",children:[e.jsx("strong",{children:"Offline Mode:"}),' If internet is lost, the app switches to "Local Intelligence" (Heuristic Analysis) automatically.']}),e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-800 rounded-lg text-xs text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Privacy Shield:"})," Toggle the Shield icon in the header to auto-redact emails/phones before sending data to AI."]})]})]})]}),i==="tech"&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-300 space-y-8 pb-10",children:[e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg text-indigo-600 dark:text-indigo-400",children:e.jsx(f,{name:"Session7_Compass",size:24})}),e.jsx("h3",{className:"text-lg md:text-xl font-bold text-slate-900 dark:text-white",children:"Business Logic & Workflow"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"p-5 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-2xl shadow-sm",children:[e.jsx("h4",{className:"font-bold text-sm text-indigo-600 dark:text-indigo-400 mb-2 uppercase tracking-wide",children:"1. Evidence Aggregation"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed text-left",children:["The system employs a unique ",e.jsx("strong",{children:'"Dual-Stream Synthesis"'})," engine.",e.jsx("br",{}),e.jsx("br",{}),e.jsxs("span",{className:"block mb-2",children:["🔹 ",e.jsx("strong",{children:"Unstructured Stream:"})," Captures raw text, OCR data from images/PDFs, and voice dictation logs. Ideal for messy, real-world audit trails."]}),e.jsxs("span",{className:"block",children:["🔹 ",e.jsx("strong",{children:"Structured Stream (Matrix):"})," A tabular interface mapping specific evidence directly to ISO clauses. Ideal for GAP analysis and strict compliance checks."]}),e.jsx("br",{}),e.jsx("span",{className:"block mt-2 text-xs italic opacity-75",children:"During analysis, both streams are merged to provide the AI with a complete context."})]})]}),e.jsxs("div",{className:"p-5 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-2xl shadow-sm",children:[e.jsx("h4",{className:"font-bold text-sm text-emerald-600 dark:text-emerald-400 mb-2 uppercase tracking-wide",children:"2. Compliance Intelligence"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed text-left",children:["Compliance is determined not just by matching keywords, but by ",e.jsx("strong",{children:"Contextual Reasoning"}),".",e.jsx("br",{}),e.jsx("br",{}),e.jsxs("span",{className:"block mb-2",children:["🔸 ",e.jsx("strong",{children:"RAG (Retrieval-Augmented Generation):"})," If a source PDF is uploaded, the system vectorizes it locally (IndexedDB) to ground the AI's answers in the specific standard's text."]}),e.jsxs("span",{className:"block",children:["🔸 ",e.jsx("strong",{children:"Heuristic Fallback:"}),' In offline mode, the system switches to "Local Intelligence", using regex and keyword scoring to estimate compliance without Cloud APIs.']})]})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 pl-2 border-l-4 border-purple-500",children:"Core Functional Modules"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{title:"Smart OCR Engine",desc:"Extracts text from images and scanned PDFs using Google Vision (Cloud) or fallback methods."},{title:"Privacy Shield",desc:"Client-side PII redaction (Emails, Phones) before data leaves the browser."},{title:"Report Synthesizer",desc:"Generates final audit reports in Markdown or Plain Text for system integration."},{title:"Vector Store",desc:"Client-side vector database (IndexedDB) for semantic search of large standards."},{title:"Neural Pool",desc:"Multi-key management system with smart failover and quota handling."},{title:"Modal Manager",desc:"Centralized overlay system for handling dialogs and alerts efficiently."}].map((n,l)=>e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-800/50 rounded-xl border border-gray-100 dark:border-slate-700 hover:bg-white dark:hover:bg-slate-800 transition-colors",children:[e.jsx("h5",{className:"font-bold text-sm text-slate-800 dark:text-slate-200 mb-1",children:n.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-snug",children:n.desc})]},l))})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 pl-2 border-l-4 border-blue-500",children:"Technical Architecture"}),e.jsx("div",{className:"hidden md:block overflow-hidden rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800/80 text-slate-700 dark:text-slate-200 uppercase tracking-wider text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 font-extrabold",children:"Layer"}),e.jsx("th",{className:"px-6 py-4 font-extrabold",children:"Technology"}),e.jsx("th",{className:"px-6 py-4 font-extrabold",children:"Role"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800/50 bg-white dark:bg-slate-900",children:u.map((n,l)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 font-bold text-slate-700 dark:text-slate-300",children:n.layer}),e.jsx("td",{className:`px-6 py-4 font-bold ${n.color}`,children:n.tech}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400 text-xs leading-relaxed",children:n.role})]},l))})]})}),e.jsx("div",{className:"md:hidden space-y-3",children:u.map((n,l)=>e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl shadow-sm flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-100 dark:border-slate-800 pb-2",children:[e.jsx("span",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:n.layer}),e.jsx("div",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase ${n.bg} ${n.color}`,children:n.tech})]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("strong",{className:"text-slate-700 dark:text-slate-300",children:"Role:"})," ",n.role]})]},l))})]})]}),i==="changelog"&&e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-300",children:e.jsx("div",{className:"border-l-2 border-slate-200 dark:border-slate-800 space-y-8 pl-6 relative ml-2",children:ct.map((n,l)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:`absolute -left-[31px] top-1 w-2.5 h-2.5 rounded-full border-2 border-white dark:border-slate-900 transition-colors ${l===0?"bg-indigo-500 shadow-[0_0_0_4px_rgba(99,102,241,0.2)]":"bg-slate-300 dark:bg-slate-700"}`}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsxs("h4",{className:`text-sm font-bold ${l===0?"text-indigo-600 dark:text-indigo-400":"text-slate-800 dark:text-slate-200"}`,children:["v",n.version]}),e.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded",children:n.date})]}),e.jsx("ul",{className:"space-y-1.5",children:n.features.map((x,g)=>e.jsxs("li",{className:"text-xs text-slate-600 dark:text-slate-300 flex items-start gap-2",children:[e.jsx("span",{className:"w-1 h-1 bg-slate-400 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:x})]},g))})]},l))})}),e.jsxs("div",{className:"mt-10 pt-8 border-t border-gray-100 dark:border-slate-800 flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 opacity-80",children:[e.jsx("div",{className:"h-[1px] w-12 bg-gradient-to-r from-transparent to-indigo-400 dark:to-indigo-500"}),e.jsx("span",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-[0.2em]",children:"Architected By"}),e.jsx("div",{className:"h-[1px] w-12 bg-gradient-to-l from-transparent to-indigo-400 dark:to-indigo-500"})]}),e.jsxs("h3",{className:"text-sm md:text-base font-black text-slate-800 dark:text-white tracking-tight mb-1",children:["Trung Dang Hoang ",e.jsx("span",{className:"text-slate-400 dark:text-slate-500 font-serif italic font-normal ml-1",children:"(Steven)"})]}),e.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"© 2026 All Rights Reserved. Built for ISO Audit Professional Compliance."})]})]})]})})},$t=({children:s,commandActions:t,onRestoreSnapshot:r})=>{const{isSidebarOpen:a,setSidebarOpen:i,sidebarWidth:o,setSidebarWidth:d,toastMsg:u,showToast:n,modals:l,toggleModal:x}=ne(),{privacySettings:g,setPrivacySettings:k}=re();return e.jsxs("div",{className:"flex flex-col h-[100dvh] w-full bg-gray-50 dark:bg-slate-900 transition-colors duration-500 ease-soft relative",children:[u&&e.jsx(Lt,{message:u,onClose:()=>n("")}),e.jsx(Rt,{}),e.jsxs("main",{className:"flex-1 flex overflow-hidden relative",children:[e.jsx("div",{className:`${a?"translate-x-0":"-translate-x-full"} fixed top-16 bottom-0 left-0 z-[60] md:absolute md:inset-y-0 md:relative md:top-0 md:translate-x-0 md:transform-none transition-transform duration-300 ease-soft h-[calc(100%-4rem)] md:h-full`,children:e.jsx(Bt,{isOpen:a,width:o,setWidth:d})}),a&&e.jsx("div",{className:"fixed top-16 bottom-0 inset-x-0 bg-black/50 z-50 md:hidden backdrop-blur-sm transition-opacity duration-300 animate-in fade-in",onClick:()=>i(!1)}),e.jsx("div",{className:"flex-1 flex flex-col min-w-0 relative w-full transition-all duration-300 ease-soft bg-white/50 dark:bg-slate-900/50 backdrop-blur-sm",children:s})]}),e.jsx(Ke,{isOpen:l.about,onClose:()=>x("about",!1)}),e.jsx(We,{isOpen:l.recall,onClose:()=>x("recall",!1),onRestore:r}),e.jsx(Ue,{isOpen:l.privacy,onClose:()=>x("privacy",!1),settings:g,setSettings:k})]})},Ft=oe.memo(({layoutMode:s,setLayoutMode:t,isSidebarOpen:r,sidebarWidth:a})=>{const i=c.useRef([]),o=c.useRef(null),[d,u]=c.useState({left:0,width:0,opacity:0,color:""});return c.useEffect(()=>{const n=()=>{const x=de.findIndex(k=>k.id===s),g=i.current[x];g&&u({left:g.offsetLeft,width:g.offsetWidth,opacity:1,color:de[x].colorClass})};n(),window.addEventListener("resize",n);const l=setTimeout(n,300);return()=>{window.removeEventListener("resize",n),clearTimeout(l)}},[s,r,a]),e.jsx("div",{className:"flex gap-2 w-full",children:e.jsxs("div",{ref:o,className:"relative flex-1 flex justify-between bg-gray-100 dark:bg-slate-950 p-1 rounded-xl dark:shadow-[inset_0_1px_3px_rgba(0,0,0,0.5)]",children:[e.jsx("div",{className:`absolute top-1 bottom-1 shadow-sm rounded-lg transition-all duration-500 ease-fluid z-0 ${d.color}`,style:{left:d.left,width:d.width,opacity:d.opacity}}),de.map((n,l)=>e.jsxs("button",{ref:x=>{i.current[l]=x},onClick:()=>t(n.id),className:`flex-1 relative z-10 flex items-center justify-center gap-2 px-1 md:px-4 py-2 rounded-lg text-xs md:text-sm font-bold transition-colors duration-300 ${s===n.id?"text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(f,{name:n.icon,size:16}),e.jsx("span",{className:`${r?"hidden xl:inline":"hidden md:inline"}`,children:n.label})]},n.id))]})})}),Ut=s=>{const t=c.useMemo(()=>{if(!s)return[];const i=[],o=d=>{d.forEach(u=>{i.push(u),u.subClauses&&o(u.subClauses)})};return s.groups.forEach(d=>o(d.clauses)),i},[s]),r=c.useCallback(i=>t.find(o=>o.id===i),[t]),a=c.useCallback(i=>t.find(o=>o.code===i),[t]);return{flatClauses:t,getClauseById:r,getClauseByCode:a}},Wt=({files:s,onRemoveFile:t})=>s.length===0?null:e.jsx("div",{className:"px-4 md:px-6 pt-4 pb-2",children:e.jsx("div",{className:"flex flex-wrap gap-3",children:s.map(r=>{const a=r.file.type.startsWith("image/"),i=r.file.type.includes("pdf");return e.jsxs("div",{className:"relative group w-20 h-20 bg-gray-50 dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 flex flex-col items-center justify-center overflow-hidden transition-all hover:shadow-md",children:[a?e.jsx("img",{src:URL.createObjectURL(r.file),alt:"preview",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100"}):e.jsxs("div",{className:"flex flex-col items-center p-2 text-center",children:[e.jsx(f,{name:i?"BookOpen":"FileText",size:24,className:"text-slate-400 mb-1"}),e.jsx("span",{className:"text-[9px] text-slate-500 line-clamp-2 leading-tight break-all",children:r.file.name})]}),e.jsxs("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-start justify-end p-1",children:[r.status==="processing"&&e.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-black/50 flex items-center justify-center",children:e.jsx(f,{name:"Loader",size:16,className:"animate-spin text-indigo-600"})}),r.status==="success"&&e.jsx("div",{className:"bg-emerald-500 rounded-full p-0.5",children:e.jsx(f,{name:"CheckThick",size:10,className:"text-white"})}),e.jsx("button",{onClick:o=>{o.stopPropagation(),t&&t(r.id)},className:"bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity hover:scale-110 shadow-sm",title:"Remove File",children:e.jsx(f,{name:"X",size:10})})]})]},r.id)})})}),Kt=c.forwardRef(({standard:s,selectedClauses:t,matrixData:r,setMatrixData:a,onPasteFiles:i,uploadedFiles:o=[],onRemoveFile:d,onLookup:u},n)=>{const[l,x]=c.useState(null),g=c.useRef(null),{getClauseById:k}=Ut(s);c.useEffect(()=>{a(b=>{const p={...b};let m=!1,h=null;return t.forEach(j=>{if(!p[j]||p[j].length===0){const I=k(j);if(I){const y=I.description||"Requirement",T=y.length>300?y.split(/(?:\. |\n)/).filter(A=>A.trim().length>5):[y];p[j]=T.map((A,B)=>({id:`${j}_req_${B}`,requirement:A.trim(),evidenceInput:"",status:"pending"})),m=!0}}!h&&p[j]&&p[j].length>0&&(h={clauseId:j,rowId:p[j][0].id})}),!l&&h&&x(h),m?p:b})},[t,k,a]);const S=c.useCallback((b,p,m)=>{a(h=>({...h,[b]:h[b].map(j=>{if(j.id===p){const I=j.evidenceInput||"",T=I+(I&&m?`
`:"")+m;return{...j,evidenceInput:T,status:T.trim()?"supplied":"pending"}}return j})}))},[a]),N=c.useCallback((b,p,m)=>{a(h=>({...h,[b]:h[b].map(j=>j.id===p?{...j,evidenceInput:m,status:m.trim()?"supplied":"pending"}:j)}))},[a]),E=c.useCallback((b,p,m)=>{const h=b.clipboardData.items,j=[];for(let I=0;I<h.length;I++)if(h[I].kind==="file"){const y=h[I].getAsFile();y&&j.push(y)}j.length>0&&(b.preventDefault(),i&&i(j,{clauseId:p,rowId:m}))},[i]);c.useImperativeHandle(n,()=>({insertEvidence:(b,p,m)=>S(b,p,m),handleExternalDictation:b=>{l&&S(l.clauseId,l.rowId,b)},getActiveRow:()=>l}));const v=c.useMemo(()=>{if(!l)return null;const b=k(l.clauseId),p=r[l.clauseId],m=p==null?void 0:p.find(h=>h.id===l.rowId);return!b||!m?null:{clause:b,row:m}},[l,r,k]);return t.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 bg-gray-50/50 dark:bg-slate-900/50 rounded-3xl border border-dashed border-gray-200 dark:border-slate-800",children:[e.jsx(f,{name:"LayoutList",size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-sm font-medium",children:"Select clauses to start mapping evidence."})]}):e.jsx("div",{className:"h-full flex flex-col relative animate-fade-in-up",children:e.jsxs("div",{className:"flex-1 min-h-0 bg-white dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-slate-800 shadow-sm overflow-hidden flex",children:[e.jsxs("div",{className:"w-1/3 min-w-[250px] max-w-[350px] border-r border-gray-100 dark:border-slate-800 flex flex-col bg-gray-50/50 dark:bg-slate-950/30",children:[e.jsxs("div",{className:"p-3 border-b border-gray-100 dark:border-slate-800 flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Checklist"}),e.jsxs("button",{onClick:()=>{const b=kt(r,t);b&&Se(b)},className:"text-[10px] text-indigo-500 hover:text-indigo-600 font-bold flex items-center gap-1",children:[e.jsx(f,{name:"Copy",size:10})," Copy"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-4",children:t.map(b=>{const p=k(b),m=r[b]||[];return p?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 px-2 py-1 group/header",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[e.jsx("span",{className:"text-[10px] font-black text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 px-1.5 rounded flex-shrink-0",children:p.code}),e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 truncate",title:p.title,children:p.title})]}),e.jsx("button",{onClick:h=>{h.stopPropagation(),u&&u(p)},className:"p-1 text-slate-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded opacity-0 group-hover/header:opacity-100 transition-opacity",title:"Read Clause Content",children:e.jsx(f,{name:"BookOpen",size:12})})]}),e.jsx("div",{className:"pl-2 space-y-1",children:m.map((h,j)=>{const I=(l==null?void 0:l.rowId)===h.id,y=h.status==="supplied";return e.jsx("div",{onClick:()=>x({clauseId:b,rowId:h.id}),className:`group relative p-2.5 rounded-lg cursor-pointer transition-all border ${I?"bg-white dark:bg-slate-800 border-indigo-200 dark:border-indigo-700 shadow-sm ring-1 ring-indigo-500/10":"bg-transparent border-transparent hover:bg-white dark:hover:bg-slate-800/50 hover:border-gray-200 dark:hover:border-slate-700"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:`mt-1 w-2 h-2 rounded-full shrink-0 transition-colors ${y?"bg-emerald-500":I?"bg-indigo-500":"bg-slate-300 dark:bg-slate-700"}`}),e.jsx("p",{className:`text-[11px] leading-snug line-clamp-2 ${I?"text-slate-800 dark:text-slate-200 font-medium":"text-slate-500 dark:text-slate-400"}`,children:h.requirement})]})},h.id)})})]},b):null})})]}),e.jsx("div",{className:"flex-1 flex flex-col bg-white dark:bg-slate-900 min-w-0",children:v?e.jsxs("div",{className:"flex flex-col h-full animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"p-4 md:p-5 border-b border-gray-100 dark:border-slate-800 bg-gray-50/30 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-black text-white bg-indigo-500 px-2 py-0.5 rounded shadow-sm shadow-indigo-500/30",children:v.clause.code}),e.jsx("span",{className:"text-sm font-bold text-slate-800 dark:text-white",children:v.clause.title})]}),e.jsxs("button",{onClick:()=>u&&u(v.clause),className:"flex items-center gap-1.5 px-2 py-1 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg text-xs font-bold text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:border-indigo-300 transition-colors shadow-sm",children:[e.jsx(f,{name:"BookOpen",size:14}),"Lookup"]})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed font-serif italic border-l-4 border-indigo-200 dark:border-indigo-900 pl-3",children:v.row.requirement})]}),e.jsx(Wt,{files:o,onRemoveFile:d}),e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx("textarea",{ref:g,className:"w-full h-full p-4 md:p-6 text-sm text-slate-800 dark:text-slate-200 bg-transparent outline-none resize-none leading-7 placeholder-gray-300 dark:placeholder-slate-700",placeholder:"Type evidence here... (Or drop files to attach)",value:v.row.evidenceInput,onChange:b=>N(v.clause.id,v.row.id,b.target.value),onPaste:b=>E(b,v.clause.id,v.row.id),autoFocus:!0}),e.jsxs("div",{className:"absolute bottom-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[v.row.status==="supplied"&&e.jsxs("span",{className:"px-3 py-1.5 bg-emerald-100 text-emerald-700 rounded-full text-xs font-bold flex items-center gap-1 shadow-sm",children:[e.jsx(f,{name:"CheckThick",size:12})," Saved"]}),e.jsx("button",{onClick:()=>N(v.clause.id,v.row.id,""),className:"p-2 bg-gray-100 hover:bg-red-50 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"Clear Text",children:e.jsx(f,{name:"Trash2",size:16})})]})]}),e.jsxs("div",{className:"px-4 py-2 border-t border-gray-100 dark:border-slate-800 text-[10px] text-slate-400 flex justify-between bg-gray-50/50 dark:bg-slate-950/50",children:[e.jsxs("span",{children:["Characters: ",v.row.evidenceInput.length]}),e.jsxs("span",{children:["Attachments: ",o.length]})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-300 dark:text-slate-600",children:[e.jsx(f,{name:"ArrowLeft",size:32,className:"mb-2 opacity-50"}),e.jsx("p",{children:"Select a requirement to edit"})]})})]})})}),Vt=(s,t)=>{const[r,a]=c.useState(!1),i=c.useRef(null),o=c.useCallback(()=>{var u;if(r){(u=i.current)==null||u.stop(),a(!1);return}const d=window.SpeechRecognition||window.webkitSpeechRecognition;if(!d){alert("Voice-to-Text is not supported in this browser.");return}try{const n=new d;n.continuous=!0,n.interimResults=!0,n.lang=s==="vi"?"vi-VN":"en-US",n.onresult=l=>{let x="";for(let g=l.resultIndex;g<l.results.length;++g)l.results[g].isFinal&&(x+=l.results[g][0].transcript);x&&t(x.trim())},n.onerror=l=>{console.error("Speech Error",l.error),a(!1)},n.onend=()=>a(!1),n.start(),i.current=n,a(!0)}catch(n){console.error("Failed to start recognition",n),a(!1)}},[r,s,t]);return{isListening:r,toggleListening:o}},Gt=oe.memo(({processes:s,activeProcessId:t,activeProcess:r,setActiveProcessId:a,addInterviewee:i,removeInterviewee:o})=>{var l;const[d,u]=c.useState(""),n=x=>{x.key==="Enter"&&d.trim()&&(i(d.trim()),u(""))};return e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-2 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-xl p-1.5 shadow-sm shrink-0 transition-colors",children:[e.jsxs("div",{className:"relative group w-full md:w-auto min-w-[200px] bg-gray-50 dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 flex items-center hover:border-indigo-300 dark:hover:border-indigo-700 transition-colors",children:[e.jsx("div",{className:"absolute left-2 text-indigo-500 pointer-events-none",children:e.jsx(f,{name:"Session11_GridAdd",size:14})}),e.jsx("select",{value:t||"",onChange:x=>a(x.target.value),className:"w-full bg-transparent appearance-none pl-7 pr-6 py-2 text-xs font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",title:"Switch active process context",children:s.map(x=>e.jsx("option",{value:x.id,className:"text-slate-900 dark:text-white bg-white dark:bg-slate-900",children:x.name},x.id))}),e.jsx("div",{className:"absolute right-2 pointer-events-none text-slate-400",children:e.jsx(f,{name:"ChevronDown",size:12})})]}),e.jsx("div",{className:"w-px h-6 bg-gray-200 dark:bg-slate-700 hidden md:block"}),e.jsxs("div",{className:"flex-1 flex items-center gap-2 w-full overflow-x-auto custom-scrollbar px-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-slate-400 uppercase whitespace-nowrap",children:[e.jsx(f,{name:"User",size:12})," Persons:"]}),(l=r==null?void 0:r.interviewees)==null?void 0:l.map((x,g)=>e.jsxs("span",{className:"flex items-center gap-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300 text-[10px] font-bold px-2 py-0.5 rounded-md border border-indigo-100 dark:border-indigo-800 whitespace-nowrap animate-in zoom-in-95",children:[x,e.jsx("button",{onClick:()=>o(x),className:"hover:text-red-500 transition-colors",children:e.jsx(f,{name:"X",size:10})})]},g)),e.jsx("input",{className:"bg-transparent border-b border-dashed border-gray-300 dark:border-slate-700 text-xs py-0.5 px-1 outline-none focus:border-indigo-500 min-w-[100px] dark:text-slate-300 placeholder-slate-400 focus:placeholder-indigo-300 transition-all",placeholder:"+ Name & Enter",value:d,onChange:x=>u(x.target.value),onKeyDown:n})]})]})}),Ht=({uploadedFiles:s,onOcrProcess:t,isOcrLoading:r,isProcessing:a,toggleListening:i,isListening:o,triggerFileUpload:d,onAnalyze:u,isReadyForAnalysis:n,isAnalyzeLoading:l})=>e.jsxs("div",{className:"flex-shrink-0 flex items-end gap-3 min-h-[52px]",children:[s.length>0&&e.jsxs("div",{className:"flex-1 flex gap-2 overflow-x-auto custom-scrollbar bg-gray-50 dark:bg-slate-900 p-1.5 rounded-xl border border-gray-200 dark:border-slate-800 animate-in fade-in slide-in-from-bottom-2",children:[s.map(x=>e.jsxs("div",{className:"relative group w-10 h-10 flex-shrink-0 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-100 dark:border-slate-700 flex items-center justify-center overflow-hidden transition-transform hover:scale-105",children:[e.jsx(f,{name:"FileText",size:16,className:"text-indigo-500"}),x.status==="processing"&&e.jsx("div",{className:"absolute inset-0 bg-white/50 flex items-center justify-center",children:e.jsx(f,{name:"Loader",size:14,className:"animate-spin text-indigo-600"})}),x.status==="success"&&e.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-emerald-500 rounded-full animate-ping-once"})]},x.id)),e.jsxs("button",{onClick:t,disabled:r||a,className:"px-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-[10px] font-bold shadow-md transition-all active:scale-95 disabled:opacity-50",children:["Process ",s.filter(x=>x.status==="pending").length]})]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsxs("button",{onClick:i,className:`px-4 h-[48px] rounded-xl text-xs font-bold flex items-center gap-2 transition-all shadow-sm border active:scale-95 ${o?"bg-red-50 text-red-600 border-red-200 animate-pulse":"bg-white dark:bg-slate-900 text-slate-600 dark:text-slate-300 border-gray-200 dark:border-slate-700 hover:border-indigo-500"}`,children:[e.jsx(f,{name:"Mic",size:18}),e.jsx("span",{className:"hidden md:inline",children:o?"Recording...":"Dictate"})]}),e.jsxs("button",{onClick:d,className:"px-4 h-[48px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 hover:border-indigo-500 text-slate-600 dark:text-slate-300 rounded-xl text-xs font-bold flex items-center gap-2 shadow-sm transition-all active:scale-95",children:[e.jsx(f,{name:"UploadCloud",size:18}),e.jsx("span",{className:"hidden md:inline",children:"Upload"})]}),e.jsxs("button",{onClick:u,disabled:!n,className:`px-6 h-[48px] rounded-xl font-bold transition-all flex items-center gap-2 shadow-lg ${n?"btn-shrimp text-white active:scale-95 hover:shadow-indigo-500/40":"bg-gray-200 dark:bg-slate-800 text-slate-400 cursor-not-allowed"}`,children:[l?e.jsx(Pt,{className:"text-white"}):e.jsx(f,{name:"Wand2",size:18}),e.jsx("span",{children:"Analyze"})]})]})]}),qt=()=>{const{knowledgeBase:s,standards:t,standardKey:r}=re(),{getActiveKey:a}=fe();return async o=>{var u;const d=new CustomEvent("OPEN_REFERENCE",{detail:o});if(window.dispatchEvent(d),s){const n=yt.extractClauseContent(s,o.code,o.title);if(n&&n.length>20){setTimeout(()=>{const l=new CustomEvent("UPDATE_REFERENCE_CONTENT",{detail:{en:n,vi:`[SOURCE DOCUMENT EXTRACT]

${n}

(Auto-translated view not available in Offline Mode)`}});window.dispatchEvent(l)},300);return}else console.warn(`[Local Lookup] Could not find clause ${o.code} in source document. Falling back to AI.`)}try{const n=((u=t[r])==null?void 0:u.name)||"",l=a(),x=(l==null?void 0:l.key)||"",g=await St(o,n,s,x),k=new CustomEvent("UPDATE_REFERENCE_CONTENT",{detail:g});window.dispatchEvent(k)}catch(n){console.error("Reference Fetch Failed",n);const l=new CustomEvent("UPDATE_REFERENCE_CONTENT",{detail:{en:"Failed to load content. Ensure API Key is valid or source document is attached.",vi:""}});window.dispatchEvent(l)}}},Jt=({evidence:s,setEvidence:t,uploadedFiles:r,setUploadedFiles:a,isOcrLoading:i,onAnalyze:o,isReadyForAnalysis:d,isAnalyzeLoading:u,analyzeTooltip:n,evidenceLanguage:l,selectedClauses:x=[],standards:g,standardKey:k,matrixData:S,setMatrixData:N})=>{const{activeProcess:E,activeProcessId:v,setActiveProcessId:b,processes:p,addInterviewee:m,removeInterviewee:h}=re(),[j,I]=c.useState(!1),[y,T]=c.useState(!1),A=c.useRef({}),B=c.useRef(null),w=c.useRef(null),R=qt(),_=c.useMemo(()=>{const F=S?Object.keys(S):[];return Array.from(new Set([...x,...F]))},[x,S]),D=c.useCallback(F=>{F&&w.current?w.current.handleExternalDictation(F):alert("Please select a Requirement row in the Matrix first.")},[]),{isListening:O,toggleListening:z}=Vt(l,D),K=c.useCallback((F,G)=>{var J;const U=G||((J=w.current)==null?void 0:J.getActiveRow());if(!U){alert("Please click/focus on a specific Requirement row to attach files.");return}const H=F.map(Z=>{const se=Math.random().toString(36).substr(2,9);return A.current[se]=U,{id:se,file:Z,status:"pending"}});a(Z=>[...Z,...H])},[a]),$=c.useCallback(F=>{a(G=>G.filter(U=>U.id!==F)),delete A.current[F]},[a]),V=c.useCallback(async()=>{const F=r.filter(G=>G.status==="pending"||G.status==="error");if(F.length!==0){T(!0);for(const G of F)try{a(H=>H.map(J=>J.id===G.id?{...J,status:"processing"}:J));let U="";if(G.file.type.startsWith("image/")){const H=await bt(G.file);U=await Et("Transcribe text.",H,G.file.type)}else G.file.type==="application/pdf"?U="[PDF Content extracted via OCR would go here - System limitation]":U=await G.file.text();if(U&&w.current){const H=A.current[G.id];if(H){const J=`[File: ${G.file.name}]`;w.current.insertEvidence(H.clauseId,H.rowId,`${J}
${U}`),a(Z=>Z.filter(se=>se.id!==G.id))}}}catch(U){console.error("Matrix OCR Error",U),a(H=>H.map(J=>J.id===G.id?{...J,status:"error",error:U.message||"Failed"}:J))}T(!1)}},[r,a]),Y=c.useCallback(F=>{F.preventDefault(),I(!0)},[]),te=c.useCallback(F=>{F.preventDefault(),I(!1)},[]),ie=c.useCallback(F=>{F.preventDefault(),I(!1),F.dataTransfer.files&&F.dataTransfer.files.length>0&&K(Array.from(F.dataTransfer.files))},[K]);return e.jsxs("div",{className:"h-full flex flex-col gap-2 md:gap-3 animate-fade-in-up relative p-1",children:[e.jsx(Gt,{processes:p,activeProcessId:v,activeProcess:E,setActiveProcessId:F=>b(F),addInterviewee:m,removeInterviewee:h}),e.jsxs("div",{className:"flex-1 flex flex-col gap-2 min-h-0 relative",children:[e.jsx("input",{type:"file",ref:B,className:"hidden",accept:"image/*,application/pdf,text/plain",multiple:!0,onChange:F=>F.target.files&&K(Array.from(F.target.files))}),e.jsxs("div",{className:`flex-1 bg-white dark:bg-slate-900 rounded-2xl shadow-sm border overflow-hidden flex flex-row relative group transition-all duration-300 dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_4px_6px_-1px_rgba(0,0,0,0.5)] ${j?"border-indigo-500 ring-4 ring-indigo-500/20 bg-indigo-50/10":"border-gray-100 dark:border-transparent"}`,onDragOver:Y,onDragLeave:te,onDrop:ie,children:[j&&e.jsxs("div",{className:"absolute inset-0 bg-indigo-500/10 backdrop-blur-[2px] z-50 flex flex-col items-center justify-center pointer-events-none animate-in fade-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"p-6 rounded-full bg-white dark:bg-slate-900 shadow-2xl border-4 border-dashed border-indigo-500",children:e.jsx(f,{name:"UploadCloud",size:48,className:"text-indigo-600 animate-bounce"})}),e.jsx("h3",{className:"mt-4 text-xl font-black text-indigo-700 dark:text-indigo-400 uppercase tracking-widest text-center",children:"Drop Files to Active Row"})]}),g&&k&&g[k]&&S&&N?e.jsx("div",{className:"flex-1 w-full h-full p-1",children:e.jsx(Kt,{ref:w,standard:g[k],selectedClauses:_,matrixData:S,setMatrixData:N,onPasteFiles:K,uploadedFiles:r,onRemoveFile:$,onLookup:R})}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400",children:[e.jsx(f,{name:"LayoutList",size:48,className:"mb-4 opacity-30"}),e.jsx("p",{children:"Please select a Standard to view the Matrix."})]})]}),e.jsx(Ht,{uploadedFiles:r,onOcrProcess:V,isOcrLoading:i,isProcessing:y,toggleListening:z,isListening:O,triggerFileUpload:()=>{var F;return(F=B.current)==null?void 0:F.click()},onAnalyze:o,isReadyForAnalysis:d,isAnalyzeLoading:u})]})]})},Xt=({analysisResult:s,setAnalysisResult:t,selectedFindings:r,setSelectedFindings:a,isAnalyzeLoading:i,loadingMessage:o,currentAnalyzingClause:d,viewMode:u,setViewMode:n,focusedFindingIndex:l,setFocusedFindingIndex:x,onExport:g,notesLanguage:k,setNotesLanguage:S})=>{const N=c.useRef(null),E=c.useRef([]);c.useEffect(()=>{u==="list"&&N.current&&(N.current.scrollTop=N.current.scrollHeight)},[s==null?void 0:s.length,u]);const v=(m,h,j)=>{if(t(I=>{if(!I)return null;const y=[...I];return y[m]={...y[m],[h]:j},y}),h==="status"&&s){const I=m+1;I<s.length&&E.current[I]&&setTimeout(()=>{var y;return(y=E.current[I])==null?void 0:y.scrollIntoView({behavior:"smooth",block:"center"})},100)}},b=m=>{switch(m){case"COMPLIANT":return{bg:"bg-emerald-500",text:"text-emerald-700 dark:text-emerald-300",pill:"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300",border:"border-emerald-500",headerText:"text-emerald-600 dark:text-emerald-400 border-emerald-600 dark:border-emerald-400"};case"NC_MAJOR":return{bg:"bg-red-600",text:"text-red-700 dark:text-red-300",pill:"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300",border:"border-red-600",headerText:"text-red-600 dark:text-red-400 border-red-600 dark:border-red-400"};case"NC_MINOR":return{bg:"bg-orange-500",text:"text-orange-700 dark:text-orange-300",pill:"bg-orange-100 dark:bg-orange-900/40 text-orange-700 dark:text-orange-300",border:"border-orange-500",headerText:"text-orange-500 dark:text-orange-400 border-orange-500 dark:border-orange-400"};case"OFI":return{bg:"bg-blue-500",text:"text-blue-700 dark:text-blue-300",pill:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300",border:"border-blue-500",headerText:"text-blue-600 dark:text-blue-400 border-blue-600 dark:border-blue-400"};default:return{bg:"bg-slate-500",text:"text-slate-600",pill:"bg-slate-100 text-slate-500",border:"border-slate-300",headerText:"text-slate-500 border-slate-300"}}},p=(m,h,j=!1)=>{const I=b(m.status);return e.jsxs("div",{ref:j?null:y=>{E.current[h]=y},className:`group relative bg-white dark:bg-slate-900 rounded-lg p-3 border-y border-r border-l-[6px] transition-all duration-300 hover:shadow-md dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05)] ${I.border} ${r[m.clauseId]?"border-r-indigo-500 ring-1 ring-indigo-500/20":"border-r-gray-100 dark:border-r-transparent"} animate-in slide-in-from-bottom-2 fade-in fill-mode-backwards`,style:{animationDelay:`${h*50}ms`},onClick:()=>a(y=>({...y,[m.clauseId]:!y[m.clauseId]})),children:[e.jsx("div",{className:"absolute top-3 right-3 z-10",children:r[m.clauseId]?e.jsx("div",{className:"animate-in zoom-in spin-in-180 duration-300",children:e.jsx(f,{name:"CheckThick",size:22,className:"text-emerald-500 drop-shadow-sm"})}):e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-200 dark:border-slate-700 group-hover:border-indigo-300 transition-colors"})}),e.jsxs("div",{className:"pr-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-500 dark:text-slate-400 bg-gray-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:m.clauseId}),e.jsx("div",{className:"relative group/badge",onClick:y=>y.stopPropagation(),children:e.jsxs("select",{value:m.status,onChange:y=>v(h,"status",y.target.value),className:`appearance-none cursor-pointer text-[9px] font-black uppercase tracking-wider px-2 py-0.5 rounded-full ${I.pill} border-none outline-none hover:brightness-95 text-center transition-all`,children:[e.jsx("option",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white",value:"COMPLIANT",children:"COMPLIANT"}),e.jsx("option",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white",value:"NC_MINOR",children:"MINOR"}),e.jsx("option",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white",value:"NC_MAJOR",children:"MAJOR"}),e.jsx("option",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white",value:"OFI",children:"OFI"})]})}),m.crossRefs&&m.crossRefs.length>0&&e.jsx("div",{className:"flex gap-1",children:m.crossRefs.map((y,T)=>e.jsx("span",{className:"text-[8px] border border-indigo-200 dark:border-indigo-800 text-indigo-500 dark:text-indigo-400 px-1.5 py-0.5 rounded-md font-mono bg-indigo-50 dark:bg-indigo-900/10",children:y},T))})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-950/50 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[e.jsx("strong",{className:"block text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider mb-1",children:"Evidence:"}),e.jsx("p",{className:"text-xs text-slate-700 dark:text-slate-300 leading-relaxed",children:m.evidence})]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-3 rounded-xl border-2 border-slate-100 dark:border-slate-800 hover:border-indigo-200 dark:hover:border-indigo-900/50 transition-colors group-focus-within:border-indigo-500 shadow-sm",onClick:y=>y.stopPropagation(),children:[e.jsx("strong",{className:"block text-[10px] font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wider mb-1",children:"Conclusion:"}),e.jsx("textarea",{value:m.reason,onChange:y=>v(h,"reason",y.target.value),className:"w-full bg-transparent outline-none text-xs text-slate-800 dark:text-slate-200 leading-relaxed resize-none h-auto min-h-[60px]",placeholder:"Enter conclusion..."})]})}),m.suggestion&&e.jsxs("div",{className:"flex gap-1.5 items-start",children:[e.jsx(f,{name:"Lightbulb",size:12,className:"text-amber-500 mt-0.5 shrink-0"}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 italic leading-tight",children:m.suggestion})]})]})]},h)};return e.jsxs("div",{className:"h-full flex flex-col gap-2 md:gap-4 animate-fade-in-up",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-1",ref:N,children:[!s&&!i&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 opacity-60",children:[e.jsx(f,{name:"Wand2",size:48,className:"mb-4 text-gray-200 dark:text-slate-700"}),e.jsx("p",{children:"No analysis results yet."})]}),i&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative w-24 h-24 mb-6",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-indigo-100 dark:border-indigo-900/50 rounded-full opacity-50"}),e.jsx("div",{className:"absolute inset-0 border-t-4 border-indigo-500 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-4 border-r-4 border-purple-500 rounded-full animate-spin-reverse opacity-70"})]}),e.jsx("h3",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 to-purple-500 animate-pulse mb-2",children:"AI Analysis In Progress"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium mb-1",children:o}),e.jsx("p",{className:"text-xs text-slate-400 font-mono",children:d&&`Processing: [${d}]`})]}),s&&(u==="list"?e.jsx("div",{className:"space-y-3",children:s.map((m,h)=>p(m,h))}):e.jsxs("div",{className:"flex flex-col h-full gap-4",children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col bg-gray-50 dark:bg-slate-900/50 rounded-xl border border-gray-100 dark:border-slate-800 overflow-hidden max-h-[40vh]",children:[e.jsxs("div",{className:"grid grid-cols-[60px_1fr_1fr_1fr_1fr] gap-1 p-2 border-b border-gray-200 dark:border-slate-800 bg-white dark:bg-slate-900 sticky top-0 z-10",children:[e.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest text-center",children:"Clause"}),e.jsx("div",{className:"text-[10px] font-bold text-red-500 uppercase tracking-widest text-center",children:"Major"}),e.jsx("div",{className:"text-[10px] font-bold text-orange-500 uppercase tracking-widest text-center",children:"Minor"}),e.jsx("div",{className:"text-[10px] font-bold text-blue-500 uppercase tracking-widest text-center",children:"OFI"}),e.jsx("div",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-widest text-center",children:"Comp"})]}),e.jsx("div",{className:"overflow-y-auto custom-scrollbar",children:s.map((m,h)=>{const j=l===h;return e.jsxs("div",{onClick:()=>x(h),className:`grid grid-cols-[60px_1fr_1fr_1fr_1fr] gap-1 py-1.5 border-b border-gray-100 dark:border-slate-800/50 cursor-pointer transition-colors ${j?"bg-indigo-50 dark:bg-indigo-900/20":"hover:bg-white dark:hover:bg-slate-800"}`,children:[e.jsx("div",{className:`flex items-center justify-center h-full w-full text-[10px] font-mono font-bold ${j?"text-indigo-600 dark:text-indigo-400":"text-slate-500 dark:text-slate-400"}`,children:m.clauseId}),e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:m.status==="NC_MAJOR"&&e.jsx("div",{className:"w-3 h-3 rounded bg-red-500 shadow-sm ring-1 ring-red-300 dark:ring-red-900"})}),e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:m.status==="NC_MINOR"&&e.jsx("div",{className:"w-3 h-3 rounded bg-orange-500 shadow-sm ring-1 ring-orange-300 dark:ring-orange-900"})}),e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:m.status==="OFI"&&e.jsx("div",{className:"w-3 h-3 rounded bg-blue-500 shadow-sm ring-1 ring-blue-300 dark:ring-blue-900"})}),e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:m.status==="COMPLIANT"&&e.jsx("div",{className:"w-3 h-3 rounded bg-emerald-500 shadow-sm ring-1 ring-emerald-300 dark:ring-emerald-900"})})]},h)})})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto custom-scrollbar bg-white dark:bg-slate-900 rounded-2xl border border-gray-100 dark:border-slate-800 p-2 shadow-inner",children:s[l]?p(s[l],l,!0):e.jsx("div",{className:"h-full flex items-center justify-center text-slate-400 italic text-xs",children:"Select a row above to view details"})})]}))]}),e.jsxs("div",{className:"flex-shrink-0 flex flex-row items-center md:justify-end gap-2 md:gap-3 w-full pt-2",children:[e.jsxs("div",{className:"flex-1 md:flex-none md:w-auto h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-xl p-1 flex items-center shadow-sm min-w-0 dark:shadow-md",children:[e.jsxs("button",{onClick:()=>n("list"),className:`flex-1 md:flex-none md:w-auto h-full px-3 rounded-lg flex items-center justify-center gap-2 transition-all whitespace-nowrap ${u==="list"?"bg-indigo-100 text-indigo-700 shadow-sm dark:bg-indigo-900/40 dark:text-indigo-300":"text-slate-400 hover:text-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700/50"}`,title:"List View",children:[e.jsx(f,{name:"LayoutList",size:18}),e.jsx("span",{className:"hidden md:inline text-xs font-bold",children:"List"})]}),e.jsxs("button",{onClick:()=>n("matrix"),className:`flex-1 md:flex-none md:w-auto h-full px-3 rounded-lg flex items-center justify-center gap-2 transition-all whitespace-nowrap ${u==="matrix"?"bg-indigo-100 text-indigo-700 shadow-sm dark:bg-indigo-900/40 dark:text-indigo-300":"text-slate-400 hover:text-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700/50"}`,title:"Matrix View",children:[e.jsx(f,{name:"Grid",size:18}),e.jsx("span",{className:"hidden md:inline text-xs font-bold",children:"Matrix"})]})]}),e.jsxs("button",{onClick:()=>g("notes",k),disabled:!s,className:"flex-none md:w-auto px-3 md:px-4 h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm disabled:opacity-50 whitespace-nowrap dark:shadow-md",children:[e.jsx(f,{name:"Download"}),e.jsx("span",{className:"hidden md:inline",children:"Export"}),e.jsxs("div",{className:"lang-pill-container",children:[e.jsx("span",{onClick:m=>{m.stopPropagation(),S("en")},className:`lang-pill-btn ${k==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:m=>{m.stopPropagation(),S("vi")},className:`lang-pill-btn ${k==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]})]})]})},Qt=({finalReportText:s,setFinalReportText:t,isReportLoading:r,loadingMessage:a,templateFileName:i,handleTemplateUpload:o,handleGenerateReport:d,isReadyToSynthesize:u,onExport:n,exportLanguage:l,setExportLanguage:x})=>e.jsxs("div",{className:"h-full flex flex-col gap-2 md:gap-4 animate-fade-in-up",children:[e.jsx("div",{className:"flex-1 bg-white dark:bg-slate-900 rounded-3xl shadow-sm border border-gray-100 dark:border-transparent overflow-hidden flex flex-col dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_4px_6px_-1px_rgba(0,0,0,0.5)]",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("textarea",{className:"w-full h-full p-4 resize-none bg-transparent focus:outline-none text-slate-700 dark:text-slate-300 text-sm leading-relaxed font-mono",value:s||"",onChange:g=>t(g.target.value),placeholder:"The final synthesized audit report will appear here..."}),!s&&!r&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none opacity-40",children:[e.jsx(f,{name:"FileText",size:48,className:"text-slate-300 dark:text-slate-600 mb-2"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Ready to generate report"})]}),r&&e.jsx(_t,{message:a})]})}),e.jsxs("div",{className:"flex-shrink-0 flex flex-row items-center md:justify-end gap-2 md:gap-3 w-full pt-2",children:[e.jsxs("label",{className:"flex-none w-[52px] md:w-auto px-0 md:px-4 h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 cursor-pointer transition-all duration-300 active:scale-95 shadow-sm group whitespace-nowrap dark:shadow-md",title:i||"Upload Template",children:[e.jsx(f,{name:"UploadCloud",size:20,className:i?"text-emerald-500":""}),e.jsx("span",{className:"hidden lg:inline",children:i?"Template Loaded":"Upload Template"}),e.jsx("input",{type:"file",accept:".txt,.docx",className:"hidden",onChange:o})]}),e.jsxs("button",{onClick:d,disabled:!u,className:`flex-1 md:flex-none md:w-auto md:px-6 h-[52px] rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg whitespace-nowrap ${u?"btn-shrimp text-white active:scale-95 border-indigo-700":"bg-gray-200 dark:bg-slate-800 text-slate-400 dark:text-slate-600 opacity-70 cursor-not-allowed border-transparent"}`,title:"Synthesize Report",children:[r?e.jsx(f,{name:"Loader",className:"animate-spin text-white",size:20}):e.jsx(f,{name:"Wand2",size:20,className:"hidden md:block"}),e.jsx("span",{className:"inline text-xs uppercase tracking-wider",children:"Synthesize"})]}),e.jsxs("button",{onClick:()=>n("report",l),disabled:!s,className:"flex-none md:w-auto px-3 md:px-4 h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-950 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm disabled:opacity-50 whitespace-nowrap dark:shadow-md",children:[e.jsx(f,{name:"Download"}),e.jsx("span",{className:"hidden md:inline",children:"Export"}),e.jsxs("div",{className:"lang-pill-container",children:[e.jsx("span",{onClick:g=>{g.stopPropagation(),x("en")},className:`lang-pill-btn ${l==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:g=>{g.stopPropagation(),x("vi")},className:`lang-pill-btn ${l==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]})]})]}),Ve=s=>{let t=[s.id];return s.subClauses&&s.subClauses.forEach(r=>{t=[...t,...Ve(r)]}),t},Yt=c.memo(({clause:s,level:t,processes:r,isExpanded:a,onToggleDescription:i,onCopyCitation:o,onSmartToggle:d})=>{const u=c.useMemo(()=>Ve(s),[s]),n=s.subClauses&&s.subClauses.length>0;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/30 transition-colors group",children:[e.jsx("td",{className:"p-2 border-r border-gray-100 dark:border-slate-800 sticky left-0 bg-white dark:bg-slate-900 group-hover:bg-gray-50 dark:group-hover:bg-slate-800/30 z-10 align-top",children:e.jsxs("div",{className:`flex flex-col gap-1 ${t>0?"ml-4 border-l-2 border-gray-200 dark:border-slate-800 pl-2":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold whitespace-nowrap ${t===0?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 border border-indigo-100 dark:border-indigo-800":"text-slate-400"}`,children:s.code}),e.jsx("span",{className:`text-xs truncate ${t===0?"font-bold text-slate-800 dark:text-slate-200":"font-medium text-slate-600 dark:text-slate-400"}`,children:s.title})]}),t===0&&e.jsxs("div",{className:"relative group/desc pr-4",children:[e.jsx("div",{onClick:()=>i(s.id),className:`text-[10px] text-slate-500 dark:text-slate-400 mt-1 cursor-pointer hover:text-slate-800 dark:hover:text-slate-200 transition-colors font-serif italic text-left whitespace-pre-wrap leading-relaxed ${a?"":"line-clamp-3"}`,title:"Click to toggle full text",children:s.description}),e.jsx("button",{onClick:l=>{l.stopPropagation(),o(s.description)},className:"absolute top-0 right-0 opacity-0 group-hover/desc:opacity-100 transition-opacity p-1 text-slate-400 hover:text-indigo-600 bg-white/80 dark:bg-slate-900/80 rounded",title:"Copy Citation",children:e.jsx(f,{name:"Copy",size:12})})]})]})}),r.map(l=>{let x="none";if(n){const g=u.reduce((k,S)=>k+(l.matrixData[S]?1:0),0);g===u.length?x="all":g>0&&(x="some")}else x=l.matrixData[s.id]?"all":"none";return e.jsx("td",{className:"p-1 text-center border-r border-gray-50 dark:border-slate-800/50 last:border-0 relative align-middle",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:()=>d(l.id,s),className:`w-8 h-8 rounded-lg flex items-center justify-center transition-all duration-200 ${x==="all"?"bg-emerald-500 text-white shadow-sm shadow-emerald-500/40 transform scale-105":x==="some"?"bg-orange-100 dark:bg-orange-900/30 text-orange-500 border border-orange-200 dark:border-orange-800":"bg-slate-50 dark:bg-slate-800/50 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-300"}`,title:x==="all"?"Fully Planned":x==="some"?"Partially Planned (Click to Fill)":"Click to Plan",children:[x==="all"&&(n?e.jsx(f,{name:"CheckCircle2",size:14}):e.jsx(f,{name:"CheckThick",size:14})),x==="some"&&e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-orange-500"})]})})},`${l.id}_${s.id}`)})]})},(s,t)=>s.isExpanded!==t.isExpanded||s.processes.length!==t.processes.length?!1:!s.processes.some((a,i)=>{const o=t.processes[i];return a.matrixData!==o.matrixData})),Zt=({standardName:s,coveragePercent:t,coverageCovered:r,coverageTotal:a,search:i,setSearch:o,onImport:d,onExportTemplate:u,onExportTxt:n,onSetSidebarOpen:l,hasStandard:x})=>{const g=c.useRef(null),k=c.useRef(null),[S,N]=c.useState(!1),E=24,v=2*Math.PI*E,b=v-t/100*v;return x?e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm flex flex-col md:flex-row gap-4 items-center justify-between shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative w-16 h-16 flex items-center justify-center shrink-0",children:[e.jsxs("svg",{className:"transform -rotate-90 w-16 h-16",children:[e.jsx("circle",{cx:"32",cy:"32",r:E,stroke:"currentColor",strokeWidth:"6",fill:"transparent",className:"text-gray-100 dark:text-slate-800"}),e.jsx("circle",{cx:"32",cy:"32",r:E,stroke:"currentColor",strokeWidth:"6",fill:"transparent",strokeDasharray:v,strokeDashoffset:b,className:"text-indigo-500 transition-all duration-1000 ease-out",strokeLinecap:"round"})]}),e.jsxs("span",{className:"absolute text-xs font-black text-slate-700 dark:text-white",children:[t,"%"]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:s}),e.jsxs("p",{className:"text-xs text-slate-500",children:[e.jsx("span",{className:"font-bold text-indigo-500",children:r})," of ",a," clauses mapped."]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 md:w-64 group",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-indigo-500 transition-colors",children:e.jsx(f,{name:"Search",size:16})}),e.jsx("input",{ref:k,className:"w-full pl-10 pr-8 py-2.5 bg-white dark:bg-slate-950 border border-indigo-100 dark:border-slate-700 rounded-xl text-sm font-bold text-slate-800 dark:text-slate-200 placeholder-slate-400 outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/10 transition-all shadow-sm",placeholder:"Filter clauses...",value:i,onChange:p=>o(p.target.value)}),i&&e.jsx("button",{onClick:()=>{var p;o(""),(p=k.current)==null||p.focus()},className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-slate-400 hover:text-red-500 transition-colors",children:e.jsx(f,{name:"X",size:14})})]}),e.jsx("input",{type:"file",ref:g,className:"hidden",accept:".json",onChange:p=>{var m;(m=p.target.files)!=null&&m[0]&&d(p.target.files[0]),p.target.value=""}}),e.jsx("button",{onClick:()=>{var p;return(p=g.current)==null?void 0:p.click()},className:"p-2.5 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-xl text-slate-600 dark:text-slate-300 shadow-sm active:scale-95 transition-all hover:border-indigo-300 dark:hover:border-slate-600",title:"Import Plan",children:e.jsx(f,{name:"UploadCloud",size:18})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>N(!S),className:"p-2.5 px-4 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-xl text-slate-600 dark:text-slate-300 shadow-sm active:scale-95 transition-all hover:border-indigo-300 dark:hover:border-slate-600 flex items-center gap-2",title:"Export Options",children:[e.jsx(f,{name:"Download",size:18}),e.jsx("span",{className:"text-xs font-bold hidden md:inline",children:"Export"})]}),S&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-20",onClick:()=>N(!1)}),e.jsxs("div",{className:"absolute top-full right-0 mt-2 z-[60] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-xl shadow-xl w-48 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-slate-950 border-b border-gray-100 dark:border-slate-800 text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Select Export Format"}),e.jsxs("button",{onClick:()=>{u(),N(!1)},className:"w-full text-left px-4 py-3 text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 hover:text-indigo-600 dark:hover:text-indigo-400 flex items-center gap-2 transition-colors",children:[e.jsx(f,{name:"Grid",size:16})," JSON (Template)"]}),e.jsxs("button",{onClick:()=>{n(),N(!1)},className:"w-full text-left px-4 py-3 text-sm font-medium text-slate-700 dark:text-slate-300 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 hover:text-indigo-600 dark:hover:text-indigo-400 flex items-center gap-2 transition-colors",children:[e.jsx(f,{name:"FileText",size:16})," TXT (Scope Text)"]})]})]})]})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 bg-gray-50/30 dark:bg-slate-900/30 rounded-2xl border border-dashed border-gray-200 dark:border-slate-800 m-4",children:[e.jsx(f,{name:"Book",size:48,className:"mb-4 opacity-20"}),e.jsx("p",{className:"font-bold text-slate-500",children:"No Standard Selected"}),e.jsxs("button",{onClick:()=>l(!0),className:"mt-6 px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow-lg text-xs font-bold flex items-center gap-2",children:[e.jsx(f,{name:"LayoutList",size:16})," Select Standard"]})]})},es=s=>{const t=s.toUpperCase();return t.includes("PLAN")?"bg-orange-50 dark:bg-orange-900/20 text-orange-800 dark:text-orange-300 border-orange-200 dark:border-orange-800":t.includes("SUPPORT")?"bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 border-blue-200 dark:border-blue-800":t.includes("DO")?"bg-cyan-50 dark:bg-cyan-900/20 text-cyan-800 dark:text-cyan-300 border-cyan-200 dark:border-cyan-800":t.includes("CHECK")||t.includes("ACT")?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800":t.includes("ANNEX")?"bg-purple-50 dark:bg-purple-900/20 text-purple-800 dark:text-purple-300 border-purple-200 dark:border-purple-800":"bg-gray-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 border-gray-200 dark:border-slate-700"},ts=s=>{const t=[],r=(a,i)=>{a.forEach(o=>{t.push({clause:o,level:i}),o.subClauses&&r(o.subClauses,i+1)})};return r(s,0),t},Ge=s=>{let t=[s.id];return s.subClauses&&s.subClauses.forEach(r=>{t=[...t,...Ge(r)]}),t},ss=()=>{const{standards:s,standardKey:t,processes:r,addProcess:a,batchUpdateProcessClauses:i,toggleProcessClause:o}=re(),{showToast:d,setSidebarOpen:u}=ne(),[n,l]=c.useState(""),[x,g]=c.useState(new Set),[k,S]=c.useState(new Set),N=s[t],E=c.useCallback((w,R)=>{const _=r.find(z=>z.id===w);if(!_)return;const D=Ge(R);if(!(D.length>1))o(w,R.id);else if(D.reduce(($,V)=>$+(_.matrixData[V]?1:0),0)===D.length)D.forEach($=>{_.matrixData[$]&&o(w,$)});else{const $=D.filter(V=>!_.matrixData[V]);$.length>0&&i([{processId:w,clauses:$}])}},[r,o,i]),v=(w,R,_)=>{w.stopPropagation();const D=[],O=$=>$.forEach(V=>{D.push(V.id),V.subClauses&&O(V.subClauses)});O(_);const z=r.find($=>$.id===R);if(!z)return;if(D.every($=>!!z.matrixData[$]))D.forEach($=>{z.matrixData[$]&&o(R,$)});else{const $=D.filter(V=>!z.matrixData[V]);i([{processId:R,clauses:$}])}},b=w=>{g(R=>{const _=new Set(R);return _.has(w)?_.delete(w):_.add(w),_})},p=c.useCallback(w=>{S(R=>{const _=new Set(R);return _.has(w)?_.delete(w):_.add(w),_})},[]),m=c.useCallback(w=>{Se(w),d("Citation copied!")},[d]),h=c.useMemo(()=>N?N.groups.every(w=>x.has(w.id)):!1,[N,x]),j=()=>{if(!N)return;const w=N.groups.map(R=>R.id);g(h?new Set:new Set(w))},I=c.useMemo(()=>{if(!N)return{percent:0,covered:0,total:0};let w=0;const R=D=>D.forEach(O=>{w++,O.subClauses&&R(O.subClauses)});if(N.groups.forEach(D=>R(D.clauses)),w===0)return{percent:0,covered:0,total:0};const _=new Set;return r.forEach(D=>{Object.keys(D.matrixData).forEach(O=>_.add(O))}),{percent:Math.round(_.size/w*100),covered:_.size,total:w}},[N,r]),y=c.useMemo(()=>{if(!N)return[];if(!n)return N.groups;const w=n.toLowerCase();return N.groups.map(R=>{const _=R.clauses.filter(D=>{var K;const O=D.code.toLowerCase().includes(w)||D.title.toLowerCase().includes(w),z=(K=D.subClauses)==null?void 0:K.some($=>$.code.toLowerCase().includes(w)||$.title.toLowerCase().includes(w));return O||z});return _.length>0?{...R,clauses:_}:null}).filter(R=>R!==null)},[N,n]),T=()=>{if(r.length===0){d("No processes to export.");return}const w=r.map(D=>({name:D.name,clauses:Object.keys(D.matrixData)})),R=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),_=document.createElement("a");_.href=URL.createObjectURL(R),_.download=`${ge(N.name)}_Plan.json`,document.body.appendChild(_),_.click(),document.body.removeChild(_),d("JSON Template exported.")},A=()=>{if(r.length===0){d("No data to export.");return}const w={},R=z=>z.forEach(K=>{w[K.id]=K.code,K.subClauses&&R(K.subClauses)});N==null||N.groups.forEach(z=>R(z.clauses));let _="";r.forEach(z=>{const K=Object.keys(z.matrixData).map($=>w[$]||$).sort(($,V)=>$.localeCompare(V,void 0,{numeric:!0,sensitivity:"base"}));K.length>0&&(_+=`Process: ${z.name}
`,_+=`List chosen clause: [${K.join(", ")}]

`)});const D=new Blob([_],{type:"text/plain"}),O=document.createElement("a");O.href=URL.createObjectURL(D),O.download=`${ge(N.name)}_Scope.txt`,document.body.appendChild(O),O.click(),document.body.removeChild(O),d("TXT Scope exported.")},B=w=>{const R=new FileReader;R.onload=_=>{var D;try{const O=(D=_.target)==null?void 0:D.result,z=JSON.parse(O);if(!Array.isArray(z))throw new Error("Invalid format");z.forEach(K=>{K.name&&a(K.name)}),d(`Imported ${z.length} processes structure.`)}catch{d("Import failed.")}},R.readAsText(w)};return e.jsxs("div",{className:"h-full flex flex-col animate-fade-in-up gap-4 relative",children:[e.jsx(Zt,{standardName:(N==null?void 0:N.name)||"Unknown",coveragePercent:I.percent,coverageCovered:I.covered,coverageTotal:I.total,search:n,setSearch:l,onImport:B,onExportTemplate:T,onExportTxt:A,onSetSidebarOpen:u,hasStandard:!!N}),e.jsx("div",{className:"flex-1 bg-white dark:bg-slate-900 rounded-2xl border border-gray-100 dark:border-slate-800 overflow-hidden shadow-sm relative flex flex-col",children:r.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400",children:[e.jsx("p",{className:"mb-4",children:"No processes defined."}),e.jsx("div",{className:"p-4 border-2 border-dashed border-indigo-200 dark:border-indigo-900/50 rounded-xl bg-indigo-50 dark:bg-indigo-900/10 text-indigo-500",children:"Create processes in the sidebar to begin planning."})]}):e.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar relative",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-slate-950 sticky top-0 z-30 shadow-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border-b border-r border-gray-200 dark:border-slate-800 sticky left-0 bg-gray-50 dark:bg-slate-950 z-40 min-w-[300px] cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors group select-none",onClick:j,title:h?"Click to Expand All":"Click to Collapse All",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:"Clause Reference"})})}),r.map(w=>e.jsx("th",{className:"p-3 text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider border-b border-gray-200 dark:border-slate-800 min-w-[120px] text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("span",{className:"truncate max-w-[100px]",title:w.name,children:w.name}),e.jsx("span",{className:"text-[10px] font-bold bg-indigo-600 text-white px-2 py-0.5 rounded-full shadow-md shadow-indigo-500/30",children:Object.keys(w.matrixData).length})]})},w.id))]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800/50",children:y.map(w=>{const R=x.has(w.id),_=es(w.id),D=c.useMemo(()=>ts(w.clauses),[w.clauses]);return e.jsxs(oe.Fragment,{children:[e.jsxs("tr",{className:`sticky z-20 hover:brightness-95 transition-all ${_}`,children:[e.jsx("td",{className:"p-2 border-r border-black/5 dark:border-white/5 font-black text-xs uppercase tracking-widest sticky left-0 z-20 bg-inherit shadow-sm cursor-pointer",onClick:()=>b(w.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{name:w.icon,size:14,className:"opacity-70"}),w.title]}),e.jsx(f,{name:"ChevronDown",size:14,className:`transition-transform duration-300 ${R?"-rotate-90":"rotate-0"}`})]})}),r.map(O=>{const z=[],K=Y=>Y.forEach(te=>{z.push(te.id),te.subClauses&&K(te.subClauses)});K(w.clauses);const $=r.find(Y=>Y.id===O.id),V=$?z.every(Y=>!!$.matrixData[Y]):!1;return e.jsx("td",{className:"p-2 text-center bg-inherit",children:!R&&e.jsx("button",{onClick:Y=>v(Y,O.id,w.clauses),className:"p-1.5 rounded-lg hover:bg-black/10 dark:hover:bg-white/10 transition-colors opacity-70 hover:opacity-100",title:V?"Deselect Group":"Select Entire Group",children:e.jsx(f,{name:V?"CheckSquare":"Square",size:16})})},`group_action_${O.id}_${w.id}`)})]}),!R&&D.map(({clause:O,level:z})=>e.jsx(Yt,{clause:O,level:z,processes:r,isExpanded:k.has(O.id),onToggleDescription:p,onCopyCitation:m,onSmartToggle:E},O.id))]},w.id)})})]})})})]})},rs=({isOpen:s,onClose:t,clause:r,standardName:a,fullText:i,isLoading:o,onInsert:d})=>{const[u,n]=c.useState("en"),[l,x]=c.useState(!1),[g,k]=c.useState(""),S=u==="en"?i.en:i.vi,N=c.useMemo(()=>{if(!a)return{text:"ISO",colorClass:"bg-gray-100 text-gray-600"};const b=a.match(/\((.*?)\)/),p=b?b[1]:a.split(" ")[0]||"ISO",m=p.toUpperCase();let h="bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300 border-indigo-100 dark:border-indigo-800/50";return m.includes("EMS")||m.includes("14001")?h="bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-700/50":m.includes("QMS")||m.includes("9001")?h="bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-700/50":(m.includes("ISMS")||m.includes("27001"))&&(h="bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-700/50"),{text:p,colorClass:h}},[a]);c.useEffect(()=>{if(!s){k("");return}if(o||!S){k("");return}const b=S.split(`
`);let p=0,m="";const h=setTimeout(()=>{const j=setInterval(()=>{p<b.length?(m+=(b[p]||"")+`
`,k(m),p++):clearInterval(j)},20);return()=>clearInterval(j)},50);return()=>clearTimeout(h)},[s,S,o]);const E=()=>{d(S)},v=()=>{Se(S),x(!0),setTimeout(()=>x(!1),2e3)};return e.jsx(ce,{isOpen:s,title:"Clause Reference",onClose:t,children:e.jsxs("div",{className:"flex flex-col h-full gap-3",children:[r&&e.jsxs("div",{className:"flex items-start gap-3 pb-2 border-b border-gray-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm font-black text-indigo-700 dark:text-indigo-400 uppercase bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded-lg border border-indigo-100 dark:border-indigo-800 shrink-0",children:r.code}),e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-white leading-tight mt-1",children:r.title})]}),o?e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-slate-500 gap-4",children:[e.jsxs("div",{className:"relative w-16 h-16",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-indigo-200 dark:border-indigo-800 rounded-full opacity-20"}),e.jsx("div",{className:"absolute inset-0 border-t-2 border-indigo-600 rounded-full animate-spin"})]}),e.jsx("span",{className:"text-sm font-bold animate-pulse",children:"Consulting Gemini AI Auditor..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded-full border shadow-sm uppercase tracking-wider ${N.colorClass}`,children:N.text}),e.jsxs("div",{className:"lang-pill-container shadow-sm border-gray-200 dark:border-slate-700",children:[e.jsx("span",{onClick:()=>n("en"),className:`lang-pill-btn ${u==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:()=>n("vi"),className:`lang-pill-btn ${u==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("button",{onClick:v,disabled:l,className:`p-2 rounded-xl transition-all hover:scale-110 active:scale-95 disabled:opacity-70 border shadow-sm ${l?"text-emerald-600 border-emerald-200 bg-emerald-50 dark:bg-emerald-900/20":"bg-white dark:bg-slate-800 border-gray-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600"}`,title:l?"Copied!":"Copy to Clipboard",children:e.jsx(f,{name:l?"CheckThick":"Copy",size:16})}),e.jsx("button",{onClick:E,className:"p-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow-lg shadow-indigo-500/20 transition-all hover:scale-110 active:scale-95",title:"Insert Reference into Evidence",children:e.jsx(f,{name:"Quote",size:16})})]})]}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto custom-scrollbar bg-gray-50/50 dark:bg-slate-950/50 rounded-2xl border border-gray-100 dark:border-slate-800 relative shadow-inner text-left",children:e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.jsxs("p",{className:"text-xs md:text-sm text-slate-800 dark:text-slate-200 whitespace-pre-wrap leading-7 font-medium tracking-wide",children:[g,!o&&g!==S&&e.jsx("span",{className:"inline-block w-1.5 h-4 bg-indigo-500 animate-pulse ml-1 align-middle"})]})})})]})]})})},is=({isOpen:s,onClose:t,apiKeys:r,newKeyInput:a,setNewKeyInput:i,isCheckingKey:o,handleAddKey:d,activeKeyId:u,editingKeyId:n,editLabelInput:l,setEditLabelInput:x,handleSaveLabel:g,handleStartEdit:k,handleRefreshStatus:S,handleDeleteKey:N,isAutoCheckEnabled:E,toggleAutoCheck:v})=>{const[b,p]=c.useState("keys"),[m,h]=c.useState("ANALYSIS"),[j,I]=c.useState("");c.useEffect(()=>{s&&b==="prompts"&&I(ue.getPrompt(m).template)},[s,b,m]);const y=()=>{ue.updatePrompt(m,j);const A=document.getElementById("save-prompt-btn");A&&(A.innerText="Saved!",setTimeout(()=>A.innerText="Save Prompt",1e3))},T=()=>{ue.resetToDefault(m),I(ue.getPrompt(m).template)};return e.jsxs(ce,{isOpen:s,title:"Settings & Core Configuration",onClose:t,children:[e.jsxs("div",{className:"flex gap-2 mb-4 border-b border-gray-100 dark:border-slate-800 pb-2",children:[e.jsx("button",{onClick:()=>p("keys"),className:`px-4 py-2 text-xs font-bold rounded-lg transition-colors ${b==="keys"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":"text-slate-500 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:"API Keys"}),e.jsx("button",{onClick:()=>p("prompts"),className:`px-4 py-2 text-xs font-bold rounded-lg transition-colors ${b==="prompts"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":"text-slate-500 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:"AI Prompts"})]}),b==="keys"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-4 rounded-2xl border border-gray-100 dark:border-slate-700 dark:shadow-inner",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-3",children:"API Key Pool Management"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",name:"search_query_custom",id:"custom_search_input_x",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false","data-lpignore":"true",placeholder:"Paste Google Gemini API Key (starts with AIza...)",className:"flex-1 p-2.5 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-600 rounded-xl text-xs font-mono outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500/50 text-slate-800 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 transition-all dark:shadow-[inset_0_1px_2px_rgba(0,0,0,0.5)]",value:a,onChange:A=>i(A.target.value),onKeyDown:A=>A.key==="Enter"&&d()}),e.jsx("button",{onClick:d,disabled:o,className:"p-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold text-xs disabled:opacity-50 transition-colors shadow-sm min-w-[40px] flex items-center justify-center",children:o?e.jsx(f,{name:"Loader",className:"animate-spin"}):e.jsx(f,{name:"Plus"})})]}),e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:[r.map(A=>{let B="bg-slate-300",w="Unknown Status";return A.status==="valid"?(B="bg-emerald-500 shadow-emerald-500/50",w="Active & Working"):A.status==="checking"?(B="bg-yellow-500 animate-pulse",w="Validating..."):A.status==="invalid"?(B="bg-red-500 shadow-red-500/50",w="Invalid / Auth Failed"):A.status==="quota_exceeded"?(B="bg-orange-500",w="Quota Exceeded"):A.status==="referrer_error"?(B="bg-purple-500",w="Referrer Blocked"):A.status==="unknown"&&(B="bg-slate-400 border border-slate-500",w="Network Error"),e.jsxs("div",{className:`flex items-center justify-between p-2.5 rounded-xl border transition-all duration-200 ${A.id===u?"bg-indigo-50 border-indigo-200 dark:bg-indigo-500/20 dark:border-indigo-500/50 shadow-sm":"bg-white border-gray-100 dark:bg-slate-900 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-slate-500"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"relative group/status",title:w,children:e.jsx("div",{className:`w-2.5 h-2.5 flex-shrink-0 rounded-full shadow-sm ring-1 ring-white/10 ${B}`})}),e.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[n===A.id?e.jsx("input",{autoFocus:!0,className:"text-xs font-bold bg-white dark:bg-slate-950 text-slate-900 dark:text-white border-b-2 border-indigo-500 outline-none w-32 px-1 rounded-t",value:l,onChange:R=>x(R.target.value),onBlur:g,onKeyDown:R=>R.key==="Enter"&&g()}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:()=>k(A),className:`text-xs font-bold truncate cursor-pointer transition-colors ${A.id===u?"text-indigo-700 dark:text-indigo-200":"text-slate-700 dark:text-slate-200 hover:text-indigo-500 dark:hover:text-indigo-400"}`,children:A.label}),A.activeModel&&e.jsx("span",{className:"text-[9px] bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 px-1.5 py-0.5 rounded text-slate-500 dark:text-slate-400 font-mono",children:A.activeModel.replace("gemini-","").replace("-preview","")})]}),e.jsxs("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-mono truncate",children:[A.key.substr(0,8),"...******"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>S(A.id),disabled:A.status==="checking",className:`p-1.5 text-slate-400 hover:text-indigo-500 dark:text-slate-500 dark:hover:text-indigo-400 transition-colors ${A.status==="checking"?"animate-spin":""}`,title:"Force Check Quota",children:e.jsx(f,{name:A.status==="checking"?"Loader":"RefreshCw",size:14})}),e.jsx("button",{onClick:R=>{R.stopPropagation(),N(A.id)},className:"p-1.5 text-slate-400 hover:text-red-500 dark:text-slate-500 dark:hover:text-red-400 transition-colors",title:"Delete Key",children:e.jsx(f,{name:"Trash2",size:14})})]})]},A.id)}),r.length===0&&e.jsx("div",{className:"text-center p-4 text-slate-400 text-xs italic",children:"No API Keys found. Add one above to start."})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-900 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm dark:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 rounded-xl",children:e.jsx(f,{name:"Session10_Pulse",size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-white",children:"Smart Quota Rotation"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Auto-check keys every 60s to restore high-tier models."})]})]}),e.jsx("button",{onClick:()=>v(!E),className:`w-10 h-5 rounded-full transition-colors relative ${E?"bg-emerald-500":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all shadow-sm ${E?"left-6":"left-1"}`})})]})]}),b==="prompts"&&e.jsxs("div",{className:"flex flex-col h-[60vh]",children:[e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{onClick:()=>h("ANALYSIS"),className:`flex-1 py-2 text-xs font-bold rounded-lg border ${m==="ANALYSIS"?"bg-indigo-100 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-200":"border-gray-200 dark:border-slate-700 text-slate-500"}`,children:"Analysis Logic"}),e.jsx("button",{onClick:()=>h("REPORT"),className:`flex-1 py-2 text-xs font-bold rounded-lg border ${m==="REPORT"?"bg-indigo-100 border-indigo-200 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-200":"border-gray-200 dark:border-slate-700 text-slate-500"}`,children:"Report Format"})]}),e.jsx("div",{className:"flex-1 relative border border-gray-200 dark:border-slate-700 rounded-xl overflow-hidden",children:e.jsx("textarea",{className:"w-full h-full p-4 bg-gray-50 dark:bg-slate-950 text-xs font-mono text-slate-700 dark:text-slate-300 resize-none outline-none leading-relaxed",value:j,onChange:A=>I(A.target.value)})}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx("button",{onClick:T,className:"text-xs text-slate-400 hover:text-red-500 underline",children:"Reset to Default"}),e.jsx("button",{id:"save-prompt-btn",onClick:y,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-xs shadow-md transition-all active:scale-95",children:"Save Prompt"})]})]})]})},as=({isOpen:s,onClose:t,onAdd:r})=>{const[a,i]=c.useState(""),[o,d]=c.useState(null),u=c.useRef(null),n=()=>{a.trim()&&(r(a.trim(),o),i(""),d(null))},l=x=>{if(x.target.files&&x.target.files[0]&&(d(x.target.files[0]),!a)){const g=x.target.files[0].name;i(ge(g.replace(/\.[^/.]+$/,"")).replace(/_/g," "))}};return e.jsx(ce,{isOpen:s,title:"Define New Standard",onClose:t,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-2xl border border-indigo-100 dark:border-indigo-800",children:e.jsxs("p",{className:"text-xs text-indigo-800 dark:text-indigo-300 leading-relaxed",children:["Create a custom standard entry. For best results, ",e.jsx("strong",{children:"attach a PDF/DOCX"}),' containing the full standard text. The AI will use this as the "Ground Truth" for citations.']})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase",children:["Standard Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",autoFocus:!0,className:"w-full p-3 pl-10 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-700 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all text-slate-800 dark:text-white",placeholder:"e.g. ISO 45001:2018 (OH&S)",value:a,onChange:x=>i(x.target.value),onKeyDown:x=>x.key==="Enter"&&n()}),e.jsx("div",{className:"absolute left-3 top-3 text-slate-400",children:e.jsx(f,{name:"Book",size:18})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Source Document (Optional)"}),e.jsxs("div",{onClick:()=>{var x;return(x=u.current)==null?void 0:x.click()},className:`group relative flex items-center justify-center border-2 border-dashed rounded-xl p-6 cursor-pointer transition-all ${o?"border-emerald-400 bg-emerald-50 dark:bg-emerald-900/10":"border-gray-200 dark:border-slate-700 hover:border-indigo-400 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:[e.jsx("input",{type:"file",ref:u,className:"hidden",accept:".pdf,.docx,.txt",onChange:l}),o?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-2 shadow-sm",children:e.jsx(f,{name:"CheckThick",size:20})}),e.jsx("p",{className:"text-sm font-bold text-emerald-700 dark:text-emerald-400 truncate max-w-[250px]",children:o.name}),e.jsx("p",{className:"text-[10px] text-emerald-600/70",children:"Click to change"})]}):e.jsxs("div",{className:"text-center text-slate-400 group-hover:text-indigo-500 transition-colors",children:[e.jsx(f,{name:"UploadCloud",size:28,className:"mx-auto mb-2"}),e.jsx("p",{className:"text-xs font-bold",children:"Click to Upload PDF / DOCX"}),e.jsx("p",{className:"text-[10px] opacity-70",children:"Max 10MB"})]})]})]})]}),e.jsxs("button",{onClick:n,disabled:!a.trim(),className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-sm shadow-lg shadow-indigo-500/30 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(f,{name:"Plus",size:18}),"Create Standard"]})]})})},ns=({onRestoreSnapshot:s,newKeyInput:t,setNewKeyInput:r,handleAddKey:a})=>{const{modals:i,toggleModal:o,showToast:d}=ne(),{privacySettings:u,setPrivacySettings:n,addCustomStandard:l,setStandardKey:x,setKnowledgeData:g,standards:k,standardKey:S,updateStandard:N,resetStandard:E,knowledgeBase:v}=re(),{apiKeys:b,activeKeyId:p,isCheckingKey:m,isAutoCheckEnabled:h,toggleAutoCheck:j,refreshKeyStatus:I,deleteKey:y}=fe(),T=$e(k,S,v),{handleAutoRepair:A,isRepairing:B,repairStats:w}=Fe();return e.jsxs(e.Fragment,{children:[e.jsx(is,{isOpen:i.settings,onClose:()=>o("settings",!1),apiKeys:b,newKeyInput:t,setNewKeyInput:r,isCheckingKey:m,handleAddKey:a,activeKeyId:p,editingKeyId:null,editLabelInput:"",setEditLabelInput:()=>{},handleSaveLabel:()=>{},handleStartEdit:()=>{},handleRefreshStatus:I,handleDeleteKey:y,isAutoCheckEnabled:h,toggleAutoCheck:j}),e.jsx(as,{isOpen:i.addStandard,onClose:()=>o("addStandard",!1),onAdd:async(R,_)=>{o("addStandard",!1);const D=`CUSTOM_${Date.now()}`;if(_){const O=await Oe(_);g(O,_.name)}l(D,{name:R,description:"Custom",groups:[]}),x(D)}}),e.jsx(Be,{isOpen:i.integrity,onClose:()=>o("integrity",!1),health:T,isCustomStandard:!!S&&!k[S],onResetStandard:()=>{E(S),o("integrity",!1)},onAutoRepair:A,isRepairing:B,repairStats:w}),e.jsx(We,{isOpen:i.recall,onClose:()=>o("recall",!1),onRestore:s}),e.jsx(Ue,{isOpen:i.privacy,onClose:()=>o("privacy",!1),settings:u,setSettings:n}),e.jsx(Ke,{isOpen:i.about,onClose:()=>o("about",!1)})]})},os=()=>{const{standardKey:s,auditInfo:t,selectedClauses:r,activeProcessId:a,processes:i,analysisResult:o,selectedFindings:d,finalReportText:u,restoreSession:n,customStandards:l}=re(),[x,g]=c.useState(null),[k,S]=c.useState(!1),N=c.useRef(!1);return c.useEffect(()=>{try{const v=localStorage.getItem("iso_session_data"),b=localStorage.getItem("iso_custom_standards");if(v){N.current=!0;const p=JSON.parse(v);n(p),g(new Date().toLocaleTimeString()),setTimeout(()=>N.current=!1,1e3)}}catch(v){console.error("Load failed",v)}},[]),c.useEffect(()=>{if(N.current)return;const v=setTimeout(()=>{S(!0);const b={standardKey:s,auditInfo:t,selectedClauses:r,activeProcessId:a,processes:i,analysisResult:o,selectedFindings:d,finalReportText:u};localStorage.setItem("iso_session_data",JSON.stringify(b)),localStorage.setItem("iso_custom_standards",JSON.stringify(l)),g(new Date().toLocaleTimeString()),setTimeout(()=>S(!1),500)},1e3);return()=>clearTimeout(v)},[s,t,r,a,i,o,d,u,l]),{lastSavedTime:x,isSaving:k,createManualBackup:()=>{try{const v={standardKey:s,auditInfo:t,selectedClauses:r,activeProcessId:a,processes:i,analysisResult:o,selectedFindings:d,finalReportText:u},b={id:`backup_${Date.now()}`,timestamp:Date.now(),label:"Manual Backup",triggerType:"MANUAL_BACKUP",data:v},p=localStorage.getItem("iso_session_history"),m=p?JSON.parse(p):[],h=[b,...m].slice(0,5);return localStorage.setItem("iso_session_history",JSON.stringify(h)),!0}catch{return!1}}}},ls=()=>{var G;const[s,t]=c.useState("planning"),{isSidebarOpen:r,sidebarWidth:a,showToast:i,modals:o,toggleModal:d}=ne(),{evidence:u,setEvidence:n,matrixData:l,setMatrixData:x,evidenceTags:g,addEvidenceTag:k,selectedClauses:S,standards:N,standardKey:E,analysisResult:v,setAnalysisResult:b,selectedFindings:p,setSelectedFindings:m,finalReportText:h,setFinalReportText:j,resetSession:I,restoreSession:y,activeProcessId:T,processes:A}=re(),{addKey:B}=fe(),{lastSavedTime:w,isSaving:R,createManualBackup:_}=os(),[D,O]=c.useState([]),[z,K]=c.useState({isOpen:!1,clause:null,fullText:{en:"",vi:""},isLoading:!1}),[$,V]=c.useState("");c.useEffect(()=>{const U=Z=>K({isOpen:!0,clause:Z.detail,fullText:{en:"",vi:""},isLoading:!0}),H=Z=>K(se=>({...se,fullText:Z.detail,isLoading:!1})),J=Z=>{Z.detail&&t(Z.detail)};return window.addEventListener("OPEN_REFERENCE",U),window.addEventListener("UPDATE_REFERENCE_CONTENT",H),window.addEventListener("SWITCH_LAYOUT",J),()=>{window.removeEventListener("OPEN_REFERENCE",U),window.removeEventListener("UPDATE_REFERENCE_CONTENT",H),window.removeEventListener("SWITCH_LAYOUT",J)}},[]);const Y=c.useMemo(()=>{const U=de.find(H=>H.id===s);return U?`${U.colorClass} ${U.borderClass}`:"bg-slate-500 border-slate-600"},[s]),te=de.find(U=>U.id===s)||de[0],ie=(!T||A.length===0)&&s!=="planning",F=async()=>{const U=await B($);U==="valid"?(V(""),i("Success: API Key is Active")):U==="quota_exceeded"?(V(""),i("Added: Key Quota Exhausted")):i(U==="duplicate"?"Info: Key already exists":"Failed: Invalid API Key")};return e.jsxs($t,{commandActions:[],onRestoreSnapshot:y,children:[e.jsxs("div",{className:`flex-shrink-0 px-4 md:px-6 py-3 border-b border-gray-200 dark:border-slate-800 transition-colors duration-500 ease-fluid flex justify-between items-center gap-3 border-t-4 ${te.borderClass} ${Y.split(" ")[0].replace("bg-","bg-opacity-5")}`,children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(Ft,{layoutMode:s,setLayoutMode:t,isSidebarOpen:r,sidebarWidth:a})}),e.jsxs("div",{className:"flex gap-2 items-center flex-shrink-0 pl-2 border-l border-gray-200 dark:border-slate-800",children:[e.jsxs("button",{onClick:()=>d("recall",!0),className:`h-10 px-4 rounded-xl flex items-center justify-center gap-2 transition-all border ${w?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600":"bg-white dark:bg-slate-800 text-slate-500"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(f,{name:"History",size:18}),w&&e.jsx("span",{className:"absolute -top-1 -right-1 flex h-2.5 w-2.5",children:e.jsx("span",{className:`relative inline-flex rounded-full h-2.5 w-2.5 ${R?"bg-red-500":"bg-emerald-500"}`})})]}),e.jsx("span",{className:"hidden xl:inline text-xs font-bold",children:"Recall"})]}),e.jsxs("button",{onClick:()=>{confirm("Start New Session?")&&(_(),I(),i("Session Reset."))},className:"h-10 px-4 bg-amber-50 dark:bg-amber-950/30 text-amber-600 border border-amber-200 rounded-xl flex items-center justify-center gap-2 hover:bg-amber-100 transition-all",children:[e.jsx(f,{name:"Session4_FilePlus",size:18}),e.jsx("span",{className:"hidden md:inline text-xs font-bold",children:"New"})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden relative p-2 md:p-4",children:[ie&&e.jsx("div",{className:"absolute inset-0 z-50 bg-white/80 dark:bg-slate-950/80 backdrop-blur-sm flex flex-col items-center justify-center animate-in fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-3xl shadow-2xl border border-indigo-100 dark:border-indigo-900 max-w-md text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/50 rounded-full flex items-center justify-center mx-auto mb-4 text-indigo-600",children:e.jsx(f,{name:"Session11_GridAdd",size:32})}),e.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white mb-2",children:"Process Required"}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6 leading-relaxed",children:["Define at least one ",e.jsx("strong",{children:"Process"})," to begin evidence collection."]}),e.jsx("div",{className:"flex gap-3 justify-center",children:e.jsx("button",{onClick:()=>t("planning"),className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg transition-transform active:scale-95",children:"Go to Planning"})})]})}),s==="planning"&&e.jsx(ss,{}),s==="evidence"&&e.jsx(Jt,{evidence:u,setEvidence:n,uploadedFiles:D,setUploadedFiles:O,onOcrProcess:()=>{},isOcrLoading:!1,onAnalyze:()=>{},isReadyForAnalysis:!1,isAnalyzeLoading:!1,analyzeTooltip:"AI Analysis",onExport:()=>{},evidenceLanguage:"en",setEvidenceLanguage:()=>{},textareaRef:{current:null},tags:g,onAddTag:k,selectedClauses:S,standards:N,standardKey:E,matrixData:l,setMatrixData:x}),s==="findings"&&e.jsx(Xt,{analysisResult:v,setAnalysisResult:b,selectedFindings:p,setSelectedFindings:m,isAnalyzeLoading:!1,loadingMessage:"",currentAnalyzingClause:"",viewMode:"list",setViewMode:()=>{},focusedFindingIndex:0,setFocusedFindingIndex:()=>{},onExport:()=>{},notesLanguage:"en",setNotesLanguage:()=>{}}),s==="report"&&e.jsx(Qt,{finalReportText:h,setFinalReportText:j,isReportLoading:!1,loadingMessage:"",templateFileName:"",handleTemplateUpload:()=>{},handleGenerateReport:()=>{},isReadyToSynthesize:!1,onExport:()=>{},exportLanguage:"en",setExportLanguage:()=>{}})]}),e.jsx(ns,{onRestoreSnapshot:y,newKeyInput:$,setNewKeyInput:V,handleAddKey:F}),e.jsx(rs,{isOpen:z.isOpen,onClose:()=>K(U=>({...U,isOpen:!1})),clause:z.clause,standardName:((G=N[E])==null?void 0:G.name)||"",fullText:z.fullText,isLoading:z.isLoading,onInsert:U=>n(H=>H+`
`+U)})]})};function ds(){return e.jsx(ft,{children:e.jsx(Mt,{children:e.jsx(mt,{children:e.jsx(ls,{})})})})}const He=document.getElementById("root");if(!He)throw new Error("Could not find root element to mount to");const cs=Qe.createRoot(He);cs.render(e.jsx(oe.StrictMode,{children:e.jsx(ds,{})}));
