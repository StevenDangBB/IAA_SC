import{j as e,r as o,R as mt,c as _s}from"./vendor-react--UE8qFvL.js";import{G as Vt,T as we}from"./vendor-genai-C0GBL7S7.js";import"./vendor-BhE6lIor.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function l(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(i){if(i.ep)return;i.ep=!0;const u=l(i);fetch(i.href,u)}})();const Es={name:"ISO 9001:2015 (QMS)",description:"Quality Management System",groups:[{id:"PLAN_9001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context of organization",description:"Internal and external issues that affect its ability to achieve intended results.",subClauses:[{id:"4.1",code:"4.1",title:"Understanding the organization",description:"Determining internal and external issues relevant to its purpose."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Understanding the needs and expectations of stakeholders."},{id:"4.3",code:"4.3",title:"Scope of QMS",description:"Determining the boundaries and applicability of the quality system."},{id:"4.4",code:"4.4",title:"QMS processes",description:"Establishing, implementing, and maintaining processes."}]},{id:"5",code:"5",title:"Leadership",description:"Top management commitment, policy and roles.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership commitment",description:"Demonstrating leadership and commitment to customer focus."},{id:"5.2",code:"5.2",title:"Policy",description:"Establishing and communicating the quality policy."},{id:"5.3",code:"5.3",title:"Roles & Authorities",description:"Ensuring responsibilities and authorities are assigned."}]},{id:"6",code:"6",title:"Planning",description:"Risks, opportunities and quality objectives.",subClauses:[{id:"6.1",code:"6.1",title:"Risks & Opportunities",description:"Actions to address risks and opportunities."},{id:"6.2",code:"6.2",title:"Quality objectives",description:"Establishing objectives and planning to achieve them."},{id:"6.3",code:"6.3",title:"Planning of changes",description:"Carrying out changes in a planned manner."}]}]},{id:"SUPPORT_9001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Providing necessary resources for the QMS.",subClauses:[{id:"7.1.1",code:"7.1.1",title:"General",description:"Determining and providing resources for QMS."},{id:"7.1.2",code:"7.1.2",title:"People",description:"Providing persons necessary for effective implementation."},{id:"7.1.3",code:"7.1.3",title:"Infrastructure",description:"Maintenance of buildings, equipment, and transport."},{id:"7.1.4",code:"7.1.4",title:"Process Environment",description:"Managing social (non-discriminatory), psychological (stress-reducing), and physical (temperature, hygiene) factors."},{id:"7.1.5",code:"7.1.5",title:"Monitoring resources",description:"Calibration and measurement traceability."},{id:"7.1.6",code:"7.1.6",title:"Knowledge",description:"Maintaining organizational knowledge and lessons learned."}]},{id:"7.2",code:"7.2",title:"Competence",description:"Ensuring workers are competent based on education/training."},{id:"7.3",code:"7.3",title:"Awareness",description:"Ensuring persons are aware of quality policy and objectives."},{id:"7.4",code:"7.4",title:"Communication",description:"Determining internal and external communications."},{id:"7.5",code:"7.5",title:"Documented info",description:"Control of information required by the standard.",subClauses:[{id:"7.5.1",code:"7.5.1",title:"General",description:"Determining necessary documented information for QMS."},{id:"7.5.2",code:"7.5.2",title:"Creating & Updating",description:"Ensuring proper identification, format, and review."},{id:"7.5.3",code:"7.5.3",title:"Control of info",description:"Ensuring availability, protection, and storage control.",subClauses:[{id:"7.5.3.1",code:"7.5.3.1",title:"Availability",description:"Ensuring info is available where needed."},{id:"7.5.3.2",code:"7.5.3.2",title:"Control",description:"Distribution, access, retrieval and use."}]}]}]},{id:"DO_9001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational planning",description:"Control of processes to meet P/S requirements."},{id:"8.2",code:"8.2",title:"Requirements for P/S",description:"Determining requirements and communicating with customers."},{id:"8.3",code:"8.3",title:"Design and development",description:"D&D of products and services.",subClauses:[{id:"8.3.1",code:"8.3.1",title:"General",description:"Establishing a D&D process."},{id:"8.3.2",code:"8.3.2",title:"Planning",description:"Determining D&D stages and controls."},{id:"8.3.3",code:"8.3.3",title:"Inputs",description:"Requirements essential for D&D."},{id:"8.3.4",code:"8.3.4",title:"Controls",description:"Ensuring reviews, verification, and validation."},{id:"8.3.5",code:"8.3.5",title:"Outputs",description:"Meeting input requirements."},{id:"8.3.6",code:"8.3.6",title:"Changes",description:"Controlling modifications to D&D."}]},{id:"8.4",code:"8.4",title:"External Providers",description:"Control of externally provided P/S.",subClauses:[{id:"8.4.1",code:"8.4.1",title:"General",description:"Evaluating and selecting external providers."},{id:"8.4.2",code:"8.4.2",title:"Type & Extent",description:"Controlling the impact of providers on results."},{id:"8.4.3",code:"8.4.3",title:"Information",description:"Communicating requirements to providers clearly."}]},{id:"8.5",code:"8.5",title:"Production & Delivery",description:"Control of production and service provision.",subClauses:[{id:"8.5.1",code:"8.5.1",title:"Control",description:"Availability of info, equipment and monitoring."},{id:"8.5.2",code:"8.5.2",title:"Identification",description:"Ensuring traceability throughout provision."},{id:"8.5.3",code:"8.5.3",title:"Property",description:"Safeguarding customer or provider assets."},{id:"8.5.4",code:"8.5.4",title:"Preservation",description:"Ensuring conformity during processing."},{id:"8.5.5",code:"8.5.5",title:"Post-delivery",description:"Statutory, regulatory, and warranty duties."},{id:"8.5.6",code:"8.5.6",title:"Control of changes",description:"Reviewing and controlling changes for production."}]},{id:"8.6",code:"8.6",title:"Release of P/S",description:"Verification that requirements have been met."},{id:"8.7",code:"8.7",title:"Nonconforming outputs",description:"Ensuring unintended use is prevented."}]},{id:"CHECK_ACT_9001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1",code:"9.1",title:"Monitoring & Evaluation",description:"Determining what needs to be monitored."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Scheduled review of QMS performance."},{id:"9.3",code:"9.3",title:"Management review",description:"Top management review of system suitability."},{id:"10.1",code:"10.1",title:"Improvement",description:"Determining opportunities for improvement."},{id:"10.2",code:"10.2",title:"NC & Corrective action",description:"Managing nonconformities and root causes."},{id:"10.3",code:"10.3",title:"Continual improvement",description:"Continually improving QMS effectiveness."}]}]},Ts={name:"ISO/IEC 27001:2022 (ISMS)",description:"Information Security Management System",groups:[{id:"PLAN_27001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context of organization",description:"Internal/external issues and scope.",subClauses:[{id:"4.1",code:"4.1",title:"Context",description:"Identifying security issues."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Needs and expectations."},{id:"4.3",code:"4.3",title:"Scope",description:"Determining ISMS boundaries."},{id:"4.4",code:"4.4",title:"ISMS System",description:"Establishing processes."}]},{id:"5",code:"5",title:"Leadership",description:"Commitment and Policy.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership & Commitment",description:"Accountability."},{id:"5.2",code:"5.2",title:"Policy",description:"InfoSec policy."},{id:"5.3",code:"5.3",title:"Roles & Authorities",description:"Assigning responsibilities."}]},{id:"6",code:"6",title:"Planning",description:"Risk treatment.",subClauses:[{id:"6.1.1",code:"6.1.1",title:"General",description:"Risk actions."},{id:"6.1.2",code:"6.1.2",title:"Risk assessment",description:"Information security risk process."},{id:"6.1.3",code:"6.1.3",title:"Risk treatment",description:"SoA and planning."},{id:"6.2",code:"6.2",title:"Security objectives",description:"Achievement planning."}]}]},{id:"SUPPORT_27001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Availability."},{id:"7.2",code:"7.2",title:"Competence",description:"Training requirements."},{id:"7.3",code:"7.3",title:"Awareness",description:"Understanding policy."},{id:"7.4",code:"7.4",title:"Communication",description:"Info flow rules."},{id:"7.5",code:"7.5",title:"Documented info",description:"Control of records."}]},{id:"DO_27001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational planning",description:"Securing processes."},{id:"8.2",code:"8.2",title:"Risk assessment",description:"Execution at intervals."},{id:"8.3",code:"8.3",title:"Risk treatment",description:"Implementing treatments."}]},{id:"CHECK_ACT_27001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1",code:"9.1",title:"Monitoring",description:"Measuring effectiveness."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Periodic checks."},{id:"9.3",code:"9.3",title:"Management review",description:"Strategic eval."},{id:"10.1",code:"10.1",title:"Continual improvement",description:"Growth."},{id:"10.2",code:"10.2",title:"Nonconformity",description:"Corrective actions."}]},{id:"ANNEX_A_5",title:"Annex A.5 Organizational (37 Controls)",icon:"Lock",clauses:[{id:"A.5.1",code:"A.5.1",title:"Policies for information security",description:"Reviewed for suitability."},{id:"A.5.2",code:"A.5.2",title:"InfoSec roles",description:"Defined responsibilities."},{id:"A.5.3",code:"A.5.3",title:"Segregation of duties",description:"Conflict reduction."},{id:"A.5.4",code:"A.5.4",title:"Management responsibilities",description:"Committing to security."},{id:"A.5.5",code:"A.5.5",title:"Contact with authorities",description:"Regulation flow."},{id:"A.5.6",code:"A.5.6",title:"Special interest groups",description:"Trend tracking."},{id:"A.5.7",code:"A.5.7",title:"Threat intelligence",description:"Info collection."},{id:"A.5.8",code:"A.5.8",title:"IS in project mgmt",description:"Lifecycle inclusion."},{id:"A.5.9",code:"A.5.9",title:"Inventory of assets",description:"Critical asset list."},{id:"A.5.10",code:"A.5.10",title:"Acceptable use of assets",description:"Usage rules."},{id:"A.5.11",code:"A.5.11",title:"Return of assets",description:"Termination retrieval."},{id:"A.5.12",code:"A.5.12",title:"Classification of info",description:"Labeling based on value."},{id:"A.5.13",code:"A.5.13",title:"Labeling of info",description:"Visual markers."},{id:"A.5.14",code:"A.5.14",title:"Information transfer",description:"Securing transit."},{id:"A.5.15",code:"A.5.15",title:"Access control",description:"Authorization rules."},{id:"A.5.16",code:"A.5.16",title:"Identity management",description:"User ID lifecycle."},{id:"A.5.17",code:"A.5.17",title:"Authentication info",description:"Secrets management."},{id:"A.5.18",code:"A.5.18",title:"Access rights",description:"Provisioning/revoking."},{id:"A.5.19",code:"A.5.19",title:"IS in supplier relationships",description:"Agreements."},{id:"A.5.20",code:"A.5.20",title:"Supplier agreements",description:"Addressing security."},{id:"A.5.21",code:"A.5.21",title:"ICT supply chain",description:"Sourcing risks."},{id:"A.5.22",code:"A.5.22",title:"Monitoring suppliers",description:"Auditing delivery."},{id:"A.5.23",code:"A.5.23",title:"Cloud services",description:"SaaS security."},{id:"A.5.24",code:"A.5.24",title:"Incident management",description:"Planning response."},{id:"A.5.25",code:"A.5.25",title:"Incident assessment",description:"Severity eval."},{id:"A.5.26",code:"A.5.26",title:"Incident response",description:"Action taken."},{id:"A.5.27",code:"A.5.27",title:"Incident learning",description:"Root cause."},{id:"A.5.28",code:"A.5.28",title:"Evidence collection",description:"Forensics."},{id:"A.5.29",code:"A.5.29",title:"IS during disruption",description:"BCP security."},{id:"A.5.30",code:"A.5.30",title:"ICT readiness",description:"DR planning."},{id:"A.5.31",code:"A.5.31",title:"Legal compliance",description:"Regulatory requirements."},{id:"A.5.32",code:"A.5.32",title:"IP Rights",description:"Copyright protection."},{id:"A.5.33",code:"A.5.33",title:"Protection of records",description:"Integrity."},{id:"A.5.34",code:"A.5.34",title:"Privacy of PII",description:"GDPR/Data protection."},{id:"A.5.35",code:"A.5.35",title:"Independent review",description:"External auditing."},{id:"A.5.36",code:"A.5.36",title:"Policy compliance",description:"Adherence."},{id:"A.5.37",code:"A.5.37",title:"Operating procedures",description:"Standard documentation."}]},{id:"ANNEX_A_6",title:"Annex A.6 People (8 Controls)",icon:"Users",clauses:[{id:"A.6.1",code:"A.6.1",title:"Screening",description:"Background checks."},{id:"A.6.2",code:"A.6.2",title:"Terms of employment",description:"HR contracts."},{id:"A.6.3",code:"A.6.3",title:"Awareness",description:"InfoSec education."},{id:"A.6.4",code:"A.6.4",title:"Disciplinary process",description:"Breach handling."},{id:"A.6.5",code:"A.6.5",title:"Termination responsibilities",description:"Post-exit."},{id:"A.6.6",code:"A.6.6",title:"Confidentiality",description:"NDAs."},{id:"A.6.7",code:"A.6.7",title:"Remote working",description:"Teleworking rules."},{id:"A.6.8",code:"A.6.8",title:"Event reporting",description:"Anomaly reporting."}]},{id:"ANNEX_A_7",title:"Annex A.7 Physical (14 Controls)",icon:"Building",clauses:[{id:"A.7.1",code:"A.7.1",title:"Physical perimeters",description:"Barriers."},{id:"A.7.2",code:"A.7.2",title:"Physical entry",description:"Access systems."},{id:"A.7.3",code:"A.7.3",title:"Securing offices",description:"Locks."},{id:"A.7.4",code:"A.7.4",title:"Security monitoring",description:"CCTV."},{id:"A.7.5",code:"A.7.5",title:"Physical protection",description:"Disaster proofing."},{id:"A.7.6",code:"A.7.6",title:"Secure areas",description:"Restricted protocols."},{id:"A.7.7",code:"A.7.7",title:"Clear desk/screen",description:"Clean policy."},{id:"A.7.8",code:"A.7.8",title:"Equipment siting",description:"Safe placement."},{id:"A.7.9",code:"A.7.9",title:"Assets off-premises",description:"Mobile security."},{id:"A.7.10",code:"A.7.10",title:"Storage media",description:"Drive handling."},{id:"A.7.11",code:"A.7.11",title:"Utilities",description:"Power/Water safety."},{id:"A.7.12",code:"A.7.12",title:"Cabling security",description:"Line protection."},{id:"A.7.13",code:"A.7.13",title:"Equipment maintenance",description:"Care logs."},{id:"A.7.14",code:"A.7.14",title:"Secure disposal",description:"Data wiping."}]},{id:"ANNEX_A_8",title:"Annex A.8 Technological (34 Controls)",icon:"Cpu",clauses:[{id:"A.8.1",code:"A.8.1",title:"Endpoint devices",description:"Device agents."},{id:"A.8.2",code:"A.8.2",title:"Privileged access",description:"Admin rights."},{id:"A.8.3",code:"A.8.3",title:"Information access",description:"Need-to-know."},{id:"A.8.4",code:"A.8.4",title:"Source code access",description:"IP security."},{id:"A.8.5",code:"A.8.5",title:"Authentication",description:"MFA usage."},{id:"A.8.6",code:"A.8.6",title:"Capacity mgmt",description:"Resources."},{id:"A.8.7",code:"A.8.7",title:"Malware protection",description:"AV/EDR."},{id:"A.8.8",code:"A.8.8",title:"Vulnerabilities",description:"Patching."},{id:"A.8.9",code:"A.8.9",title:"Configuration",description:"Hardening."},{id:"A.8.10",code:"A.8.10",title:"Deletion",description:"Erasure."},{id:"A.8.11",code:"A.8.11",title:"Data masking",description:"Privacy."},{id:"A.8.12",code:"A.8.12",title:"DLP",description:"Leakage prevention."},{id:"A.8.13",code:"A.8.13",title:"Backup",description:"Redundancy."},{id:"A.8.14",code:"A.8.14",title:"Redundancy ICT",description:"HA systems."},{id:"A.8.15",code:"A.8.15",title:"Logging",description:"Audit trails."},{id:"A.8.16",code:"A.8.16",title:"Monitoring",description:"Health alerts."},{id:"A.8.17",code:"A.8.17",title:"Clock sync",description:"NTP."},{id:"A.8.18",code:"A.8.18",title:"Privileged utilities",description:"Restrict tools."},{id:"A.8.19",code:"A.8.19",title:"Software install",description:"Whitelisting."},{id:"A.8.20",code:"A.8.20",title:"Network security",description:"Firewalls."},{id:"A.8.21",code:"A.8.21",title:"Network services",description:"VPN/Gateways."},{id:"A.8.22",code:"A.8.22",title:"Segregation",description:"VLANs."},{id:"A.8.23",code:"A.8.23",title:"Web filtering",description:"Proxy."},{id:"A.8.24",code:"A.8.24",title:"Cryptography",description:"Encryption."},{id:"A.8.25",code:"A.8.25",title:"Secure SDLC",description:"Dev security."},{id:"A.8.26",code:"A.8.26",title:"Application security",description:"Design."},{id:"A.8.27",code:"A.8.27",title:"Architecture",description:"Engineering."},{id:"A.8.28",code:"A.8.28",title:"Secure coding",description:"OWASP."},{id:"A.8.29",code:"A.8.29",title:"Security testing",description:"VAPT."},{id:"A.8.30",code:"A.8.30",title:"Outsourced dev",description:"Contractor code."},{id:"A.8.31",code:"A.8.31",title:"Separation envs",description:"Dev/Prod."},{id:"A.8.32",code:"A.8.32",title:"Change mgmt",description:"RFCs."},{id:"A.8.33",code:"A.8.33",title:"Test info",description:"Protect data."},{id:"A.8.34",code:"A.8.34",title:"IS during audit",description:"Auditor access."}]}]},Rs={name:"ISO 14001:2015 (EMS)",description:"Environmental Management System",groups:[{id:"PLAN_14001",title:"Plan (4-6) Context & Leadership",icon:"FileShield",clauses:[{id:"4",code:"4",title:"Context",description:"Org Context.",subClauses:[{id:"4.1",code:"4.1",title:"Org Context",description:"Env issues."},{id:"4.2",code:"4.2",title:"Interested parties",description:"Expectations."},{id:"4.3",code:"4.3",title:"Scope",description:"Boundaries."},{id:"4.4",code:"4.4",title:"EMS System",description:"Processes."}]},{id:"5",code:"5",title:"Leadership",description:"Commitment.",subClauses:[{id:"5.1",code:"5.1",title:"Leadership & Commitment",description:"Duty."},{id:"5.2",code:"5.2",title:"Environmental Policy",description:"Goals."},{id:"5.3",code:"5.3",title:"Org Roles & Responsibilities",description:"Authorities."}]},{id:"6",code:"6",title:"Planning",description:"Aspects.",subClauses:[{id:"6.1.1",code:"6.1.1",title:"General",description:"Actions."},{id:"6.1.2",code:"6.1.2",title:"Environmental aspects",description:"Impacts."},{id:"6.1.3",code:"6.1.3",title:"Compliance obligations",description:"Legal."},{id:"6.1.4",code:"6.1.4",title:"Planning action",description:"Achievement."},{id:"6.2",code:"6.2",title:"Environmental objectives",description:"Plans."}]}]},{id:"SUPPORT_14001",title:"Support (7) Resources",icon:"LayoutList",clauses:[{id:"7.1",code:"7.1",title:"Resources",description:"Supply."},{id:"7.2",code:"7.2",title:"Competence",description:"Training."},{id:"7.3",code:"7.3",title:"Awareness",description:"EMS awareness."},{id:"7.4",code:"7.4",title:"Communication",description:"Internal/External.",subClauses:[{id:"7.4.1",code:"7.4.1",title:"General",description:"Criteria."},{id:"7.4.2",code:"7.4.2",title:"Internal",description:"Staff."},{id:"7.4.3",code:"7.4.3",title:"External",description:"Parties."}]},{id:"7.5",code:"7.5",title:"Documented info",description:"Control."}]},{id:"DO_14001",title:"Do (8) Operation",icon:"Cpu",clauses:[{id:"8.1",code:"8.1",title:"Operational control",description:"Lifecycle."},{id:"8.2",code:"8.2",title:"Emergency preparedness",description:"Response."}]},{id:"CHECK_ACT_14001",title:"Check & Act (9-10)",icon:"CheckThick",clauses:[{id:"9.1.1",code:"9.1.1",title:"General",description:"Measurement."},{id:"9.1.2",code:"9.1.2",title:"Compliance evaluation",description:"Audit."},{id:"9.2",code:"9.2",title:"Internal audit",description:"Scheduled review."},{id:"9.3",code:"9.3",title:"Management review",description:"Review outputs."},{id:"10.1",code:"10.1",title:"General",description:"Performance."},{id:"10.2",code:"10.2",title:"Nonconformity",description:"Corrective action."},{id:"10.3",code:"10.3",title:"Continual improvement",description:"Suitability."}]}]},Ps={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Ds={};const Os="3.3.2",zs="2026-01-03 10:15:00 (GMT+7)",st="gemini-3-flash-preview",$s="gemini-3-flash-preview",gt={company:"",smo:"",department:"",interviewee:"",auditor:"",type:""},Bs=()=>{try{if(typeof import.meta<"u"&&Ps)return}catch{}try{if(typeof process<"u"&&Ds)return""}catch{}return""},Fs=Bs(),$t=[Fs].filter(r=>r&&r.trim()!==""),Gt=["gemini-3-flash-preview","gemini-3-pro-preview","gemini-2.0-flash-exp"],Ws={"Stage 1":"Initial review of documentation and readiness.","Stage 2":"Evaluation of implementation and effectiveness.",Internal:"First-party audit to check own system.","PRE ASSESSMENT":"Gap analysis assessment.","PRE TRANSFER REVIEW":"Check valid certification for transfer.","TRANSITION AUDIT":"Ensure transition to new standard version.",CAV:"Surveillance assessment.",RAV:"Re-assessment of existing certification."},ft={"ISO 9001:2015":Es,"ISO 27001:2022":Ts,"ISO 14001:2015":Rs},Us=[{version:"3.3.2",date:"2026-01-03",features:["CORE: Modularized UI Architecture (Split UI.tsx into Primitives, Icons, Loaders).","UX: Improved file upload logic - allows re-uploading the same file after deletion.","UI: Adjusted Clause Reference text alignment to Left for better readability.","DEV: Extracted Modals and Sidebar components for cleaner codebase."]},{version:"3.3.1",date:"2026-01-03",features:["FIX: Updated model engine to Gemini 3.0 Flash/Pro to resolve API connectivity issues.","FIX: Resolved API Key deletion bug in Settings.","CORE: Enhanced validation logic to detect HTTP Referrer restrictions."]}],Vs=[{icon:"ScanText",title:"Smart OCR",desc:"Extracts text from Images, PDFs & TXT."},{icon:"Wand2",title:"AI Analysis",desc:"Expert compliance evaluation."},{icon:"FileText",title:"Auto Report",desc:"Synthesizes final audit findings."}],Gs="",Bt={BookOpen:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),e.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Quote:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2H4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8Z"}),e.jsx("path",{d:"M14 21c3 0 7-1 7-8V5c0-1.25-.75-2-2-2h-4c-1.25 0-2 .75-2 2v6c0 7 4 8 7 8Z"})]}),TDLogo:e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"tealNeonGrad",x1:"100%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#00f2c3",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"#0098f0",stopOpacity:"1"})]})}),e.jsx("path",{d:"M 20 20 H 65 L 55 30 H 30 V 65 L 20 75 V 20 Z",fill:"url(#tealNeonGrad)"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M 40 40 H 60 C 75 40, 85 50, 85 65 C 85 80, 75 90, 60 90 H 35 L 45 80 H 60 C 70 80, 75 75, 75 65 C 75 55, 70 50, 60 50 H 50 V 40 Z",fill:"url(#tealNeonGrad)"}),e.jsx("path",{d:"M 30 65 L 60 35",stroke:"white",strokeWidth:"0.5",strokeOpacity:"0.3"})]}),TDSolidLink:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"future_td_grad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#06b6d4"})," ",e.jsx("stop",{offset:"50%",stopColor:"#6366f1"})," ",e.jsx("stop",{offset:"100%",stopColor:"#f59e0b"})," "]}),e.jsxs("filter",{id:"glow_td",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"0.6",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("path",{d:"M5 6H11V18H14C17.866 18 21 15.3137 21 12C21 8.68629 17.866 6 14 6H11",stroke:"url(#future_td_grad)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#glow_td)"})]}),Grid:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]}),Session1_SparklePlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 3v18"}),e.jsx("path",{d:"M3 12h18"}),e.jsx("path",{d:"m15 9-6 6"}),e.jsx("path",{d:"m9 9 6 6"}),e.jsx("path",{d:"M12 2v4"}),e.jsx("path",{d:"m4.93 4.93 2.83 2.83"}),e.jsx("path",{d:"M2 12h4"}),e.jsx("path",{d:"m4.93 19.07 2.83-2.83"}),e.jsx("path",{d:"M12 22v-4"}),e.jsx("path",{d:"m19.07 19.07-2.83-2.83"}),e.jsx("path",{d:"M22 12h-4"}),e.jsx("path",{d:"m19.07 4.93-2.83 2.83"})]}),Session2_PlayCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polygon",{points:"10 8 16 12 10 16 10 8"})]}),Session3_Rocket:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"}),e.jsx("path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"}),e.jsx("path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.1 4-1 4-1"}),e.jsx("path",{d:"M12 15v5s3.03-.55 4-2c1.1-1.62 1-4 1-4"})]}),Session4_FilePlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),e.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),Session5_RefreshCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e.jsx("path",{d:"M3 3v5h5"}),e.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),e.jsx("path",{d:"M16 21h5v-5"})]}),Session6_Zap:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Session7_Compass:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"})]}),Session8_Flag:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),e.jsx("line",{x1:"4",y1:"22",x2:"4",y2:"15"})]}),Session9_DoorOpen:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),e.jsx("path",{d:"M2 20h3"}),e.jsx("path",{d:"M13 20h9"}),e.jsx("path",{d:"M10 12v.01"}),e.jsx("path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z"})]}),Session10_Pulse:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),Session11_GridAdd:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),e.jsx("path",{d:"M3 17.5h7"}),e.jsx("path",{d:"M6.5 14v7"})]}),Session12_CleanSheet:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),e.jsx("path",{d:"M3 9h18"})]}),Session13_PowerBtn:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0"}),e.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]}),Demo1_MultiFiles:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M3 15h6"}),e.jsx("path",{d:"M6 12v6"}),e.jsx("path",{d:"M16 18l2-2 2 2"}),e.jsx("path",{d:"M18 16v6"})]}),Demo2_CloudAdd:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 13v8"}),e.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),e.jsx("path",{d:"M16 17l-4-4-4 4"})]}),Demo3_FolderUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"}),e.jsx("path",{d:"M12 10v6"}),e.jsx("path",{d:"m9 13 3-3 3 3"})]}),Demo4_ImgStack:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"}),e.jsx("line",{x1:"16",y1:"5",x2:"22",y2:"5"}),e.jsx("line",{x1:"19",y1:"2",x2:"19",y2:"8"}),e.jsx("circle",{cx:"9",cy:"9",r:"2"}),e.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Demo5_Clip:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"}),e.jsx("path",{d:"M12 12h.01"})]}),Demo6_BoxUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),e.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),e.jsx("line",{x1:"12",y1:"12.01",x2:"12",y2:"22.08"}),e.jsx("polyline",{points:"16 12 12 8 8 12"})]}),Demo7_PlusCircle:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M8 12h8"}),e.jsx("path",{d:"M12 8v8"})]}),Demo8_GridPlus:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}),e.jsx("path",{d:"M14 17h7"}),e.jsx("path",{d:"M17.5 13.5v7"})]}),Demo9_DocUp:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M12 18v-6"}),e.jsx("path",{d:"m9 15 3-3 3 3"})]}),Demo10_Layers:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}),e.jsx("path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}),e.jsx("path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"}),e.jsx("path",{d:"M12 8v4"})]}),Demo11_Scan:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),e.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),e.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),e.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),e.jsx("path",{d:"M7 12h10"}),e.jsx("path",{d:"M12 8v8"})]}),Demo12_Attach:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m4.5 16.5 7-7"}),e.jsx("path",{d:"m2 2 20 20"}),e.jsx("path",{d:"m12 12 7-7"}),e.jsx("path",{d:"M17 17v5"}),e.jsx("path",{d:"M22 12h-5"})]}),Demo13_Meteor:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m13 4 8.2 2.5a2 2 0 0 1 1.3 2.5L20 17.5"}),e.jsx("path",{d:"m8.5 7.5 10 10"}),e.jsx("path",{d:"M2 13.5V19a2 2 0 0 0 2 2h5.5"}),e.jsx("path",{d:"m13.5 8.5-5 5"}),e.jsx("path",{d:"M7 15c-1.5 1-2 2.5-2 2.5s1.5.5 2.5-2"}),e.jsx("path",{d:"M12 4V2"}),e.jsx("path",{d:"m16 6 2-2"}),e.jsx("path",{d:"M8 6 6 4"})]}),Sparkle:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:"text-amber-400 drop-shadow-[0_0_4px_rgba(252,211,77,0.7)] animate-pulse-slow",children:e.jsx("path",{d:"M12 2L14.4 9.6L22 12L14.4 14.4L12 22L9.6 14.4L2 12L9.6 9.6L12 2Z"})}),FilePlus2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M3 15h6"}),e.jsx("path",{d:"M6 12v6"})]}),History:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e.jsx("path",{d:"M3 3v5h5"}),e.jsx("path",{d:"M12 7v5l4 2"})]}),LayoutList:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}),e.jsx("path",{d:"M14 4h7"}),e.jsx("path",{d:"M14 9h7"}),e.jsx("path",{d:"M14 15h7"}),e.jsx("path",{d:"M14 20h7"})]}),Tag:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),FileEdit:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l1-3.95 5.42-5.44Z"})]}),Book:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),e.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),FileShield:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("path",{d:"M12 13v7"}),e.jsx("path",{d:"M8.5 16.5c2 1 5 1 7 0"})]}),Users:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Lock:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),Cpu:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),e.jsx("rect",{x:"9",y:"9",width:"6",height:"6"}),e.jsx("path",{d:"M15 2v2"}),e.jsx("path",{d:"M15 20v2"}),e.jsx("path",{d:"M2 15h2"}),e.jsx("path",{d:"M2 9h2"}),e.jsx("path",{d:"M20 15h2"}),e.jsx("path",{d:"M20 9h2"}),e.jsx("path",{d:"M9 2v2"}),e.jsx("path",{d:"M9 20v2"})]}),CheckThick:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),CheckSquare:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"9 11 12 14 22 4"}),e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-3-2V5a2 2 0 0 1 2-2h11"})]}),Square:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})}),FileText:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"})]}),Search:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Trash2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("path",{d:"M14 11v6"})]}),ChevronDown:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})}),ChevronUp:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"18 15 12 9 6 15"})}),Wand2:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z"}),e.jsx("path",{d:"m14 7 3 3"}),e.jsx("path",{d:"M5 6v4"}),e.jsx("path",{d:"M19 14v4"}),e.jsx("path",{d:"M10 2v2"}),e.jsx("path",{d:"M7 8H3"}),e.jsx("path",{d:"M21 16h-4"}),e.jsx("path",{d:"M11 3H9"})]}),AlertCircle:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),CheckCircle2:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{d:"m9 12 2 2 4-4"})]}),Save:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),e.jsx("polyline",{points:"7 3 7 8 15 8"})]}),ExpandPanel:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"15 3 21 3 21 9"}),e.jsx("polyline",{points:"9 21 3 21 3 15"}),e.jsx("line",{x1:"21",y1:"3",x2:"14",y2:"10"}),e.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}),CollapsePanel:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"4 14 10 14 10 20"}),e.jsx("polyline",{points:"20 10 14 10 14 4"}),e.jsx("line",{x1:"14",y1:"10",x2:"21",y2:"3"}),e.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}),X:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Copy:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),e.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),Download:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-3-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Sun:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),RefreshCw:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 2v6h-6"}),e.jsx("path",{d:"M3 12a9 9 0 0 1 15-6.7L21 8"}),e.jsx("path",{d:"M3 22v-6h6"}),e.jsx("path",{d:"M21 12a9 9 0 0 1-15 6.7L3 16"})]}),Lightbulb:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 18h6"}),e.jsx("path",{d:"M10 22h4"}),e.jsx("path",{d:"M12 2v2"}),e.jsx("path",{d:"M12 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),e.jsx("path",{d:"M9 10a3 3 0 0 1 3-3 3 3 0 0 1 3 3v2H9z"})]}),AIIndicator:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:e.jsx("path",{d:"M12 2L14.4 9.6L22 12L14.4 14.4L12 22L9.6 14.4L2 12L9.6 9.6L12 2Z"})}),UploadCloud:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),e.jsx("path",{d:"M12 12v9"}),e.jsx("path",{d:"m16 16-4-4-4 4"})]}),Image:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),e.jsx("circle",{cx:"9",cy:"9",r:"2"}),e.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Info:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Settings:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Plus:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Minus:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})}),Key:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"m21 2-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0 3 3L22 7l-3-3m-3.5 3.5L19 4"})}),Loader:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-spin",children:e.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Keyboard:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2"}),e.jsx("path",{d:"M6 8h.001"}),e.jsx("path",{d:"M10 8h.001"}),e.jsx("path",{d:"M14 8h.001"}),e.jsx("path",{d:"M18 8h.001"}),e.jsx("path",{d:"M6 12h.001"}),e.jsx("path",{d:"M10 12h.001"}),e.jsx("path",{d:"M14 12h.001"}),e.jsx("path",{d:"M18 12h.001"}),e.jsx("path",{d:"M7 16h10"})]}),TextSize:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5h7v2"}),e.jsx("path",{d:"M6.5 5v14"}),e.jsx("path",{d:"M14 13v-2h7v2"}),e.jsx("path",{d:"M17.5 11v8"})]}),AuditUser:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"}),e.jsx("path",{d:"M22 22 18 18 16 20 20 24 24 20Z"})]}),ScanText:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 7V5c0-1.1.9-2 2-2h2"}),e.jsx("path",{d:"M17 3h2c1.1 0 2 .9 2 2v2"}),e.jsx("path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2"}),e.jsx("path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2"}),e.jsx("path",{d:"M7 12h.01"}),e.jsx("path",{d:"M10 12h4"}),e.jsx("path",{d:"M17 12h.01"}),e.jsx("path",{d:"M12 7v10"})]}),Building:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2"}),e.jsx("path",{d:"M9 22v-4c0-1.1.9-2 2-2h2c1.1 0 2 .9 2 2v4"}),e.jsx("path",{d:"M8 6h.01"}),e.jsx("path",{d:"M16 6h.01"}),e.jsx("path",{d:"M12 6h.01"}),e.jsx("path",{d:"M12 10h.01"}),e.jsx("path",{d:"M12 14h.01"}),e.jsx("path",{d:"M12 18h.01"})]}),User:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Snowflake:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),e.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),e.jsx("path",{d:"m20 16-4-4 4-4"}),e.jsx("path",{d:"m4 8 4 4-4 4"}),e.jsx("path",{d:"m16 4-4 4-4-4"}),e.jsx("path",{d:"m8 20 4-4 4 4"})]}),CheckLineart:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]})},x=({name:r,size:c=18,className:l="",onClick:a})=>{const i=Bt[r]||Bt.AlertCircle;if(mt.isValidElement(i)){const u=i;return mt.cloneElement(u,{width:c,height:c,className:`${l} ${u.props.className||""}`,onClick:a})}return e.jsx("span",{className:l,onClick:a,children:i})},Ft=({icon:r,iconColor:c,value:l,onChange:a,options:i,defaultText:u,onIconClick:m,iconTitle:b})=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:`absolute left-3 top-1/2 -translate-y-1/2 transition-all duration-300 z-10 flex items-center justify-center ${m?"cursor-pointer pointer-events-auto hover:scale-110 active:scale-95":"pointer-events-none"}`,onClick:h=>{m&&(h.stopPropagation(),m(h))},title:b,children:e.jsx("div",{className:c,children:e.jsx(x,{name:r,size:16})})}),e.jsxs("select",{value:l,onChange:a,className:`w-full appearance-none pl-10 pr-8 py-3 bg-gray-50 dark:bg-slate-950 border border-gray-100 dark:border-slate-800 rounded-xl text-xs font-normal outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all cursor-pointer shadow-sm hover:border-indigo-200 dark:hover:border-slate-600 hover:shadow-md dark:shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)] ${l?"text-slate-700 dark:text-slate-300":"text-gray-400"}`,children:[e.jsx("option",{value:"",disabled:!0,children:u}),i.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400 group-hover:text-indigo-500 transition-colors duration-300",children:e.jsx(x,{name:"ChevronDown",size:14})})]}),He=({icon:r,iconColor:c,placeholder:l,value:a,onChange:i,className:u=""})=>e.jsxs("div",{className:`relative group ${u}`,children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none transition-colors duration-300",children:e.jsx("div",{className:c,children:e.jsx(x,{name:r,size:16})})}),e.jsx("input",{type:"text",placeholder:l,value:a,onChange:i,className:"w-full pl-10 pr-3 py-3 bg-gray-50 dark:bg-slate-950 border border-gray-100 dark:border-slate-800 rounded-xl text-xs font-normal text-slate-700 dark:text-slate-300 placeholder-gray-400 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all shadow-sm hover:border-indigo-200 dark:hover:border-slate-600 hover:shadow-md dark:shadow-[inset_0_2px_4px_rgba(0,0,0,0.5)]"})]}),rt=({isOpen:r,title:c,onClose:l,children:a})=>r?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-[300] flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:l,children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-3xl shadow-2xl border border-gray-100 dark:border-slate-800 transform transition-all animate-zoom-in-spring duration-300 overflow-hidden dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_10px_15px_-3px_rgba(0,0,0,0.5)]",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-900",children:[e.jsx("h3",{className:"text-lg font-black text-slate-800 dark:text-white tracking-tight",children:c}),e.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/20 transition-all duration-300 text-slate-400 hover:rotate-90",children:e.jsx(x,{name:"X",size:20})})]}),e.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto custom-scrollbar",children:a})]})}):null,Hs=({message:r,onClose:c})=>{const[l,a]=o.useState(!1),[i,u]=o.useState(!1),m=()=>{a(!0),setTimeout(()=>c(),400)};return o.useEffect(()=>{u(!0);const j=setTimeout(m,4e3);return()=>clearTimeout(j)},[c]),e.jsx("div",{className:`fixed z-[9999] w-[90vw] max-w-sm md:w-auto md:max-w-md top-20 left-1/2 -translate-x-1/2 md:top-auto md:left-auto md:bottom-10 md:right-10 md:translate-x-0 transition-all duration-500 ease-spring ${i?l?"opacity-0 scale-95 md:translate-x-4 -translate-y-4 md:translate-y-0":"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-4 md:translate-y-0 md:translate-x-4"}`,children:e.jsxs("div",{className:"bg-slate-900/95 dark:bg-white/95 backdrop-blur-md text-white dark:text-slate-900 px-4 py-3 md:px-5 md:py-4 rounded-2xl shadow-2xl flex items-start gap-3 md:gap-4 border border-slate-700/50 dark:border-slate-200/50",children:[e.jsx("div",{className:"flex-shrink-0 p-1.5 bg-emerald-500 rounded-full text-white shadow-lg shadow-emerald-500/30 mt-0.5",children:e.jsx(x,{name:"CheckLineart",size:14})}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-60 leading-none mb-1",children:"System Notification"}),e.jsx("span",{className:"text-xs md:text-sm font-bold leading-snug break-words",children:r})]}),e.jsx("button",{onClick:m,className:"flex-shrink-0 -mr-2 -mt-2 p-2 text-slate-500 hover:text-white dark:hover:text-slate-900 transition-colors rounded-full hover:bg-white/10 dark:hover:bg-black/5",children:e.jsx(x,{name:"X",size:16})})]})})},Ks=({className:r})=>e.jsxs("div",{className:`flex items-center justify-center gap-1 ${r}`,children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-3 w-3 rounded-full bg-indigo-400 opacity-75"}),e.jsx(x,{name:"Sparkle",size:16,className:"animate-spin-slow text-yellow-300"})]}),qs=({message:r})=>e.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-slate-900/95 backdrop-blur-md z-50 flex flex-col items-center justify-center animate-in fade-in duration-500",children:[e.jsxs("div",{className:"relative w-28 h-28 mb-8",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-indigo-100 dark:border-indigo-900 rounded-full opacity-50"}),e.jsx("div",{className:"absolute inset-0 border-t-4 border-indigo-600 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-4 border-4 border-purple-100 dark:border-purple-900 rounded-full opacity-50"}),e.jsx("div",{className:"absolute inset-4 border-r-4 border-purple-500 rounded-full animate-spin-reverse"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"bg-gradient-to-tr from-indigo-500 to-purple-500 p-4 rounded-full shadow-lg shadow-indigo-500/50 animate-pulse",children:e.jsx(x,{name:"Wand2",className:"text-white",size:28})})}),e.jsx("div",{className:"absolute top-0 left-1/2 w-2 h-2 bg-cyan-400 rounded-full shadow-[0_0_10px_#22d3ee] animate-ping"})]}),e.jsx("h3",{className:"text-lg font-black text-slate-800 dark:text-white mb-2 animate-pulse px-4 text-center max-w-[80%]",children:r}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-mono flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Gemini AI Processing..."]})]}),Xs=({isOpen:r,onClose:c,actions:l,onSelectAction:a})=>{const[i,u]=o.useState(""),m=o.useRef(null);o.useEffect(()=>{r&&(u(""),setTimeout(()=>{var h;return(h=m.current)==null?void 0:h.focus()},50))},[r]);const b=l.filter(h=>h.label.toLowerCase().includes(i.toLowerCase())||h.desc&&h.desc.toLowerCase().includes(i.toLowerCase()));return r?e.jsx("div",{className:"fixed inset-0 z-[99999] bg-black/60 backdrop-blur-sm flex items-start justify-center pt-[10vh] px-4 md:px-0 animate-in fade-in duration-200",onClick:c,children:e.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-slate-900 rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-700 overflow-hidden flex flex-col animate-zoom-in-spring duration-300 dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_10px_15px_-3px_rgba(0,0,0,0.5)]",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center px-3 py-3 md:px-4 border-b border-gray-100 dark:border-slate-800",children:[e.jsx(x,{name:"Session6_Zap",className:"text-indigo-500 mr-2 md:mr-3 flex-shrink-0",size:20}),e.jsx("input",{ref:m,type:"text",className:"flex-1 bg-transparent text-sm md:text-lg outline-none text-slate-800 dark:text-white placeholder-slate-400 min-w-0",placeholder:"Type a command or search clauses...",value:i,onChange:h=>u(h.target.value),onKeyDown:h=>{h.key==="Enter"&&b.length>0?a(b[0]):h.key==="Escape"&&c()}}),e.jsx("div",{className:"flex gap-2 flex-shrink-0 ml-2",children:e.jsx("button",{onClick:c,className:"p-2 rounded-full hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/20 transition-all duration-300 text-slate-400 hover:rotate-90",children:e.jsx(x,{name:"X",size:20})})})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar p-2",children:b.length===0?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"No results found."}):b.map((h,w)=>e.jsxs("div",{onClick:()=>a(h),className:`flex items-center gap-4 p-3 rounded-xl cursor-pointer transition-colors group ${w===0?"bg-indigo-50 dark:bg-indigo-900/20":"hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:[e.jsx("div",{className:`p-2 rounded-lg ${h.type==="clause"?"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400"}`,children:e.jsx(x,{name:h.icon||"Session6_Zap",size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 truncate group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:h.label}),h.desc&&e.jsx("p",{className:"text-xs text-slate-500 truncate",children:h.desc})]}),h.type==="clause"&&e.jsx("div",{className:"flex items-center gap-2 opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:h.onReference,className:"p-1.5 rounded-lg text-slate-400 hover:text-cyan-500 hover:bg-cyan-50 dark:hover:bg-cyan-900/20 transition-all",title:"Reference/Lookup",children:e.jsx(x,{name:"BookOpen",size:16})})}),h.shortcut&&e.jsx("span",{className:"text-xs text-slate-400",children:h.shortcut})]},w))}),e.jsxs("div",{className:"px-4 py-2 bg-gray-50 dark:bg-slate-950 border-t border-gray-100 dark:border-slate-800 text-[10px] text-slate-400 flex justify-between",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Tip:"}),' Search for clauses like "9.2" or actions like "Export".']}),e.jsx("span",{children:"ISO Audit Pro"})]})]})}):null},Js=({fontSizeScale:r,adjustFontSize:c})=>{const[l,a]=o.useState(!1),[i,u]=o.useState(null),m=o.useRef(null),b=h=>{if(h.stopPropagation(),!l&&m.current){const w=m.current.getBoundingClientRect(),N=window.innerWidth-w.right;u({top:w.bottom+8,right:N}),a(!0)}else a(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("button",{ref:m,onClick:b,className:`p-2 rounded-xl transition-all duration-300 shadow-sm ${l?"bg-indigo-100 text-indigo-700 dark:bg-slate-700 dark:text-indigo-400 scale-105":"bg-gray-50 dark:bg-slate-800 text-slate-700 dark:text-slate-200 hover:bg-indigo-50 hover:text-indigo-600"}`,title:"Adjust Font Size",children:e.jsx(x,{name:"TextSize",size:18})}),l&&i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[99] cursor-default",onClick:()=>a(!1)}),e.jsxs("div",{className:"fixed z-[100] flex items-center bg-white dark:bg-slate-900 rounded-full p-1.5 shadow-2xl border border-gray-200 dark:border-slate-700 animate-zoom-in-spring min-w-[140px] justify-between",style:{top:`${i.top}px`,right:`${i.right}px`},onClick:h=>h.stopPropagation(),children:[e.jsx("button",{onClick:()=>c("decrease"),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full text-slate-500 hover:text-indigo-600 transition-all duration-200 flex-shrink-0 active:scale-90",children:e.jsx(x,{name:"Minus",size:16})}),e.jsxs("span",{className:"text-sm font-black text-slate-800 dark:text-white select-none px-2 w-12 text-center",children:[(r*100).toFixed(0),"%"]}),e.jsx("button",{onClick:()=>c("increase"),className:"p-2 hover:bg-gray-100 dark:hover:bg-slate-800 rounded-full text-slate-500 hover:text-indigo-600 transition-all duration-200 flex-shrink-0 active:scale-90",children:e.jsx(x,{name:"Plus",size:16})})]})]})]})},Qs=({isSidebarOpen:r,setIsSidebarOpen:c,displayBadge:l,badgeColorClass:a,setIsCmdPaletteOpen:i,fontSizeScale:u,setFontSizeScale:m,isDarkMode:b,setIsDarkMode:h,isSystemHealthy:w,onOpenSettings:N,onOpenAbout:j})=>e.jsxs("header",{className:"flex-shrink-0 px-4 md:px-6 py-0 border-b border-gray-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm z-[70] relative flex justify-between items-center h-16 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center h-full gap-3 md:gap-5",children:[e.jsx("div",{className:"relative group cursor-pointer flex items-center justify-center transition-all duration-500 hover:opacity-100 active:scale-95",onClick:()=>c(!r),title:"Toggle Sidebar",children:e.jsx("div",{className:"relative w-10 h-10 md:w-14 md:h-14 flex items-center justify-center",children:e.jsx("div",{className:"relative z-10",children:r?e.jsxs("div",{className:"relative w-8 h-8",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-transparent border-t-indigo-500 border-b-cyan-500 rounded-full animate-infinity-spin drop-shadow-[0_0_8px_rgba(6,182,212,0.8)]"}),e.jsx("div",{className:"absolute inset-2 border-2 border-transparent border-l-purple-500 border-r-pink-500 rounded-full animate-spin-reverse drop-shadow-[0_0_6px_rgba(236,72,153,0.8)]"})]}):e.jsx("div",{className:"hover:scale-110 transition-transform duration-300 drop-shadow-[0_0_15px_rgba(0,242,195,0.6)]",children:e.jsx(x,{name:"TDLogo",size:32})})})})}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsxs("h1",{className:"hidden md:block text-lg font-bold tracking-tight text-slate-900 dark:text-white leading-none",children:["ISO Audit ",e.jsx("span",{className:"font-light text-slate-400",children:"Pro"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:`text-[11px] font-bold px-3 py-1 rounded-full border shadow-sm uppercase tracking-wider backdrop-blur-sm transition-colors duration-300 ${a}`,children:l})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("button",{onClick:()=>i(!0),className:"p-2 rounded-xl text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 hover:bg-gray-100 dark:hover:bg-slate-800 transition-all active:scale-95",title:"Command Palette (Ctrl+K)",children:e.jsx(x,{name:"Session6_Zap",size:20})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(Js,{fontSizeScale:u,adjustFontSize:T=>m(I=>T==="increase"?Math.min(I+.1,1.3):Math.max(I-.1,.8))})}),e.jsx("button",{onClick:()=>h(!b),className:"p-2 rounded-xl text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-slate-800 transition-all",children:e.jsx(x,{name:b?"Sun":"Moon",size:18})}),e.jsxs("button",{onClick:N,className:"group relative w-8 h-8 flex items-center justify-center transition-all",title:"Connection Status",children:[e.jsx("div",{className:`absolute inset-0 rounded-full opacity-20 animate-ping ${w?"bg-emerald-500":"bg-red-500"}`}),e.jsx("div",{className:`relative w-2.5 h-2.5 rounded-full shadow-sm ring-2 ring-white dark:ring-slate-900 ${w?"bg-emerald-500":"bg-red-500"}`})]}),e.jsx("button",{onClick:j,className:"p-2 rounded-xl text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all",title:"About & Release Notes",children:e.jsx(x,{name:"Info",size:18})})]})]}),Zs=(r,c)=>{const[l,a]=o.useState(r);return o.useEffect(()=>{const i=setTimeout(()=>{a(r)},c);return()=>{clearTimeout(i)}},[r,c]),l},bt=r=>{r&&(navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(r).catch(()=>Wt(r)):Wt(r))},Wt=r=>{const c=document.createElement("textarea");c.value=r,c.style.position="fixed",c.style.left="-9999px",document.body.appendChild(c),c.focus(),c.select();try{document.execCommand("copy")}catch(l){console.error(l)}document.body.removeChild(c)},Ys=r=>new Promise((c,l)=>{const a=new FileReader;a.readAsDataURL(r),a.onload=()=>c(a.result.split(",")[1]),a.onerror=i=>l(i)}),er=async r=>{if(!window.pdfjsLib)throw new Error("PDF.js library not loaded");const c=await r.arrayBuffer(),l=await window.pdfjsLib.getDocument({data:c}).promise;let a="";for(let i=1;i<=l.numPages;i++){const b=(await(await l.getPage(i)).getTextContent()).items.map(h=>h.str).join(" ");a+=b+`

`}return a},it=r=>{if(!r)return null;let c=r.trim();c.startsWith("```")&&(c=c.replace(/^```(json)?/,"").replace(/```$/,""));const l=c.indexOf("["),a=c.indexOf("{"),i=c.lastIndexOf("]"),u=c.lastIndexOf("}");l!==-1&&i!==-1&&(a===-1||l<a)?c=c.substring(l,i+1):a!==-1&&u!==-1&&(c=c.substring(a,u+1));try{return JSON.parse(c)}catch{return console.error("JSON Parse Error on text:",c),null}},Ht=r=>r?r.replace(/[^a-zA-Z0-9\s]/g,"").trim().replace(/\s+/g,"_").substring(0,30):"N_A",tr={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var sr={};const $e=r=>{let c=r;if(!c&&$t.length>0&&(c=$t[0]),!c)try{typeof import.meta<"u"}catch{}!c&&typeof process<"u"&&sr&&(c=""),c||(c=localStorage.getItem("iso_api_key")||"");const l=(c||"").trim();return l?new Vt({apiKey:l}):null},rr=async(r,c)=>{const l=r?r.trim().replace(/^["']|["']$/g,""):"";if(!l)return{isValid:!1,latency:0,errorType:"invalid",errorMessage:"Key is empty"};const a=new Vt({apiKey:l}),i=[...Gt];let u=null;for(const b of i){const h=performance.now();try{await a.models.generateContent({model:b,contents:{parts:[{text:"Hi"}]}});const w=performance.now();return{isValid:!0,latency:Math.round(w-h),activeModel:b}}catch(w){u=w;const N=(w.message||"").toLowerCase(),j=w.status||0;if(j===404||N.includes("not found"))continue;if(N.includes("key not valid")||j===400||N.includes("invalid argument")||N.includes("api_key"))return{isValid:!1,latency:0,errorType:"invalid",errorMessage:"Invalid API Key"};if(j===429||N.includes("quota")||N.includes("exhausted"))return{isValid:!1,latency:0,errorType:"quota_exceeded",errorMessage:"Quota Exceeded"};if(j===403||N.includes("permission denied")||N.includes("referrer"))return{isValid:!1,latency:0,errorType:"referrer_error",errorMessage:"Access Denied (403). Check Key Restrictions."}}}const m=((u==null?void 0:u.message)||"").toLowerCase();return m.includes("fetch")||m.includes("network")||m.includes("failed to fetch")?{isValid:!1,latency:0,errorType:"network_error",errorMessage:"Network/CORS Blocked"}:{isValid:!1,latency:0,errorType:"unknown",errorMessage:m.substring(0,50)||"All models failed"}},ir=async(r,c,l,a,i)=>{const u=$e(a);if(!u)throw new Error("API Key missing");const m=i||(l&&l.length>5e4?"gemini-3-pro-preview":st);let b="";l?b=`You are a precision extraction engine.
        
        TASK: Extract the EXACT VERBATIM text for the clause below from the PROVIDED SOURCE DOCUMENT.
        
        TARGET CLAUSE: [${r.code}] ${r.title}
        
        SOURCE DOCUMENT (START):
        """
        ${l.substring(0,7e5)} 
        """
        SOURCE DOCUMENT (END)
        
        INSTRUCTIONS:
        1. Find the section in the SOURCE DOCUMENT matching the clause code and title.
        2. Return the EXACT content of that section word-for-word.
        3. Do NOT summarize, do NOT paraphrase.
        4. Maintain all lists, numbering, and structure using newlines (\\n).
        
        Output Format: JSON ONLY.
        Structure: {
            "en": "Exact extracted text from source...", 
            "vi": "High-quality Vietnamese translation of the extracted text..."
        }`:b=`You are an ISO Standard Database. 
        Task: Provide the EXACT verbatim text for the clause below.
        Standard: ${c}
        Clause: [${r.code}] ${r.title}
        
        IMPORTANT FORMATTING RULES:
        1. Preserve all original structure (paragraphs, lists, sub-points).
        2. Use explicit newline characters (\\n) to separate paragraphs and list items.
        3. Use bullet points (-) or numbering (a, b, c) exactly as in the standard.
        4. Do NOT output a single continuous block of text.
        
        Output Format: JSON ONLY.
        Structure: {
            "en": "Full English Text with preserved formatting...", 
            "vi": "Full Vietnamese Text Translation with preserved formatting..."
        }`;const h={responseMimeType:"application/json"};try{const w=await u.models.generateContent({model:m,contents:b,config:h}),N=it(w.text||"{}");return{en:(N==null?void 0:N.en)||(l?"Could not find clause in provided document.":"Content unavailable via AI."),vi:(N==null?void 0:N.vi)||(l?"Khng tm thy iu khon trong ti liu cung cp.":"Ni dung khng kh dng qua AI.")}}catch(w){throw console.error("Fetch Clause Error:",w),w}},ar=async(r,c,l,a)=>{const i=$e(l);if(!i)throw new Error("API Key missing");const u=a||"gemini-3-pro-preview",m=`
    You are an ISO Standard Architect.
    TASK: Analyze the provided raw text of a standard and extract its hierarchical structure into a strictly typed JSON object.

    Standard Name: ${c}

    RAW TEXT START:
    """
    ${r.substring(0,5e5)}
    """
    RAW TEXT END

    INSTRUCTIONS:
    1. Identify the main "Groups" (usually high-level chapters like Context, Leadership, Planning, Support, Operation, Performance Evaluation, Improvement).
    2. Identify "Clauses" within those groups (e.g., 4.1, 4.2).
    3. Identify "SubClauses" if they exist and are important (e.g., 8.1.1).
    4. Generate a 'description' for each clause: a concise summary (10-20 words) of what the clause requires.
    5. Assign appropriate icons for Groups from this list: "FileShield" (Context/Policy), "LayoutList" (Planning/Support), "Cpu" (Operation), "CheckThick" (Check/Act), "Lock" (Security), "Users" (People).

    OUTPUT SCHEMA (JSON ONLY):
    {
      "name": "${c}",
      "description": "Auto-generated from source file",
      "groups": [
        {
          "id": "GRP_X",
          "title": "Title of the group (e.g., 4. Context)",
          "icon": "FileShield",
          "clauses": [
            {
              "id": "CL_X.Y",
              "code": "X.Y",
              "title": "Title of Clause",
              "description": "Summary of requirement...",
              "subClauses": [] // Optional
            }
          ]
        }
      ]
    }
    `,b={responseMimeType:"application/json"};try{const h=await i.models.generateContent({model:u,contents:m,config:b}),w=it(h.text||"{}");return w&&w.groups&&Array.isArray(w.groups)?w:null}catch(h){throw console.error("Structure Parsing Error:",h),new Error(h.message||"Failed to structure standard")}},nr=async(r,c,l,a,i)=>{const u=$e(a);if(!u)throw new Error("API Key missing");const m=i||$s;try{return(await u.models.generateContent({model:m,contents:{parts:[{text:r},{inlineData:{mimeType:l,data:c}}]}})).text||""}catch(b){throw console.error("OCR Error:",b),new Error(b.message||"OCR processing failed")}},or=async(r,c,l,a)=>{const i=$e(l);if(!i)throw new Error("API Key missing");const u=a||st,m={systemInstruction:c,responseMimeType:"application/json",responseSchema:{type:we.ARRAY,items:{type:we.OBJECT,properties:{clauseId:{type:we.STRING},status:{type:we.STRING,enum:["COMPLIANT","NC_MINOR","NC_MAJOR","OFI","N_A"]},reason:{type:we.STRING},suggestion:{type:we.STRING},evidence:{type:we.STRING},conclusion_report:{type:we.STRING}},required:["clauseId","status","reason","evidence"]}}};try{return(await i.models.generateContent({model:u,contents:r,config:m})).text||"[]"}catch(b){throw console.error("Analysis Error:",b),new Error(b.message||"Analysis failed")}},Ut=async(r,c,l,a)=>{const i=$e(l);if(!i)throw new Error("API Key missing");try{return(await i.models.generateContent({model:a||st,contents:r,config:{systemInstruction:c}})).text||""}catch(u){throw console.error("Reporting Error:",u),new Error(u.message||"Report generation failed")}},lr=async(r,c,l)=>{const a=$e(c);if(!a)return"[]";const i=st,u=`Provide concise descriptions (15-20 words) for these ISO clauses to help an auditor understand the core requirement.
    Clauses: ${JSON.stringify(r)}
    
    Output JSON Array: [{"code": "...", "description": "..."}]`,m={responseMimeType:"application/json"};try{return(await a.models.generateContent({model:i,contents:u,config:m})).text||"[]"}catch{return"[]"}},dr=({standards:r,standardKey:c,setStandardKey:l,auditInfo:a,setAuditInfo:i,onAddNewStandard:u,onOpenIntegrity:m,knowledgeFileName:b,onKnowledgeUpload:h,onClearKnowledge:w,health:N,auditFieldIconColor:j,standardOptions:T})=>{const I=o.useRef(null),P=!!b,D=!!c&&c!=="ADD_NEW",G=P?"BookOpen":"Book";let S="text-gray-300 dark:text-slate-600",R="Please select an ISO Standard first to enable document upload.",k="cursor-not-allowed";P?(S="text-emerald-500 drop-shadow-sm",R=`Source Attached: ${b}. Click to Replace.`,k="cursor-pointer"):D&&(S=`${j} hover:text-indigo-600 dark:hover:text-indigo-300`,R="Click to upload Source PDF or Word (DOCX) for better accuracy",k="cursor-pointer hover:scale-110 active:scale-95");const L=()=>{D&&I.current&&I.current.click()},z=A=>{A.target.files&&A.target.files.length>0&&(h(A),A.target.value="")};return e.jsxs("div",{className:"bg-gray-50/80 dark:bg-slate-900/50 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm p-3 space-y-4",children:[e.jsx("input",{type:"file",ref:I,accept:".pdf,.docx,.doc,.txt",className:"hidden",onChange:z}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:"Scope Definition"}),e.jsxs("div",{className:"relative group/source",children:[e.jsx(Ft,{icon:G,iconColor:`${S} transition-all duration-300 ${k}`,value:c,onChange:A=>{A.target.value==="ADD_NEW"?u():l(A.target.value)},options:T,defaultText:"Select ISO Standard",onIconClick:L,iconTitle:R}),P&&e.jsx("button",{onClick:A=>{A.stopPropagation(),w()},className:"absolute right-9 top-1/2 -translate-y-1/2 p-1.5 text-slate-400 hover:text-red-500 bg-transparent hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full transition-all z-20 active:scale-95",title:"Remove Source File",children:e.jsx(x,{name:"Trash2",size:14})}),c&&e.jsx("button",{onClick:m,className:`absolute -top-1.5 -right-1.5 p-1 rounded-full shadow-lg transition-all hover:scale-110 active:scale-95 text-white ring-2 ring-white dark:ring-slate-900 ${N.isHealthy?"bg-emerald-500":"bg-orange-500"}`,title:"Integrity Check",children:e.jsx(x,{name:N.isHealthy?"CheckCircle2":"AlertCircle",size:10})})]}),e.jsx(Ft,{icon:"FileEdit",iconColor:j,value:a.type,onChange:A=>i({...a,type:A.target.value}),options:Object.keys(Ws).map(A=>({value:A,label:A})),defaultText:"Select Audit Type"})]}),e.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700/50"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:"Target Entity"}),e.jsxs("div",{className:"grid grid-cols-[1.5fr_1fr] gap-2",children:[e.jsx(He,{icon:"Building",iconColor:j,placeholder:"Company Name",value:a.company,onChange:A=>i({...a,company:A.target.value})}),e.jsx(He,{icon:"Tag",iconColor:j,placeholder:"SMO/ID",value:a.smo,onChange:A=>i({...a,smo:A.target.value})})]}),e.jsx(He,{icon:"Users",iconColor:j,placeholder:"Department / Site",value:a.department,onChange:A=>i({...a,department:A.target.value})})]}),e.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700/50"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase px-1",children:"Personnel"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(He,{icon:"AuditUser",iconColor:j,placeholder:"Lead Auditor",value:a.auditor,onChange:A=>i({...a,auditor:A.target.value})}),e.jsx(He,{icon:"User",iconColor:j,placeholder:"Interviewee",value:a.interviewee,onChange:A=>i({...a,interviewee:A.target.value})})]})]})]})},cr=({standard:r,standardKey:c,selectedClauses:l,setSelectedClauses:a,onReferenceClause:i,repairedIds:u,onScrollTrigger:m})=>{const[b,h]=o.useState(""),[w,N]=o.useState([]),[j,T]=o.useState([]),[I,P]=o.useState(null),D=Zs(b,300),G=o.useRef(null),S=v=>N(M=>M.includes(v)?M.filter(O=>O!==v):[...M,v]),R=v=>T(M=>M.includes(v)?M.filter(O=>O!==v):[...M,v]),k=(r==null?void 0:r.groups.map(v=>v.id))||[],L=k.length>0&&w.length===k.length,z=()=>{N(L?[]:k)},A=()=>{if(!r)return;const v=($,_)=>{for(let U of _){if(U.id===$)return U;if(U.subClauses){const X=v($,U.subClauses);if(X)return X}}},M=r.groups.flatMap($=>$.clauses),O=l.map($=>v($,M)).filter($=>!!$).map($=>`[${$.code}] ${$.title}`).join(`
`);bt(O)},f=(v,M)=>{v.stopPropagation(),bt(`[${M.code}] ${M.title}`),P(M.id),setTimeout(()=>P(null),1500)},de=v=>{const M=_=>{let U=[_.id];return _.subClauses&&_.subClauses.forEach(X=>U.push(...M(X))),U},O=M(v),$=O.every(_=>l.includes(_));a(_=>$?_.filter(U=>!O.includes(U)):Array.from(new Set([..._,...O])))},ce=v=>{const M=_=>{let U=[];return _.forEach(X=>{U.push(X.id),X.subClauses&&U.push(...M(X.subClauses))}),U},O=M(v.clauses),$=O.every(_=>l.includes(_));a($?_=>_.filter(U=>!O.includes(U)):_=>[...new Set([..._,...O])])},W=(v,M=0)=>{const O=v.subClauses&&v.subClauses.length>0,$=j.includes(v.id)||!!D,_=l.includes(v.id),U=q=>{if(!q.subClauses)return{all:l.includes(q.id),some:l.includes(q.id)};const je=q.subClauses.map(U),Le=l.includes(q.id)&&je.every(E=>E.all),Me=l.includes(q.id)||je.some(E=>E.some);return{all:Le,some:Me}},X=U(v),ue=I===v.id,ve=u.includes(v.id);return e.jsxs("div",{className:`flex flex-col transition-all duration-300 ${M>0?"ml-4 border-l-2 dark:border-slate-800":""}`,children:[e.jsxs("div",{className:`group flex items-start gap-3 p-2 rounded-xl transition-all duration-200 ease-soft cursor-pointer ${_?"bg-indigo-50/80 dark:bg-indigo-900/30 translate-x-1":ve?"bg-emerald-50/80 dark:bg-emerald-900/20 ring-1 ring-emerald-500/30":"hover:bg-gray-100/50 dark:hover:bg-slate-800/50 hover:translate-x-1 hover:shadow-sm"}`,children:[e.jsx("button",{onClick:q=>{q.stopPropagation(),de(v)},className:`mt-1 flex-shrink-0 transition-colors duration-200 ${X.some?"text-indigo-600 dark:text-indigo-400 scale-110":"text-gray-300 dark:text-slate-600 hover:text-gray-400"}`,children:X.all?e.jsx(x,{name:"CheckSquare",size:16}):X.some?e.jsx("div",{className:"w-4 h-4 bg-indigo-500 rounded flex items-center justify-center",children:e.jsx("div",{className:"w-2.5 h-0.5 bg-white"})}):e.jsx(x,{name:"Square",size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>O?R(v.id):de(v),children:[e.jsxs("div",{className:"flex items-start justify-between gap-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[e.jsx("span",{className:"text-xs font-bold text-indigo-700 dark:text-indigo-400 uppercase shrink-0 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:v.code}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-slate-100 font-medium tracking-tight leading-tight group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:v.title}),ve&&e.jsx("span",{className:"text-[9px] font-black bg-emerald-100 text-emerald-600 px-1.5 py-0.5 rounded-md animate-pulse",children:"UPDATED"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:q=>{q.stopPropagation(),i(v)},className:"p-1 transition-all transform duration-300 opacity-0 group-hover:opacity-100 text-gray-300 hover:text-cyan-500 dark:hover:text-cyan-400 hover:scale-110",title:"Reference original text",children:e.jsx(x,{name:"BookOpen",size:14})}),e.jsx("button",{onClick:q=>f(q,v),className:`p-1 transition-all transform duration-300 ${ue?"text-emerald-500 scale-125 opacity-100":"opacity-0 group-hover:opacity-100 text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:scale-110"}`,title:ue?"Copied!":"Copy Clause",children:e.jsx(x,{name:ue?"CheckThick":"Copy",size:ue?20:14})}),O&&e.jsx(x,{name:"ChevronDown",size:12,className:`text-gray-400 mt-0.5 shrink-0 transition-transform duration-300 ${$?"rotate-180":""}`})]})]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 italic mt-1.5 leading-relaxed block w-full whitespace-normal border-t border-gray-100 dark:border-slate-800 pt-1",children:v.description})]})]}),e.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${O&&$?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:e.jsx("div",{className:"overflow-hidden",children:O&&e.jsx("div",{className:"mt-1 flex flex-col",children:v.subClauses.map(q=>W(q,M+1))})})})]},v.id)},Z=v=>{const M=v.toUpperCase();return M.includes("PLAN")?"bg-blue-600 dark:bg-blue-500 shadow-blue-500/20":M.includes("SUPPORT")?"bg-purple-600 dark:bg-purple-500 shadow-purple-500/20":M.includes("DO")?"bg-orange-600 dark:bg-orange-500 shadow-orange-500/20":M.includes("CHECK")||M.includes("ACT")?"bg-emerald-600 dark:bg-emerald-500 shadow-emerald-500/20":M.includes("ANNEX")?"bg-rose-600 dark:bg-rose-500 shadow-rose-500/20":"bg-slate-800 dark:bg-slate-700"};return e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-gray-50/40 dark:bg-slate-950/40 w-full md:min-w-[390px]",children:[e.jsx("div",{className:"p-3 border-b border-gray-100 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm z-10 shrink-0 sticky top-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1 flex items-center gap-1 bg-gray-100 dark:bg-slate-950 rounded-xl px-2 transition-all focus-within:ring-2 focus-within:ring-indigo-500/20 dark:shadow-[inset_0_1px_3px_rgba(0,0,0,0.5)]",children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-400 font-bold pl-1",children:e.jsx(x,{name:"Search",size:14})}),e.jsx("input",{className:"w-full bg-transparent py-2 px-1 text-xs font-medium outline-none text-slate-800 dark:text-slate-200 placeholder-gray-400",placeholder:"Search clauses...",value:b,onChange:v=>h(v.target.value)}),e.jsx("button",{onClick:z,className:"p-1.5 rounded-lg hover:bg-white dark:hover:bg-slate-700 text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",title:L?"Collapse All Groups":"Expand All Groups",children:e.jsx(x,{name:L?"CollapsePanel":"ExpandPanel",size:14})})]}),l.length>0&&e.jsxs("div",{className:"flex gap-2 animate-in fade-in slide-in-from-right-5 duration-300",children:[e.jsx("button",{onClick:A,className:"p-2 rounded-xl bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 hover:bg-indigo-100 transition-colors relative shadow-sm border border-indigo-100 dark:border-indigo-900/30 hover:scale-105",title:"Copy Selected Clauses",children:e.jsx(x,{name:"Copy",size:16})}),e.jsxs("button",{onClick:()=>a([]),className:"p-2 rounded-xl bg-red-50 dark:bg-red-900/20 text-red-600 hover:bg-red-100 transition-colors relative shadow-sm border border-red-100 dark:border-red-900/30 hover:scale-105",title:"Clear All",children:[e.jsx(x,{name:"Trash2",size:16}),e.jsx("div",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-[9px] font-black w-4 h-4 rounded-full flex items-center justify-center border-2 border-white dark:border-slate-900 shadow-sm animate-bounce",children:l.length})]})]})]})}),e.jsx("div",{ref:G,className:"flex-1 overflow-y-auto custom-scrollbar p-3 scroll-smooth",onScroll:v=>{v.currentTarget.scrollTop>30&&m&&m()},children:e.jsx("div",{className:"flex flex-col gap-4 pb-12",children:r?r.groups.map(v=>{const M=w.includes(v.id)||!!D,O=_=>{const U=D.toLowerCase();return _.code.toLowerCase().includes(U)||_.title.toLowerCase().includes(U)||_.description.toLowerCase().includes(U)||(_.subClauses?_.subClauses.some(O):!1)},$=D?v.clauses.filter(O):v.clauses;return $.length===0?null:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-gray-100 dark:border-transparent dark:shadow-[0_4px_6px_-1px_rgba(0,0,0,0.3),0_0_0_1px_rgba(255,255,255,0.05)] shadow-sm overflow-hidden transition-all duration-300 hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-3.5 bg-gray-50/50 dark:bg-slate-800/30 cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors",onClick:()=>S(v.id),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:_=>{_.stopPropagation(),ce(v)},className:`p-2 rounded-xl shadow-lg text-white ${Z(v.title)} hover:scale-110 active:scale-95 transition-transform duration-300`,title:"Click to Select/Deselect All in Group",children:e.jsx(x,{name:v.icon,size:14})}),e.jsx("h4",{className:"text-xs font-black text-slate-900 dark:text-white uppercase tracking-widest",children:v.title})]}),e.jsx(x,{name:"ChevronDown",size:12,className:`text-slate-400 transition-transform duration-300 ${M?"rotate-180":""}`})]}),e.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${M?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:e.jsx("div",{className:"overflow-hidden bg-white dark:bg-slate-900",children:e.jsx("div",{className:"p-2 space-y-1",children:$.map(_=>W(_))})})})]},v.id)}):e.jsx("div",{className:"text-center text-gray-400 mt-20 italic text-xs uppercase tracking-widest opacity-50",children:"Select a Standard"})})})]})},ur=({isOpen:r,onClose:c,health:l,isCustomStandard:a,onResetStandard:i,onAutoRepair:u,isRepairing:m,repairStats:b})=>e.jsx(rt,{isOpen:r,title:"Standard Health Index",onClose:c,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-5 p-5 rounded-3xl bg-gray-50 dark:bg-slate-800 border border-gray-100 dark:border-slate-700 shadow-inner dark:shadow-[inset_0_2px_6px_rgba(0,0,0,0.4)]",children:[e.jsxs("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white text-2xl font-black shadow-xl ring-4 ring-white dark:ring-slate-700 ${l.score>90?"bg-gradient-to-br from-emerald-400 to-emerald-600":"bg-gradient-to-br from-orange-400 to-orange-600"}`,children:[l.score,"%"]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-black text-slate-900 dark:text-slate-100 uppercase tracking-tight",children:"Data Health"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-snug mt-1",children:l.isHealthy?"Excellent! Data is accurate, clean, and complete for professional use.":"Standard data is incomplete or missing Source verification."})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Integrity Checklist"}),[...l.integrity,...l.completeness].map((h,w)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 rounded-2xl shadow-sm dark:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-1.5 rounded-full shadow-sm ${h.status==="pass"?"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20":"text-red-500 bg-red-50 dark:bg-red-900/20"}`,children:e.jsx(x,{name:h.status==="pass"?"CheckCircle2":"AlertCircle",size:18})}),e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:h.label})]}),e.jsx("span",{className:`text-[10px] font-black px-3 py-1 rounded-full shadow-sm uppercase ${h.status==="pass"?"text-emerald-700 bg-emerald-100":"text-red-700 bg-red-100"}`,children:h.detail})]},w))]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-100 dark:border-slate-700 flex flex-col md:flex-row items-center justify-center gap-3",children:[a&&e.jsxs("button",{onClick:i,className:"px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 dark:bg-red-900/20 dark:hover:bg-red-900/40 dark:text-red-400 rounded-xl font-bold text-xs flex items-center gap-2 transition-all active:scale-95 border border-red-200 dark:border-red-800",children:[e.jsx(x,{name:"Trash2",size:14}),"Reset to Default"]}),b?e.jsxs("div",{className:"flex items-center gap-3 animate-in fade-in slide-in-from-right-5",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-bold text-emerald-600 uppercase",children:"Repair Complete"}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Added ",b.fixed," items, Cleaned ",b.cleaned," dupes."]})]}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl font-bold text-xs shadow-lg shadow-emerald-500/30",children:"Close & Continue"})]}):!l.isHealthy&&e.jsxs("button",{onClick:u,disabled:m,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-xs flex items-center gap-2 shadow-lg shadow-indigo-500/30 transition-all active:scale-95 disabled:opacity-70 disabled:active:scale-100",children:[m?e.jsx(x,{name:"Loader",className:"animate-spin"}):e.jsx(x,{name:"Wand2"}),m?"AI is Fixing...":"Auto-Repair Issues with AI"]})]})]})}),xr=({isOpen:r,width:c,setWidth:l,standards:a,standardKey:i,setStandardKey:u,auditInfo:m,setAuditInfo:b,selectedClauses:h,setSelectedClauses:w,onAddNewStandard:N,onUpdateStandard:j,onResetStandard:T,onReferenceClause:I,showIntegrityModal:P,setShowIntegrityModal:D,knowledgeFileName:G,knowledgeBase:S,onKnowledgeUpload:R,onClearKnowledge:k})=>{const L=o.useRef(null),[z,A]=o.useState(!1),[f,de]=o.useState(!0),[ce,W]=o.useState(!1),[Z,v]=o.useState(null),[M,O]=o.useState([]),$=E=>{E.target.classList.contains("resize-handle")&&(E.preventDefault(),A(!0),document.body.style.cursor="col-resize",document.body.style.userSelect="none")};o.useEffect(()=>{const E=()=>{if(z&&(A(!1),document.body.style.cursor="",document.body.style.userSelect="",L.current)){const C=parseInt(L.current.style.width,10);isNaN(C)||l(C)}},K=C=>{if(z&&L.current){const Y=Math.max(390,Math.min(C.clientX,800));L.current.style.width=`${Y}px`}};return z&&(window.addEventListener("mousemove",K),window.addEventListener("mouseup",E)),()=>{window.removeEventListener("mousemove",K),window.removeEventListener("mouseup",E)}},[z,l]);const _=()=>{f&&de(!1)},U=()=>{if(!i||!a[i])return{isHealthy:!1,score:0,integrity:[],completeness:[]};const E=a[i],K=[],C=[],Y=E.groups.flatMap(B=>B.clauses),xe=B=>B.reduce((ie,ne)=>(ie.push(ne),ne.subClauses&&ie.push(...xe(ne.subClauses)),ie),[]),le=xe(Y),J=le.filter(B=>!B.description||B.description.trim().length<2).length;K.push({label:"Content Quality",status:J===0?"pass":"fail",detail:J===0?"Descriptions OK":`${J} incomplete`});const H=new Set(le.map(B=>B.code)),se=le.length-H.size;if(K.push({label:"Data Cleanliness",status:se===0?"pass":"fail",detail:se===0?"Clean":`${se} Duplicates`}),S&&S.length>1e3){let B=0;const ie=le.slice(0,20);ie.forEach(at=>{S.includes(at.code)||B++});const ne=B/ie.length,Ie=ne<.2;C.push({label:"Source Verification",status:Ie?"pass":"fail",detail:Ie?"Matches Document":`${(ne*100).toFixed(0)}% Clauses Missing in Source`})}else C.push({label:"Source Verification",status:"fail",detail:"No Source Document Linked"});if(i.includes("9001")&&["8.4","8.6","8.7","7.1.4"].forEach(ie=>{const ne=le.some(Ie=>Ie.code===ie);C.push({label:`Clause ${ie}`,status:ne?"pass":"fail",detail:ne?"Present":"Missing (Required)"})}),i.includes("27001")){const B=le.filter(ne=>ne.code.startsWith("A.")),ie=B.length>=90;C.push({label:"Annex A Controls",status:ie?"pass":"fail",detail:ie?`${B.length} Controls (OK)`:`${B.length}/93 (Incomplete)`})}const ee=K.every(B=>B.status==="pass"),Q=C.every(B=>B.status==="pass"),ke=ee&&Q,ge=K.length+C.length,me=K.filter(B=>B.status==="pass").length+C.filter(B=>B.status==="pass").length,Ne=Math.round(me/(ge||1)*100);return{isHealthy:ke,score:Ne,integrity:K,completeness:C}},X=async()=>{if(!(!i||!a[i])){W(!0),v(null);try{const E=JSON.parse(JSON.stringify(a[i])),K=[],C=[];let Y=0;const xe=J=>{J.forEach(H=>{(!H.description||H.description.trim().length<5)&&K.push({ref:H,code:H.code,title:H.title}),H.subClauses&&xe(H.subClauses)})};if(E.groups.forEach(J=>xe(J.clauses)),K.length>0){const J=K.map(ee=>({code:ee.code,title:ee.title})),H=await lr(J),se=it(H);if(Array.isArray(se)){const ee=se.reduce((Q,ke)=>(ke.code&&ke.description&&(Q[ke.code]=ke.description),Q),{});K.forEach(Q=>{ee[Q.code]&&(Q.ref.description=ee[Q.code],C.push(Q.ref.id))})}}const le=J=>{const H=new Set,se=[];for(const ee of J)H.has(ee.code)?Y++:(H.add(ee.code),ee.subClauses&&(ee.subClauses=le(ee.subClauses)),se.push(ee));return se};E.groups.forEach(J=>{J.clauses=le(J.clauses)}),j(E),O(C),v({fixed:C.length,cleaned:Y})}catch(E){console.error("Repair failed",E),alert("Failed to repair automatically.")}finally{W(!1)}}},ue=()=>{confirm("Are you sure? This will remove all AI repairs and revert to the original static data.")&&(T(i),D(!1),v(null),O([]))},ve="text-indigo-700 dark:text-indigo-400",q=U(),je=!ft[i]||a[i]&&a[i]!==ft[i],Le=(()=>{const E=Object.keys(a).map(Y=>({value:Y,label:a[Y].name})),K=new Set;return[...E.filter(Y=>{const xe=K.has(Y.label);return K.add(Y.label),!xe}),{value:"ADD_NEW",label:"+ Add New Standard..."}]})(),Me=(()=>{let E=0;return i&&E++,m.type&&E++,m.company&&E++,m.auditor&&E++,Math.min(4,E)})();return e.jsxs("div",{ref:L,className:`${r?"border-r":"w-0 border-0 overflow-hidden"} flex flex-col bg-white dark:bg-slate-900 border-gray-200 dark:border-slate-800 shadow-2xl z-50 relative shrink-0 ${z?"transition-none":"transition-[width] duration-300 ease-soft"} h-full dark:shadow-[5px_0_15px_-3px_rgba(0,0,0,0.5)]`,style:{width:r?window.innerWidth<768?"100%":c:0},children:[r&&e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1.5 cursor-col-resize hover:bg-indigo-500 transition-colors z-50 group resize-handle hidden md:block",onMouseDown:$}),e.jsxs("div",{className:"flex-shrink-0 bg-white dark:bg-slate-900 w-full md:min-w-[390px] flex flex-col transition-all duration-400 ease-soft overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer group select-none hover:bg-gray-50 dark:hover:bg-slate-800/50",onClick:()=>de(!f),title:f?"Collapse Mission Charter":"Expand Mission Charter",children:[e.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-500 transition-colors",children:[e.jsx(x,{name:"Session8_Flag",size:14,className:"text-indigo-500"}),"Audit Mission Charter",e.jsx(x,{name:"ChevronDown",size:12,className:`transition-transform duration-300 text-slate-300 group-hover:text-indigo-400 ${f?"rotate-180":""}`})]}),e.jsx("div",{className:"flex gap-2",onClick:E=>E.stopPropagation(),children:e.jsx("div",{className:"flex gap-0.5 items-center",children:[1,2,3,4].map(E=>e.jsx("div",{className:`w-3 h-1 rounded-full ${E<=Me?"bg-indigo-500":"bg-gray-200 dark:bg-slate-700"}`},E))})})]}),e.jsx("div",{className:`grid transition-all duration-300 ease-in-out border-b border-gray-100 dark:border-slate-800 ${f?"grid-rows-[1fr] opacity-100 p-4 pt-0":"grid-rows-[0fr] opacity-0 p-0"}`,children:e.jsx("div",{className:"overflow-hidden",children:e.jsx(dr,{standards:a,standardKey:i,setStandardKey:u,auditInfo:m,setAuditInfo:b,onAddNewStandard:N,onOpenIntegrity:()=>D(!0),knowledgeFileName:G,onKnowledgeUpload:R,onClearKnowledge:k,health:q,auditFieldIconColor:ve,standardOptions:Le})})})]}),e.jsx(cr,{standard:a[i],standardKey:i,selectedClauses:h,setSelectedClauses:w,onReferenceClause:I,repairedIds:M,onScrollTrigger:_}),e.jsx(ur,{isOpen:P,onClose:()=>D(!1),health:q,isCustomStandard:je,onResetStandard:ue,onAutoRepair:X,isRepairing:ce,repairStats:Z})]})},pr=({isOpen:r,onClose:c})=>{const[l,a]=o.useState(!1);return o.useEffect(()=>{r&&a(!1)},[r]),r?e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999] p-4 fade-in backdrop-blur-md",onClick:c,children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-2xl w-full max-w-3xl flex flex-col h-[90vh] md:h-[85vh] border border-gray-100 dark:border-slate-800 transform transition-all scale-100 overflow-hidden relative",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex-shrink-0 relative overflow-hidden group",children:[e.jsxs("div",{className:"absolute inset-0 bg-slate-900",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-600/20 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-amber-600/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"}),e.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20"})]}),e.jsx("button",{onClick:c,className:"absolute top-4 right-4 text-slate-400 hover:text-white z-50 p-2 bg-slate-800/50 rounded-full hover:bg-red-500/20 transition-all border border-transparent hover:border-red-500/30",children:e.jsx(x,{name:"X",size:20})}),e.jsxs("div",{className:"relative px-6 py-6 md:px-8 md:py-8 flex flex-col md:flex-row items-center md:items-start gap-6 md:gap-8 z-10",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"absolute -inset-10 bg-indigo-600/30 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -inset-[6px] rounded-full bg-[conic-gradient(from_0deg,transparent_0_deg,#f472b6_100deg,#8b5cf6_200deg,#06b6d4_300deg,transparent_360deg)] opacity-100 blur-md animate-[spin_4s_linear_infinite]"}),e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-br from-amber-400 via-pink-500 to-cyan-500 rounded-full opacity-60 blur-lg animate-pulse"}),e.jsx("div",{className:"relative w-24 h-24 rounded-full p-0.5 bg-slate-900 ring-1 ring-white/10 z-10 overflow-hidden shadow-2xl",children:l?e.jsxs("div",{className:"w-full h-full rounded-full flex items-center justify-center bg-black relative overflow-hidden border-2 border-slate-800/50",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_#1e1b4b_0%,_#000000_100%)]"}),e.jsx("div",{className:"absolute inset-0 opacity-30 bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"}),e.jsx("div",{className:"absolute inset-[-100%] bg-gradient-to-tr from-transparent via-cyan-400/30 to-transparent rotate-45 animate-[spinReverse_6s_linear_infinite]"}),e.jsx("div",{className:"relative z-10 transform scale-110 drop-shadow-[0_0_25px_rgba(0,242,195,0.8)]",children:e.jsx(x,{name:"TDLogo",size:56})})]}):e.jsx("img",{src:"./author.png",alt:"Trung DANGHOANG",className:"w-full h-full rounded-full object-cover bg-slate-800 border-2 border-slate-800",onError:()=>a(!0)})}),e.jsx("div",{className:"absolute bottom-0 right-0 z-20 bg-blue-500 text-white p-1 rounded-full border-4 border-slate-900 shadow-sm",title:"Verified Creator",children:e.jsx(x,{name:"CheckLineart",size:12})})]}),e.jsxs("div",{className:"flex-1 min-w-0 text-center md:text-left relative z-10",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-2 mb-1",children:[e.jsx("span",{className:"px-2 py-0.5 rounded-md bg-amber-500/10 border border-amber-500/30 text-[0.6rem] font-bold text-amber-500 uppercase tracking-widest shadow-[0_0_15px_rgba(245,158,11,0.15)]",children:"Solution Architect"}),e.jsx("span",{className:"px-2 py-0.5 rounded-md bg-indigo-500/10 border border-indigo-500/30 text-[0.6rem] font-bold text-indigo-400 uppercase tracking-widest",children:"AI Core Lead"})]}),e.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white tracking-tight leading-none mb-2 drop-shadow-[0_4px_10px_rgba(0,0,0,0.5)]",children:"Trung DANGHOANG"}),e.jsxs("p",{className:"text-slate-400 text-sm font-medium flex items-center justify-center md:justify-start gap-2",children:["Creator of ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-indigo-400 font-bold",children:"ISO Audit Pro"})]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 md:p-8 bg-gray-50 dark:bg-slate-950",children:[e.jsxs("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-5 rounded-2xl bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 shadow-sm",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2 border-b border-gray-100 dark:border-slate-800 pb-2",children:[e.jsx(x,{name:"Cpu",size:14})," System Core"]}),e.jsxs("div",{className:"grid grid-cols-[120px_1fr] gap-y-3 gap-x-4 items-center",children:[e.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 text-right",children:"App Version"}),e.jsxs("span",{className:"font-mono font-bold text-indigo-600 dark:text-indigo-400 text-sm tabular-nums",children:["v",Os]}),e.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 text-right",children:"Build Time"}),e.jsx("span",{className:"font-mono text-[10px] text-slate-500 tabular-nums leading-tight",children:zs}),e.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 text-right",children:"Engine"}),e.jsx("span",{className:"font-mono text-[10px] font-bold text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded inline-block w-fit",children:"Gemini 3.0 Pro"})]})]}),e.jsxs("div",{className:"p-5 rounded-2xl bg-white dark:bg-slate-900 border border-gray-100 dark:border-slate-800 shadow-sm",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2 border-b border-gray-100 dark:border-slate-800 pb-2",children:[e.jsx(x,{name:"Sparkle",size:14})," Capabilities"]}),e.jsx("div",{className:"space-y-3",children:Vs.map((i,u)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 w-1.5 h-1.5 rounded-full bg-indigo-500 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-xs font-bold text-slate-800 dark:text-white block mb-0.5",children:i.title}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 leading-tight block",children:i.desc})]})]},u))})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-6 flex items-center gap-2",children:[e.jsx(x,{name:"History",size:14})," Release History"]}),e.jsx("div",{className:"ml-2 border-l-2 border-slate-200 dark:border-slate-800 space-y-8 pl-6 relative",children:Us.map((i,u)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:`absolute -left-[31px] top-1 w-2.5 h-2.5 rounded-full border-2 border-white dark:border-slate-900 transition-colors duration-300 ${u===0?"bg-indigo-500 shadow-[0_0_0_4px_rgba(99,102,241,0.2)]":"bg-slate-300 dark:bg-slate-700"}`}),e.jsxs("div",{className:"flex flex-row items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h4",{className:`text-sm font-bold tabular-nums ${u===0?"text-indigo-600 dark:text-indigo-400":"text-slate-800 dark:text-slate-200"}`,children:["v",i.version]}),u===0&&e.jsx("span",{className:"text-[9px] font-bold bg-indigo-100 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-300 px-1.5 py-0.5 rounded uppercase",children:"Latest"})]}),e.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded tabular-nums",children:i.date})]}),e.jsx("ul",{className:"space-y-1.5",children:i.features.map((m,b)=>{const[h,...w]=m.split(":"),N=w.length>0;return e.jsx("li",{className:"text-xs text-slate-600 dark:text-slate-300 flex items-start gap-2 leading-relaxed",children:N?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-bold text-[9px] min-w-[50px] text-right uppercase text-slate-400 dark:text-slate-500 mt-0.5",children:h}),e.jsx("span",{className:"text-slate-300 dark:text-slate-600",children:"|"}),e.jsx("span",{children:w.join(":")})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-1 h-1 bg-slate-400 rounded-full mt-1.5 flex-shrink-0"}),e.jsx("span",{children:m})]})},b)})})]},u))})]}),e.jsx("div",{className:"mt-10 pt-6 border-t border-gray-100 dark:border-slate-800 text-center",children:e.jsxs("p",{className:"text-[10px] text-slate-400",children:[" 2025 Trung DANGHOANG. All rights reserved. ",e.jsx("br",{}),"Built for ISO Audit Professional Compliance."]})})]})]})}):null},hr=({isOpen:r,onClose:c,clause:l,standardName:a,fullText:i,isLoading:u,onInsert:m})=>{const[b,h]=o.useState("en"),[w,N]=o.useState(!1),[j,T]=o.useState(""),I=b==="en"?i.en:i.vi,P=o.useMemo(()=>{if(!a)return{text:"ISO",colorClass:"bg-gray-100 text-gray-600"};const S=a.match(/\((.*?)\)/),R=S?S[1]:a.split(" ")[0]||"ISO",k=R.toUpperCase();let L="bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300 border-indigo-100 dark:border-indigo-800/50";return k.includes("EMS")||k.includes("14001")?L="bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-700/50":k.includes("QMS")||k.includes("9001")?L="bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-700/50":(k.includes("ISMS")||k.includes("27001"))&&(L="bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-700/50"),{text:R,colorClass:L}},[a]);o.useEffect(()=>{if(!r){T("");return}if(u||!I){T("");return}const S=I.split(`
`);let R=0,k="";const L=setTimeout(()=>{const z=setInterval(()=>{R<S.length?(k+=(S[R]||"")+`
`,T(k),R++):clearInterval(z)},20);return()=>clearInterval(z)},50);return()=>clearTimeout(L)},[r,I,u]);const D=()=>{m(I)},G=()=>{bt(I),N(!0),setTimeout(()=>N(!1),2e3)};return e.jsx(rt,{isOpen:r,title:"Clause Reference",onClose:c,children:e.jsxs("div",{className:"flex flex-col h-full gap-3",children:[l&&e.jsxs("div",{className:"flex items-start gap-3 pb-2 border-b border-gray-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-sm font-black text-indigo-700 dark:text-indigo-400 uppercase bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded-lg border border-indigo-100 dark:border-indigo-800 shrink-0",children:l.code}),e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-white leading-tight mt-1",children:l.title})]}),u?e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-slate-500 gap-4",children:[e.jsxs("div",{className:"relative w-16 h-16",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-indigo-200 dark:border-indigo-800 rounded-full opacity-20"}),e.jsx("div",{className:"absolute inset-0 border-t-2 border-indigo-600 rounded-full animate-spin"})]}),e.jsx("span",{className:"text-sm font-bold animate-pulse",children:"Consulting Gemini AI Auditor..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded-full border shadow-sm uppercase tracking-wider ${P.colorClass}`,children:P.text}),e.jsxs("div",{className:"lang-pill-container shadow-sm border-gray-200 dark:border-slate-700",children:[e.jsx("span",{onClick:()=>h("en"),className:`lang-pill-btn ${b==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:()=>h("vi"),className:`lang-pill-btn ${b==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("button",{onClick:G,disabled:w,className:`p-2 rounded-xl transition-all hover:scale-110 active:scale-95 disabled:opacity-70 border shadow-sm ${w?"text-emerald-600 border-emerald-200 bg-emerald-50 dark:bg-emerald-900/20":"bg-white dark:bg-slate-800 border-gray-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600"}`,title:w?"Copied!":"Copy to Clipboard",children:e.jsx(x,{name:w?"CheckThick":"Copy",size:16})}),e.jsx("button",{onClick:D,className:"p-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow-lg shadow-indigo-500/20 transition-all hover:scale-110 active:scale-95",title:"Insert Reference into Evidence",children:e.jsx(x,{name:"Quote",size:16})})]})]}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto custom-scrollbar bg-gray-50/50 dark:bg-slate-950/50 rounded-2xl border border-gray-100 dark:border-slate-800 relative shadow-inner text-left",children:e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.jsxs("p",{className:"text-xs md:text-sm text-slate-800 dark:text-slate-200 whitespace-pre-wrap leading-7 font-medium tracking-wide",children:[j,!u&&j!==I&&e.jsx("span",{className:"inline-block w-1.5 h-4 bg-indigo-500 animate-pulse ml-1 align-middle"})]})})})]})]})})},gr=({isOpen:r,onClose:c,onRestore:l})=>{const[a,i]=o.useState([]),[u,m]=o.useState(null);o.useEffect(()=>{r&&b()},[r]);const b=()=>{var j,T,I;try{const P=localStorage.getItem("iso_session_data");if(P){const G=JSON.parse(P),S=((j=G.evidence)==null?void 0:j.trim())||((T=G.selectedClauses)==null?void 0:T.length)>0||((I=G.auditInfo)==null?void 0:I.company);m(S?{id:"current_autosave",timestamp:Date.now(),label:"Latest Auto-Save",triggerType:"AUTO_SAVE",data:G}:null)}else m(null);const D=localStorage.getItem("iso_session_history");if(D){const G=JSON.parse(D);i(G.sort((S,R)=>R.timestamp-S.timestamp))}else i([])}catch(P){console.error("Failed to load session history",P)}},h=j=>new Date(j).toLocaleString(),w=j=>{const T=j.data.evidence?j.data.evidence.length:0,I=j.data.selectedClauses?j.data.selectedClauses.length:0,P=j.data.analysisResult?j.data.analysisResult.length:0;return e.jsxs("div",{className:"flex gap-3 mt-2 text-[10px] text-slate-500 font-mono",children:[e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(x,{name:"FileText",size:10})," ",T>0?`${(T/1024).toFixed(1)}KB Evid`:"No Evid"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(x,{name:"CheckSquare",size:10})," ",I," Clauses"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:[e.jsx(x,{name:"Wand2",size:10})," ",P," Findings"]})]})},N=(j,T)=>e.jsxs("div",{onClick:()=>l(j),className:`group relative p-4 rounded-2xl border cursor-pointer transition-all duration-300 hover:scale-[1.02] active:scale-95 ${T?"bg-indigo-50/50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 ring-1 ring-indigo-500/20":"bg-white dark:bg-slate-900 border-gray-100 dark:border-slate-800 hover:border-indigo-300 dark:hover:border-indigo-700 hover:shadow-lg"}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[9px] font-black uppercase tracking-wider px-2 py-0.5 rounded-full ${T?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/30":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,children:T?"ACTIVE STATE":"BACKUP ARCHIVE"}),e.jsx("span",{className:"text-xs text-slate-400 font-mono",children:h(j.timestamp)})]})}),e.jsxs("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 truncate",children:[j.data.auditInfo.company||"Untitled Company",e.jsx("span",{className:"font-normal text-slate-400 mx-1",children:"|"}),j.data.auditInfo.type||"Untitled Audit"]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate mb-1",children:["Standard: ",Ht(j.data.standardKey).replace(/_/g," ")]}),w(j),e.jsx("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"bg-indigo-600 text-white p-2 rounded-full shadow-xl",children:e.jsx(x,{name:"History",size:20})})})]},j.id);return r?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:c,children:e.jsxs("div",{className:"bg-white dark:bg-slate-950 w-full max-w-2xl rounded-3xl shadow-2xl border border-gray-200 dark:border-slate-800 overflow-hidden flex flex-col max-h-[85vh] animate-zoom-in-spring",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-slate-800 bg-gray-50/50 dark:bg-slate-900/50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(x,{name:"History",className:"text-indigo-500"}),"Session Time Machine"]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Select a restoration point. This will overwrite your current workspace."})]}),e.jsx("button",{onClick:c,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-slate-800 text-slate-400 transition-colors",children:e.jsx(x,{name:"X",size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6 bg-gray-50/30 dark:bg-slate-950",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"Available Auto-Save"]}),u?N(u,!0):e.jsx("div",{className:"p-4 border border-dashed border-gray-300 dark:border-slate-700 rounded-xl text-center text-slate-400 text-xs italic",children:"No active auto-save data found."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(x,{name:"Lock",size:12}),"Backup Vault (Last 5 Resets)"]}),e.jsx("div",{className:"space-y-3",children:a.length>0?a.map(j=>N(j,!1)):e.jsxs("div",{className:"p-8 border border-dashed border-gray-300 dark:border-slate-700 rounded-xl text-center",children:[e.jsx(x,{name:"Archive",className:"mx-auto mb-2 text-slate-300",size:24}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Vault is empty."}),e.jsx("p",{className:"text-slate-400 text-xs",children:"Backups are created automatically when you start a New Session."})]})})]})]}),e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-slate-900 border-t border-gray-100 dark:border-slate-800 text-center",children:e.jsxs("p",{className:"text-[10px] text-slate-400",children:[e.jsx("span",{className:"font-bold text-indigo-500",children:"Pro Tip:"})," Backups are stored locally in your browser. Clearing cache will delete them."]})})]})}):null},mr=({evidence:r,setEvidence:c,uploadedFiles:l,setUploadedFiles:a,onOcrProcess:i,isOcrLoading:u,onAnalyze:m,isReadyForAnalysis:b,isAnalyzeLoading:h,analyzeTooltip:w,onExport:N,evidenceLanguage:j,setEvidenceLanguage:T,textareaRef:I})=>{const[P,D]=o.useState(!1),G=o.useRef(null),S=f=>{const de=f.map(ce=>({id:Math.random().toString(36).substr(2,9),file:ce,status:"pending"}));a(ce=>[...ce,...de])},R=f=>{f.preventDefault(),D(!0)},k=f=>{f.preventDefault(),D(!1)},L=f=>{f.preventDefault(),D(!1),f.dataTransfer.files&&f.dataTransfer.files.length>0&&S(Array.from(f.dataTransfer.files))},z=f=>{f.clipboardData.files&&f.clipboardData.files.length>0&&(f.preventDefault(),S(Array.from(f.clipboardData.files)))},A=f=>{a(de=>de.filter(ce=>ce.id!==f))};return e.jsxs("div",{className:"h-full flex flex-col gap-2 md:gap-4 animate-fade-in-up relative",children:[e.jsxs("div",{className:"flex-1 flex flex-col gap-2 md:gap-4 min-h-0",children:[e.jsxs("div",{className:`flex-1 bg-white dark:bg-slate-900 rounded-3xl shadow-sm border overflow-hidden flex flex-col relative group transition-all duration-300 dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_4px_6px_-1px_rgba(0,0,0,0.5)] ${P?"border-indigo-500 ring-4 ring-indigo-500/20 bg-indigo-50/10":"border-gray-100 dark:border-transparent"}`,onDragOver:R,onDragLeave:k,onDrop:L,children:[P&&e.jsxs("div",{className:"absolute inset-0 bg-indigo-500/10 backdrop-blur-[2px] z-50 flex flex-col items-center justify-center pointer-events-none animate-in fade-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"p-6 rounded-full bg-white dark:bg-slate-900 shadow-2xl border-4 border-dashed border-indigo-500",children:e.jsx(x,{name:"UploadCloud",size:48,className:"text-indigo-600 animate-bounce"})}),e.jsxs("h3",{className:"mt-4 text-xl font-black text-indigo-700 dark:text-indigo-400 uppercase tracking-widest text-center",children:["Drop Files to Extract",e.jsx("br",{}),e.jsx("span",{className:"text-sm font-normal normal-case",children:"(Images, PDF, TXT)"})]})]}),e.jsx("textarea",{ref:I,className:"flex-1 w-full h-full p-4 pb-6 bg-transparent resize-none focus:outline-none text-slate-700 dark:text-slate-300 font-medium text-sm leading-relaxed text-justify break-words whitespace-pre-wrap",placeholder:"Paste audit evidence here or drag files (Images, PDF, TXT) directly...",value:r,onChange:f=>c(f.target.value),onPaste:z})]}),l.length>0&&e.jsx("div",{className:"flex-shrink-0 p-3 bg-gray-50 dark:bg-slate-900 border border-gray-200 dark:border-white/5 rounded-2xl animate-in slide-in-from-bottom-5 duration-300 dark:shadow-inner",children:e.jsxs("div",{className:"flex gap-3 overflow-x-auto custom-scrollbar pb-2",children:[l.map(f=>e.jsxs("div",{className:`relative group flex-shrink-0 w-24 h-24 bg-white dark:bg-slate-800 rounded-xl shadow-sm border overflow-hidden transition-all duration-300 dark:shadow-lg ${f.status==="error"?"border-red-500 ring-2 ring-red-500/20":"border-gray-100 dark:border-white/5"}`,children:[f.file.type.startsWith("image/")?e.jsx("img",{src:URL.createObjectURL(f.file),alt:"preview",className:`w-full h-full object-cover transition-opacity ${f.status==="processing"?"opacity-30":"opacity-80 group-hover:opacity-100"}`}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-indigo-50 dark:bg-indigo-900/20 p-2 text-center",children:[e.jsx(x,{name:f.file.type==="application/pdf"?"FileText":"Book",size:24,className:"text-indigo-600 dark:text-indigo-400 mb-1"}),e.jsx("span",{className:"text-[8px] font-bold text-indigo-700 dark:text-indigo-300 truncate w-full",children:f.file.name})]}),f.status==="processing"&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/40 dark:bg-black/40",children:e.jsx(x,{name:"Loader",className:"animate-spin text-indigo-600",size:24})}),f.status==="success"&&e.jsx("div",{className:"absolute top-1 right-1 bg-emerald-500 text-white rounded-full p-0.5 shadow-sm",children:e.jsx(x,{name:"CheckThick",size:10})}),f.status==="error"&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-50/80 dark:bg-red-950/80 p-1 text-center",children:[e.jsx(x,{name:"AlertCircle",size:20,className:"text-red-600"}),e.jsx("span",{className:"text-[7px] font-black text-red-600 uppercase leading-tight mt-1",children:f.error||"Li"})]}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center z-20",children:e.jsx("button",{onClick:()=>A(f.id),className:"bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 shadow-lg transform scale-90 hover:scale-110 transition-all duration-200",children:e.jsx(x,{name:"X",size:14})})})]},f.id)),e.jsx("div",{className:"flex-shrink-0 w-24 h-24 flex items-center justify-center",children:e.jsxs("button",{onClick:i,disabled:u||!l.some(f=>f.status==="pending"||f.status==="error"),className:"w-full h-full bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow-lg shadow-indigo-500/30 flex flex-col items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-50 hover:scale-105 duration-300",children:[u?e.jsx(x,{name:"Loader",className:"animate-spin",size:24}):e.jsx(x,{name:"ScanText",size:24}),e.jsx("span",{className:"text-[10px] font-bold",children:"Process"})]})})]})})]}),e.jsxs("div",{className:"flex-shrink-0 flex flex-row items-center md:justify-end gap-2 md:gap-3 w-full pt-2",children:[e.jsxs("div",{className:"flex-none w-[52px] md:w-auto",children:[e.jsx("input",{type:"file",ref:G,className:"hidden",accept:"image/*,application/pdf,text/plain",multiple:!0,onChange:f=>f.target.files&&S(Array.from(f.target.files))}),e.jsxs("button",{onClick:()=>{var f;return(f=G.current)==null?void 0:f.click()},className:`w-full h-[52px] md:w-auto md:px-4 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm border whitespace-nowrap ${l.length>0?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 text-indigo-600 dark:text-indigo-400":"bg-white dark:bg-slate-800 border-gray-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:border-indigo-500"}`,title:"Upload Files",children:[e.jsx(x,{name:l.length>0?"Demo1_MultiFiles":"Demo8_GridPlus",size:20}),e.jsx("span",{className:"hidden md:inline",children:"Upload"})]})]}),e.jsxs("button",{onClick:m,disabled:!b,title:w,className:`flex-1 md:flex-none md:w-auto md:px-6 h-[52px] rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg whitespace-nowrap ${b?"btn-shrimp text-white active:scale-95":"bg-gray-200 dark:bg-slate-800 text-slate-400 dark:text-slate-600 opacity-70 cursor-not-allowed border border-transparent"}`,children:[h?e.jsx(Ks,{className:"text-white"}):e.jsx(x,{name:"Wand2",size:20,className:"hidden md:block"}),e.jsx("span",{className:"inline text-xs uppercase tracking-wider",children:"Analyze"})]}),e.jsxs("button",{onClick:()=>N("evidence",j),disabled:!r||!r.trim(),className:"flex-none md:w-auto px-3 md:px-4 h-[52px] bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm disabled:opacity-50 whitespace-nowrap dark:shadow-md",children:[e.jsx(x,{name:"Download"}),e.jsx("span",{className:"hidden md:inline",children:"Export"}),e.jsxs("div",{className:"lang-pill-container ml-1",children:[e.jsx("span",{onClick:f=>{f.stopPropagation(),T("en")},className:`lang-pill-btn ${j==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:f=>{f.stopPropagation(),T("vi")},className:`lang-pill-btn ${j==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]})]})]})},fr=({analysisResult:r,setAnalysisResult:c,selectedFindings:l,setSelectedFindings:a,isAnalyzeLoading:i,loadingMessage:u,currentAnalyzingClause:m,viewMode:b,setViewMode:h,focusedFindingIndex:w,setFocusedFindingIndex:N,onExport:j,notesLanguage:T,setNotesLanguage:I})=>{const P=o.useRef(null),D=o.useRef([]);o.useEffect(()=>{b==="list"&&P.current&&(P.current.scrollTop=P.current.scrollHeight)},[r==null?void 0:r.length,b]);const G=(k,L,z)=>{if(c(A=>{if(!A)return null;const f=[...A];return f[k]={...f[k],[L]:z},f}),L==="status"&&r){const A=k+1;A<r.length&&D.current[A]&&setTimeout(()=>{var f;return(f=D.current[A])==null?void 0:f.scrollIntoView({behavior:"smooth",block:"center"})},100)}},S=k=>{switch(k){case"COMPLIANT":return{bg:"bg-emerald-500",text:"text-emerald-700 dark:text-emerald-300",pill:"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300",border:"border-emerald-500",headerText:"text-emerald-600 dark:text-emerald-400 border-emerald-600 dark:border-emerald-400"};case"NC_MAJOR":return{bg:"bg-red-600",text:"text-red-700 dark:text-red-300",pill:"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300",border:"border-red-600",headerText:"text-red-600 dark:text-red-400 border-red-600 dark:border-red-400"};case"NC_MINOR":return{bg:"bg-orange-500",text:"text-orange-700 dark:text-orange-300",pill:"bg-orange-100 dark:bg-orange-900/40 text-orange-700 dark:text-orange-300",border:"border-orange-500",headerText:"text-orange-500 dark:text-orange-400 border-orange-500 dark:border-orange-400"};case"OFI":return{bg:"bg-blue-500",text:"text-blue-700 dark:text-blue-300",pill:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300",border:"border-blue-500",headerText:"text-blue-600 dark:text-blue-400 border-blue-600 dark:border-blue-400"};default:return{bg:"bg-slate-500",text:"text-slate-600",pill:"bg-slate-100 text-slate-500",border:"border-slate-300",headerText:"text-slate-500 border-slate-300"}}},R=(k,L,z=!1)=>{const A=S(k.status);return e.jsxs("div",{ref:z?null:f=>{D.current[L]=f},className:`group relative bg-white dark:bg-slate-900 rounded-lg p-3 border-y border-r border-l-[6px] transition-all duration-200 hover:shadow-md dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05)] ${A.border} ${l[k.clauseId]?"border-r-indigo-500 ring-1 ring-indigo-500/20":"border-r-gray-100 dark:border-r-transparent"}`,onClick:()=>a(f=>({...f,[k.clauseId]:!f[k.clauseId]})),children:[e.jsx("div",{className:"absolute top-3 right-3 z-10",children:l[k.clauseId]?e.jsx("div",{className:"animate-in zoom-in spin-in-180 duration-300",children:e.jsx(x,{name:"CheckThick",size:22,className:"text-emerald-500 drop-shadow-sm"})}):e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-200 dark:border-slate-700 group-hover:border-indigo-300 transition-colors"})}),e.jsxs("div",{className:"pr-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-500 dark:text-slate-400 bg-gray-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:k.clauseId}),e.jsx("div",{className:"relative group/badge",onClick:f=>f.stopPropagation(),children:e.jsxs("select",{value:k.status,onChange:f=>G(L,"status",f.target.value),className:`appearance-none cursor-pointer text-[9px] font-black uppercase tracking-wider px-2 py-0.5 rounded-full ${A.pill} border-none outline-none hover:brightness-95 text-center transition-all text-slate-900 dark:text-white`,children:[e.jsx("option",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white",value:"COMPLIANT",children:"COMPLIANT"}),e.jsx("option",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white",value:"NC_MINOR",children:"MINOR"}),e.jsx("option",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white",value:"NC_MAJOR",children:"MAJOR"}),e.jsx("option",{className:"bg-white dark:bg-slate-900 text-slate-900 dark:text-white",value:"OFI",children:"OFI"})]})})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-950/50 p-3 rounded-xl border border-gray-100 dark:border-slate-800",children:[e.jsx("strong",{className:"block text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider mb-1",children:"Evidence:"}),e.jsx("p",{className:"text-xs text-slate-700 dark:text-slate-300 leading-relaxed",children:k.evidence})]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-3 rounded-xl border-2 border-slate-100 dark:border-slate-800 hover:border-indigo-200 dark:hover:border-indigo-900/50 transition-colors group-focus-within:border-indigo-500 shadow-sm",onClick:f=>f.stopPropagation(),children:[e.jsx("strong",{className:"block text-[10px] font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wider mb-1",children:"Conclusion:"}),e.jsx("textarea",{value:k.reason,onChange:f=>G(L,"reason",f.target.value),className:"w-full bg-transparent outline-none text-xs text-slate-800 dark:text-slate-200 leading-relaxed resize-none h-auto min-h-[60px]",placeholder:"Enter conclusion..."})]})}),k.suggestion&&e.jsxs("div",{className:"flex gap-1.5 items-start",children:[e.jsx(x,{name:"Lightbulb",size:12,className:"text-amber-500 mt-0.5 shrink-0"}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 italic leading-tight",children:k.suggestion})]})]})]},L)};return e.jsxs("div",{className:"h-full flex flex-col gap-2 md:gap-4 animate-fade-in-up",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-1",ref:P,children:[!r&&!i&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 opacity-60",children:[e.jsx(x,{name:"Wand2",size:48,className:"mb-4 text-gray-200 dark:text-slate-700"}),e.jsx("p",{children:"No analysis results yet."})]}),i&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative w-24 h-24 mb-6",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-indigo-100 dark:border-indigo-900/50 rounded-full opacity-50"}),e.jsx("div",{className:"absolute inset-0 border-t-4 border-indigo-500 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-4 border-r-4 border-purple-500 rounded-full animate-spin-reverse opacity-70"})]}),e.jsx("h3",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 to-purple-500 animate-pulse mb-2",children:"AI Analysis In Progress"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium mb-1",children:u}),e.jsx("p",{className:"text-xs text-slate-400 font-mono",children:m&&`Processing: [${m}]`})]}),r&&(b==="list"?e.jsx("div",{className:"space-y-3",children:r.map((k,L)=>R(k,L))}):e.jsxs("div",{className:"flex flex-col h-full gap-4",children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col bg-gray-50 dark:bg-slate-900/50 rounded-xl border border-gray-100 dark:border-slate-800 overflow-hidden max-h-[40vh]",children:[e.jsxs("div",{className:"grid grid-cols-[60px_1fr_1fr_1fr_1fr] gap-1 p-2 border-b border-gray-200 dark:border-slate-800 bg-white dark:bg-slate-900 sticky top-0 z-10",children:[e.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest text-center",children:"Clause"}),e.jsx("div",{className:"text-[10px] font-bold text-red-500 uppercase tracking-widest text-center",children:"Major"}),e.jsx("div",{className:"text-[10px] font-bold text-orange-500 uppercase tracking-widest text-center",children:"Minor"}),e.jsx("div",{className:"text-[10px] font-bold text-blue-500 uppercase tracking-widest text-center",children:"OFI"}),e.jsx("div",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-widest text-center",children:"Comp"})]}),e.jsx("div",{className:"overflow-y-auto custom-scrollbar",children:r.map((k,L)=>{const z=w===L;return e.jsxs("div",{onClick:()=>N(L),className:`grid grid-cols-[60px_1fr_1fr_1fr_1fr] gap-1 py-1.5 border-b border-gray-100 dark:border-slate-800/50 cursor-pointer transition-colors ${z?"bg-indigo-50 dark:bg-indigo-900/20":"hover:bg-white dark:hover:bg-slate-800"}`,children:[e.jsx("div",{className:`flex items-center justify-center h-full w-full text-[10px] font-mono font-bold ${z?"text-indigo-600 dark:text-indigo-400":"text-slate-500 dark:text-slate-400"}`,children:k.clauseId}),e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:k.status==="NC_MAJOR"&&e.jsx("div",{className:"w-3 h-3 rounded bg-red-500 shadow-sm ring-1 ring-red-300 dark:ring-red-900"})}),e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:k.status==="NC_MINOR"&&e.jsx("div",{className:"w-3 h-3 rounded bg-orange-500 shadow-sm ring-1 ring-orange-300 dark:ring-orange-900"})}),e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:k.status==="OFI"&&e.jsx("div",{className:"w-3 h-3 rounded bg-blue-500 shadow-sm ring-1 ring-blue-300 dark:ring-blue-900"})}),e.jsx("div",{className:"flex items-center justify-center h-full w-full",children:k.status==="COMPLIANT"&&e.jsx("div",{className:"w-3 h-3 rounded bg-emerald-500 shadow-sm ring-1 ring-emerald-300 dark:ring-emerald-900"})})]},L)})})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto custom-scrollbar bg-white dark:bg-slate-900 rounded-2xl border border-gray-100 dark:border-slate-800 p-2 shadow-inner",children:r[w]?R(r[w],w,!0):e.jsx("div",{className:"h-full flex items-center justify-center text-slate-400 italic text-xs",children:"Select a row above to view details"})})]}))]}),e.jsxs("div",{className:"flex-shrink-0 flex flex-row items-center md:justify-end gap-2 md:gap-3 w-full pt-2",children:[e.jsxs("div",{className:"flex-1 md:flex-none md:w-auto h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-xl p-1 flex items-center shadow-sm min-w-0 dark:shadow-md",children:[e.jsxs("button",{onClick:()=>h("list"),className:`flex-1 md:flex-none md:w-auto h-full px-3 rounded-lg flex items-center justify-center gap-2 transition-all whitespace-nowrap ${b==="list"?"bg-indigo-100 text-indigo-700 shadow-sm dark:bg-indigo-900/40 dark:text-indigo-300":"text-slate-400 hover:text-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700/50"}`,title:"List View",children:[e.jsx(x,{name:"LayoutList",size:18}),e.jsx("span",{className:"hidden md:inline text-xs font-bold",children:"List"})]}),e.jsxs("button",{onClick:()=>h("matrix"),className:`flex-1 md:flex-none md:w-auto h-full px-3 rounded-lg flex items-center justify-center gap-2 transition-all whitespace-nowrap ${b==="matrix"?"bg-indigo-100 text-indigo-700 shadow-sm dark:bg-indigo-900/40 dark:text-indigo-300":"text-slate-400 hover:text-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700/50"}`,title:"Matrix View",children:[e.jsx(x,{name:"Grid",size:18}),e.jsx("span",{className:"hidden md:inline text-xs font-bold",children:"Matrix"})]})]}),e.jsxs("button",{onClick:()=>j("notes",T),disabled:!r,className:"flex-none md:w-auto px-3 md:px-4 h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm disabled:opacity-50 whitespace-nowrap dark:shadow-md",children:[e.jsx(x,{name:"Download"}),e.jsx("span",{className:"hidden md:inline",children:"Export"}),e.jsxs("div",{className:"lang-pill-container",children:[e.jsx("span",{onClick:k=>{k.stopPropagation(),I("en")},className:`lang-pill-btn ${T==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:k=>{k.stopPropagation(),I("vi")},className:`lang-pill-btn ${T==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]})]})]})},br=({finalReportText:r,setFinalReportText:c,isReportLoading:l,loadingMessage:a,templateFileName:i,handleTemplateUpload:u,handleGenerateReport:m,isReadyToSynthesize:b,onExport:h,exportLanguage:w,setExportLanguage:N})=>e.jsxs("div",{className:"h-full flex flex-col gap-2 md:gap-4 animate-fade-in-up",children:[e.jsx("div",{className:"flex-1 bg-white dark:bg-slate-900 rounded-3xl shadow-sm border border-gray-100 dark:border-transparent overflow-hidden flex flex-col dark:shadow-[0_0_0_1px_rgba(255,255,255,0.05),0_4px_6px_-1px_rgba(0,0,0,0.5)]",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("textarea",{className:"w-full h-full p-4 resize-none bg-transparent focus:outline-none text-slate-700 dark:text-slate-300 text-sm leading-relaxed font-mono",value:r||"",onChange:j=>c(j.target.value),placeholder:"The final synthesized audit report will appear here..."}),!r&&!l&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none opacity-40",children:[e.jsx(x,{name:"FileText",size:48,className:"text-slate-300 dark:text-slate-600 mb-2"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Ready to generate report"})]}),l&&e.jsx(qs,{message:a})]})}),e.jsxs("div",{className:"flex-shrink-0 flex flex-row items-center md:justify-end gap-2 md:gap-3 w-full pt-2",children:[e.jsxs("label",{className:"flex-none w-[52px] md:w-auto px-0 md:px-4 h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 cursor-pointer transition-all duration-300 active:scale-95 shadow-sm group whitespace-nowrap dark:shadow-md",title:i||"Upload Template",children:[e.jsx(x,{name:"UploadCloud",size:20,className:i?"text-emerald-500":""}),e.jsx("span",{className:"hidden lg:inline",children:i?"Template Loaded":"Upload Template"}),e.jsx("input",{type:"file",accept:".txt,.docx",className:"hidden",onChange:u})]}),e.jsxs("button",{onClick:m,disabled:!b,className:`flex-1 md:flex-none md:w-auto md:px-6 h-[52px] rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg whitespace-nowrap ${b?"btn-shrimp text-white active:scale-95 border-indigo-700":"bg-gray-200 dark:bg-slate-800 text-slate-400 dark:text-slate-600 opacity-70 cursor-not-allowed border-transparent"}`,title:"Synthesize Report",children:[l?e.jsx(x,{name:"Loader",className:"animate-spin text-white",size:20}):e.jsx(x,{name:"Wand2",size:20,className:"hidden md:block"}),e.jsx("span",{className:"inline text-xs uppercase tracking-wider",children:"Synthesize"})]}),e.jsxs("button",{onClick:()=>h("report",w),disabled:!r,className:"flex-none md:w-auto px-3 md:px-4 h-[52px] bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-950 hover:border-indigo-500 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 shadow-sm disabled:opacity-50 whitespace-nowrap dark:shadow-md",children:[e.jsx(x,{name:"Download"}),e.jsx("span",{className:"hidden md:inline",children:"Download"}),e.jsxs("div",{className:"lang-pill-container",children:[e.jsx("span",{onClick:j=>{j.stopPropagation(),N("en")},className:`lang-pill-btn ${w==="en"?"lang-pill-active":"lang-pill-inactive"}`,children:"EN"}),e.jsx("span",{onClick:j=>{j.stopPropagation(),N("vi")},className:`lang-pill-btn ${w==="vi"?"lang-pill-active":"lang-pill-inactive"}`,children:"VI"})]})]})]})]}),vr=({isOpen:r,onClose:c,apiKeys:l,newKeyInput:a,setNewKeyInput:i,isCheckingKey:u,handleAddKey:m,activeKeyId:b,editingKeyId:h,editLabelInput:w,setEditLabelInput:N,handleSaveLabel:j,handleStartEdit:T,handleRefreshStatus:I,handleDeleteKey:P,isAutoCheckEnabled:D,toggleAutoCheck:G})=>e.jsx(rt,{isOpen:r,title:"Settings & Neural Network",onClose:c,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800/50 p-4 rounded-2xl border border-gray-100 dark:border-slate-700 dark:shadow-inner",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-3",children:"API Key Pool Management"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"password",placeholder:"Enter Google Gemini API Key...",className:"flex-1 p-2.5 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-600 rounded-xl text-xs outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500/50 text-slate-800 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 transition-all dark:shadow-[inset_0_1px_2px_rgba(0,0,0,0.5)]",value:a,onChange:S=>i(S.target.value.trim()),onBlur:()=>i(a.trim())}),e.jsx("button",{onClick:m,disabled:u,className:"p-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold text-xs disabled:opacity-50 transition-colors shadow-sm",children:u?e.jsx(x,{name:"Loader",className:"animate-spin"}):e.jsx(x,{name:"Plus"})})]}),e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:[l.map(S=>{let R="bg-slate-300",k="Unknown Status";return S.status==="valid"?(R="bg-emerald-500 shadow-emerald-500/50",k="Active & Working"):S.status==="checking"?(R="bg-yellow-500 animate-pulse",k="Validating..."):S.status==="invalid"?(R="bg-red-500 shadow-red-500/50",k="Invalid / Auth Failed"):S.status==="quota_exceeded"?(R="bg-orange-500",k="Quota Exceeded"):S.status==="referrer_error"?(R="bg-purple-500",k="Blocked by Referrer Restriction"):S.status==="unknown"&&(R="bg-slate-400 border border-slate-500",k="Network Error / Unknown"),e.jsxs("div",{className:`flex items-center justify-between p-2.5 rounded-xl border transition-all duration-200 ${S.id===b?"bg-indigo-50 border-indigo-200 dark:bg-indigo-500/20 dark:border-indigo-500/50 shadow-sm":"bg-white border-gray-100 dark:bg-slate-900 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-slate-500"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsxs("div",{className:"relative group/status",children:[e.jsx("div",{className:`w-2.5 h-2.5 flex-shrink-0 rounded-full shadow-sm ring-1 ring-white/10 cursor-help ${R}`}),e.jsx("div",{className:"absolute left-4 top-0 bg-slate-800 text-white text-[10px] px-2 py-1 rounded shadow-lg whitespace-nowrap opacity-0 group-hover/status:opacity-100 pointer-events-none transition-opacity z-50",children:k})]}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[h===S.id?e.jsx("input",{autoFocus:!0,className:"text-xs font-bold bg-white dark:bg-slate-950 text-slate-900 dark:text-white border-b-2 border-indigo-500 outline-none w-32 px-1 rounded-t",value:w,onChange:L=>N(L.target.value),onBlur:j,onKeyDown:L=>L.key==="Enter"&&j()}):e.jsx("span",{onClick:()=>T(S),className:`text-xs font-bold truncate cursor-pointer transition-colors ${S.id===b?"text-indigo-700 dark:text-indigo-200":"text-slate-700 dark:text-slate-200 hover:text-indigo-500 dark:hover:text-indigo-400"}`,children:S.label}),e.jsxs("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-mono truncate",children:[S.key.substr(0,8),"..."]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[S.activeModel&&e.jsx("span",{className:"text-[9px] bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 px-1.5 py-0.5 rounded text-slate-500 dark:text-slate-400 font-medium hidden sm:inline",children:S.activeModel.replace("gemini-","").replace("-preview","")}),e.jsx("button",{onClick:()=>I(S.id),disabled:S.status==="checking",className:`p-1.5 text-slate-400 hover:text-indigo-500 dark:text-slate-500 dark:hover:text-indigo-400 transition-colors ${S.status==="checking"?"animate-spin":""}`,title:"Re-check Status",children:e.jsx(x,{name:S.status==="checking"?"Loader":"RefreshCw",size:14})}),e.jsx("button",{onClick:L=>{L.stopPropagation(),P(S.id)},className:"p-1.5 text-slate-400 hover:text-red-500 dark:text-slate-500 dark:hover:text-red-400 transition-colors",title:"Delete Key",children:e.jsx(x,{name:"Trash2",size:14})})]})]},S.id)}),l.length===0&&e.jsx("div",{className:"text-center p-4 text-slate-400 text-xs italic",children:"No API Keys found. Add one above to start."})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-slate-900 rounded-2xl border border-gray-100 dark:border-slate-800 shadow-sm dark:shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 rounded-xl",children:e.jsx(x,{name:"Session10_Pulse",size:18})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-white",children:"Auto Health Check"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Periodically validate API keys in background"})]})]}),e.jsx("button",{onClick:()=>G(!D),className:`w-10 h-5 rounded-full transition-colors relative ${D?"bg-emerald-500":"bg-slate-200 dark:bg-slate-700"}`,children:e.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all shadow-sm ${D?"left-6":"left-1"}`})})]})]})}),jr=({exportState:r,setExportState:c,rescueKey:l,setRescueKey:a,handleResumeExport:i,isRescuing:u})=>r.isOpen?e.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-800 p-6 animate-zoom-in-spring",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-white",children:[r.isFinished?e.jsx(x,{name:"CheckCircle2",className:"text-emerald-500",size:24}):e.jsx(x,{name:"Loader",className:"animate-spin text-indigo-500",size:24}),r.isFinished?"Export Complete":"Processing Export..."]}),r.error?e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-xl border border-red-100 dark:border-red-800 mb-4 animate-shake",children:[e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 font-bold mb-2 flex items-center gap-2",children:[e.jsx(x,{name:"AlertCircle",size:16})," Process Paused: Limit Reached"]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3 leading-relaxed",children:"Your existing API keys have hit their quota limits. Add a backup key to resume immediately without losing progress."}),e.jsx("input",{type:"password",placeholder:"Paste Emergency Google AI Key...",className:"w-full p-2 text-xs rounded-lg border border-red-200 dark:border-red-800 bg-white dark:bg-slate-950 mb-3 outline-none focus:border-red-500",value:l,onChange:m=>a(m.target.value)}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>c(m=>({...m,isOpen:!1})),className:"px-3 py-2 text-xs font-bold text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:i,disabled:u||!l.trim(),className:"px-3 py-2 text-xs font-bold bg-red-500 text-white rounded-lg hover:bg-red-600 flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 disabled:active:scale-100",children:[u?e.jsx(x,{name:"Loader",className:"animate-spin",size:12}):e.jsx(x,{name:"Zap",size:12}),"Rescue & Resume"]})]})]}):e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"relative pt-1",children:[e.jsxs("div",{className:"flex mb-2 items-center justify-between",children:[e.jsx("div",{children:e.jsx("span",{className:"text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-indigo-600 bg-indigo-200 dark:text-indigo-200 dark:bg-indigo-900/50",children:r.isFinished?"Done":"Translating"})}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"text-xs font-semibold inline-block text-indigo-600 dark:text-indigo-400",children:[Math.round(r.processedChunksCount/Math.max(r.totalChunks,1)*100),"%"]})})]}),e.jsx("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-indigo-100 dark:bg-slate-800",children:e.jsx("div",{style:{width:`${Math.round(r.processedChunksCount/Math.max(r.totalChunks,1)*100)}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-indigo-500 transition-all duration-500 ease-out"})})]}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-mono",children:["Processing Chunk ",Math.min(r.processedChunksCount+1,r.totalChunks)," of ",r.totalChunks]}),e.jsxs("p",{className:"text-[10px] text-slate-400 italic",children:["Target Language: ",r.targetLang==="vi"?"Vietnamese":"English"]})]})]})]})}):null,kr=({isOpen:r,onClose:c,onAdd:l})=>{const[a,i]=o.useState(""),[u,m]=o.useState(null),b=o.useRef(null),h=()=>{a.trim()&&(l(a.trim(),u),i(""),m(null))},w=N=>{if(N.target.files&&N.target.files[0]&&(m(N.target.files[0]),!a)){const j=N.target.files[0].name;i(Ht(j.replace(/\.[^/.]+$/,"")).replace(/_/g," "))}};return e.jsx(rt,{isOpen:r,title:"Define New Standard",onClose:c,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-2xl border border-indigo-100 dark:border-indigo-800",children:e.jsxs("p",{className:"text-xs text-indigo-800 dark:text-indigo-300 leading-relaxed",children:["Create a custom standard entry. For best results, ",e.jsx("strong",{children:"attach a PDF/DOCX"}),' containing the full standard text. The AI will use this as the "Ground Truth" for citations.']})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase",children:["Standard Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",autoFocus:!0,className:"w-full p-3 pl-10 bg-white dark:bg-slate-950 border border-gray-200 dark:border-slate-700 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all text-slate-800 dark:text-white",placeholder:"e.g. ISO 45001:2018 (OH&S)",value:a,onChange:N=>i(N.target.value),onKeyDown:N=>N.key==="Enter"&&h()}),e.jsx("div",{className:"absolute left-3 top-3 text-slate-400",children:e.jsx(x,{name:"Book",size:18})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Source Document (Optional)"}),e.jsxs("div",{onClick:()=>{var N;return(N=b.current)==null?void 0:N.click()},className:`group relative flex items-center justify-center border-2 border-dashed rounded-xl p-6 cursor-pointer transition-all ${u?"border-emerald-400 bg-emerald-50 dark:bg-emerald-900/10":"border-gray-200 dark:border-slate-700 hover:border-indigo-400 hover:bg-gray-50 dark:hover:bg-slate-800"}`,children:[e.jsx("input",{type:"file",ref:b,className:"hidden",accept:".pdf,.docx,.txt",onChange:w}),u?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-2 shadow-sm",children:e.jsx(x,{name:"CheckThick",size:20})}),e.jsx("p",{className:"text-sm font-bold text-emerald-700 dark:text-emerald-400 truncate max-w-[250px]",children:u.name}),e.jsx("p",{className:"text-[10px] text-emerald-600/70",children:"Click to change"})]}):e.jsxs("div",{className:"text-center text-slate-400 group-hover:text-indigo-500 transition-colors",children:[e.jsx(x,{name:"UploadCloud",size:28,className:"mx-auto mb-2"}),e.jsx("p",{className:"text-xs font-bold",children:"Click to Upload PDF / DOCX"}),e.jsx("p",{className:"text-[10px] opacity-70",children:"Max 10MB"})]})]})]})]}),e.jsxs("button",{onClick:h,disabled:!a.trim(),className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-sm shadow-lg shadow-indigo-500/30 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(x,{name:"Plus",size:18}),"Create Standard"]})]})})};function yr(){var zt;const[r,c]=o.useState(Date.now()),[l,a]=o.useState(1),[i,u]=o.useState(!0),[m,b]=o.useState(420),[h,w]=o.useState(!0),[N,j]=o.useState(!1),[T,I]=o.useState(!1),[P,D]=o.useState(!1),[G,S]=o.useState(!1),[R,k]=o.useState(!1),[L,z]=o.useState(!1),[A,f]=o.useState("list"),[de,ce]=o.useState(0),[W,Z]=o.useState([]),[v,M]=o.useState(""),[O,$]=o.useState(""),[_,U]=o.useState(""),[X,ue]=o.useState(!1),[ve,q]=o.useState(!1),[je,Le]=o.useState(null),[Me,E]=o.useState(""),[K,C]=o.useState(null),[Y,xe]=o.useState(null),[le,J]=o.useState(!1),H=o.useRef(!1),se=o.useRef(!1),[ee,Q]=o.useState(null),[ke,ge]=o.useState(null),[me,Ne]=o.useState({isOpen:!1,clause:null,fullText:{en:"",vi:""},isLoading:!1}),[B,ie]=o.useState("en"),[ne,Ie]=o.useState("vi"),[at,qt]=o.useState("en"),[Xt,vt]=o.useState(""),[Jt,Qt]=o.useState(""),[Ke,qe]=o.useState({}),[F,Be]=o.useState(""),[fe,nt]=o.useState(gt),[re,Fe]=o.useState([]),[pe,We]=o.useState(Gs),[Xe,_e]=o.useState([]),[oe,Ue]=o.useState(null),[ye,Je]=o.useState({}),[Ce,Qe]=o.useState(null),[be,Ee]=o.useState("evidence"),[ot,jt]=o.useState(!1),[Te,kt]=o.useState(!1),[Zt,yt]=o.useState(""),[wt,Re]=o.useState(""),[Ze,Nt]=o.useState(!1),[ae,Se]=o.useState({isOpen:!1,isPaused:!1,isFinished:!1,totalChunks:0,processedChunksCount:0,chunks:[],results:[],error:null,currentType:"report",targetLang:"en"}),[Ct,Pe]=o.useState(null),[Yt,St]=o.useState(!1),[Ye,At]=o.useState(""),[es,Lt]=o.useState(!1),Mt=o.useRef([]),ts=o.useRef(null),[et,ss]=o.useState({left:0,width:0,opacity:0,color:""}),Ve=[{id:"evidence",label:"1. Evidence",icon:"ScanText",colorClass:"bg-blue-500",textClass:"text-blue-600",borderClass:"border-blue-500",bgSoft:"bg-blue-50 dark:bg-blue-950/30"},{id:"findings",label:"2. Findings",icon:"Wand2",colorClass:"bg-purple-500",textClass:"text-purple-600",borderClass:"border-purple-500",bgSoft:"bg-purple-50 dark:bg-purple-950/30"},{id:"report",label:"3. Report",icon:"FileText",colorClass:"bg-emerald-500",textClass:"text-emerald-600",borderClass:"border-emerald-500",bgSoft:"bg-emerald-50 dark:bg-emerald-950/30"}],It=Ve.find(t=>t.id===be)||Ve[0],De=o.useRef(null);o.useEffect(()=>{const t=()=>{const n=Ve.findIndex(p=>p.id===be),d=Mt.current[n];d&&ss({left:d.offsetLeft,width:d.offsetWidth,opacity:1,color:Ve[n].colorClass})};t(),window.addEventListener("resize",t);const s=setTimeout(t,300);return()=>{window.removeEventListener("resize",t),clearTimeout(s)}},[be,h,m]);const he=o.useMemo(()=>({...ft,...Ke}),[Ke]),lt=pe.trim().length>0||Xe.length>0,rs=!Te&&re.length>0&&lt,is=!Ze&&oe&&Object.values(ye).some(t=>t);o.useMemo(()=>{const t=W.length,s=W.filter(n=>n.status==="valid").length;return{total:t,valid:s}},[W]);const Oe=o.useMemo(()=>W.find(t=>t.id===v),[W,v]),as=(Oe==null?void 0:Oe.status)==="valid";o.useEffect(()=>{i?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[i]);const dt=t=>`iso_kb_content_${t}`,ct=t=>`iso_kb_name_${t}`,_t=t=>{try{const s=localStorage.getItem(dt(t)),n=localStorage.getItem(ct(t));s&&n?(Q(s),ge(n),C(`Restored source document: ${n}`)):(Q(null),ge(null))}catch(s){console.error("Failed to load KB",s)}},Et=(t,s,n)=>{try{localStorage.setItem(dt(t),s),localStorage.setItem(ct(t),n)}catch(d){console.error("Storage Quota Exceeded for KB",d),C("Warning: Document too large to save for future sessions (Quota Exceeded). It will work for this session only.")}},ns=()=>{if(Q(null),ge(null),F)try{localStorage.removeItem(dt(F)),localStorage.removeItem(ct(F)),C("Source document removed from standard.")}catch(t){console.error("Failed to clear KB",t)}},os=t=>{t!==F&&(Be(t),_t(t))};o.useEffect(()=>{if(!ve)return;const t=setInterval(()=>{!Te&&!ot&&!Ze&&!X&&W.length>0&&ls()},45e3);return()=>clearInterval(t)},[ve,Te,ot,Ze,X,W]);const ls=async()=>{const s=[...W].sort((p,g)=>new Date(p.lastChecked||0).getTime()-new Date(g.lastChecked||0).getTime())[0];if(!s)return;Z(p=>p.map(g=>g.id===s.id?{...g,status:"checking"}:g));const n=await Ge(s.key),d=new Date().toISOString().split("T")[0];Z(p=>p.map(g=>g.id===s.id?{...g,status:n.status,activeModel:n.activeModel||g.activeModel,latency:n.latency,lastChecked:new Date().toISOString(),lastResetDate:d}:g))},ds=()=>{St(!0),setTimeout(()=>{Pe(null),St(!1)},300)},Tt=t=>{const s=t.message||"Unknown error";s.includes("ALL_KEYS_EXHAUSTED")?(Pe("All API Keys have been exhausted or Quota exceeded."),I(!0)):s.includes("API Key is missing")?(C("API Key is required. Please check settings."),I(!0)):Pe(s)},ut=t=>{if(De.current){const s=De.current,n=s.selectionStart,d=s.selectionEnd,p=s.value,g=`
${t.trim()}
`,y=p.substring(0,n)+g+p.substring(d);We(y),be!=="evidence"&&Ee("evidence"),setTimeout(()=>{De.current&&(De.current.focus(),De.current.setSelectionRange(n+g.length,n+g.length))},100)}else We(s=>s+`
`+t.trim()),be!=="evidence"&&Ee("evidence")},Ge=async t=>{const s=await rr(t);let n="unknown";return s.isValid?n="valid":s.errorType==="network_error"?n="unknown":s.errorType&&(n=s.errorType),{status:n,activeModel:s.activeModel,latency:s.latency}},cs=async t=>{ue(!0),Z(d=>d.map(p=>({...p,status:"checking"})));const s=new Date().toISOString().split("T")[0],n=[...t];for(let d=0;d<n.length;d++){const p=n[d],g=await Ge(p.key);n[d]={...p,status:g.status,activeModel:g.activeModel,latency:g.latency,lastChecked:new Date().toISOString(),lastResetDate:s},Z(y=>{const V=[...y],te=V.findIndex(ze=>ze.id===p.id);return te!==-1&&(V[te]=n[d]),V}),await new Promise(y=>setTimeout(y,100))}Z(d=>{const p=d.find(g=>g.id===v);if(!p||p.status!=="valid"&&p.status!=="unknown"){const g=d.filter(y=>y.status==="valid").sort((y,V)=>y.latency-V.latency)[0];g&&(M(g.id),localStorage.setItem("iso_active_key_id",g.id),setTimeout(()=>C(`Auto-switched to healthy key: ${g.label}`),0))}return localStorage.setItem("iso_api_keys",JSON.stringify(d)),d}),ue(!1)},us=async t=>{const s=W.find(d=>d.id===t);if(!s)return;Z(d=>d.map(p=>p.id===t?{...p,status:"checking"}:p));const n=await Ge(s.key);Z(d=>{const p=d.map(g=>g.id===t?{...g,status:n.status,activeModel:n.activeModel||g.activeModel,latency:n.latency,lastChecked:new Date().toISOString()}:g);return localStorage.setItem("iso_api_keys",JSON.stringify(p)),p})},xs=async()=>{if(!O.trim())return;if(W.some(p=>p.key===O.trim())){C("This API Key is already in your pool!"),$("");return}ue(!0);const t=Date.now().toString(),s=await Ge(O),n={id:t,label:_||`Key ${W.length+1}`,key:O,status:s.status,activeModel:s.activeModel,latency:s.latency,lastChecked:new Date().toISOString(),lastResetDate:new Date().toISOString().split("T")[0]},d=[...W,n];Z(d),localStorage.setItem("iso_api_keys",JSON.stringify(d)),(W.length===0||(Oe==null?void 0:Oe.status)!=="valid"&&s.status==="valid")&&(M(t),localStorage.setItem("iso_active_key_id",t)),$(""),U(""),ue(!1),s.status==="valid"?C("Key added successfully!"):s.status==="referrer_error"?Pe("Permission Denied (403). Is the API Enabled in Google Console? Check Referrers."):Pe("The key you added appears invalid or network is blocking it.")},ps=t=>{const s=W.filter(d=>d.id!==t);let n=v;if(v===t){const d=s.find(p=>p.status==="valid")||s[0];n=d?d.id:""}Z(s),n!==v&&M(n),localStorage.setItem("iso_api_keys",JSON.stringify(s)),n?localStorage.setItem("iso_active_key_id",n):localStorage.removeItem("iso_active_key_id"),C("Key removed from pool.")},Ae=async t=>{const s=W.filter(d=>d.status!=="invalid").sort((d,p)=>d.status==="valid"&&p.status!=="valid"?-1:d.status!=="valid"&&p.status==="valid"?1:d.id===v?-1:p.id===v?1:d.latency-p.latency);if(s.length===0)throw new Error("API Key is missing or all keys are invalid.");let n;for(const d of s){const p=d.activeModel||Gt[0];try{return d.id!==v&&M(d.id),await t(d.key,p)}catch(g){console.warn(`Key ${d.label} failed on ${p}:`,g),n=g;const y=(g.message||"").toLowerCase();y.includes("429")||y.includes("quota")||y.includes("resource exhausted")?Z(V=>V.map(te=>te.id===d.id?{...te,status:"quota_exceeded"}:te)):(y.includes("403")||y.includes("key not valid")||y.includes("permission denied"))&&Z(V=>V.map(te=>te.id===d.id?{...te,status:"invalid"}:te))}}throw new Error((n==null?void 0:n.message)||"ALL_KEYS_EXHAUSTED")},hs=t=>{qe(s=>({...s,[F]:t})),C("Standard updated successfully.")},gs=t=>{qe(s=>{const n={...s};return delete n[t],n}),C("Standard reset to default.")},Rt=async t=>{let s="";try{if(t.name.toLowerCase().endsWith(".pdf"))s=await er(t);else if(t.name.toLowerCase().endsWith(".docx")){if(typeof mammoth>"u")throw new Error("Mammoth library missing");const n=await t.arrayBuffer();s=(await mammoth.extractRawText({arrayBuffer:n})).value}else{if(t.name.toLowerCase().endsWith(".doc"))throw new Error("Legacy Word (.doc) files are not supported due to browser limitations. Please save your file as .docx and try again.");s=await t.text()}if(!s||s.length<50)throw new Error("File content is too short or empty.");return s}catch(n){throw console.error("File processing error:",n),new Error(`Failed to parse ${t.name}: ${n.message}`)}},ms=async t=>{var n;const s=(n=t.target.files)==null?void 0:n[0];if(s){if(!F||F==="ADD_NEW"){C("Please select a Standard first before uploading a source document.");return}ge(s.name),C("Parsing Standard Document...");try{const d=await Rt(s);Q(d),C(`Standard Loaded (${(d.length/1024).toFixed(0)}KB). Saving for future use...`),F&&Et(F,d,s.name)}catch(d){C(d.message),ge(null),Q(null)}}},fs=async(t,s)=>{k(!1);const n=`CUSTOM_${Date.now()}`;let d="";if(s){C("Processing document and extracting structure...");try{d=await Rt(s),Q(d),ge(s.name),Et(n,d,s.name),C("AI is analyzing structure... (This may take 15s)");try{const g=await Ae((y,V)=>ar(d,t,y,V));if(g){qe(y=>({...y,[n]:g})),Be(n),C(`Successfully imported ${t} with full structure.`);return}}catch(g){console.error("AI Parse Failed, falling back to basic",g),C("AI parsing failed. Created basic structure instead.")}}catch(g){C(`File processing failed: ${g.message}`)}}else Q(null),ge(null);const p={name:t,description:`Custom Standard created on ${new Date().toLocaleDateString()}`,groups:[{id:`GRP_${Date.now()}`,title:"General Requirements",icon:"Book",clauses:[{id:`CL_${Date.now()}_1`,code:"1",title:"General",description:"Requirement details pending AI extraction."}]}]};qe(g=>({...g,[n]:p})),Be(n),s||C(`Created basic standard: ${t}`)};o.useEffect(()=>{if(H.current||!pe&&(!re||re.length===0)&&!se.current&&localStorage.getItem("iso_session_data"))return;J(!0);const s=setTimeout(()=>{if(H.current){J(!1);return}const n={standardKey:F,auditInfo:fe,selectedClauses:re,evidence:pe,analysisResult:oe,selectedFindings:ye,finalReportText:Ce};localStorage.setItem("iso_session_data",JSON.stringify(n)),localStorage.setItem("iso_custom_standards",JSON.stringify(Ke)),localStorage.setItem("iso_api_keys",JSON.stringify(W)),se.current&&(se.current=!1),xe(new Date().toLocaleTimeString()),J(!1)},800);return()=>clearTimeout(s)},[F,fe,re,pe,oe,ye,Ce,Ke,W]),o.useEffect(()=>{const t=s=>{if(!H.current){const n={standardKey:F,auditInfo:fe,selectedClauses:re,evidence:pe,analysisResult:oe,selectedFindings:ye,finalReportText:Ce};localStorage.setItem("iso_session_data",JSON.stringify(n))}};return window.addEventListener("beforeunload",t),()=>window.removeEventListener("beforeunload",t)},[F,fe,re,pe,oe,ye,Ce]);const bs=t=>{if(t&&t.stopPropagation(),!!confirm("Start New Session? Current data will be moved to 'Backup Vault'."))try{const s={standardKey:F,auditInfo:fe,selectedClauses:re,evidence:pe,analysisResult:oe,selectedFindings:ye,finalReportText:Ce};if(pe.trim().length>0||re.length>0){const d={id:`backup_${Date.now()}`,timestamp:Date.now(),label:"Backup (Pre-Reset)",triggerType:"MANUAL_BACKUP",data:s},p=localStorage.getItem("iso_session_history"),g=p?JSON.parse(p):[],y=[d,...g].slice(0,5);localStorage.setItem("iso_session_history",JSON.stringify(y))}se.current=!0,localStorage.removeItem("iso_session_data"),Be(""),nt(gt),We(""),Fe([]),_e([]),Ue(null),Je({}),Qe(null),xe(null),c(Date.now()),Q(null),ge(null),Ee("evidence"),C("New Session Started. (Previous session archived in Recall)")}catch(s){console.error("New Session Error",s),C("Error creating backup. Session reset anyway.")}},vs=t=>{try{H.current=!0,S(!1);const s=t.data;localStorage.setItem("iso_session_data",JSON.stringify(s)),s.standardKey&&(Be(s.standardKey),_t(s.standardKey)),nt({...gt,...s.auditInfo||{}}),s.selectedClauses&&Fe(s.selectedClauses),s.evidence!==void 0&&We(s.evidence),_e([]),s.analysisResult&&Ue(s.analysisResult),s.selectedFindings&&Je(s.selectedFindings),s.finalReportText&&Qe(s.finalReportText),c(Date.now()),xe(new Date().toLocaleTimeString()),C(`Restored session from: ${new Date(t.timestamp).toLocaleTimeString()}`),setTimeout(()=>{H.current=!1,se.current=!1},1200)}catch(s){console.error("Restore failed",s),C("Failed to restore session snapshot."),H.current=!1}},js=async()=>{const t=Xe.filter(n=>n.status==="pending"||n.status==="error");if(t.length===0)return;jt(!0),Re("Processing documents with Vision AI...");let s=0;for(const n of t)try{_e(p=>p.map(g=>g.id===n.id?{...g,status:"processing"}:g));let d="";if(n.file.type==="text/plain")d=await n.file.text();else{const p=await Ys(n.file);d=await Ae(async(g,y)=>nr("Extract all text.",p,n.file.type,g,y))}if(d){const p=`

--- FILE: ${n.file.name} ---
`;ut(p+d),_e(g=>g.map(y=>y.id===n.id?{...y,status:"success",result:d}:y)),s++}else throw new Error("No text extracted")}catch(d){console.error("OCR Error",d),_e(p=>p.map(g=>g.id===n.id?{...g,status:"error",error:d.message||"Failed"}:g))}jt(!1),Re(""),C(`Processed ${s} files.`)},ks=async t=>{var n;const s=(n=t.target.files)==null?void 0:n[0];if(s){Qt(s.name);try{if(s.name.endsWith(".docx")){if(typeof mammoth>"u"){alert("Mammoth library not loaded for .docx support");return}const d=await s.arrayBuffer(),p=await mammoth.extractRawText({arrayBuffer:d});vt(p.value)}else{const d=await s.text();vt(d)}C("Template loaded successfully.")}catch(d){C("Failed to load template."),console.error(d)}}},xt=(t,s,n)=>{if(!t)return;const d=4e3,p=[];for(let g=0;g<t.length;g+=d)p.push(t.substring(g,g+d));Se({isOpen:!0,isPaused:!1,isFinished:!1,totalChunks:p.length,processedChunksCount:0,chunks:p,results:new Array(p.length).fill(""),error:null,currentType:s,targetLang:n})},ys=t=>{q(t),localStorage.setItem("iso_auto_check",String(t)),C(t?"Auto-health check enabled.":"Auto-health check disabled.")},ws=t=>{Le(t.id),E(t.label)},Ns=()=>{je&&(Z(t=>t.map(s=>s.id===je?{...s,label:Me}:s)),Le(null))},Pt=async t=>{Ne({isOpen:!0,clause:t,isLoading:!0,fullText:{en:"",vi:""}});try{const s=await Ae(async(n,d)=>ir(t,he[F].name,ee,n,d));Ne(n=>({...n,isLoading:!1,fullText:s}))}catch{Ne({isOpen:!1,clause:null,isLoading:!1,fullText:{en:"",vi:""}}),Pe("API Failed during lookup."),I(!0)}},Cs=t=>{if(!me.clause)return;const s=`
--- REFERENCE: [${me.clause.code}] ${me.clause.title} ---
${t}
--- END REFERENCE ---
`.trim();ut(s),Ne({isOpen:!1,clause:null,isLoading:!1,fullText:{en:"",vi:""}})},Dt=async()=>{if(!F){C("Select a Standard first.");return}if(re.length===0){C("Select at least one Clause to analyze.");return}if(!lt){C("No evidence provided. Please add text or files.");return}kt(!0),Ee("findings"),Ue(null);try{const t=he[F].groups.flatMap(y=>y.clauses),s=(y,V)=>{for(let te of V){if(te.id===y)return te;if(te.subClauses){const ze=s(y,te.subClauses);if(ze)return ze}}},n=re.map(y=>s(y,t)).filter(y=>!!y);let d=pe;Xe.filter(y=>y.status==="success"&&y.result).forEach(y=>{d+=`

--- Document: ${y.file.name} ---
${y.result}`});const p=[],g={};for(let y=0;y<n.length;y++){const V=n[y];yt(V.code),Re(`Analyzing Clause ${V.code}...`);const te=`
                 Analyze the provided EVIDENCE against ISO Standard "${he[F].name}", Clause "${V.code}: ${V.title}".
                 Clause Description: ${V.description}
                 
                 EVIDENCE:
                 """
                 ${d.substring(0,5e4)} 
                 """
                 
                 DETERMINE:
                 1. Status (COMPLIANT, NC_MINOR, NC_MAJOR, OFI, or N_A).
                 2. Reason (Why?).
                 3. Evidence Quote (Verbatim support).
                 4. Suggestion (If NC or OFI).
                 
                 Output JSON Array with 1 object: [{ "clauseId": "${V.code}", "status": "...", "reason": "...", "evidence": "...", "suggestion": "..." }]
                 `,ze=await Ae((tt,Is)=>or(te,"You are a lead ISO Auditor.",tt,Is)),ht=it(ze);if(Array.isArray(ht)&&ht.length>0){const tt=ht[0];tt.clauseId=V.code,p.push(tt),g[V.code]=!0}else p.push({clauseId:V.code,status:"N_A",reason:"AI could not determine status.",evidence:"",suggestion:"",conclusion_report:""}),g[V.code]=!0}Ue(p),Je(g),C(`Analysis Complete. Generated ${p.length} findings.`)}catch(t){Tt(t)}finally{kt(!1),Re(""),yt("")}},Ot=async()=>{var s;if(!oe||oe.length===0){C("No findings available to report.");return}const t=oe.filter(n=>ye[n.clauseId]);if(t.length===0){C("Please select at least one finding to include in the report.");return}Nt(!0),Re("Synthesizing Final Audit Report...");try{const n=`
            Generate a comprehensive ISO Audit Report.
            
            Entity: ${fe.company}
            Type: ${fe.type}
            Auditor: ${fe.auditor}
            Standard: ${(s=he[F])==null?void 0:s.name}
            
            FINDINGS TO INCLUDE:
            ${JSON.stringify(t)}
            
            TEMPLATE / INSTRUCTIONS:
            ${Xt||"Use standard professional ISO audit report format including Executive Summary, Audit Scope, Findings Detail, and Conclusion."}
            
            Language: ${B==="vi"?"Vietnamese":"English"}.
            Tone: Professional, Objective.
            `,d=await Ae((p,g)=>Ut(n,"You are an expert ISO Certification Body Auditor.",p,g));Qe(d),Ee("report"),C("Report Generated Successfully.")}catch(n){Tt(n)}finally{Nt(!1),Re("")}};o.useEffect(()=>{if(!ae.isOpen||ae.isPaused||ae.isFinished)return;(async()=>{const s=ae.processedChunksCount;if(s>=ae.totalChunks){Se(d=>({...d,isFinished:!0}));try{const d=ae.results.join(""),p=new Blob([d],{type:"text/plain"}),g=URL.createObjectURL(p),y=document.createElement("a");y.href=g,y.download=`ISO_Audit_Export_${ae.currentType}_${new Date().toISOString()}.txt`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(g)}catch(d){console.error("Download failed",d)}return}const n=ae.chunks[s];try{let d=n;if(!(ae.targetLang!=="en"&&ae.targetLang!=="vi")){if(ae.targetLang!=="en"){const p=`Translate this text to ${ae.targetLang==="vi"?"Vietnamese":"English"} maintaining formatting:

${n}`;d=await Ae((g,y)=>Ut(p,"Translator",g,y))}}Se(p=>{const g=[...p.results];return g[s]=d,{...p,processedChunksCount:s+1,results:g}})}catch(d){console.error("Export Error",d),Se(p=>({...p,isPaused:!0,error:d.message}))}})()},[ae,Ae]);const Ss=async()=>{Lt(!0);try{if(Ye.trim()){const t=await Ge(Ye);if(t.status==="valid"){const s={id:`rescue_${Date.now()}`,label:"Rescue Key",key:Ye,status:"valid",activeModel:t.activeModel,latency:t.latency,lastChecked:new Date().toISOString()};Z(n=>[...n,s]),M(s.id),C("Rescue Key Added. Resuming..."),Se(n=>({...n,isPaused:!1,error:null})),At("")}else C("Rescue Key Invalid/Exhausted.")}else Se(t=>({...t,isPaused:!1,error:null}))}catch{C("Failed to resume.")}finally{Lt(!1)}};o.useEffect(()=>{const t=s=>{(s.metaKey||s.ctrlKey)&&s.key==="k"&&(s.preventDefault(),z(n=>!n))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]);const As=o.useMemo(()=>{const t=[{label:"Analyze Compliance",desc:"Start AI analysis",icon:"Wand2",shortcut:"AI",action:Dt},{label:"Validate API Key Pool",desc:"Check connection health",icon:"RefreshCw",action:()=>{cs(W),C("Validating Neural Pool...")}},{label:"Settings",desc:"Manage configuration",icon:"Settings",action:()=>I(!0)},{label:"Generate Report",desc:"Synthesize final report",icon:"FileText",action:Ot},{label:"Toggle Dark Mode",desc:`Switch to ${i?"Light":"Dark"}`,icon:i?"Sun":"Moon",action:()=>u(!i)}];if(F&&he[F]){const s=p=>p.reduce((g,y)=>(g.push(y),y.subClauses&&g.push(...s(y.subClauses)),g),[]),d=s(he[F].groups.flatMap(p=>p.clauses)).map(p=>({label:`[${p.code}] ${p.title}`,desc:p.description||"No description",icon:"Session6_Zap",type:"clause",action:()=>{const g=re.includes(p.id);Fe(g?y=>y.filter(V=>V!==p.id):y=>[...y,p.id]),ut(`[${p.code}] ${p.title}`),C(`Inserted clause ${p.code} and ${g?"removed from":"added to"} audit scope.`),z(!1)},onReference:g=>{g&&g.stopPropagation(),Pt(p),z(!1)}}));return[...t,...d]}return t},[i,F,he,re,v,W]),pt=o.useMemo(()=>{var n;const t=((n=he[F])==null?void 0:n.name)||"",s=t.match(/\((.*?)\)/);return s?s[1]:t.split(" ")[0]||"ISO"},[F,he]),Ls=o.useMemo(()=>{const t=pt.toUpperCase();return t.includes("EMS")||t.includes("14001")?"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-700/50":t.includes("QMS")||t.includes("9001")?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-700/50":t.includes("ISMS")||t.includes("27001")?"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-700/50":"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300 border-indigo-100 dark:border-indigo-800/50"},[pt]),Ms=()=>{if(Te)return"AI is analyzing...";const t=[];return re.length===0&&t.push("Clauses"),lt||t.push("Evidence"),t.length>0?`Missing: ${t.join(" & ")}`:"Click to Start AI Analysis"};return e.jsxs("div",{className:"flex flex-col h-[100dvh] w-full bg-gray-50 dark:bg-slate-900 transition-colors duration-500 ease-soft relative",children:[K&&e.jsx(Hs,{message:K,onClose:()=>C(null)}),Ct&&e.jsxs("div",{className:`fixed z-[9999] top-20 left-4 right-4 md:left-auto md:right-5 md:w-96 md:max-w-sm bg-white dark:bg-slate-800 border-l-4 border-red-500 shadow-2xl rounded-r-xl p-4 animate-shake transition-all duration-300 ${Yt?"opacity-0 translate-x-4":"opacity-100 translate-x-0"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 font-bold",children:[e.jsx(x,{name:"AlertCircle",size:20}),e.jsx("span",{children:"System Alert"})]}),e.jsx("button",{onClick:ds,className:"text-gray-400 hover:text-slate-800 dark:hover:text-white transition-colors p-1 rounded-full hover:bg-gray-100 dark:hover:bg-slate-700",children:e.jsx(x,{name:"X",size:18})})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed mt-1",children:Ct})]}),e.jsx(Qs,{isSidebarOpen:h,setIsSidebarOpen:w,displayBadge:pt,badgeColorClass:Ls,setIsCmdPaletteOpen:z,fontSizeScale:l,setFontSizeScale:a,isDarkMode:i,setIsDarkMode:u,isSystemHealthy:as,onOpenSettings:()=>I(!0),onOpenAbout:()=>j(!0)}),e.jsxs("main",{className:"flex-1 flex overflow-hidden relative",children:[e.jsx("div",{className:`${h?"translate-x-0":"-translate-x-full"} fixed top-16 bottom-0 left-0 z-[60] md:absolute md:inset-y-0 md:relative md:top-0 md:translate-x-0 md:transform-none transition-transform duration-300 ease-soft h-[calc(100%-4rem)] md:h-full`,children:e.jsx(xr,{isOpen:h,width:m,setWidth:b,standards:he,standardKey:F,setStandardKey:os,auditInfo:fe,setAuditInfo:nt,selectedClauses:re,setSelectedClauses:Fe,onAddNewStandard:()=>k(!0),onUpdateStandard:hs,onResetStandard:gs,onReferenceClause:Pt,showIntegrityModal:P,setShowIntegrityModal:D,knowledgeFileName:ke,knowledgeBase:ee,onKnowledgeUpload:ms,onClearKnowledge:ns},r)}),h&&e.jsx("div",{className:"fixed top-16 bottom-0 inset-x-0 bg-black/50 z-50 md:hidden backdrop-blur-sm transition-opacity duration-300 animate-in fade-in",onClick:()=>w(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col min-w-0 relative w-full transition-all duration-300 ease-soft ${It.bgSoft} border-t-4 ${It.borderClass}`,children:[e.jsxs("div",{className:"flex-shrink-0 px-4 md:px-6 py-3 border-b border-gray-200 dark:border-slate-800 bg-white/80 dark:bg-slate-900/80 backdrop-blur flex justify-between items-center gap-3",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{ref:ts,className:"relative flex justify-between bg-gray-100 dark:bg-slate-950 p-1 rounded-xl w-full dark:shadow-[inset_0_1px_3px_rgba(0,0,0,0.5)]",children:[e.jsx("div",{className:`absolute top-1 bottom-1 shadow-sm rounded-lg transition-all duration-500 ease-fluid z-0 ${et.color}`,style:{left:et.left,width:et.width,opacity:et.opacity}}),Ve.map((t,s)=>e.jsxs("button",{ref:n=>{Mt.current[s]=n},onClick:()=>Ee(t.id),className:`flex-1 relative z-10 flex items-center justify-center gap-2 px-1 md:px-4 py-2 rounded-lg text-xs md:text-sm font-bold transition-colors duration-300 ${be===t.id?"text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(x,{name:t.icon,size:16}),e.jsx("span",{className:`${h?"hidden xl:inline":"hidden md:inline"}`,children:t.label})]},t.id))]})}),e.jsxs("div",{className:"flex gap-2 items-center flex-shrink-0 pl-2 border-l border-gray-200 dark:border-slate-800",children:[e.jsxs("button",{onClick:()=>S(!0),className:`h-10 px-4 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 active:scale-95 border ${Y?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800 shadow-sm":"bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 border-gray-200 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700 hover:border-gray-300 dark:hover:border-slate-600"}`,title:Y?`Last Auto-Saved: ${Y}. Click to Open Time Machine.`:"Open Session History",children:[e.jsxs("div",{className:"relative",children:[e.jsx(x,{name:"History",size:18}),Y&&e.jsxs("span",{className:"absolute -top-1 -right-1 flex h-2.5 w-2.5",children:[le&&e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:`relative inline-flex rounded-full h-2.5 w-2.5 ${le?"bg-red-500":"bg-emerald-500"}`})]})]}),e.jsx("span",{className:"hidden xl:inline text-xs font-bold",children:"Recall"})]}),e.jsxs("button",{onClick:t=>bs(t),className:"h-10 w-10 md:w-auto md:px-4 bg-amber-50 dark:bg-amber-950/30 text-amber-600 dark:text-amber-500 border border-amber-200 dark:border-amber-800/50 rounded-xl flex items-center justify-center gap-2 transition-all shadow-sm hover:shadow-amber-500/20 hover:bg-amber-100 dark:hover:bg-amber-900/50 hover:text-amber-700 dark:hover:text-amber-400 duration-300 active:scale-95",title:"Start New Session (Archives current data)",children:[e.jsx(x,{name:"Session4_FilePlus",size:18}),e.jsx("span",{className:"hidden md:inline text-xs font-bold",children:"New"})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden relative p-2 md:p-4",children:[be==="evidence"&&e.jsx(mr,{evidence:pe,setEvidence:We,uploadedFiles:Xe,setUploadedFiles:_e,onOcrProcess:js,isOcrLoading:ot,onAnalyze:Dt,isReadyForAnalysis:rs,isAnalyzeLoading:Te,analyzeTooltip:Ms(),onExport:(t,s)=>xt(pe,t,s),evidenceLanguage:at,setEvidenceLanguage:qt,textareaRef:De}),be==="findings"&&e.jsx(fr,{analysisResult:oe,setAnalysisResult:Ue,selectedFindings:ye,setSelectedFindings:Je,isAnalyzeLoading:Te,loadingMessage:wt,currentAnalyzingClause:Zt,viewMode:A,setViewMode:f,focusedFindingIndex:de,setFocusedFindingIndex:ce,onExport:(t,s)=>{const n=(oe==null?void 0:oe.map(d=>`[${d.clauseId}] ${d.status}
Evidence: ${d.evidence}
Reason: ${d.reason}
Suggestion: ${d.suggestion}`).join(`

`))||"";xt(n,t,s)},notesLanguage:ne,setNotesLanguage:Ie}),be==="report"&&e.jsx(br,{finalReportText:Ce,setFinalReportText:Qe,isReportLoading:Ze,loadingMessage:wt,templateFileName:Jt,handleTemplateUpload:ks,handleGenerateReport:Ot,isReadyToSynthesize:is,onExport:(t,s)=>xt(Ce||"",t,s),exportLanguage:B,setExportLanguage:ie})]})]})]}),e.jsx(Xs,{isOpen:L,onClose:()=>z(!1),actions:As,onSelectAction:t=>{t.action()}}),e.jsx(pr,{isOpen:N,onClose:()=>j(!1)}),e.jsx(hr,{isOpen:me.isOpen,onClose:()=>Ne(t=>({...t,isOpen:!1})),clause:me.clause,standardName:((zt=he[F])==null?void 0:zt.name)||"",fullText:me.fullText,isLoading:me.isLoading,onInsert:Cs}),e.jsx(gr,{isOpen:G,onClose:()=>S(!1),onRestore:vs}),e.jsx(jr,{exportState:ae,setExportState:Se,rescueKey:Ye,setRescueKey:At,handleResumeExport:Ss,isRescuing:es}),e.jsx(vr,{isOpen:T,onClose:()=>I(!1),apiKeys:W,newKeyInput:O,setNewKeyInput:$,isCheckingKey:X,handleAddKey:xs,activeKeyId:v,editingKeyId:je,editLabelInput:Me,setEditLabelInput:E,handleSaveLabel:Ns,handleStartEdit:ws,handleRefreshStatus:us,handleDeleteKey:ps,isAutoCheckEnabled:ve,toggleAutoCheck:ys}),e.jsx(kr,{isOpen:R,onClose:()=>k(!1),onAdd:fs})]})}const Kt=document.getElementById("root");if(!Kt)throw new Error("Could not find root element to mount to");const wr=_s.createRoot(Kt);wr.render(e.jsx(mt.StrictMode,{children:e.jsx(yr,{})}));
